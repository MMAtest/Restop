/*! For license information please see main.40bca44c.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,i)=>{var n=i(853),o=i(43),s=i(950);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var C=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var S=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function E(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case b:return"Suspense";case w:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:E(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return E(e(t))}catch(i){}}return null}var F,D,N=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign;function T(e){if(void 0===F)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||"",D=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+F+e+D}var j=!1;function A(e,t){if(!e||j)return"";j=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(o){var n=o}Reflect.construct(e,[],i)}else{try{i.call()}catch(s){n=s}e.call(i.prototype)}}else{try{throw Error()}catch(r){n=r}(i=e())&&"function"===typeof i.catch&&i.catch((function(){}))}}catch(Mr){if(Mr&&n&&"string"===typeof Mr.stack)return[Mr.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),r=s[0],a=s[1];if(r&&a){var l=r.split("\n"),d=a.split("\n");for(o=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;o<d.length&&!d[o].includes("DetermineComponentFrameRoot");)o++;if(n===l.length||o===d.length)for(n=l.length-1,o=d.length-1;1<=n&&0<=o&&l[n]!==d[o];)o--;for(;1<=n&&0<=o;n--,o--)if(l[n]!==d[o]){if(1!==n||1!==o)do{if(n--,0>--o||l[n]!==d[o]){var c="\n"+l[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=n&&0<=o);break}}}finally{j=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?T(i):""}function I(e){switch(e.tag){case 26:case 27:case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return e=A(e.type,!1);case 11:return e=A(e.type.render,!1);case 1:return e=A(e.type,!0);default:return""}}function L(e){try{var t="";do{t+=I(e),e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}function _(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function O(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function B(e){if(_(e)!==e)throw Error(r(188))}function z(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=z(e)))return t;e=e.sibling}return null}var V=Array.isArray,H=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},W=[],U=-1;function q(e){return{current:e}}function K(e){0>U||(e.current=W[U],W[U]=null,U--)}function Y(e,t){U++,W[U]=e.current,e.current=t}var Q=q(null),$=q(null),X=q(null),J=q(null);function Z(e,t){switch(Y(X,t),Y($,e),Y(Q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Xc(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Jc(e=Xc(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(Q),Y(Q,t)}function ee(){K(Q),K($),K(X)}function te(e){null!==e.memoizedState&&Y(J,e);var t=Q.current,i=Jc(t,e.type);t!==i&&(Y($,e),Y(Q,i))}function ie(e){$.current===e&&(K(Q),K($)),J.current===e&&(K(J),_u._currentValue=G)}var ne=Object.prototype.hasOwnProperty,oe=n.unstable_scheduleCallback,se=n.unstable_cancelCallback,re=n.unstable_shouldYield,ae=n.unstable_requestPaint,le=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,ce=n.unstable_ImmediatePriority,ue=n.unstable_UserBlockingPriority,he=n.unstable_NormalPriority,pe=n.unstable_LowPriority,ge=n.unstable_IdlePriority,me=n.log,fe=n.unstable_setDisableYieldValue,ve=null,be=null;function we(e){if("function"===typeof me&&fe(e),be&&"function"===typeof be.setStrictMode)try{be.setStrictMode(ve,e)}catch(t){}}var ye=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/Ce|0)|0},xe=Math.log,Ce=Math.LN2;var Se=128,Re=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pe(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,o=e.suspendedLanes,s=e.pingedLanes,r=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&i;return 0!==a?0!==(i=a&~o)?n=ke(i):0!==(s&=a)?n=ke(s):e||0!==(r=a&~r)&&(n=ke(r)):0!==(a=i&~o)?n=ke(a):0!==s?n=ke(s):e||0!==(r=i&~r)&&(n=ke(r)),0===n?0:0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(r=t&-t)||32===o&&0!==(4194176&r))?t:n}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Fe(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=Se;return 0===(4194176&(Se<<=1))&&(Se=128),e}function Ne(){var e=Re;return 0===(62914560&(Re<<=1))&&(Re=4194304),e}function Me(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function je(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ye(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194218&i}function Ae(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-ye(i),o=1<<n;o&t|e[n]&t&&(e[n]|=t),i&=~o}}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=H.p;return 0!==e?e:void 0===(e=window.event)?32:Ju(e.type)}var _e=Math.random().toString(36).slice(2),Oe="__reactFiber$"+_e,Be="__reactProps$"+_e,ze="__reactContainer$"+_e,Ve="__reactEvents$"+_e,He="__reactListeners$"+_e,Ge="__reactHandles$"+_e,We="__reactResources$"+_e,Ue="__reactMarker$"+_e;function qe(e){delete e[Oe],delete e[Be],delete e[Ve],delete e[He],delete e[Ge]}function Ke(e){var t=e[Oe];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ze]||i[Oe]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=du(e);null!==e;){if(i=e[Oe])return i;e=du(e)}return t}i=(e=i).parentNode}return null}function Ye(e){if(e=e[Oe]||e[ze]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function $e(e){var t=e[We];return t||(t=e[We]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Xe(e){e[Ue]=!0}var Je=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Je.add(t[e])}var it=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function rt(e,t,i){if(o=t,ne.call(st,o)||!ne.call(ot,o)&&(nt.test(o)?st[o]=!0:(ot[o]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var o}function at(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function lt(e,t,i,n){if(null===n)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+n)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var o=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=ct(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function mt(e){return e.replace(gt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function ft(e,t,i,n,o,s,r,a){e.name="",null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r?e.type=r:e.removeAttribute("type"),null!=t?"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==r&&"reset"!==r||e.removeAttribute("value"),null!=t?bt(e,r,dt(t)):null!=i?bt(e,r,dt(i)):null!=n&&e.removeAttribute("value"),null==o&&null!=s&&(e.defaultChecked=!!s),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+dt(a):e.removeAttribute("name")}function vt(e,t,i,n,o,s,r,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=i){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;i=null!=i?""+dt(i):"",t=null!=t?""+dt(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:o)&&"symbol"!==typeof n&&!!n,e.checked=a?e.checked:!!n,e.defaultChecked=!!n,null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.name=r)}function bt(e,t,i){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function wt(e,t,i,n){if(e=e.options,t){t={};for(var o=0;o<i.length;o++)t["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=t.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&n&&(e[i].defaultSelected=!0)}else{for(i=""+dt(i),t=null,o=0;o<e.length;o++){if(e[o].value===i)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function yt(e,t,i){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+dt(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,i,n){if(null==t){if(null!=n){if(null!=i)throw Error(r(92));if(V(n)){if(1<n.length)throw Error(r(93));n=n[0]}i=n}null==i&&(i=""),t=i}i=dt(t),e.defaultValue=i,(n=e.textContent)===i&&""!==n&&null!==n&&(e.value=n)}function Ct(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rt(e,t,i){var n=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,i):"number"!==typeof i||0===i||St.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function kt(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(r(62));if(e=e.style,null!=i){for(var n in i)!i.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var o in t)n=t[o],t.hasOwnProperty(o)&&i[o]!==n&&Rt(e,o,n)}else for(var s in t)t.hasOwnProperty(s)&&Rt(e,s,t[s])}function Pt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ft=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dt(e){return Ft.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Tt=null,jt=null;function At(e){var t=Ye(e);if(t&&(e=t.stateNode)){var i=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(ft(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var o=n[Be]||null;if(!o)throw Error(r(90));ft(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<i.length;t++)(n=i[t]).form===e.form&&ht(n)}break e;case"textarea":yt(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&wt(e,!!i.multiple,t,!1)}}}var It=!1;function Lt(e,t,i){if(It)return e(t,i);It=!0;try{return e(t)}finally{if(It=!1,(null!==Tt||null!==jt)&&(Bd(),Tt&&(t=Tt,e=jt,jt=Tt=null,At(t),e)))for(t=0;t<e.length;t++)At(e[t])}}function _t(e,t){var i=e.stateNode;if(null===i)return null;var n=i[Be]||null;if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(r(231,t,typeof i));return i}var Ot=!1;if(it)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Ch){Ot=!1}var zt=null,Vt=null,Ht=null;function Gt(){if(Ht)return Ht;var e,t,i=Vt,n=i.length,o="value"in zt?zt.value:zt.textContent,s=o.length;for(e=0;e<n&&i[e]===o[e];e++);var r=n-e;for(t=1;t<=r&&i[n-t]===o[s-t];t++);return Ht=o.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ut(){return!0}function qt(){return!1}function Kt(e){function t(t,i,n,o,s){for(var r in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(o):o[r]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Ut:qt,this.isPropagationStopped=qt,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ut)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ut)},persist:function(){},isPersistent:Ut}),t}var Yt,Qt,$t,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Kt(Xt),Zt=M({},Xt,{view:0,detail:0}),ei=Kt(Zt),ti=M({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Yt=e.screenX-$t.screenX,Qt=e.screenY-$t.screenY):Qt=Yt=0,$t=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),ii=Kt(ti),ni=Kt(M({},ti,{dataTransfer:0})),oi=Kt(M({},Zt,{relatedTarget:0})),si=Kt(M({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ri=Kt(M({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ai=Kt(M({},Xt,{data:0})),li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},di={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ui(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ci[e])&&!!t[e]}function hi(){return ui}var pi=Kt(M({},Zt,{key:function(e){if(e.key){var t=li[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?di[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hi,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gi=Kt(M({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mi=Kt(M({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hi})),fi=Kt(M({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vi=Kt(M({},ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bi=Kt(M({},Xt,{newState:0,oldState:0})),wi=[9,13,27,32],yi=it&&"CompositionEvent"in window,xi=null;it&&"documentMode"in document&&(xi=document.documentMode);var Ci=it&&"TextEvent"in window&&!xi,Si=it&&(!yi||xi&&8<xi&&11>=xi),Ri=String.fromCharCode(32),ki=!1;function Pi(e,t){switch(e){case"keyup":return-1!==wi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ei(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fi=!1;var Di={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Di[e.type]:"textarea"===t}function Mi(e,t,i,n){Tt?jt?jt.push(n):jt=[n]:Tt=n,0<(t=_c(t,"onChange")).length&&(i=new Jt("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Ti=null,ji=null;function Ai(e){Dc(e,0)}function Ii(e){if(ht(Qe(e)))return e}function Li(e,t){if("change"===e)return t}var _i=!1;if(it){var Oi;if(it){var Bi="oninput"in document;if(!Bi){var zi=document.createElement("div");zi.setAttribute("oninput","return;"),Bi="function"===typeof zi.oninput}Oi=Bi}else Oi=!1;_i=Oi&&(!document.documentMode||9<document.documentMode)}function Vi(){Ti&&(Ti.detachEvent("onpropertychange",Hi),ji=Ti=null)}function Hi(e){if("value"===e.propertyName&&Ii(ji)){var t=[];Mi(t,ji,e,Mt(e)),Lt(Ai,t)}}function Gi(e,t,i){"focusin"===e?(Vi(),ji=i,(Ti=t).attachEvent("onpropertychange",Hi)):"focusout"===e&&Vi()}function Wi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ii(ji)}function Ui(e,t){if("click"===e)return Ii(t)}function qi(e,t){if("input"===e||"change"===e)return Ii(t)}var Ki="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yi(e,t){if(Ki(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var o=i[n];if(!ne.call(t,o)||!Ki(e[o],t[o]))return!1}return!0}function Qi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $i(e,t){var i,n=Qi(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qi(n)}}function Xi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ji(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=pt((e=t.contentWindow).document)}return t}function Zi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function en(e,t){var i=Ji(t);t=e.focusedElem;var n=e.selectionRange;if(i!==t&&t&&t.ownerDocument&&Xi(t.ownerDocument.documentElement,t)){if(null!==n&&Zi(t))if(e=n.start,void 0===(i=n.end)&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if((i=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){i=i.getSelection();var o=t.textContent.length,s=Math.min(n.start,o);n=void 0===n.end?s:Math.min(n.end,o),!i.extend&&s>n&&(o=n,n=s,s=o),o=$i(t,s);var r=$i(t,n);o&&r&&(1!==i.rangeCount||i.anchorNode!==o.node||i.anchorOffset!==o.offset||i.focusNode!==r.node||i.focusOffset!==r.offset)&&((e=e.createRange()).setStart(o.node,o.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(r.node,r.offset)):(e.setEnd(r.node,r.offset),i.addRange(e)))}for(e=[],i=t;i=i.parentNode;)1===i.nodeType&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(i=e[t]).element.scrollLeft=i.left,i.element.scrollTop=i.top}}var tn=it&&"documentMode"in document&&11>=document.documentMode,nn=null,on=null,sn=null,rn=!1;function an(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;rn||null==nn||nn!==pt(n)||("selectionStart"in(n=nn)&&Zi(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},sn&&Yi(sn,n)||(sn=n,0<(n=_c(on,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=nn)))}function ln(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var dn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},cn={},un={};function hn(e){if(cn[e])return cn[e];if(!dn[e])return e;var t,i=dn[e];for(t in i)if(i.hasOwnProperty(t)&&t in un)return cn[e]=i[t];return e}it&&(un=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);var pn=hn("animationend"),gn=hn("animationiteration"),mn=hn("animationstart"),fn=hn("transitionrun"),vn=hn("transitionstart"),bn=hn("transitioncancel"),wn=hn("transitionend"),yn=new Map,xn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Cn(e,t){yn.set(e,t),et(t,[e])}var Sn=[],Rn=0,kn=0;function Pn(){for(var e=Rn,t=kn=Rn=0;t<e;){var i=Sn[t];Sn[t++]=null;var n=Sn[t];Sn[t++]=null;var o=Sn[t];Sn[t++]=null;var s=Sn[t];if(Sn[t++]=null,null!==n&&null!==o){var r=n.pending;null===r?o.next=o:(o.next=r.next,r.next=o),n.pending=o}0!==s&&Nn(i,o,s)}}function En(e,t,i,n){Sn[Rn++]=e,Sn[Rn++]=t,Sn[Rn++]=i,Sn[Rn++]=n,kn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Fn(e,t,i,n){return En(e,t,i,n),Mn(e)}function Dn(e,t){return En(e,null,null,t),Mn(e)}function Nn(e,t,i){e.lanes|=i;var n=e.alternate;null!==n&&(n.lanes|=i);for(var o=!1,s=e.return;null!==s;)s.childLanes|=i,null!==(n=s.alternate)&&(n.childLanes|=i),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(o=!0)),e=s,s=s.return;o&&null!==t&&3===e.tag&&(s=e.stateNode,o=31-ye(i),null===(e=(s=s.hiddenUpdates)[o])?s[o]=[t]:e.push(t),t.lane=536870912|i)}function Mn(e){if(50<Dd)throw Dd=0,Nd=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Tn={},jn=new WeakMap;function An(e,t){if("object"===typeof e&&null!==e){var i=jn.get(e);return void 0!==i?i:(t={value:e,source:t,stack:L(t)},jn.set(e,t),t)}return{value:e,source:t,stack:L(t)}}var In=[],Ln=0,_n=null,On=0,Bn=[],zn=0,Vn=null,Hn=1,Gn="";function Wn(e,t){In[Ln++]=On,In[Ln++]=_n,_n=e,On=t}function Un(e,t,i){Bn[zn++]=Hn,Bn[zn++]=Gn,Bn[zn++]=Vn,Vn=e;var n=Hn;e=Gn;var o=32-ye(n)-1;n&=~(1<<o),i+=1;var s=32-ye(t)+o;if(30<s){var r=o-o%5;s=(n&(1<<r)-1).toString(32),n>>=r,o-=r,Hn=1<<32-ye(t)+o|i<<o|n,Gn=s+e}else Hn=1<<s|i<<o|n,Gn=e}function qn(e){null!==e.return&&(Wn(e,1),Un(e,1,0))}function Kn(e){for(;e===_n;)_n=In[--Ln],In[Ln]=null,On=In[--Ln],In[Ln]=null;for(;e===Vn;)Vn=Bn[--zn],Bn[zn]=null,Gn=Bn[--zn],Bn[zn]=null,Hn=Bn[--zn],Bn[zn]=null}var Yn=null,Qn=null,$n=!1,Xn=null,Jn=!1,Zn=Error(r(519));function eo(e){throw so(An(Error(r(418,"")),e)),Zn}function to(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Oe]=e,t[Be]=n,i){case"dialog":Nc("cancel",t),Nc("close",t);break;case"iframe":case"object":case"embed":Nc("load",t);break;case"video":case"audio":for(i=0;i<Ec.length;i++)Nc(Ec[i],t);break;case"source":Nc("error",t);break;case"img":case"image":case"link":Nc("error",t),Nc("load",t);break;case"details":Nc("toggle",t);break;case"input":Nc("invalid",t),vt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ut(t);break;case"select":Nc("invalid",t);break;case"textarea":Nc("invalid",t),xt(t,n.value,n.defaultValue,n.children),ut(t)}"string"!==typeof(i=n.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===n.suppressHydrationWarning||Gc(t.textContent,i)?(null!=n.popover&&(Nc("beforetoggle",t),Nc("toggle",t)),null!=n.onScroll&&Nc("scroll",t),null!=n.onScrollEnd&&Nc("scrollend",t),null!=n.onClick&&(t.onclick=Wc),t=!0):t=!1,t||eo(e)}function io(e){for(Yn=e.return;Yn;)switch(Yn.tag){case 3:case 27:return void(Jn=!0);case 5:case 13:return void(Jn=!1);default:Yn=Yn.return}}function no(e){if(e!==Yn)return!1;if(!$n)return io(e),$n=!0,!1;var t,i=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Zc(e.type,e.memoizedProps)),t=!t),t&&(i=!0),i&&Qn&&eo(e),io(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,i=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===i){Qn=lu(e.nextSibling);break e}i--}else"$"!==t&&"$!"!==t&&"$?"!==t||i++;e=e.nextSibling}Qn=null}}else Qn=Yn?lu(e.stateNode.nextSibling):null;return!0}function oo(){Qn=Yn=null,$n=!1}function so(e){null===Xn?Xn=[e]:Xn.push(e)}var ro=Error(r(460)),ao=Error(r(474)),lo={then:function(){}};function co(e){return"fulfilled"===(e=e.status)||"rejected"===e}function uo(){}function ho(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(uo,uo),t=i),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ro)throw Error(r(483));throw e;default:if("string"===typeof t.status)t.then(uo,uo);else{if(null!==(e=id)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}}),(function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ro)throw Error(r(483));throw e}throw po=t,ro}}var po=null;function go(){if(null===po)throw Error(r(459));var e=po;return po=null,e}var mo=null,fo=0;function vo(e){var t=fo;return fo+=1,null===mo&&(mo=[]),ho(mo,e,t)}function bo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function wo(e,t){if(t.$$typeof===l)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function s(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=33554434,i):n:(t.flags|=33554434,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Gl(i,e.mode,n)).return=e,t):((t=o(t,i)).return=e,t)}function h(e,t,i,n){var s=i.type;return s===u?g(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&yo(s)===t.type)?(bo(t=o(t,i.props),i),t.return=e,t):(bo(t=zl(i.type,i.key,i.props,null,e.mode,n),i),t.return=e,t)}function p(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Wl(i,e.mode,n)).return=e,t):((t=o(t,i.children||[])).return=e,t)}function g(e,t,i,n,s){return null===t||7!==t.tag?((t=Vl(i,e.mode,n,s)).return=e,t):((t=o(t,i)).return=e,t)}function m(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case d:return bo(i=zl(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case c:return(t=Wl(t,e.mode,i)).return=e,t;case x:return m(e,t=(0,t._init)(t._payload),i)}if(V(t)||k(t))return(t=Vl(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return m(e,vo(t),i);if(t.$$typeof===f)return m(e,Ea(e,t),i);wo(e,t)}return null}function v(e,t,i,n){var o=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==o?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case d:return i.key===o?h(e,t,i,n):null;case c:return i.key===o?p(e,t,i,n):null;case x:return v(e,t,i=(o=i._init)(i._payload),n)}if(V(i)||k(i))return null!==o?null:g(e,t,i,n,null);if("function"===typeof i.then)return v(e,t,vo(i),n);if(i.$$typeof===f)return v(e,t,Ea(e,i),n);wo(e,i)}return null}function b(e,t,i,n,o){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(i)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case d:return h(t,e=e.get(null===n.key?i:n.key)||null,n,o);case c:return p(t,e=e.get(null===n.key?i:n.key)||null,n,o);case x:return b(e,t,i,n=(0,n._init)(n._payload),o)}if(V(n)||k(n))return g(t,e=e.get(i)||null,n,o,null);if("function"===typeof n.then)return b(e,t,i,vo(n),o);if(n.$$typeof===f)return b(e,t,i,Ea(t,n),o);wo(t,n)}return null}function w(l,h,p,g){if("object"===typeof p&&null!==p&&p.type===u&&null===p.key&&(p=p.props.children),"object"===typeof p&&null!==p){switch(p.$$typeof){case d:e:{for(var y=p.key;null!==h;){if(h.key===y){if((y=p.type)===u){if(7===h.tag){i(l,h.sibling),(g=o(h,p.props.children)).return=l,l=g;break e}}else if(h.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===x&&yo(y)===h.type){i(l,h.sibling),bo(g=o(h,p.props),p),g.return=l,l=g;break e}i(l,h);break}t(l,h),h=h.sibling}p.type===u?((g=Vl(p.props.children,l.mode,g,p.key)).return=l,l=g):(bo(g=zl(p.type,p.key,p.props,null,l.mode,g),p),g.return=l,l=g)}return a(l);case c:e:{for(y=p.key;null!==h;){if(h.key===y){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){i(l,h.sibling),(g=o(h,p.children||[])).return=l,l=g;break e}i(l,h);break}t(l,h),h=h.sibling}(g=Wl(p,l.mode,g)).return=l,l=g}return a(l);case x:return w(l,h,p=(y=p._init)(p._payload),g)}if(V(p))return function(o,r,a,l){for(var d=null,c=null,u=r,h=r=0,p=null;null!==u&&h<a.length;h++){u.index>h?(p=u,u=null):p=u.sibling;var g=v(o,u,a[h],l);if(null===g){null===u&&(u=p);break}e&&u&&null===g.alternate&&t(o,u),r=s(g,r,h),null===c?d=g:c.sibling=g,c=g,u=p}if(h===a.length)return i(o,u),$n&&Wn(o,h),d;if(null===u){for(;h<a.length;h++)null!==(u=m(o,a[h],l))&&(r=s(u,r,h),null===c?d=u:c.sibling=u,c=u);return $n&&Wn(o,h),d}for(u=n(u);h<a.length;h++)null!==(p=b(u,o,h,a[h],l))&&(e&&null!==p.alternate&&u.delete(null===p.key?h:p.key),r=s(p,r,h),null===c?d=p:c.sibling=p,c=p);return e&&u.forEach((function(e){return t(o,e)})),$n&&Wn(o,h),d}(l,h,p,g);if(k(p)){if("function"!==typeof(y=k(p)))throw Error(r(150));return function(o,a,l,d){if(null==l)throw Error(r(151));for(var c=null,u=null,h=a,p=a=0,g=null,f=l.next();null!==h&&!f.done;p++,f=l.next()){h.index>p?(g=h,h=null):g=h.sibling;var w=v(o,h,f.value,d);if(null===w){null===h&&(h=g);break}e&&h&&null===w.alternate&&t(o,h),a=s(w,a,p),null===u?c=w:u.sibling=w,u=w,h=g}if(f.done)return i(o,h),$n&&Wn(o,p),c;if(null===h){for(;!f.done;p++,f=l.next())null!==(f=m(o,f.value,d))&&(a=s(f,a,p),null===u?c=f:u.sibling=f,u=f);return $n&&Wn(o,p),c}for(h=n(h);!f.done;p++,f=l.next())null!==(f=b(h,o,p,f.value,d))&&(e&&null!==f.alternate&&h.delete(null===f.key?p:f.key),a=s(f,a,p),null===u?c=f:u.sibling=f,u=f);return e&&h.forEach((function(e){return t(o,e)})),$n&&Wn(o,p),c}(l,h,p=y.call(p),g)}if("function"===typeof p.then)return w(l,h,vo(p),g);if(p.$$typeof===f)return w(l,h,Ea(l,p),g);wo(l,p)}return"string"===typeof p&&""!==p||"number"===typeof p||"bigint"===typeof p?(p=""+p,null!==h&&6===h.tag?(i(l,h.sibling),(g=o(h,p)).return=l,l=g):(i(l,h),(g=Gl(p,l.mode,g)).return=l,l=g),a(l)):i(l,h)}return function(e,t,i,n){try{fo=0;var o=w(e,t,i,n);return mo=null,o}catch(r){if(r===ro)throw r;var s=Ll(29,r,null,e.mode);return s.lanes=n,s.return=e,s}}}var Co=xo(!0),So=xo(!1),Ro=q(null),ko=q(0);function Po(e,t){Y(ko,e=cd),Y(Ro,t),cd=e|t.baseLanes}function Eo(){Y(ko,cd),Y(Ro,Ro.current)}function Fo(){cd=ko.current,K(Ro),K(ko)}var Do=q(null),No=null;function Mo(e){var t=e.alternate;Y(Io,1&Io.current),Y(Do,e),null===No&&(null===t||null!==Ro.current||null!==t.memoizedState)&&(No=e)}function To(e){if(22===e.tag){if(Y(Io,Io.current),Y(Do,e),null===No){var t=e.alternate;null!==t&&null!==t.memoizedState&&(No=e)}}else jo()}function jo(){Y(Io,Io.current),Y(Do,Do.current)}function Ao(e){K(Do),No===e&&(No=null),K(Io)}var Io=q(0);function Lo(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _o="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Oo=n.unstable_scheduleCallback,Bo=n.unstable_NormalPriority,zo={$$typeof:f,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vo(){return{controller:new _o,data:new Map,refCount:0}}function Ho(e){e.refCount--,0===e.refCount&&Oo(Bo,(function(){e.controller.abort()}))}var Go=null,Wo=0,Uo=0,qo=null;function Ko(){if(0===--Wo&&null!==Go){null!==qo&&(qo.status="fulfilled");var e=Go;Go=null,Uo=0,qo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Yo=N.S;N.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Go){var i=Go=[];Wo=0,Uo=Cc(),qo={status:"pending",value:void 0,then:function(e){i.push(e)}}}Wo++,t.then(Ko,Ko)}(0,t),null!==Yo&&Yo(e,t)};var Qo=q(null);function $o(){var e=Qo.current;return null!==e?e:id.pooledCache}function Xo(e,t){Y(Qo,null===t?Qo.current:t.pool)}function Jo(){var e=$o();return null===e?null:{parent:zo._currentValue,pool:e}}var Zo=0,es=null,ts=null,is=null,ns=!1,os=!1,ss=!1,rs=0,as=0,ls=null,ds=0;function cs(){throw Error(r(321))}function us(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ki(e[i],t[i]))return!1;return!0}function hs(e,t,i,n,o,s){return Zo=s,es=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Pr:Er,ss=!1,s=i(n,o),ss=!1,os&&(s=gs(t,i,n,o)),ps(e),s}function ps(e){N.H=kr;var t=null!==ts&&null!==ts.next;if(Zo=0,is=ts=es=null,ns=!1,as=0,ls=null,t)throw Error(r(300));null===e||Ur||null!==(e=e.dependencies)&&Ra(e)&&(Ur=!0)}function gs(e,t,i,n){es=e;var o=0;do{if(os&&(ls=null),as=0,os=!1,25<=o)throw Error(r(301));if(o+=1,is=ts=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}N.H=Fr,s=t(i,n)}while(os);return s}function ms(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?xs(t):t,e=e.useState()[0],(null!==ts?ts.memoizedState:null)!==e&&(es.flags|=1024),t}function fs(){var e=0!==rs;return rs=0,e}function vs(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function bs(e){if(ns){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ns=!1}Zo=0,is=ts=es=null,os=!1,as=rs=0,ls=null}function ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===is?es.memoizedState=is=e:is=is.next=e,is}function ys(){if(null===ts){var e=es.alternate;e=null!==e?e.memoizedState:null}else e=ts.next;var t=null===is?es.memoizedState:is.next;if(null!==t)is=t,ts=e;else{if(null===e){if(null===es.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(ts=e).memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},null===is?es.memoizedState=is=e:is=is.next=e}return is}function xs(e){var t=as;return as+=1,null===ls&&(ls=[]),e=ho(ls,e,t),t=es,null===(null===is?t.memoizedState:is.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Pr:Er),e}function Cs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return xs(e);if(e.$$typeof===f)return Pa(e)}throw Error(r(438,String(e)))}function Ss(e){var t=null,i=es.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var n=es.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},es.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=S;return t.index++,i}function Rs(e,t){return"function"===typeof t?t(e):t}function ks(e){return Ps(ys(),ts,e)}function Ps(e,t,i){var n=e.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=i;var o=e.baseQueue,s=n.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}t.baseQueue=o=s,n.pending=null}if(s=e.baseState,null===o)e.memoizedState=s;else{var l=a=null,d=null,c=t=o.next,u=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(od&h)===h:(Zo&h)===h){var p=c.revertLane;if(0===p)null!==d&&(d=d.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Uo&&(u=!0);else{if((Zo&p)===p){c=c.next,p===Uo&&(u=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=h,a=s):d=d.next=h,es.lanes|=p,hd|=p}h=c.action,ss&&i(s,h),s=c.hasEagerState?c.eagerState:i(s,h)}else p={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=p,a=s):d=d.next=p,es.lanes|=h,hd|=h;c=c.next}while(null!==c&&c!==t);if(null===d?a=s:d.next=l,!Ki(s,e.memoizedState)&&(Ur=!0,u&&null!==(i=qo)))throw i;e.memoizedState=s,e.baseState=a,e.baseQueue=d,n.lastRenderedState=s}return null===o&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Es(e){var t=ys(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var n=i.dispatch,o=i.pending,s=t.memoizedState;if(null!==o){i.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);Ki(s,t.memoizedState)||(Ur=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function Fs(e,t,i){var n=es,o=ys(),s=$n;if(s){if(void 0===i)throw Error(r(407));i=i()}else i=t();var a=!Ki((ts||o).memoizedState,i);if(a&&(o.memoizedState=i,Ur=!0),o=o.queue,Zs(Ms.bind(null,n,o,e),[e]),o.getSnapshot!==t||a||null!==is&&1&is.memoizedState.tag){if(n.flags|=2048,Ys(9,Ns.bind(null,n,o,i,t),{destroy:void 0},null),null===id)throw Error(r(349));s||0!==(60&Zo)||Ds(n,t,i)}return i}function Ds(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=es.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},es.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ns(e,t,i,n){t.value=i,t.getSnapshot=n,Ts(t)&&js(e)}function Ms(e,t,i){return i((function(){Ts(t)&&js(e)}))}function Ts(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ki(e,i)}catch(n){return!0}}function js(e){var t=Dn(e,2);null!==t&&jd(t,e,2)}function As(e){var t=ws();if("function"===typeof e){var i=e;if(e=i(),ss){we(!0);try{i()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:e},t}function Is(e,t,i,n){return e.baseState=i,Ps(e,ts,"function"===typeof n?n:Rs)}function Ls(e,t,i,n,o){if(Cr(e))throw Error(r(485));if(null!==(e=t.action)){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==N.T?i(!0):s.isTransition=!1,n(s),null===(i=t.pending)?(s.next=t.pending=s,_s(t,s)):(s.next=i.next,t.pending=i.next=s)}}function _s(e,t){var i=t.action,n=t.payload,o=e.state;if(t.isTransition){var s=N.T,r={};N.T=r;try{var a=i(o,n),l=N.S;null!==l&&l(r,a),Os(e,t,a)}catch(d){zs(e,t,d)}finally{N.T=s}}else try{Os(e,t,s=i(o,n))}catch(c){zs(e,t,c)}}function Os(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then((function(i){Bs(e,t,i)}),(function(i){return zs(e,t,i)})):Bs(e,t,i)}function Bs(e,t,i){t.status="fulfilled",t.value=i,Vs(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,_s(e,i)))}function zs(e,t,i){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=i,Vs(t),t=t.next}while(t!==n)}e.action=null}function Vs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Hs(e,t){return t}function Gs(e,t){if($n){var i=id.formState;if(null!==i){e:{var n=es;if($n){if(Qn){t:{for(var o=Qn,s=Jn;8!==o.nodeType;){if(!s){o=null;break t}if(null===(o=lu(o.nextSibling))){o=null;break t}}o="F!"===(s=o.data)||"F"===s?o:null}if(o){Qn=lu(o.nextSibling),n="F!"===o.data;break e}}eo(n)}n=!1}n&&(t=i[0])}}return(i=ws()).memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:t},i.queue=n,i=wr.bind(null,es,n),n.dispatch=i,n=As(!1),s=xr.bind(null,es,!1,n.queue),o={state:t,dispatch:null,action:e,pending:null},(n=ws()).queue=o,i=Ls.bind(null,es,o,s,i),o.dispatch=i,n.memoizedState=e,[t,i,!1]}function Ws(e){return Us(ys(),ts,e)}function Us(e,t,i){t=Ps(e,t,Hs)[0],e=ks(Rs)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?xs(t):t;var n=ys(),o=n.queue,s=o.dispatch;return i!==n.memoizedState&&(es.flags|=2048,Ys(9,qs.bind(null,o,i),{destroy:void 0},null)),[t,s,e]}function qs(e,t){e.action=t}function Ks(e){var t=ys(),i=ts;if(null!==i)return Us(t,i,e);ys(),t=t.memoizedState;var n=(i=ys()).queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Ys(e,t,i,n){return e={tag:e,create:t,inst:i,deps:n,next:null},null===(t=es.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},es.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Qs(){return ys().memoizedState}function $s(e,t,i,n){var o=ws();es.flags|=e,o.memoizedState=Ys(1|t,i,{destroy:void 0},void 0===n?null:n)}function Xs(e,t,i,n){var o=ys();n=void 0===n?null:n;var s=o.memoizedState.inst;null!==ts&&null!==n&&us(n,ts.memoizedState.deps)?o.memoizedState=Ys(t,i,s,n):(es.flags|=e,o.memoizedState=Ys(1|t,i,s,n))}function Js(e,t){$s(8390656,8,e,t)}function Zs(e,t){Xs(2048,8,e,t)}function er(e,t){return Xs(4,2,e,t)}function tr(e,t){return Xs(4,4,e,t)}function ir(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function nr(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,Xs(4,4,ir.bind(null,t,e),i)}function or(){}function sr(e,t){var i=ys();t=void 0===t?null:t;var n=i.memoizedState;return null!==t&&us(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function rr(e,t){var i=ys();t=void 0===t?null:t;var n=i.memoizedState;if(null!==t&&us(t,n[1]))return n[0];if(n=e(),ss){we(!0);try{e()}finally{we(!1)}}return i.memoizedState=[n,t],n}function ar(e,t,i){return void 0===i||0!==(1073741824&Zo)?e.memoizedState=t:(e.memoizedState=i,e=Td(),es.lanes|=e,hd|=e,i)}function lr(e,t,i,n){return Ki(i,t)?i:null!==Ro.current?(e=ar(e,i,n),Ki(e,t)||(Ur=!0),e):0===(42&Zo)?(Ur=!0,e.memoizedState=i):(e=Td(),es.lanes|=e,hd|=e,t)}function dr(e,t,i,n,o){var s=H.p;H.p=0!==s&&8>s?s:8;var r=N.T,a={};N.T=a,xr(e,!1,t,i);try{var l=o(),d=N.S;if(null!==d&&d(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=function(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then((function(){n.status="fulfilled",n.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)}),(function(e){for(n.status="rejected",n.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)})),n}(l,n);yr(e,t,c,Md())}else yr(e,t,n,Md())}catch(u){yr(e,t,{then:function(){},status:"rejected",reason:u},Md())}finally{H.p=s,N.T=r}}function cr(){}function ur(e,t,i,n){if(5!==e.tag)throw Error(r(476));var o=hr(e).queue;dr(e,o,t,G,null===i?cr:function(){return pr(e),i(n)})}function hr(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:G},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function pr(e){yr(e,hr(e).next.queue,{},Md())}function gr(){return Pa(_u)}function mr(){return ys().memoizedState}function fr(){return ys().memoizedState}function vr(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Md(),n=ja(t,e=Ta(i),i);return null!==n&&(jd(n,t,i),Aa(n,t,i)),t={cache:Vo()},void(e.payload=t)}t=t.return}}function br(e,t,i){var n=Md();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Cr(e)?Sr(t,i):null!==(i=Fn(e,t,i,n))&&(jd(i,e,n),Rr(i,t,n))}function wr(e,t,i){yr(e,t,i,Md())}function yr(e,t,i,n){var o={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Cr(e))Sr(t,o);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=s(r,i);if(o.hasEagerState=!0,o.eagerState=a,Ki(a,r))return En(e,t,o,0),null===id&&Pn(),!1}catch(l){}if(null!==(i=Fn(e,t,o,n)))return jd(i,e,n),Rr(i,t,n),!0}return!1}function xr(e,t,i,n){if(n={lane:2,revertLane:Cc(),action:n,hasEagerState:!1,eagerState:null,next:null},Cr(e)){if(t)throw Error(r(479))}else null!==(t=Fn(e,i,n,2))&&jd(t,e,2)}function Cr(e){var t=e.alternate;return e===es||null!==t&&t===es}function Sr(e,t){os=ns=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Rr(e,t,i){if(0!==(4194176&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Ae(e,i)}}var kr={readContext:Pa,use:Cs,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useLayoutEffect:cs,useInsertionEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useSyncExternalStore:cs,useId:cs};kr.useCacheRefresh=cs,kr.useMemoCache=cs,kr.useHostTransitionStatus=cs,kr.useFormState=cs,kr.useActionState=cs,kr.useOptimistic=cs;var Pr={readContext:Pa,use:Cs,useCallback:function(e,t){return ws().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Js,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,$s(4194308,4,ir.bind(null,t,e),i)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){$s(4,2,e,t)},useMemo:function(e,t){var i=ws();t=void 0===t?null:t;var n=e();if(ss){we(!0);try{e()}finally{we(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=ws();if(void 0!==i){var o=i(t);if(ss){we(!0);try{i(t)}finally{we(!1)}}}else o=t;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=br.bind(null,es,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ws().memoizedState=e},useState:function(e){var t=(e=As(e)).queue,i=wr.bind(null,es,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:or,useDeferredValue:function(e,t){return ar(ws(),e,t)},useTransition:function(){var e=As(!1);return e=dr.bind(null,es,e.queue,!0,!1),ws().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=es,o=ws();if($n){if(void 0===i)throw Error(r(407));i=i()}else{if(i=t(),null===id)throw Error(r(349));0!==(60&od)||Ds(n,t,i)}o.memoizedState=i;var s={value:i,getSnapshot:t};return o.queue=s,Js(Ms.bind(null,n,s,e),[e]),n.flags|=2048,Ys(9,Ns.bind(null,n,s,i,t),{destroy:void 0},null),i},useId:function(){var e=ws(),t=id.identifierPrefix;if($n){var i=Gn;t=":"+t+"R"+(i=(Hn&~(1<<32-ye(Hn)-1)).toString(32)+i),0<(i=rs++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=ds++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ws().memoizedState=vr.bind(null,es)}};Pr.useMemoCache=Ss,Pr.useHostTransitionStatus=gr,Pr.useFormState=Gs,Pr.useActionState=Gs,Pr.useOptimistic=function(e){var t=ws();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=xr.bind(null,es,!0,i),i.dispatch=t,[e,t]};var Er={readContext:Pa,use:Cs,useCallback:sr,useContext:Pa,useEffect:Zs,useImperativeHandle:nr,useInsertionEffect:er,useLayoutEffect:tr,useMemo:rr,useReducer:ks,useRef:Qs,useState:function(){return ks(Rs)},useDebugValue:or,useDeferredValue:function(e,t){return lr(ys(),ts.memoizedState,e,t)},useTransition:function(){var e=ks(Rs)[0],t=ys().memoizedState;return["boolean"===typeof e?e:xs(e),t]},useSyncExternalStore:Fs,useId:mr};Er.useCacheRefresh=fr,Er.useMemoCache=Ss,Er.useHostTransitionStatus=gr,Er.useFormState=Ws,Er.useActionState=Ws,Er.useOptimistic=function(e,t){return Is(ys(),0,e,t)};var Fr={readContext:Pa,use:Cs,useCallback:sr,useContext:Pa,useEffect:Zs,useImperativeHandle:nr,useInsertionEffect:er,useLayoutEffect:tr,useMemo:rr,useReducer:Es,useRef:Qs,useState:function(){return Es(Rs)},useDebugValue:or,useDeferredValue:function(e,t){var i=ys();return null===ts?ar(i,e,t):lr(i,ts.memoizedState,e,t)},useTransition:function(){var e=Es(Rs)[0],t=ys().memoizedState;return["boolean"===typeof e?e:xs(e),t]},useSyncExternalStore:Fs,useId:mr};function Dr(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:M({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}Fr.useCacheRefresh=fr,Fr.useMemoCache=Ss,Fr.useHostTransitionStatus=gr,Fr.useFormState=Ks,Fr.useActionState=Ks,Fr.useOptimistic=function(e,t){var i=ys();return null!==ts?Is(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])};var Nr={isMounted:function(e){return!!(e=e._reactInternals)&&_(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Md(),o=Ta(n);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=ja(e,o,n))&&(jd(t,e,n),Aa(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Md(),o=Ta(n);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=ja(e,o,n))&&(jd(t,e,n),Aa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Md(),n=Ta(i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ja(e,n,i))&&(jd(t,e,i),Aa(t,e,i))}};function Tr(e,t,i,n,o,s,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,r):!t.prototype||!t.prototype.isPureReactComponent||(!Yi(i,n)||!Yi(o,s))}function jr(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Nr.enqueueReplaceState(t,t.state,null)}function Ar(e,t){var i=t;if("ref"in t)for(var n in i={},t)"ref"!==n&&(i[n]=t[n]);if(e=e.defaultProps)for(var o in i===t&&(i=M({},i)),e)void 0===i[o]&&(i[o]=e[o]);return i}var Ir="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Lr(e){Ir(e)}function _r(e){console.error(e)}function Or(e){Ir(e)}function Br(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout((function(){throw i}))}}function zr(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout((function(){throw n}))}}function Vr(e,t,i){return(i=Ta(i)).tag=3,i.payload={element:null},i.callback=function(){Br(e,t)},i}function Hr(e){return(e=Ta(e)).tag=3,e}function Gr(e,t,i,n){var o=i.type.getDerivedStateFromError;if("function"===typeof o){var s=n.value;e.payload=function(){return o(s)},e.callback=function(){zr(t,i,n)}}var r=i.stateNode;null!==r&&"function"===typeof r.componentDidCatch&&(e.callback=function(){zr(t,i,n),"function"!==typeof o&&(null===Sd?Sd=new Set([this]):Sd.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Wr=Error(r(461)),Ur=!1;function qr(e,t,i,n){t.child=null===e?So(t,null,i,n):Co(t,e.child,i,n)}function Kr(e,t,i,n,o){i=i.render;var s=t.ref;if("ref"in n){var r={};for(var a in n)"ref"!==a&&(r[a]=n[a])}else r=n;return ka(t),n=hs(e,t,i,r,s,o),a=fs(),null===e||Ur?($n&&a&&qn(t),t.flags|=1,qr(e,t,n,o),t.child):(vs(e,t,o),pa(e,t,o))}function Yr(e,t,i,n,o){if(null===e){var s=i.type;return"function"!==typeof s||_l(s)||void 0!==s.defaultProps||null!==i.compare?((e=zl(i.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Qr(e,t,s,n,o))}if(s=e.child,!ga(e,o)){var r=s.memoizedProps;if((i=null!==(i=i.compare)?i:Yi)(r,n)&&e.ref===t.ref)return pa(e,t,o)}return t.flags|=1,(e=Ol(s,n)).ref=t.ref,e.return=t,t.child=e}function Qr(e,t,i,n,o){if(null!==e){var s=e.memoizedProps;if(Yi(s,n)&&e.ref===t.ref){if(Ur=!1,t.pendingProps=n=s,!ga(e,o))return t.lanes=e.lanes,pa(e,t,o);0!==(131072&e.flags)&&(Ur=!0)}}return Zr(e,t,i,n,o)}function $r(e,t,i){var n=t.pendingProps,o=n.children,s=0!==(2&t.stateNode._pendingVisibility),r=null!==e?e.memoizedState:null;if(Jr(e,t),"hidden"===n.mode||s){if(0!==(128&t.flags)){if(n=null!==r?r.baseLanes|i:i,null!==e){for(o=t.child=e.child,s=0;null!==o;)s=s|o.lanes|o.childLanes,o=o.sibling;t.childLanes=s&~n}else t.childLanes=0,t.child=null;return Xr(e,t,n,i)}if(0===(536870912&i))return t.lanes=t.childLanes=536870912,Xr(e,t,null!==r?r.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xo(0,null!==r?r.cachePool:null),null!==r?Po(t,r):Eo(),To(t)}else null!==r?(Xo(0,r.cachePool),Po(t,r),jo(),t.memoizedState=null):(null!==e&&Xo(0,null),Eo(),jo());return qr(e,t,o,i),t.child}function Xr(e,t,i,n){var o=$o();return o=null===o?null:{parent:zo._currentValue,pool:o},t.memoizedState={baseLanes:i,cachePool:o},null!==e&&Xo(0,null),Eo(),To(t),null!==e&&Sa(e,t,n,!0),null}function Jr(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(r(284));null!==e&&e.ref===i||(t.flags|=2097664)}}function Zr(e,t,i,n,o){return ka(t),i=hs(e,t,i,n,void 0,o),n=fs(),null===e||Ur?($n&&n&&qn(t),t.flags|=1,qr(e,t,i,o),t.child):(vs(e,t,o),pa(e,t,o))}function ea(e,t,i,n,o,s){return ka(t),t.updateQueue=null,i=gs(t,n,i,o),ps(e),n=fs(),null===e||Ur?($n&&n&&qn(t),t.flags|=1,qr(e,t,i,s),t.child):(vs(e,t,s),pa(e,t,s))}function ta(e,t,i,n,o){if(ka(t),null===t.stateNode){var s=Tn,r=i.contextType;"object"===typeof r&&null!==r&&(s=Pa(r)),s=new i(n,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Nr,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=n,s.state=t.memoizedState,s.refs={},Na(t),r=i.contextType,s.context="object"===typeof r&&null!==r?Pa(r):Tn,s.state=t.memoizedState,"function"===typeof(r=i.getDerivedStateFromProps)&&(Dr(t,i,r,n),s.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(r=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),r!==s.state&&Nr.enqueueReplaceState(s,s.state,null),Oa(t,n,s,o),_a(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Ar(i,a);s.props=l;var d=s.context,c=i.contextType;r=Tn,"object"===typeof c&&null!==c&&(r=Pa(c));var u=i.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||d!==r)&&jr(t,s,n,r),Da=!1;var h=t.memoizedState;s.state=h,Oa(t,n,s,o),_a(),d=t.memoizedState,a||h!==d||Da?("function"===typeof u&&(Dr(t,i,u,n),d=t.memoizedState),(l=Da||Tr(t,i,l,n,h,d,r))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),s.props=n,s.state=d,s.context=r,n=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Ma(e,t),c=Ar(i,r=t.memoizedProps),s.props=c,u=t.pendingProps,h=s.context,d=i.contextType,l=Tn,"object"===typeof d&&null!==d&&(l=Pa(d)),(d="function"===typeof(a=i.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(r!==u||h!==l)&&jr(t,s,n,l),Da=!1,h=t.memoizedState,s.state=h,Oa(t,n,s,o),_a();var p=t.memoizedState;r!==u||h!==p||Da||null!==e&&null!==e.dependencies&&Ra(e.dependencies)?("function"===typeof a&&(Dr(t,i,a,n),p=t.memoizedState),(c=Da||Tr(t,i,c,n,h,p,l)||null!==e&&null!==e.dependencies&&Ra(e.dependencies))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),s.props=n,s.state=p,s.context=l,n=c):("function"!==typeof s.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,Jr(e,t),n=0!==(128&t.flags),s||n?(s=t.stateNode,i=n&&"function"!==typeof i.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&n?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,i,o)):qr(e,t,i,o),t.memoizedState=s.state,e=t.child):e=pa(e,t,o),e}function ia(e,t,i,n){return oo(),t.flags|=256,qr(e,t,i,n),t.child}var na={dehydrated:null,treeContext:null,retryLane:0};function oa(e){return{baseLanes:e,cachePool:Jo()}}function sa(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=md),e}function ra(e,t,i){var n,o=t.pendingProps,s=!1,a=0!==(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&0!==(2&Io.current)),n&&(s=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if($n){if(s?Mo(t):jo(),$n){var l,d=Qn;if(l=d){e:{for(l=d,d=Jn;8!==l.nodeType;){if(!d){d=null;break e}if(null===(l=lu(l.nextSibling))){d=null;break e}}d=l}null!==d?(t.memoizedState={dehydrated:d,treeContext:null!==Vn?{id:Hn,overflow:Gn}:null,retryLane:536870912},(l=Ll(18,null,null,0)).stateNode=d,l.return=t,t.child=l,Yn=t,Qn=null,l=!0):l=!1}l||eo(t)}if(null!==(d=t.memoizedState)&&null!==(d=d.dehydrated))return"$!"===d.data?t.lanes=16:t.lanes=536870912,null;Ao(t)}return d=o.children,o=o.fallback,s?(jo(),d=la({mode:"hidden",children:d},s=t.mode),o=Vl(o,s,i,null),d.return=t,o.return=t,d.sibling=o,t.child=d,(s=t.child).memoizedState=oa(i),s.childLanes=sa(e,n,i),t.memoizedState=na,o):(Mo(t),aa(t,d))}if(null!==(l=e.memoizedState)&&null!==(d=l.dehydrated)){if(a)256&t.flags?(Mo(t),t.flags&=-257,t=da(e,t,i)):null!==t.memoizedState?(jo(),t.child=e.child,t.flags|=128,t=null):(jo(),s=o.fallback,d=t.mode,o=la({mode:"visible",children:o.children},d),(s=Vl(s,d,i,null)).flags|=2,o.return=t,s.return=t,o.sibling=s,t.child=o,Co(t,e.child,null,i),(o=t.child).memoizedState=oa(i),o.childLanes=sa(e,n,i),t.memoizedState=na,t=s);else if(Mo(t),"$!"===d.data){if(n=d.nextSibling&&d.nextSibling.dataset)var c=n.dgst;n=c,(o=Error(r(419))).stack="",o.digest=n,so({value:o,source:null,stack:null}),t=da(e,t,i)}else if(Ur||Sa(e,t,i,!1),n=0!==(i&e.childLanes),Ur||n){if(null!==(n=id)){if(0!==(42&(o=i&-i)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(0!==(o=0!==(o&(n.suspendedLanes|i))?0:o)&&o!==l.retryLane)throw l.retryLane=o,Dn(e,o),jd(n,e,o),Wr}"$?"===d.data||Ud(),t=da(e,t,i)}else"$?"===d.data?(t.flags|=128,t.child=e.child,t=lc.bind(null,e),d._reactRetry=t,t=null):(e=l.treeContext,Qn=lu(d.nextSibling),Yn=t,$n=!0,Xn=null,Jn=!1,null!==e&&(Bn[zn++]=Hn,Bn[zn++]=Gn,Bn[zn++]=Vn,Hn=e.id,Gn=e.overflow,Vn=t),(t=aa(t,o.children)).flags|=4096);return t}return s?(jo(),s=o.fallback,d=t.mode,c=(l=e.child).sibling,(o=Ol(l,{mode:"hidden",children:o.children})).subtreeFlags=31457280&l.subtreeFlags,null!==c?s=Ol(c,s):(s=Vl(s,d,i,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,null===(d=e.child.memoizedState)?d=oa(i):(null!==(l=d.cachePool)?(c=zo._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Jo(),d={baseLanes:d.baseLanes|i,cachePool:l}),s.memoizedState=d,s.childLanes=sa(e,n,i),t.memoizedState=na,o):(Mo(t),e=(i=e.child).sibling,(i=Ol(i,{mode:"visible",children:o.children})).return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i)}function aa(e,t){return(t=la({mode:"visible",children:t},e.mode)).return=e,e.child=t}function la(e,t){return Hl(e,t,0,null)}function da(e,t,i){return Co(t,e.child,null,i),(e=aa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ca(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),xa(e.return,t,i)}function ua(e,t,i,n,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=o)}function ha(e,t,i){var n=t.pendingProps,o=n.revealOrder,s=n.tail;if(qr(e,t,n.children,i),0!==(2&(n=Io.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ca(e,i,t);else if(19===e.tag)ca(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(Y(Io,n),o){case"forwards":for(i=t.child,o=null;null!==i;)null!==(e=i.alternate)&&null===Lo(e)&&(o=i),i=i.sibling;null===(i=o)?(o=t.child,t.child=null):(o=i.sibling,i.sibling=null),ua(t,!1,o,i,s);break;case"backwards":for(i=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Lo(e)){t.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}ua(t,!0,i,null,s);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pa(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),hd|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(Sa(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(i=Ol(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Ol(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function ga(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ra(e))}function ma(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ur=!0;else{if(!ga(e,i)&&0===(128&t.flags))return Ur=!1,function(e,t,i){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),wa(t,zo,e.memoizedState.cache),oo();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:wa(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Mo(t),t.flags|=128,null):0!==(i&t.child.childLanes)?ra(e,t,i):(Mo(t),null!==(e=pa(e,t,i))?e.sibling:null);Mo(t);break;case 19:var o=0!==(128&e.flags);if((n=0!==(i&t.childLanes))||(Sa(e,t,i,!1),n=0!==(i&t.childLanes)),o){if(n)return ha(e,t,i);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Y(Io,Io.current),n)break;return null;case 22:case 23:return t.lanes=0,$r(e,t,i);case 24:wa(t,zo,e.memoizedState.cache)}return pa(e,t,i)}(e,t,i);Ur=0!==(131072&e.flags)}else Ur=!1,$n&&0!==(1048576&t.flags)&&Un(t,On,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,o=n._init;if(n=o(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((o=n.$$typeof)===v){t.tag=11,t=Kr(null,t,n,e,i);break e}if(o===y){t.tag=14,t=Yr(null,t,n,e,i);break e}}throw t=E(n)||n,Error(r(306,t,""))}_l(n)?(e=Ar(n,e),t.tag=1,t=ta(null,t,n,e,i)):(t.tag=0,t=Zr(null,t,n,e,i))}return t;case 0:return Zr(e,t,t.type,t.pendingProps,i);case 1:return ta(e,t,n=t.type,o=Ar(n,t.pendingProps),i);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(r(387));var s=t.pendingProps;n=(o=t.memoizedState).element,Ma(e,t),Oa(t,s,null,i);var a=t.memoizedState;if(s=a.cache,wa(t,zo,s),s!==o.cache&&Ca(t,[zo],i,!0),_a(),s=a.element,o.isDehydrated){if(o={element:s,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=ia(e,t,s,i);break e}if(s!==n){so(n=An(Error(r(424)),t)),t=ia(e,t,s,i);break e}for(Qn=lu(t.stateNode.containerInfo.firstChild),Yn=t,$n=!0,Xn=null,Jn=!0,i=So(t,null,s,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(oo(),s===n){t=pa(e,t,i);break e}qr(e,t,s,i)}t=t.child}return t;case 26:return Jr(e,t),null===e?(i=vu(t.type,null,t.pendingProps,null))?t.memoizedState=i:$n||(i=t.type,e=t.pendingProps,(n=$c(X.current).createElement(i))[Oe]=t,n[Be]=e,Kc(n,i,e),Xe(n),t.stateNode=n):t.memoizedState=vu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&$n&&(n=t.stateNode=cu(t.type,t.pendingProps,X.current),Yn=t,Jn=!0,Qn=lu(n.firstChild)),n=t.pendingProps.children,null!==e||$n?qr(e,t,n,i):t.child=Co(t,null,n,i),Jr(e,t),t.child;case 5:return null===e&&$n&&((o=n=Qn)&&(null!==(n=function(e,t,i,n){for(;1===e.nodeType;){var o=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(null==o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===s)return e}if(null===(e=lu(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,Jn))?(t.stateNode=n,Yn=t,Qn=lu(n.firstChild),Jn=!1,o=!0):o=!1),o||eo(t)),te(t),o=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,n=s.children,Zc(o,s)?n=null:null!==a&&Zc(o,a)&&(t.flags|=32),null!==t.memoizedState&&(o=hs(e,t,ms,null,null,i),_u._currentValue=o),Jr(e,t),qr(e,t,n,i),t.child;case 6:return null===e&&$n&&((e=i=Qn)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=lu(e.nextSibling)))return null}return e}(i,t.pendingProps,Jn))?(t.stateNode=i,Yn=t,Qn=null,e=!0):e=!1),e||eo(t)),null;case 13:return ra(e,t,i);case 4:return Z(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Co(t,null,n,i):qr(e,t,n,i),t.child;case 11:return Kr(e,t,t.type,t.pendingProps,i);case 7:return qr(e,t,t.pendingProps,i),t.child;case 8:case 12:return qr(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,wa(t,t.type,n.value),qr(e,t,n.children,i),t.child;case 9:return o=t.type._context,n=t.pendingProps.children,ka(t),n=n(o=Pa(o)),t.flags|=1,qr(e,t,n,i),t.child;case 14:return Yr(e,t,t.type,t.pendingProps,i);case 15:return Qr(e,t,t.type,t.pendingProps,i);case 19:return ha(e,t,i);case 22:return $r(e,t,i);case 24:return ka(t),n=Pa(zo),null===e?(null===(o=$o())&&(o=id,s=Vo(),o.pooledCache=s,s.refCount++,null!==s&&(o.pooledCacheLanes|=i),o=s),t.memoizedState={parent:n,cache:o},Na(t),wa(t,zo,o)):(0!==(e.lanes&i)&&(Ma(e,t),Oa(t,null,null,i),_a()),o=e.memoizedState,s=t.memoizedState,o.parent!==n?(o={parent:n,cache:n},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),wa(t,zo,n)):(n=s.cache,wa(t,zo,n),n!==o.cache&&Ca(t,[zo],i,!0))),qr(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}var fa=q(null),va=null,ba=null;function wa(e,t,i){Y(fa,t._currentValue),t._currentValue=i}function ya(e){e._currentValue=fa.current,K(fa)}function xa(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Ca(e,t,i,n){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var s=o.dependencies;if(null!==s){var a=o.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=o;for(var d=0;d<t.length;d++)if(l.context===t[d]){s.lanes|=i,null!==(l=s.alternate)&&(l.lanes|=i),xa(s.return,i,e),n||(a=null);break e}s=l.next}}else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=i,null!==(s=a.alternate)&&(s.lanes|=i),xa(a,i,e),a=null}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}function Sa(e,t,i,n){e=null;for(var o=t,s=!1;null!==o;){if(!s)if(0!==(524288&o.flags))s=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var a=o.alternate;if(null===a)throw Error(r(387));if(null!==(a=a.memoizedProps)){var l=o.type;Ki(o.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(o===J.current){if(null===(a=o.alternate))throw Error(r(387));a.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(_u):e=[_u])}o=o.return}null!==e&&Ca(t,e,i,n),t.flags|=262144}function Ra(e){for(e=e.firstContext;null!==e;){if(!Ki(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ka(e){va=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Pa(e){return Fa(va,e)}function Ea(e,t){return null===va&&ka(e),Fa(e,t)}function Fa(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===ba){if(null===e)throw Error(r(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return i}var Da=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&td)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,t=Mn(e),Nn(e,null,i),t}return En(e,n,t,i),Mn(e)}function Aa(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Ae(e,i)}}function Ia(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var o=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var r={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===s?o=s=r:s=s.next=r,i=i.next}while(null!==i);null===s?o=s=t:s=s.next=t}else o=s=t;return i={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var La=!1;function _a(){if(La){if(null!==qo)throw qo}}function Oa(e,t,i,n){La=!1;var o=e.updateQueue;Da=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,d=l.next;l.next=null,null===r?s=d:r.next=d,r=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==r&&(null===a?c.firstBaseUpdate=d:a.next=d,c.lastBaseUpdate=l))}if(null!==s){var u=o.baseState;for(r=0,c=d=l=null,a=s;;){var h=-536870913&a.lane,p=h!==a.lane;if(p?(od&h)===h:(n&h)===h){0!==h&&h===Uo&&(La=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;h=t;var f=i;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){u=g.call(f,u,h);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=m.payload)?g.call(f,u,h):g)||void 0===h)break e;u=M({},u,h);break e;case 2:Da=!0}}null!==(h=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(d=c=p,l=u):c=c.next=p,r|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(p=a).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===c&&(l=u),o.baseState=l,o.firstBaseUpdate=d,o.lastBaseUpdate=c,null===s&&(o.shared.lanes=0),hd|=r,e.lanes=r,e.memoizedState=u}}function Ba(e,t){if("function"!==typeof e)throw Error(r(191,e));e.call(t)}function za(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)Ba(i[e],t)}function Va(e,t){try{var i=t.updateQueue,n=null!==i?i.lastEffect:null;if(null!==n){var o=n.next;i=o;do{if((i.tag&e)===e){n=void 0;var s=i.create,r=i.inst;n=s(),r.destroy=n}i=i.next}while(i!==o)}}catch(a){oc(t,t.return,a)}}function Ha(e,t,i){try{var n=t.updateQueue,o=null!==n?n.lastEffect:null;if(null!==o){var s=o.next;n=s;do{if((n.tag&e)===e){var r=n.inst,a=r.destroy;if(void 0!==a){r.destroy=void 0,o=t;var l=i;try{a()}catch(d){oc(o,l,d)}}}n=n.next}while(n!==s)}}catch(d){oc(t,t.return,d)}}function Ga(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{za(t,i)}catch(n){oc(e,e.return,n)}}}function Wa(e,t,i){i.props=Ar(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){oc(e,t,n)}}function Ua(e,t){try{var i=e.ref;if(null!==i){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var o=n;break;default:o=n}"function"===typeof i?e.refCleanup=i(o):i.current=o}}catch(s){oc(e,t,s)}}function qa(e,t){var i=e.ref,n=e.refCleanup;if(null!==i)if("function"===typeof n)try{n()}catch(o){oc(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(s){oc(e,t,s)}else i.current=null}function Ka(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(o){oc(e,e.return,o)}}function Ya(e,t,i){try{var n=e.stateNode;!function(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,a=null,l=null,d=null,c=null,u=null;for(g in i){var h=i[g];if(i.hasOwnProperty(g)&&null!=h)switch(g){case"checked":case"value":break;case"defaultValue":d=h;default:n.hasOwnProperty(g)||Uc(e,t,g,null,n,h)}}for(var p in n){var g=n[p];if(h=i[p],n.hasOwnProperty(p)&&(null!=g||null!=h))switch(p){case"type":s=g;break;case"name":o=g;break;case"checked":c=g;break;case"defaultChecked":u=g;break;case"value":a=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(r(137,t));break;default:g!==h&&Uc(e,t,p,g,n,h)}}return void ft(e,a,l,d,c,u,s,o);case"select":for(s in g=a=l=p=null,i)if(d=i[s],i.hasOwnProperty(s)&&null!=d)switch(s){case"value":break;case"multiple":g=d;default:n.hasOwnProperty(s)||Uc(e,t,s,null,n,d)}for(o in n)if(s=n[o],d=i[o],n.hasOwnProperty(o)&&(null!=s||null!=d))switch(o){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==d&&Uc(e,t,o,s,n,d)}return t=l,i=a,n=g,void(null!=p?wt(e,!!i,p,!1):!!n!==!!i&&(null!=t?wt(e,!!i,t,!0):wt(e,!!i,i?[]:"",!1)));case"textarea":for(l in g=p=null,i)if(o=i[l],i.hasOwnProperty(l)&&null!=o&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Uc(e,t,l,null,n,o)}for(a in n)if(o=n[a],s=i[a],n.hasOwnProperty(a)&&(null!=o||null!=s))switch(a){case"value":p=o;break;case"defaultValue":g=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==s&&Uc(e,t,a,o,n,s)}return void yt(e,p,g);case"option":for(var m in i)if(p=i[m],i.hasOwnProperty(m)&&null!=p&&!n.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Uc(e,t,m,null,n,p);for(d in n)if(p=n[d],g=i[d],n.hasOwnProperty(d)&&p!==g&&(null!=p||null!=g))if("selected"===d)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Uc(e,t,d,p,n,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var f in i)p=i[f],i.hasOwnProperty(f)&&null!=p&&!n.hasOwnProperty(f)&&Uc(e,t,f,null,n,p);for(c in n)if(p=n[c],g=i[c],n.hasOwnProperty(c)&&p!==g&&(null!=p||null!=g))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:Uc(e,t,c,p,n,g)}return;default:if(Pt(t)){for(var v in i)p=i[v],i.hasOwnProperty(v)&&void 0!==p&&!n.hasOwnProperty(v)&&qc(e,t,v,void 0,n,p);for(u in n)p=n[u],g=i[u],!n.hasOwnProperty(u)||p===g||void 0===p&&void 0===g||qc(e,t,u,p,n,g);return}}for(var b in i)p=i[b],i.hasOwnProperty(b)&&null!=p&&!n.hasOwnProperty(b)&&Uc(e,t,b,null,n,p);for(h in n)p=n[h],g=i[h],!n.hasOwnProperty(h)||p===g||null==p&&null==g||Uc(e,t,h,p,n,g)}(n,e.type,i,t),n[Be]=t}catch(o){oc(e,e.return,o)}}function Qa(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function $a(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Qa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Xa(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Wc));else if(4!==n&&27!==n&&null!==(e=e.child))for(Xa(e,t,i),e=e.sibling;null!==e;)Xa(e,t,i),e=e.sibling}function Ja(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&27!==n&&null!==(e=e.child))for(Ja(e,t,i),e=e.sibling;null!==e;)Ja(e,t,i),e=e.sibling}var Za=!1,el=!1,tl=!1,il="function"===typeof WeakSet?WeakSet:Set,nl=null,ol=!1;function sl(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:bl(e,i),4&n&&Va(5,i);break;case 1:if(bl(e,i),4&n)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(a){oc(i,i.return,a)}else{var o=Ar(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){oc(i,i.return,l)}}64&n&&Ga(i),512&n&&Ua(i,i.return);break;case 3:if(bl(e,i),64&n&&null!==(n=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:e=i.child.stateNode}try{za(n,e)}catch(a){oc(i,i.return,a)}}break;case 26:bl(e,i),512&n&&Ua(i,i.return);break;case 27:case 5:bl(e,i),null===t&&4&n&&Ka(i),512&n&&Ua(i,i.return);break;case 12:default:bl(e,i);break;case 13:bl(e,i),4&n&&ul(e,i);break;case 22:if(!(o=null!==i.memoizedState||Za)){t=null!==t&&null!==t.memoizedState||el;var s=Za,r=el;Za=o,(el=t)&&!r?yl(e,i,0!==(8772&i.subtreeFlags)):bl(e,i),Za=s,el=r}512&n&&("manual"===i.memoizedProps.mode?Ua(i,i.return):qa(i,i.return))}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var al=null,ll=!1;function dl(e,t,i){for(i=i.child;null!==i;)cl(e,t,i),i=i.sibling}function cl(e,t,i){if(be&&"function"===typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ve,i)}catch(r){}switch(i.tag){case 26:el||qa(i,t),dl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:el||qa(i,t);var n=al,o=ll;for(al=i.stateNode,dl(e,t,i),t=(i=i.stateNode).attributes;t.length;)i.removeAttributeNode(t[0]);qe(i),al=n,ll=o;break;case 5:el||qa(i,t);case 6:o=al;var s=ll;if(al=null,dl(e,t,i),ll=s,null!==(al=o))if(ll)try{e=al,n=i.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)}catch(a){oc(i,t,a)}else try{al.removeChild(i.stateNode)}catch(a){oc(i,t,a)}break;case 18:null!==al&&(ll?(t=al,i=i.stateNode,8===t.nodeType?ru(t.parentNode,i):1===t.nodeType&&ru(t,i),fh(t)):ru(al,i.stateNode));break;case 4:n=al,o=ll,al=i.stateNode.containerInfo,ll=!0,dl(e,t,i),al=n,ll=o;break;case 0:case 11:case 14:case 15:el||Ha(2,i,t),el||Ha(4,i,t),dl(e,t,i);break;case 1:el||(qa(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount&&Wa(i,t,n)),dl(e,t,i);break;case 21:dl(e,t,i);break;case 22:el||qa(i,t),el=(n=el)||null!==i.memoizedState,dl(e,t,i),el=n;break;default:dl(e,t,i)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{fh(e)}catch(i){oc(t,t.return,i)}}function hl(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new il),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new il),t;default:throw Error(r(435,e.tag))}}(e);t.forEach((function(t){var n=dc.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}function pl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var o=i[n],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:al=l.stateNode,ll=!1;break e;case 3:case 4:al=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===al)throw Error(r(160));cl(s,a,o),al=null,ll=!1,null!==(s=o.alternate)&&(s.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}var gl=null;function ml(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),fl(e),4&n&&(Ha(3,e,e.return),Va(3,e),Ha(5,e,e.return));break;case 1:pl(t,e),fl(e),512&n&&(el||null===i||qa(i,i.return)),64&n&&Za&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?n:i.concat(n))));break;case 26:var o=gl;if(pl(t,e),fl(e),512&n&&(el||null===i||qa(i,i.return)),4&n){var s=null!==i?i.memoizedState:null;if(n=e.memoizedState,null===i)if(null===n)if(null===e.stateNode){e:{n=e.type,i=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":(!(s=o.getElementsByTagName("title")[0])||s[Ue]||s[Oe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=o.createElement(n),o.head.insertBefore(s,o.querySelector("head > title"))),Kc(s,n,i),s[Oe]=e,Xe(s),n=s;break e;case"link":var a=Fu("link","href",o).get(n+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==i.href?null:i.href)&&s.getAttribute("rel")===(null==i.rel?null:i.rel)&&s.getAttribute("title")===(null==i.title?null:i.title)&&s.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}Kc(s=o.createElement(n),n,i),o.head.appendChild(s);break;case"meta":if(a=Fu("meta","content",o).get(n+(i.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&s.getAttribute("name")===(null==i.name?null:i.name)&&s.getAttribute("property")===(null==i.property?null:i.property)&&s.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&s.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}Kc(s=o.createElement(n),n,i),o.head.appendChild(s);break;default:throw Error(r(468,n))}s[Oe]=e,Xe(s),n=s}e.stateNode=n}else Du(o,e.type,e.stateNode);else e.stateNode=Su(o,n,e.memoizedProps);else s!==n?(null===s?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):s.count--,null===n?Du(o,e.type,e.stateNode):Su(o,n,e.memoizedProps)):null===n&&null!==e.stateNode&&Ya(e,e.memoizedProps,i.memoizedProps)}break;case 27:if(4&n&&null===e.alternate){o=e.stateNode,s=e.memoizedProps;try{for(var d=o.firstChild;d;){var c=d.nextSibling,u=d.nodeName;d[Ue]||"HEAD"===u||"BODY"===u||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===d.rel.toLowerCase()||o.removeChild(d),d=c}for(var h=e.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);Kc(o,h,s),o[Oe]=e,o[Be]=s}catch(m){oc(e,e.return,m)}}case 5:if(pl(t,e),fl(e),512&n&&(el||null===i||qa(i,i.return)),32&e.flags){o=e.stateNode;try{Ct(o,"")}catch(m){oc(e,e.return,m)}}4&n&&null!=e.stateNode&&Ya(e,o=e.memoizedProps,null!==i?i.memoizedProps:o),1024&n&&(tl=!0);break;case 6:if(pl(t,e),fl(e),4&n){if(null===e.stateNode)throw Error(r(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(m){oc(e,e.return,m)}}break;case 3:if(Eu=null,o=gl,gl=pu(t.containerInfo),pl(t,e),gl=o,fl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{fh(t.containerInfo)}catch(m){oc(e,e.return,m)}tl&&(tl=!1,vl(e));break;case 4:n=gl,gl=pu(e.stateNode.containerInfo),pl(t,e),fl(e),gl=n;break;case 12:pl(t,e),fl(e);break;case 13:pl(t,e),fl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(yd=le()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,hl(e,n)));break;case 22:if(512&n&&(el||null===i||qa(i,i.return)),d=null!==e.memoizedState,c=null!==i&&null!==i.memoizedState,Za=(u=Za)||d,el=(h=el)||c,pl(t,e),el=h,Za=u,fl(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&n&&(t._visibility=d?-2&t._visibility:1|t._visibility,d&&(t=Za||el,null===i||c||t||wl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(i=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===i){c=i=t;try{if(o=c.stateNode,d)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{a=c.stateNode;var g=void 0!==(l=c.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==g||"boolean"===typeof g?"":(""+g).trim()}}catch(m){oc(c,c.return,m)}}}else if(6===t.tag){if(null===i){c=t;try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(m){oc(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(i=n.retryQueue)&&(n.retryQueue=null,hl(e,i))));break;case 19:pl(t,e),fl(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,hl(e,n)));break;case 21:break;default:pl(t,e),fl(e)}}function fl(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var i=e.return;null!==i;){if(Qa(i)){var n=i;break e}i=i.return}throw Error(r(160))}switch(n.tag){case 27:var o=n.stateNode;Ja(e,$a(e),o);break;case 5:var s=n.stateNode;32&n.flags&&(Ct(s,""),n.flags&=-33),Ja(e,$a(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;Xa(e,$a(e),a);break;default:throw Error(r(161))}}}catch(l){oc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;vl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)sl(e,t.alternate,t),t=t.sibling}function wl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ha(4,t,t.return),wl(t);break;case 1:qa(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&Wa(t,t.return,i),wl(t);break;case 26:case 27:case 5:qa(t,t.return),wl(t);break;case 22:qa(t,t.return),null===t.memoizedState&&wl(t);break;default:wl(t)}e=e.sibling}}function yl(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,o=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:yl(o,s,i),Va(4,s);break;case 1:if(yl(o,s,i),"function"===typeof(o=(n=s).stateNode).componentDidMount)try{o.componentDidMount()}catch(d){oc(n,n.return,d)}if(null!==(o=(n=s).updateQueue)){var a=n.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Ba(l[o],a)}catch(d){oc(n,n.return,d)}}i&&64&r&&Ga(s),Ua(s,s.return);break;case 26:case 27:case 5:yl(o,s,i),i&&null===n&&4&r&&Ka(s),Ua(s,s.return);break;case 12:default:yl(o,s,i);break;case 13:yl(o,s,i),i&&4&r&&ul(o,s);break;case 22:null===s.memoizedState&&yl(o,s,i),Ua(s,s.return)}t=t.sibling}}function xl(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&Ho(i))}function Cl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ho(e))}function Sl(e,t,i,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Rl(e,t,i,n),t=t.sibling}function Rl(e,t,i,n){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Sl(e,t,i,n),2048&o&&Va(9,t);break;case 3:Sl(e,t,i,n),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ho(e)));break;case 12:if(2048&o){Sl(e,t,i,n),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,a=s.onPostCommit;"function"===typeof a&&a(r,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){oc(t,t.return,l)}}else Sl(e,t,i,n);break;case 23:break;case 22:s=t.stateNode,null!==t.memoizedState?4&s._visibility?Sl(e,t,i,n):Pl(e,t):4&s._visibility?Sl(e,t,i,n):(s._visibility|=4,kl(e,t,i,n,0!==(10256&t.subtreeFlags))),2048&o&&xl(t.alternate,t);break;case 24:Sl(e,t,i,n),2048&o&&Cl(t.alternate,t);break;default:Sl(e,t,i,n)}}function kl(e,t,i,n,o){for(o=o&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,r=t,a=i,l=n,d=r.flags;switch(r.tag){case 0:case 11:case 15:kl(s,r,a,l,o),Va(8,r);break;case 23:break;case 22:var c=r.stateNode;null!==r.memoizedState?4&c._visibility?kl(s,r,a,l,o):Pl(s,r):(c._visibility|=4,kl(s,r,a,l,o)),o&&2048&d&&xl(r.alternate,r);break;case 24:kl(s,r,a,l,o),o&&2048&d&&Cl(r.alternate,r);break;default:kl(s,r,a,l,o)}t=t.sibling}}function Pl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,n=t,o=n.flags;switch(n.tag){case 22:Pl(i,n),2048&o&&xl(n.alternate,n);break;case 24:Pl(i,n),2048&o&&Cl(n.alternate,n);break;default:Pl(i,n)}t=t.sibling}}var El=8192;function Fl(e){if(e.subtreeFlags&El)for(e=e.child;null!==e;)Dl(e),e=e.sibling}function Dl(e){switch(e.tag){case 26:Fl(e),e.flags&El&&null!==e.memoizedState&&function(e,t,i){if(null===Mu)throw Error(r(475));var n=Mu;if("stylesheet"===t.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var o=bu(i.href),s=e.querySelector(wu(o));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=ju.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=s,void Xe(s);s=e.ownerDocument||e,i=yu(i),(o=uu.get(o))&&ku(i,o),Xe(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Kc(s,"link",i),t.instance=s}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=ju.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(gl,e.memoizedState,e.memoizedProps);break;case 5:default:Fl(e);break;case 3:case 4:var t=gl;gl=pu(e.stateNode.containerInfo),Fl(e),gl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=El,El=16777216,Fl(e),El=t):Fl(e))}}function Nl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ml(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];nl=n,Al(n,e)}Nl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Tl(e),e=e.sibling}function Tl(e){switch(e.tag){case 0:case 11:case 15:Ml(e),2048&e.flags&&Ha(9,e,e.return);break;case 3:case 12:default:Ml(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,jl(e)):Ml(e)}}function jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];nl=n,Al(n,e)}Nl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ha(8,t,t.return),jl(t);break;case 22:4&(i=t.stateNode)._visibility&&(i._visibility&=-5,jl(t));break;default:jl(t)}e=e.sibling}}function Al(e,t){for(;null!==nl;){var i=nl;switch(i.tag){case 0:case 11:case 15:Ha(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var n=i.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Ho(i.memoizedState.cache)}if(null!==(n=i.child))n.return=i,nl=n;else e:for(i=e;null!==nl;){var o=(n=nl).sibling,s=n.return;if(rl(n),n===i){nl=null;break e}if(null!==o){o.return=s,nl=o;break e}nl=s}}}function Il(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,i,n){return new Il(e,t,i,n)}function _l(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var i=e.alternate;return null===i?((i=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=31457280&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Bl(e,t){e.flags&=31457282;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zl(e,t,i,n,o,s){var a=0;if(n=e,"function"===typeof e)_l(e)&&(a=1);else if("string"===typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,Q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case u:return Vl(i.children,o,s,t);case h:a=8,o|=24;break;case p:return(e=Ll(12,i,t,2|o)).elementType=p,e.lanes=s,e;case b:return(e=Ll(13,i,t,o)).elementType=b,e.lanes=s,e;case w:return(e=Ll(19,i,t,o)).elementType=w,e.lanes=s,e;case C:return Hl(i,o,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case g:case f:a=10;break e;case m:a=9;break e;case v:a=11;break e;case y:a=14;break e;case x:a=16,n=null;break e}a=29,i=Error(r(130,null===e?"null":typeof e,"")),n=null}return(t=Ll(a,i,t,o)).elementType=e,t.type=n,t.lanes=s,t}function Vl(e,t,i,n){return(e=Ll(7,e,n,t)).lanes=i,e}function Hl(e,t,i,n){(e=Ll(22,e,n,t)).elementType=C,e.lanes=i;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(r(456));if(0===(2&o._pendingVisibility)){var t=Dn(e,2);null!==t&&(o._pendingVisibility|=2,jd(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(r(456));if(0!==(2&o._pendingVisibility)){var t=Dn(e,2);null!==t&&(o._pendingVisibility&=-3,jd(t,e,2))}}};return e.stateNode=o,e}function Gl(e,t,i){return(e=Ll(6,e,null,t)).lanes=i,e}function Wl(e,t,i){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e){e.flags|=4}function ql(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Nu(t)){if(null!==(t=Do.current)&&((4194176&od)===od?null!==No:(62914560&od)!==od&&0===(536870912&od)||t!==No))throw po=lo,ao;e.flags|=8192}}function Kl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,fd|=t)}function Yl(e,t){if(!$n)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=31457280&o.subtreeFlags,n|=31457280&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function $l(e,t,i){var n=t.pendingProps;switch(Kn(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Ql(t),null;case 3:return i=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(zo),ee(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(no(t)?Ul(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Xn&&(Id(Xn),Xn=null))),Ql(t),null;case 26:return i=t.memoizedState,null===e?(Ul(t),null!==i?(Ql(t),ql(t,i)):(Ql(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Ul(t),Ql(t),ql(t,i)):(Ql(t),t.flags&=-16777217):(e.memoizedProps!==n&&Ul(t),Ql(t),t.flags&=-16777217),null;case 27:ie(t),i=X.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Ul(t);else{if(!n){if(null===t.stateNode)throw Error(r(166));return Ql(t),null}e=Q.current,no(t)?to(t):(e=cu(o,n,i),t.stateNode=e,Ul(t))}return Ql(t),null;case 5:if(ie(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Ul(t);else{if(!n){if(null===t.stateNode)throw Error(r(166));return Ql(t),null}if(e=Q.current,no(t))to(t);else{switch(o=$c(X.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?o.createElement(i,{is:n.is}):o.createElement(i)}}e[Oe]=t,e[Be]=n;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Kc(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ul(t)}}return Ql(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Ul(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(r(166));if(e=X.current,no(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,null!==(o=Yn))switch(o.tag){case 27:case 5:n=o.memoizedProps}e[Oe]=t,(e=!!(e.nodeValue===i||null!==n&&!0===n.suppressHydrationWarning||Gc(e.nodeValue,i)))||eo(t)}else(e=$c(e).createTextNode(n))[Oe]=t,t.stateNode=e}return Ql(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=no(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[Oe]=t}else oo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ql(t),o=!1}else null!==Xn&&(Id(Xn),Xn=null),o=!0;if(!o)return 256&t.flags?(Ao(t),t):(Ao(t),null)}if(Ao(t),0!==(128&t.flags))return t.lanes=i,t;if(i=null!==n,e=null!==e&&null!==e.memoizedState,i){o=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(o=n.alternate.memoizedState.cachePool.pool);var s=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(s=n.memoizedState.cachePool.pool),s!==o&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),Kl(t,t.updateQueue),Ql(t),null;case 4:return ee(),null===e&&jc(t.stateNode.containerInfo),Ql(t),null;case 10:return ya(t.type),Ql(t),null;case 19:if(K(Io),null===(o=t.memoizedState))return Ql(t),null;if(n=0!==(128&t.flags),null===(s=o.rendering))if(n)Yl(o,!1);else{if(0!==ud||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Lo(e))){for(t.flags|=128,Yl(o,!1),e=s.updateQueue,t.updateQueue=e,Kl(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)Bl(i,e),i=i.sibling;return Y(Io,1&Io.current|2),t.child}e=e.sibling}null!==o.tail&&le()>xd&&(t.flags|=128,n=!0,Yl(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Lo(s))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Kl(t,e),Yl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!$n)return Ql(t),null}else 2*le()-o.renderingStartTime>xd&&536870912!==i&&(t.flags|=128,n=!0,Yl(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=o.last)?e.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=le(),t.sibling=null,e=Io.current,Y(Io,n?1&e|2:1&e),t):(Ql(t),null);case 22:case 23:return Ao(t),Fo(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&i)&&0===(128&t.flags)&&(Ql(t),6&t.subtreeFlags&&(t.flags|=8192)):Ql(t),null!==(i=t.updateQueue)&&Kl(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),null!==e&&K(Qo),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ya(zo),Ql(t),null;case 25:return null}throw Error(r(156,t.tag))}function Xl(e,t){switch(Kn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(zo),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ie(t),null;case 13:if(Ao(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));oo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return K(Io),null;case 4:return ee(),null;case 10:return ya(t.type),null;case 22:case 23:return Ao(t),Fo(),null!==e&&K(Qo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ya(zo),null;default:return null}}function Jl(e,t){switch(Kn(t),t.tag){case 3:ya(zo),ee();break;case 26:case 27:case 5:ie(t);break;case 4:ee();break;case 13:Ao(t);break;case 19:K(Io);break;case 10:ya(t.type);break;case 22:case 23:Ao(t),Fo(),null!==e&&K(Qo);break;case 24:ya(zo)}}var Zl={getCacheForType:function(e){var t=Pa(zo),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i}},ed="function"===typeof WeakMap?WeakMap:Map,td=0,id=null,nd=null,od=0,sd=0,rd=null,ad=!1,ld=!1,dd=!1,cd=0,ud=0,hd=0,pd=0,gd=0,md=0,fd=0,vd=null,bd=null,wd=!1,yd=0,xd=1/0,Cd=null,Sd=null,Rd=!1,kd=null,Pd=0,Ed=0,Fd=null,Dd=0,Nd=null;function Md(){if(0!==(2&td)&&0!==od)return od&-od;if(null!==N.T){return 0!==Uo?Uo:Cc()}return Le()}function Td(){0===md&&(md=0===(536870912&od)||$n?De():536870912);var e=Do.current;return null!==e&&(e.flags|=32),md}function jd(e,t,i){(e===id&&2===sd||null!==e.cancelPendingCommit)&&(Vd(e,0),Od(e,od,md,!1)),Te(e,i),0!==(2&td)&&e===id||(e===id&&(0===(2&td)&&(pd|=i),4===ud&&Od(e,od,md,!1)),fc(e))}function Ad(e,t,i){if(0!==(6&td))throw Error(r(327));for(var n=!i&&0===(60&t)&&0===(t&e.expiredLanes)||Ee(e,t),o=n?function(e,t){var i=td;td|=2;var n=Gd(),o=Wd();id!==e||od!==t?(Cd=null,xd=le()+500,Vd(e,t)):ld=Ee(e,t);e:for(;;)try{if(0!==sd&&null!==nd){t=nd;var s=rd;t:switch(sd){case 1:sd=0,rd=null,Xd(e,t,s,1);break;case 2:if(co(s)){sd=0,rd=null,$d(t);break}t=function(){2===sd&&id===e&&(sd=7),fc(e)},s.then(t,t);break e;case 3:sd=7;break e;case 4:sd=5;break e;case 7:co(s)?(sd=0,rd=null,$d(t)):(sd=0,rd=null,Xd(e,t,s,7));break;case 5:var a=null;switch(nd.tag){case 26:a=nd.memoizedState;case 5:case 27:var l=nd;if(!a||Nu(a)){sd=0,rd=null;var d=l.sibling;if(null!==d)nd=d;else{var c=l.return;null!==c?(nd=c,Jd(c)):nd=null}break t}}sd=0,rd=null,Xd(e,t,s,5);break;case 6:sd=0,rd=null,Xd(e,t,s,6);break;case 8:zd(),ud=6;break e;default:throw Error(r(462))}}Yd();break}catch(u){Hd(e,u)}return ba=va=null,N.H=n,N.A=o,td=i,null!==nd?0:(id=null,od=0,Pn(),ud)}(e,t):qd(e,t,!0),s=n;;){if(0===o){ld&&!n&&Od(e,t,0,!1);break}if(6===o)Od(e,t,0,!ad);else{if(i=e.current.alternate,s&&!_d(i)){o=qd(e,t,!1),s=!1;continue}if(2===o){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;o=vd;var d=l.current.memoizedState.isDehydrated;if(d&&(Vd(l,a).flags|=256),2!==(a=qd(l,a,!1))){if(dd&&!d){l.errorRecoveryDisabledLanes|=s,pd|=s,o=4;break e}s=bd,bd=o,null!==s&&Id(s)}o=a}if(s=!1,2!==o)continue}}if(1===o){Vd(e,0),Od(e,t,0,!0);break}e:{switch(n=e,o){case 0:case 1:throw Error(r(345));case 4:if((4194176&t)===t){Od(n,t,md,!ad);break e}break;case 2:bd=null;break;case 3:case 5:break;default:throw Error(r(329))}if(n.finishedWork=i,n.finishedLanes=t,(62914560&t)===t&&10<(s=yd+300-le())){if(Od(n,t,md,!ad),0!==Pe(n,0))break e;n.timeoutHandle=tu(Ld.bind(null,n,i,bd,Cd,wd,t,md,pd,fd,ad,2,-0,0),s)}else Ld(n,i,bd,Cd,wd,t,md,pd,fd,ad,0,-0,0)}}break}fc(e)}function Id(e){null===bd?bd=e:bd.push.apply(bd,e)}function Ld(e,t,i,n,o,s,a,l,d,c,u,h,p){var g=t.subtreeFlags;if((8192&g||16785408===(16785408&g))&&(Mu={stylesheets:null,count:0,unsuspend:Tu},Dl(t),null!==(t=function(){if(null===Mu)throw Error(r(475));var e=Mu;return e.stylesheets&&0===e.count&&Iu(e,e.stylesheets),0<e.count?function(t){var i=setTimeout((function(){if(e.stylesheets&&Iu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}())))return e.cancelPendingCommit=t(ec.bind(null,e,i,n,o,a,l,d,1,h,p)),void Od(e,s,a,!c);ec(e,i,n,o,a,l,d,u,h,p)}function _d(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var n=0;n<i.length;n++){var o=i[n],s=o.getSnapshot;o=o.value;try{if(!Ki(s(),o))return!1}catch(r){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Od(e,t,i,n){t&=~gd,t&=~pd,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var o=t;0<o;){var s=31-ye(o),r=1<<s;n[s]=-1,o&=~r}0!==i&&je(e,i,t)}function Bd(){return 0!==(6&td)||(vc(0,!1),!1)}function zd(){if(null!==nd){if(0===sd)var e=nd.return;else ba=va=null,bs(e=nd),mo=null,fo=0,e=nd;for(;null!==e;)Jl(e.alternate,e),e=e.return;nd=null}}function Vd(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,iu(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),zd(),id=e,nd=i=Ol(e.current,null),od=t,sd=0,rd=null,ad=!1,ld=Ee(e,t),dd=!1,fd=md=gd=pd=hd=ud=0,bd=vd=null,wd=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var o=31-ye(n),s=1<<o;t|=e[o],n&=~s}return cd=t,Pn(),i}function Hd(e,t){es=null,N.H=kr,t===ro?(t=go(),sd=3):t===ao?(t=go(),sd=4):sd=t===Wr?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,rd=t,null===nd&&(ud=1,Br(e,An(t,e.current)))}function Gd(){var e=N.H;return N.H=kr,null===e?kr:e}function Wd(){var e=N.A;return N.A=Zl,e}function Ud(){ud=4,ad||(4194176&od)!==od&&null!==Do.current||(ld=!0),0===(134217727&hd)&&0===(134217727&pd)||null===id||Od(id,od,md,!1)}function qd(e,t,i){var n=td;td|=2;var o=Gd(),s=Wd();id===e&&od===t||(Cd=null,Vd(e,t)),t=!1;var r=ud;e:for(;;)try{if(0!==sd&&null!==nd){var a=nd,l=rd;switch(sd){case 8:zd(),r=6;break e;case 3:case 2:case 6:null===Do.current&&(t=!0);var d=sd;if(sd=0,rd=null,Xd(e,a,l,d),i&&ld){r=0;break e}break;default:d=sd,sd=0,rd=null,Xd(e,a,l,d)}}Kd(),r=ud;break}catch(c){Hd(e,c)}return t&&e.shellSuspendCounter++,ba=va=null,td=n,N.H=o,N.A=s,null===nd&&(id=null,od=0,Pn()),r}function Kd(){for(;null!==nd;)Qd(nd)}function Yd(){for(;null!==nd&&!re();)Qd(nd)}function Qd(e){var t=ma(e.alternate,e,cd);e.memoizedProps=e.pendingProps,null===t?Jd(e):nd=t}function $d(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=ea(i,t,t.pendingProps,t.type,void 0,od);break;case 11:t=ea(i,t,t.pendingProps,t.type.render,t.ref,od);break;case 5:bs(t);default:Jl(i,t),t=ma(i,t=nd=Bl(t,cd),cd)}e.memoizedProps=e.pendingProps,null===t?Jd(e):nd=t}function Xd(e,t,i,n){ba=va=null,bs(t),mo=null,fo=0;var o=t.return;try{if(function(e,t,i,n,o){if(i.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=i.alternate)&&Sa(t,i,o,!0),null!==(i=Do.current)){switch(i.tag){case 13:return null===No?Ud():null===i.alternate&&0===ud&&(ud=3),i.flags&=-257,i.flags|=65536,i.lanes=o,n===lo?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([n]):t.add(n),sc(e,n,o)),!1;case 22:return i.flags|=65536,n===lo?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([n]):i.add(n),sc(e,n,o)),!1}throw Error(r(435,i.tag))}return sc(e,n,o),Ud(),!1}if($n)return null!==(t=Do.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,n!==Zn&&so(An(e=Error(r(422),{cause:n}),i))):(n!==Zn&&so(An(t=Error(r(423),{cause:n}),i)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,n=An(n,i),Ia(e,o=Vr(e.stateNode,n,o)),4!==ud&&(ud=2)),!1;var s=Error(r(520),{cause:n});if(s=An(s,i),null===vd?vd=[s]:vd.push(s),4!==ud&&(ud=2),null===t)return!0;n=An(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=o&-o,i.lanes|=e,Ia(i,e=Vr(i.stateNode,n,e)),!1;case 1:if(t=i.type,s=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Sd||!Sd.has(s))))return i.flags|=65536,o&=-o,i.lanes|=o,Gr(o=Hr(o),e,i,n),Ia(i,o),!1}i=i.return}while(null!==i);return!1}(e,o,t,i,od))return ud=1,Br(e,An(i,e.current)),void(nd=null)}catch(s){if(null!==o)throw nd=o,s;return ud=1,Br(e,An(i,e.current)),void(nd=null)}32768&t.flags?($n||1===n?e=!0:ld||0!==(536870912&od)?e=!1:(ad=e=!0,(2===n||3===n||6===n)&&(null!==(n=Do.current)&&13===n.tag&&(n.flags|=16384))),Zd(t,e)):Jd(t)}function Jd(e){var t=e;do{if(0!==(32768&t.flags))return void Zd(t,ad);e=t.return;var i=$l(t.alternate,t,cd);if(null!==i)return void(nd=i);if(null!==(t=t.sibling))return void(nd=t);nd=t=e}while(null!==t);0===ud&&(ud=5)}function Zd(e,t){do{var i=Xl(e.alternate,e);if(null!==i)return i.flags&=32767,void(nd=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(nd=e);nd=e=i}while(null!==e);ud=6,nd=null}function ec(e,t,i,n,o,s,a,l,d,c){var u=N.T,h=H.p;try{H.p=2,N.T=null,function(e,t,i,n,o,s,a,l){do{ic()}while(null!==kd);if(0!==(6&td))throw Error(r(327));var d=e.finishedWork;if(n=e.finishedLanes,null===d)return null;if(e.finishedWork=null,e.finishedLanes=0,d===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=d.lanes|d.childLanes;if(function(e,t,i,n,o,s){var r=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,d=e.hiddenUpdates;for(i=r&~i;0<i;){var c=31-ye(i),u=1<<c;a[c]=0,l[c]=-1;var h=d[c];if(null!==h)for(d[c]=null,c=0;c<h.length;c++){var p=h[c];null!==p&&(p.lane&=-536870913)}i&=~u}0!==n&&je(e,n,0),0!==s&&0===o&&0!==e.tag&&(e.suspendedLanes|=s&~(r&~t))}(e,n,c|=kn,s,a,l),e===id&&(nd=id=null,od=0),0===(10256&d.subtreeFlags)&&0===(10256&d.flags)||Rd||(Rd=!0,Ed=c,Fd=i,function(e,t){oe(e,t)}(he,(function(){return ic(),null}))),i=0!==(15990&d.flags),0!==(15990&d.subtreeFlags)||i?(i=N.T,N.T=null,s=H.p,H.p=2,a=td,td|=4,function(e,t){if(e=e.containerInfo,Yc=Uu,Zi(e=Ji(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var o=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch(f){i=null;break e}var a=0,l=-1,d=-1,c=0,u=0,h=e,p=null;t:for(;;){for(var g;h!==i||0!==o&&3!==h.nodeType||(l=a+o),h!==s||0!==n&&3!==h.nodeType||(d=a+n),3===h.nodeType&&(a+=h.nodeValue.length),null!==(g=h.firstChild);)p=h,h=g;for(;;){if(h===e)break t;if(p===i&&++c===o&&(l=a),p===s&&++u===n&&(d=a),null!==(g=h.nextSibling))break;p=(h=p).parentNode}h=g}i=-1===l||-1===d?null:{start:l,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(Qc={focusedElem:e,selectionRange:i},Uu=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(s=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,i=t,o=s.memoizedProps,s=s.memoizedState,n=i.stateNode;try{var m=Ar(i.type,o,(i.elementType,i.type));e=n.getSnapshotBeforeUpdate(m,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(v){oc(i,i.return,v)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))au(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":au(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=ol,ol=!1}(e,d),ml(d,e),en(Qc,e.containerInfo),Uu=!!Yc,Qc=Yc=null,e.current=d,sl(e,d.alternate,d),ae(),td=a,H.p=s,N.T=i):e.current=d,Rd?(Rd=!1,kd=e,Pd=n):tc(e,c),c=e.pendingLanes,0===c&&(Sd=null),function(e){if(be&&"function"===typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ve,e,void 0,128===(128&e.current.flags))}catch(t){}}(d.stateNode),fc(e),null!==t)for(o=e.onRecoverableError,d=0;d<t.length;d++)c=t[d],o(c.value,{componentStack:c.stack});0!==(3&Pd)&&ic(),c=e.pendingLanes,0!==(4194218&n)&&0!==(42&c)?e===Nd?Dd++:(Dd=0,Nd=e):Dd=0,vc(0,!1)}(e,t,i,n,h,o,s,a)}finally{N.T=u,H.p=h}}function tc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ho(t)))}function ic(){if(null!==kd){var e=kd,t=Ed;Ed=0;var i=Ie(Pd),n=N.T,o=H.p;try{if(H.p=32>i?32:i,N.T=null,null===kd)var s=!1;else{i=Fd,Fd=null;var a=kd,l=Pd;if(kd=null,Pd=0,0!==(6&td))throw Error(r(331));var d=td;if(td|=4,Tl(a.current),Rl(a,a.current,l,i),td=d,vc(0,!1),be&&"function"===typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ve,a)}catch(c){}s=!0}return s}finally{H.p=o,N.T=n,tc(e,t)}}return!1}function nc(e,t,i){t=An(i,t),null!==(e=ja(e,t=Vr(e.stateNode,t,2),2))&&(Te(e,2),fc(e))}function oc(e,t,i){if(3===e.tag)nc(e,e,i);else for(;null!==t;){if(3===t.tag){nc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Sd||!Sd.has(n))){e=An(i,e),null!==(n=ja(t,i=Hr(2),2))&&(Gr(i,n,t,e),Te(n,2),fc(n));break}}t=t.return}}function sc(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new ed;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(i)||(dd=!0,o.add(i),e=rc.bind(null,e,t,i),t.then(e,e))}function rc(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,id===e&&(od&i)===i&&(4===ud||3===ud&&(62914560&od)===od&&300>le()-yd?0===(2&td)&&Vd(e,0):gd|=i,fd===od&&(fd=0)),fc(e)}function ac(e,t){0===t&&(t=Ne()),null!==(e=Dn(e,t))&&(Te(e,t),fc(e))}function lc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),ac(e,i)}function dc(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(i=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==n&&n.delete(t),ac(e,i)}var cc=null,uc=null,hc=!1,pc=!1,gc=!1,mc=0;function fc(e){var t;e!==uc&&null===e.next&&(null===uc?cc=uc=e:uc=uc.next=e),pc=!0,hc||(hc=!0,t=bc,ou((function(){0!==(6&td)?oe(ce,t):t()})))}function vc(e,t){if(!gc&&pc){gc=!0;do{for(var i=!1,n=cc;null!==n;){if(!t)if(0!==e){var o=n.pendingLanes;if(0===o)var s=0;else{var r=n.suspendedLanes,a=n.pingedLanes;s=(1<<31-ye(42|e)+1)-1,s=201326677&(s&=o&~(r&~a))?201326677&s|1:s?2|s:0}0!==s&&(i=!0,xc(n,s))}else s=od,0===(3&(s=Pe(n,n===id?s:0)))||Ee(n,s)||(i=!0,xc(n,s));n=n.next}}while(i);gc=!1}}function bc(){pc=hc=!1;var e=0;0!==mc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==eu&&(eu=e,!0);return eu=null,!1}()&&(e=mc),mc=0);for(var t=le(),i=null,n=cc;null!==n;){var o=n.next,s=wc(n,t);0===s?(n.next=null,null===i?cc=o:i.next=o,null===o&&(uc=i)):(i=n,(0!==e||0!==(3&s))&&(pc=!0)),n=o}vc(e,!1)}function wc(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var r=31-ye(s),a=1<<r,l=o[r];-1===l?0!==(a&i)&&0===(a&n)||(o[r]=Fe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(i=od,i=Pe(e,e===(t=id)?i:0),n=e.callbackNode,0===i||e===t&&2===sd||null!==e.cancelPendingCommit)return null!==n&&null!==n&&se(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||Ee(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==n&&se(n),Ie(i)){case 2:case 8:i=ue;break;case 32:default:i=he;break;case 268435456:i=ge}return n=yc.bind(null,e),i=oe(i,n),e.callbackPriority=t,e.callbackNode=i,t}return null!==n&&null!==n&&se(n),e.callbackPriority=2,e.callbackNode=null,2}function yc(e,t){var i=e.callbackNode;if(ic()&&e.callbackNode!==i)return null;var n=od;return 0===(n=Pe(e,e===id?n:0))?null:(Ad(e,n,t),wc(e,le()),null!=e.callbackNode&&e.callbackNode===i?yc.bind(null,e):null)}function xc(e,t){if(ic())return null;Ad(e,t,!0)}function Cc(){return 0===mc&&(mc=De()),mc}function Sc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Dt(""+e)}function Rc(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var kc=0;kc<xn.length;kc++){var Pc=xn[kc];Cn(Pc.toLowerCase(),"on"+(Pc[0].toUpperCase()+Pc.slice(1)))}Cn(pn,"onAnimationEnd"),Cn(gn,"onAnimationIteration"),Cn(mn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(fn,"onTransitionRun"),Cn(vn,"onTransitionStart"),Cn(bn,"onTransitionCancel"),Cn(wn,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ec));function Dc(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],o=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var r=n.length-1;0<=r;r--){var a=n[r],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=d;try{s(o)}catch(c){Ir(c)}o.currentTarget=null,s=l}else for(r=0;r<n.length;r++){if(l=(a=n[r]).instance,d=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=d;try{s(o)}catch(c){Ir(c)}o.currentTarget=null,s=l}}}}function Nc(e,t){var i=t[Ve];void 0===i&&(i=t[Ve]=new Set);var n=e+"__bubble";i.has(n)||(Ac(t,e,2,!1),i.add(n))}function Mc(e,t,i){var n=0;t&&(n|=4),Ac(i,e,n,t)}var Tc="_reactListening"+Math.random().toString(36).slice(2);function jc(e){if(!e[Tc]){e[Tc]=!0,Je.forEach((function(t){"selectionchange"!==t&&(Fc.has(t)||Mc(t,!1,e),Mc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Tc]||(t[Tc]=!0,Mc("selectionchange",!1,t))}}function Ac(e,t,i,n){switch(Ju(t)){case 2:var o=qu;break;case 8:o=Ku;break;default:o=Yu}i=o.bind(null,t,i,e),o=void 0,!Ot||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,i,{capture:!0,passive:o}):e.addEventListener(t,i,!0):void 0!==o?e.addEventListener(t,i,{passive:o}):e.addEventListener(t,i,!1)}function Ic(e,t,i,n,o){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var r=n.tag;if(3===r||4===r){var a=n.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===r)for(r=n.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;r=r.return}for(;null!==a;){if(null===(r=Ke(a)))return;if(5===(l=r.tag)||6===l||26===l||27===l){n=s=r;continue e}a=a.parentNode}}n=n.return}Lt((function(){var n=s,o=Mt(i),r=[];e:{var a=yn.get(e);if(void 0!==a){var l=Jt,d=e;switch(e){case"keypress":if(0===Wt(i))break e;case"keydown":case"keyup":l=pi;break;case"focusin":d="focus",l=oi;break;case"focusout":d="blur",l=oi;break;case"beforeblur":case"afterblur":l=oi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=mi;break;case pn:case gn:case mn:l=si;break;case wn:l=fi;break;case"scroll":case"scrollend":l=ei;break;case"wheel":l=vi;break;case"copy":case"cut":case"paste":l=ri;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=gi;break;case"toggle":case"beforetoggle":l=bi}var c=0!==(4&t),u=!c&&("scroll"===e||"scrollend"===e),h=c?null!==a?a+"Capture":null:a;c=[];for(var p,g=n;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===h||null!=(m=_t(g,h))&&c.push(Lc(g,m,p)),u)break;g=g.return}0<c.length&&(a=new l(a,d,null,i,o),r.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===Nt||!(d=i.relatedTarget||i.fromElement)||!Ke(d)&&!d[ze])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(d=(d=i.relatedTarget||i.toElement)?Ke(d):null)&&(u=_(d),c=d.tag,d!==u||5!==c&&27!==c&&6!==c)&&(d=null)):(l=null,d=n),l!==d)){if(c=ii,m="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(c=gi,m="onPointerLeave",h="onPointerEnter",g="pointer"),u=null==l?a:Qe(l),p=null==d?a:Qe(d),(a=new c(m,g+"leave",l,i,o)).target=u,a.relatedTarget=p,m=null,Ke(o)===n&&((c=new c(h,g+"enter",d,i,o)).target=p,c.relatedTarget=u,m=c),u=m,l&&d)e:{for(h=d,g=0,p=c=l;p;p=Oc(p))g++;for(p=0,m=h;m;m=Oc(m))p++;for(;0<g-p;)c=Oc(c),g--;for(;0<p-g;)h=Oc(h),p--;for(;g--;){if(c===h||null!==h&&c===h.alternate)break e;c=Oc(c),h=Oc(h)}c=null}else c=null;null!==l&&Bc(r,a,l,c,!1),null!==d&&null!==u&&Bc(r,u,d,c,!0)}if("select"===(l=(a=n?Qe(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=Li;else if(Ni(a))if(_i)f=qi;else{f=Wi;var v=Gi}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?n&&Pt(n.elementType)&&(f=Li):f=Ui;switch(f&&(f=f(e,n))?Mi(r,f,i,o):(v&&v(e,a,n),"focusout"===e&&n&&"number"===a.type&&null!=n.memoizedProps.value&&bt(a,"number",a.value)),v=n?Qe(n):window,e){case"focusin":(Ni(v)||"true"===v.contentEditable)&&(nn=v,on=n,sn=null);break;case"focusout":sn=on=nn=null;break;case"mousedown":rn=!0;break;case"contextmenu":case"mouseup":case"dragend":rn=!1,an(r,i,o);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":an(r,i,o)}var b;if(yi)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Fi?Pi(e,i)&&(w="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(w="onCompositionStart");w&&(Si&&"ko"!==i.locale&&(Fi||"onCompositionStart"!==w?"onCompositionEnd"===w&&Fi&&(b=Gt()):(Vt="value"in(zt=o)?zt.value:zt.textContent,Fi=!0)),0<(v=_c(n,w)).length&&(w=new ai(w,e,null,i,o),r.push({event:w,listeners:v}),b?w.data=b:null!==(b=Ei(i))&&(w.data=b))),(b=Ci?function(e,t){switch(e){case"compositionend":return Ei(t);case"keypress":return 32!==t.which?null:(ki=!0,Ri);case"textInput":return(e=t.data)===Ri&&ki?null:e;default:return null}}(e,i):function(e,t){if(Fi)return"compositionend"===e||!yi&&Pi(e,t)?(e=Gt(),Ht=Vt=zt=null,Fi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Si&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(w=_c(n,"onBeforeInput")).length&&(v=new ai("onBeforeInput","beforeinput",null,i,o),r.push({event:v,listeners:w}),v.data=b)),function(e,t,i,n,o){if("submit"===t&&i&&i.stateNode===o){var s=Sc((o[Be]||null).action),r=n.submitter;r&&null!==(t=(t=r[Be]||null)?Sc(t.formAction):r.getAttribute("formAction"))&&(s=t,r=null);var a=new Jt("action","action",null,n,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==mc){var e=r?Rc(o,r):new FormData(o);ur(i,{pending:!0,data:e,method:o.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=r?Rc(o,r):new FormData(o),ur(i,{pending:!0,data:e,method:o.method,action:s},s,e))},currentTarget:o}]})}}(r,e,n,i,o)}Dc(r,t)}))}function Lc(e,t,i){return{instance:e,listener:t,currentTarget:i}}function _c(e,t){for(var i=t+"Capture",n=[];null!==e;){var o=e,s=o.stateNode;5!==(o=o.tag)&&26!==o&&27!==o||null===s||(null!=(o=_t(e,i))&&n.unshift(Lc(e,o,s)),null!=(o=_t(e,t))&&n.push(Lc(e,o,s))),e=e.return}return n}function Oc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Bc(e,t,i,n,o){for(var s=t._reactName,r=[];null!==i&&i!==n;){var a=i,l=a.alternate,d=a.stateNode;if(a=a.tag,null!==l&&l===n)break;5!==a&&26!==a&&27!==a||null===d||(l=d,o?null!=(d=_t(i,s))&&r.unshift(Lc(i,d,l)):o||null!=(d=_t(i,s))&&r.push(Lc(i,d,l))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}var zc=/\r\n?/g,Vc=/\u0000|\uFFFD/g;function Hc(e){return("string"===typeof e?e:""+e).replace(zc,"\n").replace(Vc,"")}function Gc(e,t){return t=Hc(t),Hc(e)===t}function Wc(){}function Uc(e,t,i,n,o,s){switch(i){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||Ct(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&Ct(e,""+n);break;case"className":at(e,"class",n);break;case"tabIndex":at(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,i,n);break;case"style":kt(e,n,s);break;case"data":if("object"!==t){at(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=Dt(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===i?("input"!==t&&Uc(e,t,"name",o.name,o,null),Uc(e,t,"formEncType",o.formEncType,o,null),Uc(e,t,"formMethod",o.formMethod,o,null),Uc(e,t,"formTarget",o.formTarget,o,null)):(Uc(e,t,"encType",o.encType,o,null),Uc(e,t,"method",o.method,o,null),Uc(e,t,"target",o.target,o,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=Dt(""+n),e.setAttribute(i,n);break;case"onClick":null!=n&&(e.onclick=Wc);break;case"onScroll":null!=n&&Nc("scroll",e);break;case"onScrollEnd":null!=n&&Nc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(r(61));if(null!=(i=n.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}i=Dt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===n?e.setAttribute(i,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":Nc("beforetoggle",e),Nc("toggle",e),rt(e,"popover",n);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":rt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&rt(e,i=Et.get(i)||i,n)}}function qc(e,t,i,n,o,s){switch(i){case"style":kt(e,n,s);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(r(61));if(null!=(i=n.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=i}}break;case"children":"string"===typeof n?Ct(e,n):("number"===typeof n||"bigint"===typeof n)&&Ct(e,""+n);break;case"onScroll":null!=n&&Nc("scroll",e);break;case"onScrollEnd":null!=n&&Nc("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(o=i.endsWith("Capture"),t=i.slice(2,o?i.length-7:void 0),"function"===typeof(s=null!=(s=e[Be]||null)?s[i]:null)&&e.removeEventListener(t,s,o),"function"!==typeof n)?i in e?e[i]=n:!0===n?e.setAttribute(i,""):rt(e,i,n):("function"!==typeof s&&null!==s&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,o)))}}function Kc(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nc("error",e),Nc("load",e);var n,o=!1,s=!1;for(n in i)if(i.hasOwnProperty(n)){var a=i[n];if(null!=a)switch(n){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Uc(e,t,n,a,i,null)}}return s&&Uc(e,t,"srcSet",i.srcSet,i,null),void(o&&Uc(e,t,"src",i.src,i,null));case"input":Nc("invalid",e);var l=n=a=s=null,d=null,c=null;for(o in i)if(i.hasOwnProperty(o)){var u=i[o];if(null!=u)switch(o){case"name":s=u;break;case"type":a=u;break;case"checked":d=u;break;case"defaultChecked":c=u;break;case"value":n=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(r(137,t));break;default:Uc(e,t,o,u,i,null)}}return vt(e,n,l,d,c,a,s,!1),void ut(e);case"select":for(s in Nc("invalid",e),o=a=n=null,i)if(i.hasOwnProperty(s)&&null!=(l=i[s]))switch(s){case"value":n=l;break;case"defaultValue":a=l;break;case"multiple":o=l;default:Uc(e,t,s,l,i,null)}return t=n,i=a,e.multiple=!!o,void(null!=t?wt(e,!!o,t,!1):null!=i&&wt(e,!!o,i,!0));case"textarea":for(a in Nc("invalid",e),n=s=o=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":o=l;break;case"defaultValue":s=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:Uc(e,t,a,l,i,null)}return xt(e,o,s,n),void ut(e);case"option":for(d in i)if(i.hasOwnProperty(d)&&null!=(o=i[d]))if("selected"===d)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else Uc(e,t,d,o,i,null);return;case"dialog":Nc("cancel",e),Nc("close",e);break;case"iframe":case"object":Nc("load",e);break;case"video":case"audio":for(o=0;o<Ec.length;o++)Nc(Ec[o],e);break;case"image":Nc("error",e),Nc("load",e);break;case"details":Nc("toggle",e);break;case"embed":case"source":case"link":Nc("error",e),Nc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&null!=(o=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Uc(e,t,c,o,i,null)}return;default:if(Pt(t)){for(u in i)i.hasOwnProperty(u)&&(void 0!==(o=i[u])&&qc(e,t,u,o,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(o=i[l])&&Uc(e,t,l,o,i,null))}var Yc=null,Qc=null;function $c(e){return 9===e.nodeType?e:e.ownerDocument}function Xc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jc(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Zc(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var eu=null;var tu="function"===typeof setTimeout?setTimeout:void 0,iu="function"===typeof clearTimeout?clearTimeout:void 0,nu="function"===typeof Promise?Promise:void 0,ou="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nu?function(e){return nu.resolve(null).then(e).catch(su)}:tu;function su(e){setTimeout((function(){throw e}))}function ru(e,t){var i=t,n=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&8===o.nodeType)if("/$"===(i=o.data)){if(0===n)return e.removeChild(o),void fh(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=o}while(i);fh(t)}function au(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":au(i),qe(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function du(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}function cu(e,t,i){switch(t=$c(i),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}var uu=new Map,hu=new Set;function pu(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var gu=H.d;H.d={f:function(){var e=gu.f(),t=Bd();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?pr(t):gu.r(e)},D:function(e){gu.D(e),fu("dns-prefetch",e,null)},C:function(e,t){gu.C(e,t),fu("preconnect",e,t)},L:function(e,t,i){gu.L(e,t,i);var n=mu;if(n&&e&&t){var o='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(o+='[imagesrcset="'+mt(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(o+='[imagesizes="'+mt(i.imageSizes)+'"]')):o+='[href="'+mt(e)+'"]';var s=o;switch(t){case"style":s=bu(e);break;case"script":s=xu(e)}uu.has(s)||(e=M({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),uu.set(s,e),null!==n.querySelector(o)||"style"===t&&n.querySelector(wu(s))||"script"===t&&n.querySelector(Cu(s))||(Kc(t=n.createElement("link"),"link",e),Xe(t),n.head.appendChild(t)))}},m:function(e,t){gu.m(e,t);var i=mu;if(i&&e){var n=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+mt(n)+'"][href="'+mt(e)+'"]',s=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=xu(e)}if(!uu.has(s)&&(e=M({rel:"modulepreload",href:e},t),uu.set(s,e),null===i.querySelector(o))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Cu(s)))return}Kc(n=i.createElement("link"),"link",e),Xe(n),i.head.appendChild(n)}}},X:function(e,t){gu.X(e,t);var i=mu;if(i&&e){var n=$e(i).hoistableScripts,o=xu(e),s=n.get(o);s||((s=i.querySelector(Cu(o)))||(e=M({src:e,async:!0},t),(t=uu.get(o))&&Pu(e,t),Xe(s=i.createElement("script")),Kc(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(o,s))}},S:function(e,t,i){gu.S(e,t,i);var n=mu;if(n&&e){var o=$e(n).hoistableStyles,s=bu(e);t=t||"default";var r=o.get(s);if(!r){var a={loading:0,preload:null};if(r=n.querySelector(wu(s)))a.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},i),(i=uu.get(s))&&ku(e,i);var l=r=n.createElement("link");Xe(l),Kc(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Ru(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:a},o.set(s,r)}}},M:function(e,t){gu.M(e,t);var i=mu;if(i&&e){var n=$e(i).hoistableScripts,o=xu(e),s=n.get(o);s||((s=i.querySelector(Cu(o)))||(e=M({src:e,async:!0,type:"module"},t),(t=uu.get(o))&&Pu(e,t),Xe(s=i.createElement("script")),Kc(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(o,s))}}};var mu="undefined"===typeof document?null:document;function fu(e,t,i){var n=mu;if(n&&"string"===typeof t&&t){var o=mt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof i&&(o+='[crossorigin="'+i+'"]'),hu.has(o)||(hu.add(o),e={rel:e,crossOrigin:i,href:t},null===n.querySelector(o)&&(Kc(t=n.createElement("link"),"link",e),Xe(t),n.head.appendChild(t)))}}function vu(e,t,i,n){var o,s,a,l,d=(d=X.current)?pu(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=bu(i.href),(n=(i=$e(d).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=bu(i.href);var c=$e(d).hoistableStyles,u=c.get(e);if(u||(d=d.ownerDocument||d,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=d.querySelector(wu(e)))&&!c._p&&(u.instance=c,u.state.loading=5),uu.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},uu.set(e,i),c||(o=d,s=e,a=i,l=u.state,o.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=o.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),Kc(s,"link",a),Xe(s),o.head.appendChild(s))))),t&&null===n)throw Error(r(528,""));return u}if(t&&null!==n)throw Error(r(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=xu(i),(n=(i=$e(d).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function bu(e){return'href="'+mt(e)+'"'}function wu(e){return'link[rel="stylesheet"]['+e+"]"}function yu(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function xu(e){return'[src="'+mt(e)+'"]'}function Cu(e){return"script[async]"+e}function Su(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+mt(i.href)+'"]');if(n)return t.instance=n,Xe(n),n;var o=M({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return Xe(n=(e.ownerDocument||e).createElement("style")),Kc(n,"style",o),Ru(n,i.precedence,e),t.instance=n;case"stylesheet":o=bu(i.href);var s=e.querySelector(wu(o));if(s)return t.state.loading|=4,t.instance=s,Xe(s),s;n=yu(i),(o=uu.get(o))&&ku(n,o),Xe(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Kc(s,"link",n),t.state.loading|=4,Ru(s,i.precedence,e),t.instance=s;case"script":return s=xu(i.src),(o=e.querySelector(Cu(s)))?(t.instance=o,Xe(o),o):(n=i,(o=uu.get(s))&&Pu(n=M({},i),o),Xe(o=(e=e.ownerDocument||e).createElement("script")),Kc(o,"link",n),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Ru(n,i.precedence,e));return t.instance}function Ru(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,s=o,r=0;r<n.length;r++){var a=n[r];if(a.dataset.precedence===t)s=a;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function ku(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Pu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Eu=null;function Fu(e,t,i){if(null===Eu){var n=new Map,o=Eu=new Map;o.set(i,n)}else(n=(o=Eu).get(i))||(n=new Map,o.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),o=0;o<i.length;o++){var s=i[o];if(!(s[Ue]||s[Oe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var r=s.getAttribute(t)||"";r=e+r;var a=n.get(r);a?a.push(s):n.set(r,[s])}}return n}function Du(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function Nu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Mu=null;function Tu(){}function ju(){if(this.count--,0===this.count)if(this.stylesheets)Iu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Au=null;function Iu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Au=new Map,t.forEach(Lu,e),Au=null,ju.call(e))}function Lu(e,t){if(!(4&t.state.loading)){var i=Au.get(e);if(i)var n=i.get(null);else{i=new Map,Au.set(e,i);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];"LINK"!==r.nodeName&&"not all"===r.getAttribute("media")||(i.set(r.dataset.precedence,r),n=r)}n&&i.set(null,n)}r=(o=t.instance).getAttribute("data-precedence"),(s=i.get(r)||n)===n&&i.set(null,o),i.set(r,o),this.count++,n=ju.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),s?s.parentNode.insertBefore(o,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var _u={$$typeof:f,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Ou(e,t,i,n,o,s,r,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Bu(e,t,i,n,o,s,r,a,l,d,c,u){return e=new Ou(e,t,i,r,a,l,d,u),t=1,!0===s&&(t|=24),s=Ll(3,null,null,t),e.current=s,s.stateNode=e,(t=Vo()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:i,cache:t},Na(s),e}function zu(e){return e?e=Tn:Tn}function Vu(e,t,i,n,o,s){o=zu(o),null===n.context?n.context=o:n.pendingContext=o,(n=Ta(t)).payload={element:i},null!==(s=void 0===s?null:s)&&(n.callback=s),null!==(i=ja(e,n,t))&&(jd(i,0,t),Aa(i,e,t))}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Gu(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}function Wu(e){if(13===e.tag){var t=Dn(e,67108864);null!==t&&jd(t,0,67108864),Gu(e,67108864)}}var Uu=!0;function qu(e,t,i,n){var o=N.T;N.T=null;var s=H.p;try{H.p=2,Yu(e,t,i,n)}finally{H.p=s,N.T=o}}function Ku(e,t,i,n){var o=N.T;N.T=null;var s=H.p;try{H.p=8,Yu(e,t,i,n)}finally{H.p=s,N.T=o}}function Yu(e,t,i,n){if(Uu){var o=Qu(n);if(null===o)Ic(e,t,n,$u,i),ah(e,n);else if(function(e,t,i,n,o){switch(t){case"focusin":return eh=lh(eh,e,t,i,n,o),!0;case"dragenter":return th=lh(th,e,t,i,n,o),!0;case"mouseover":return ih=lh(ih,e,t,i,n,o),!0;case"pointerover":var s=o.pointerId;return nh.set(s,lh(nh.get(s)||null,e,t,i,n,o)),!0;case"gotpointercapture":return s=o.pointerId,oh.set(s,lh(oh.get(s)||null,e,t,i,n,o)),!0}return!1}(o,e,t,i,n))n.stopPropagation();else if(ah(e,n),4&t&&-1<rh.indexOf(e)){for(;null!==o;){var s=Ye(o);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var r=ke(s.pendingLanes);if(0!==r){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var l=1<<31-ye(r);a.entanglements[1]|=l,r&=~l}fc(s),0===(6&td)&&(xd=le()+500,vc(0,!1))}}break;case 13:null!==(a=Dn(s,2))&&jd(a,0,2),Bd(),Gu(s,2)}if(null===(s=Qu(n))&&Ic(e,t,n,$u,i),s===o)break;o=s}null!==o&&n.stopPropagation()}else Ic(e,t,n,null,i)}}function Qu(e){return Xu(e=Mt(e))}var $u=null;function Xu(e){if($u=null,null!==(e=Ke(e))){var t=_(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=O(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $u=e,null}function Ju(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case ce:return 2;case ue:return 8;case he:case pe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Zu=!1,eh=null,th=null,ih=null,nh=new Map,oh=new Map,sh=[],rh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ah(e,t){switch(e){case"focusin":case"focusout":eh=null;break;case"dragenter":case"dragleave":th=null;break;case"mouseover":case"mouseout":ih=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oh.delete(t.pointerId)}}function lh(e,t,i,n,o,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[o]},null!==t&&(null!==(t=Ye(t))&&Wu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function dh(e){var t=Ke(e.target);if(null!==t){var i=_(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=O(i)))return e.blockedOn=t,void function(e,t){var i=H.p;try{return H.p=e,t()}finally{H.p=i}}(e.priority,(function(){if(13===i.tag){var e=Md(),t=Dn(i,e);null!==t&&jd(t,0,e),Gu(i,e)}}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Qu(e.nativeEvent);if(null!==i)return null!==(t=Ye(i))&&Wu(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);Nt=n,i.target.dispatchEvent(n),Nt=null,t.shift()}return!0}function uh(e,t,i){ch(e)&&i.delete(t)}function hh(){Zu=!1,null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),null!==ih&&ch(ih)&&(ih=null),nh.forEach(uh),oh.forEach(uh)}function ph(e,t){e.blockedOn===t&&(e.blockedOn=null,Zu||(Zu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hh)))}var gh=null;function mh(e){gh!==e&&(gh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,(function(){gh===e&&(gh=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],o=e[t+2];if("function"!==typeof n){if(null===Xu(n||i))continue;break}var s=Ye(i);null!==s&&(e.splice(t,3),t-=3,ur(s,{pending:!0,data:o,method:i.method,action:n},n,o))}})))}function fh(e){function t(t){return ph(t,e)}null!==eh&&ph(eh,e),null!==th&&ph(th,e),null!==ih&&ph(ih,e),nh.forEach(t),oh.forEach(t);for(var i=0;i<sh.length;i++){var n=sh[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<sh.length&&null===(i=sh[0]).blockedOn;)dh(i),null===i.blockedOn&&sh.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<i.length;n+=3){var o=i[n],s=i[n+1],r=o[Be]||null;if("function"===typeof s)r||mh(i);else if(r){var a=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[Be]||null)a=r.formAction;else if(null!==Xu(o))continue}else a=r.action;"function"===typeof a?i[n+1]=a:(i.splice(n,3),n-=3),mh(i)}}}function vh(e){this._internalRoot=e}function bh(e){this._internalRoot=e}bh.prototype.render=vh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Vu(t.current,Md(),e,t,null,null)},bh.prototype.unmount=vh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&ic(),Vu(e.current,2,null,e,null,null),Bd(),t[ze]=null}},bh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var i=0;i<sh.length&&0!==t&&t<sh[i].priority;i++);sh.splice(i,0,e),0===i&&dh(e)}};var wh=o.version;if("19.0.0"!==wh)throw Error(r(527,wh,"19.0.0"));H.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=_(e)))throw Error(r(188));return t!==e?null:e}for(var i=e,n=t;;){var o=i.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(n=o.return)){i=n;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===i)return B(o),e;if(s===n)return B(o),t;s=s.sibling}throw Error(r(188))}if(i.return!==n.return)i=o,n=s;else{for(var a=!1,l=o.child;l;){if(l===i){a=!0,i=o,n=s;break}if(l===n){a=!0,n=o,i=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===i){a=!0,i=s,n=o;break}if(l===n){a=!0,n=s,i=o;break}l=l.sibling}if(!a)throw Error(r(189))}}if(i.alternate!==n)throw Error(r(190))}if(3!==i.tag)throw Error(r(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?z(e):null)?null:e.stateNode};var yh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:Ke,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{ve=xh.inject(yh),be=xh}catch(Sh){}}t.createRoot=function(e,t){if(!a(e))throw Error(r(299));var i=!1,n="",o=Lr,s=_r,l=Or;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Bu(e,1,!1,null,0,i,n,o,s,l,0,null),e[ze]=t.current,jc(8===e.nodeType?e.parentNode:e),new vh(t)},t.hydrateRoot=function(e,t,i){if(!a(e))throw Error(r(299));var n=!1,o="",s=Lr,l=_r,d=Or,c=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(n=!0),void 0!==i.identifierPrefix&&(o=i.identifierPrefix),void 0!==i.onUncaughtError&&(s=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(d=i.onRecoverableError),void 0!==i.unstable_transitionCallbacks&&i.unstable_transitionCallbacks,void 0!==i.formState&&(c=i.formState)),(t=Bu(e,1,!0,t,0,n,o,s,l,d,0,c)).context=zu(null),i=t.current,(o=Ta(n=Md())).callback=null,ja(i,o,n),t.current.lanes=n,Te(t,n),fc(t),e[ze]=t.current,jc(e),new bh(t)},t.version="19.0.0"},672:(e,t,i)=>{var n=i(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(o(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=r.p;try{if(l.T=null,r.p=2,e)return e()}finally{l.T=t,r.p=i,r.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&r.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,n=d(i,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?r.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:o,fetchPriority:s}):"script"===i&&r.d.X(e,{crossOrigin:n,integrity:o,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=d(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,n=d(i,t.crossOrigin);r.d.L(e,i,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=d(t.as,t.crossOrigin);r.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},t.requestFormReset=function(e){r.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},391:(e,t,i)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(4)},950:(e,t,i)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(672)},799:(e,t)=>{var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(e,t,n){var o=null;if(void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),"key"in t)for(var s in n={},t)"key"!==s&&(n[s]=t[s]);else n=t;return t=n.ref,{$$typeof:i,type:e,key:o,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=o,t.jsxs=o},288:(e,t)=>{var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,f={};function v(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||g}function b(){}function w(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var y=w.prototype=new b;y.constructor=w,m(y,v.prototype),y.isPureReactComponent=!0;var x=Array.isArray,C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function R(e,t,n,o,s,r){return n=r.ref,{$$typeof:i,type:e,key:t,ref:void 0!==n?n:null,props:r}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var P=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function F(){}function D(e,t,o,s,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,d,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case n:c=!0;break;case h:return D((c=e._init)(e._payload),t,o,s,r)}}if(c)return r=r(e),c=""===s?"."+E(e,0):s,x(r)?(o="",null!=c&&(o=c.replace(P,"$&/")+"/"),D(r,t,o,"",(function(e){return e}))):null!=r&&(k(r)&&(l=r,d=o+(null==r.key||e&&e.key===r.key?"":(""+r.key).replace(P,"$&/")+"/")+c,r=R(l.type,d,void 0,0,0,l.props)),t.push(r)),1;c=0;var u,g=""===s?".":s+":";if(x(e))for(var m=0;m<e.length;m++)c+=D(s=e[m],t,o,a=g+E(s,m),r);else if("function"===typeof(m=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(s=e.next()).done;)c+=D(s=s.value,t,o,a=g+E(s,m++),r);else if("object"===a){if("function"===typeof e.then)return D(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(F,F):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function N(e,t,i){if(null==e)return e;var n=[],o=0;return D(e,n,"","",(function(e){return t.call(i,e,o++)})),n}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function j(){}t.Children={map:N,forEach:function(e,t,i){N(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=r,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=m({},e.props),o=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=i;else if(1<s){for(var r=Array(s),a=0;a<s;a++)r[a]=arguments[a+2];n.children=r}return R(e.type,o,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,i){var n,o={},s=null;if(null!=t)for(n in void 0!==t.key&&(s=""+t.key),t)S.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(o[n]=t[n]);var r=arguments.length-2;if(1===r)o.children=i;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return R(e,s,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,i={};C.T=i;try{var n=e(),o=C.S;null!==o&&o(i,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(j,T)}catch(s){T(s)}finally{C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,i){return C.H.useActionState(e,t,i)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return C.H.useEffect(e,t)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,i){return C.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return C.H.useReducer(e,t,i)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return C.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return C.H.useTransition()},t.version="19.0.0"},43:(e,t,i)=>{e.exports=i(288)},579:(e,t,i)=>{e.exports=i(799)},896:(e,t)=>{function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<s(o,t)))break e;e[n]=t,e[i]=o,i=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,r=o>>>1;n<r;){var a=2*(n+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,i))d<o&&0>s(c,l)?(e[n]=c,e[d]=i,n=d):(e[n]=l,e[a]=i,n=a);else{if(!(d<o&&0>s(c,i)))break e;e[n]=c,e[d]=i,n=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],u=1,h=null,p=3,g=!1,m=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=n(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,i(d,t)}t=n(c)}}function x(e){if(f=!1,y(e),!m)if(null!==n(d))m=!0,M();else{var t=n(c);null!==t&&T(x,t.startTime-e)}}var C,S=!1,R=-1,k=5,P=-1;function E(){return!(t.unstable_now()-P<k)}function F(){if(S){var e=t.unstable_now();P=e;var i=!0;try{e:{m=!1,f&&(f=!1,b(R),R=-1),g=!0;var s=p;try{t:{for(y(e),h=n(d);null!==h&&!(h.expirationTime>e&&E());){var r=h.callback;if("function"===typeof r){h.callback=null,p=h.priorityLevel;var a=r(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,y(e),i=!0;break t}h===n(d)&&o(d),y(e)}else o(d);h=n(d)}if(null!==h)i=!0;else{var l=n(c);null!==l&&T(x,l.startTime-e),i=!1}}break e}finally{h=null,p=s,g=!1}i=void 0}}finally{i?C():S=!1}}}if("function"===typeof w)C=function(){w(F)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,N=D.port2;D.port1.onmessage=F,C=function(){N.postMessage(null)}}else C=function(){v(F,0)};function M(){S||(S=!0,C())}function T(e,i){R=v((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,M())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,o,s){var r=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,i(c,e),null===n(d)&&e===n(c)&&(f?(b(R),R=-1):f=!0,T(x,s-r))):(e.sortIndex=a,i(d,e),m||g||(m=!0,M())),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},853:(e,t,i)=>{e.exports=i(896)}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};i.r(n),i.d(n,{hasBrowserEnv:()=>ge,hasStandardBrowserEnv:()=>fe,hasStandardBrowserWebWorkerEnv:()=>ve,navigator:()=>me,origin:()=>be});var o=i(43),s=i(391);function r(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.includes(i)||{}.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function d(e,t,i){return(t=l(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t){return function(){return e.apply(t,arguments)}}const{toString:p}=Object.prototype,{getPrototypeOf:g}=Object,m=(f=Object.create(null),e=>{const t=p.call(e);return f[t]||(f[t]=t.slice(8,-1).toLowerCase())});var f;const v=e=>(e=e.toLowerCase(),t=>m(t)===e),b=e=>t=>typeof t===e,{isArray:w}=Array,y=b("undefined");const x=v("ArrayBuffer");const C=b("string"),S=b("function"),R=b("number"),k=e=>null!==e&&"object"===typeof e,P=e=>{if("object"!==m(e))return!1;const t=g(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},E=v("Date"),F=v("File"),D=v("Blob"),N=v("FileList"),M=v("URLSearchParams"),[T,j,A,I]=["ReadableStream","Request","Response","Headers"].map(v);function L(e,t){let i,n,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),w(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const n=o?Object.getOwnPropertyNames(e):Object.keys(e),s=n.length;let r;for(i=0;i<s;i++)r=n[i],t.call(null,e[r],r,e)}}function _(e,t){t=t.toLowerCase();const i=Object.keys(e);let n,o=i.length;for(;o-- >0;)if(n=i[o],t===n.toLowerCase())return n;return null}const O="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,B=e=>!y(e)&&e!==O;const z=(V="undefined"!==typeof Uint8Array&&g(Uint8Array),e=>V&&e instanceof V);var V;const H=v("HTMLFormElement"),G=(e=>{let{hasOwnProperty:t}=e;return(e,i)=>t.call(e,i)})(Object.prototype),W=v("RegExp"),U=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};L(i,((i,o)=>{let s;!1!==(s=t(i,o,e))&&(n[o]=s||i)})),Object.defineProperties(e,n)};const q=v("AsyncFunction"),K=((e,t)=>{return e?setImmediate:t?(i="axios@".concat(Math.random()),n=[],O.addEventListener("message",(e=>{let{source:t,data:o}=e;t===O&&o===i&&n.length&&n.shift()()}),!1),e=>{n.push(e),O.postMessage(i,"*")}):e=>setTimeout(e);var i,n})("function"===typeof setImmediate,S(O.postMessage)),Y="undefined"!==typeof queueMicrotask?queueMicrotask.bind(O):"undefined"!==typeof process&&process.nextTick||K,Q={isArray:w,isArrayBuffer:x,isBuffer:function(e){return null!==e&&!y(e)&&null!==e.constructor&&!y(e.constructor)&&S(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||S(e.append)&&("formdata"===(t=m(e))||"object"===t&&S(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&x(e.buffer),t},isString:C,isNumber:R,isBoolean:e=>!0===e||!1===e,isObject:k,isPlainObject:P,isReadableStream:T,isRequest:j,isResponse:A,isHeaders:I,isUndefined:y,isDate:E,isFile:F,isBlob:D,isRegExp:W,isFunction:S,isStream:e=>k(e)&&S(e.pipe),isURLSearchParams:M,isTypedArray:z,isFileList:N,forEach:L,merge:function e(){const{caseless:t}=B(this)&&this||{},i={},n=(n,o)=>{const s=t&&_(i,o)||o;P(i[s])&&P(n)?i[s]=e(i[s],n):P(n)?i[s]=e({},n):w(n)?i[s]=n.slice():i[s]=n};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&L(arguments[o],n);return i},extend:function(e,t,i){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return L(t,((t,n)=>{i&&S(t)?e[n]=h(t,i):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,n)=>{let o,s,r;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)r=o[s],n&&!n(r,e,t)||a[r]||(t[r]=e[r],a[r]=!0);e=!1!==i&&g(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:m,kindOfTest:v,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return-1!==n&&n===i},toArray:e=>{if(!e)return null;if(w(e))return e;let t=e.length;if(!R(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const n=[];for(;null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:H,hasOwnProperty:G,hasOwnProp:G,reduceDescriptors:U,freezeMethods:e=>{U(e,((t,i)=>{if(S(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const n=e[i];S(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},n=e=>{e.forEach((e=>{i[e]=!0}))};return w(e)?n(e):n(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:_,global:O,isContextDefined:B,isSpecCompliantForm:function(e){return!!(e&&S(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,n)=>{if(k(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=w(e)?[]:{};return L(e,((e,t)=>{const s=i(e,n+1);!y(s)&&(o[t]=s)})),t[n]=void 0,o}}return e};return i(e,0)},isAsyncFn:q,isThenable:e=>e&&(k(e)||S(e))&&S(e.then)&&S(e.catch),setImmediate:K,asap:Y};function $(e,t,i,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}Q.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const X=$.prototype,J={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{J[e]={value:e}})),Object.defineProperties($,J),Object.defineProperty(X,"isAxiosError",{value:!0}),$.from=(e,t,i,n,o,s)=>{const r=Object.create(X);return Q.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),$.call(r,e.message,t,i,n,o),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const Z=$;function ee(e){return Q.isPlainObject(e)||Q.isArray(e)}function te(e){return Q.endsWith(e,"[]")?e.slice(0,-2):e}function ie(e,t,i){return e?e.concat(t).map((function(e,t){return e=te(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}const ne=Q.toFlatObject(Q,{},null,(function(e){return/^is[A-Z]/.test(e)}));const oe=function(e,t,i){if(!Q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(i=Q.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Q.isUndefined(t[e])}))).metaTokens,o=i.visitor||d,s=i.dots,r=i.indexes,a=(i.Blob||"undefined"!==typeof Blob&&Blob)&&Q.isSpecCompliantForm(t);if(!Q.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Q.isDate(e))return e.toISOString();if(!a&&Q.isBlob(e))throw new Z("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(e)||Q.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function d(e,i,o){let a=e;if(e&&!o&&"object"===typeof e)if(Q.endsWith(i,"{}"))i=n?i:i.slice(0,-2),e=JSON.stringify(e);else if(Q.isArray(e)&&function(e){return Q.isArray(e)&&!e.some(ee)}(e)||(Q.isFileList(e)||Q.endsWith(i,"[]"))&&(a=Q.toArray(e)))return i=te(i),a.forEach((function(e,n){!Q.isUndefined(e)&&null!==e&&t.append(!0===r?ie([i],n,s):null===r?i:i+"[]",l(e))})),!1;return!!ee(e)||(t.append(ie(o,i,s),l(e)),!1)}const c=[],u=Object.assign(ne,{defaultVisitor:d,convertValue:l,isVisitable:ee});if(!Q.isObject(e))throw new TypeError("data must be an object");return function e(i,n){if(!Q.isUndefined(i)){if(-1!==c.indexOf(i))throw Error("Circular reference detected in "+n.join("."));c.push(i),Q.forEach(i,(function(i,s){!0===(!(Q.isUndefined(i)||null===i)&&o.call(t,i,Q.isString(s)?s.trim():s,n,u))&&e(i,n?n.concat(s):[s])})),c.pop()}}(e),t};function se(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function re(e,t){this._pairs=[],e&&oe(e,this,t)}const ae=re.prototype;ae.append=function(e,t){this._pairs.push([e,t])},ae.toString=function(e){const t=e?function(t){return e.call(this,t,se)}:se;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const le=re;function de(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ce(e,t,i){if(!t)return e;const n=i&&i.encode||de;Q.isFunction(i)&&(i={serialize:i});const o=i&&i.serialize;let s;if(s=o?o(t,i):Q.isURLSearchParams(t)?t.toString():new le(t,i).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ue=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},he={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pe={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:le,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ge="undefined"!==typeof window&&"undefined"!==typeof document,me="object"===typeof navigator&&navigator||void 0,fe=ge&&(!me||["ReactNative","NativeScript","NS"].indexOf(me.product)<0),ve="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,be=ge&&window.location.href||"http://localhost",we=u(u({},n),pe);const ye=function(e){function t(e,i,n,o){let s=e[o++];if("__proto__"===s)return!0;const r=Number.isFinite(+s),a=o>=e.length;if(s=!s&&Q.isArray(n)?n.length:s,a)return Q.hasOwnProp(n,s)?n[s]=[n[s],i]:n[s]=i,!r;n[s]&&Q.isObject(n[s])||(n[s]=[]);return t(e,i,n[s],o)&&Q.isArray(n[s])&&(n[s]=function(e){const t={},i=Object.keys(e);let n;const o=i.length;let s;for(n=0;n<o;n++)s=i[n],t[s]=e[s];return t}(n[s])),!r}if(Q.isFormData(e)&&Q.isFunction(e.entries)){const i={};return Q.forEachEntry(e,((e,n)=>{t(function(e){return Q.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,i,0)})),i}return null};const xe={transitional:he,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,o=Q.isObject(e);o&&Q.isHTMLForm(e)&&(e=new FormData(e));if(Q.isFormData(e))return n?JSON.stringify(ye(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return oe(e,new we.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,n){return we.isNode&&Q.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return oe(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,i){if(Q.isString(e))try{return(t||JSON.parse)(e),Q.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xe.transitional,i=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(i&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(i){if("SyntaxError"===o.name)throw Z.from(o,Z.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],(e=>{xe.headers[e]={}}));const Ce=xe,Se=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Re=Symbol("internals");function ke(e){return e&&String(e).trim().toLowerCase()}function Pe(e){return!1===e||null==e?e:Q.isArray(e)?e.map(Pe):String(e)}function Ee(e,t,i,n,o){return Q.isFunction(n)?n.call(this,t,i):(o&&(t=i),Q.isString(t)?Q.isString(n)?-1!==t.indexOf(n):Q.isRegExp(n)?n.test(t):void 0:void 0)}class Fe{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function o(e,t,i){const o=ke(t);if(!o)throw new Error("header name must be a non-empty string");const s=Q.findKey(n,o);(!s||void 0===n[s]||!0===i||void 0===i&&!1!==n[s])&&(n[s||t]=Pe(e))}const s=(e,t)=>Q.forEach(e,((e,i)=>o(e,i,t)));if(Q.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Q.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let i,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),i=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!i||t[i]&&Se[i]||("set-cookie"===i?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)})),t})(e),t);else if(Q.isHeaders(e))for(const[r,a]of e.entries())o(a,r,i);else null!=e&&o(t,e,i);return this}get(e,t){if(e=ke(e)){const i=Q.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}(e);if(Q.isFunction(t))return t.call(this,e,i);if(Q.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ke(e)){const i=Q.findKey(this,e);return!(!i||void 0===this[i]||t&&!Ee(0,this[i],i,t))}return!1}delete(e,t){const i=this;let n=!1;function o(e){if(e=ke(e)){const o=Q.findKey(i,e);!o||t&&!Ee(0,i[o],o,t)||(delete i[o],n=!0)}}return Q.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const o=t[i];e&&!Ee(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,i={};return Q.forEach(this,((n,o)=>{const s=Q.findKey(i,o);if(s)return t[s]=Pe(n),void delete t[o];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(o):String(o).trim();r!==o&&delete t[o],t[r]=Pe(n),i[r]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Q.forEach(this,((i,n)=>{null!=i&&!1!==i&&(t[n]=e&&Q.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,i]=e;return t+": "+i})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Re]=this[Re]={accessors:{}}).accessors,i=this.prototype;function n(e){const n=ke(e);t[n]||(!function(e,t){const i=Q.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+i,{value:function(e,i,o){return this[n].call(this,t,e,i,o)},configurable:!0})}))}(i,e),t[n]=!0)}return Q.isArray(e)?e.forEach(n):n(e),this}}Fe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Q.reduceDescriptors(Fe.prototype,((e,t)=>{let{value:i}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(e){this[n]=e}}})),Q.freezeMethods(Fe);const De=Fe;function Ne(e,t){const i=this||Ce,n=t||i,o=De.from(n.headers);let s=n.data;return Q.forEach(e,(function(e){s=e.call(i,s,o.normalize(),t?t.status:void 0)})),o.normalize(),s}function Me(e){return!(!e||!e.__CANCEL__)}function Te(e,t,i){Z.call(this,null==e?"canceled":e,Z.ERR_CANCELED,t,i),this.name="CanceledError"}Q.inherits(Te,Z,{__CANCEL__:!0});const je=Te;function Ae(e,t,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new Z("Request failed with status code "+i.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}const Ie=function(e,t){e=e||10;const i=new Array(e),n=new Array(e);let o,s=0,r=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),d=n[r];o||(o=l),i[s]=a,n[s]=l;let c=r,u=0;for(;c!==s;)u+=i[c++],c%=e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),l-o<t)return;const h=d&&l-d;return h?Math.round(1e3*u/h):void 0}};const Le=function(e,t){let i,n,o=0,s=1e3/t;const r=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=s,i=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];t>=s?r(l,e):(i=l,n||(n=setTimeout((()=>{n=null,r(i)}),s-t)))},()=>i&&r(i)]},_e=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const o=Ie(50,250);return Le((i=>{const s=i.loaded,r=i.lengthComputable?i.total:void 0,a=s-n,l=o(a);n=s;e({loaded:s,total:r,progress:r?s/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&s<=r?(r-s)/l:void 0,event:i,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),i)},Oe=(e,t)=>{const i=null!=e;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},Be=e=>function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return Q.asap((()=>e(...i)))},ze=we.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,we.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(we.origin),we.navigator&&/(msie|trident)/i.test(we.navigator.userAgent)):()=>!0,Ve=we.hasStandardBrowserEnv?{write(e,t,i,n,o,s){const r=[e+"="+encodeURIComponent(t)];Q.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),Q.isString(n)&&r.push("path="+n),Q.isString(o)&&r.push("domain="+o),!0===s&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function He(e,t,i){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==i)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ge=e=>e instanceof De?u({},e):e;function We(e,t){t=t||{};const i={};function n(e,t,i,n){return Q.isPlainObject(e)&&Q.isPlainObject(t)?Q.merge.call({caseless:n},e,t):Q.isPlainObject(t)?Q.merge({},t):Q.isArray(t)?t.slice():t}function o(e,t,i,o){return Q.isUndefined(t)?Q.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function s(e,t){if(!Q.isUndefined(t))return n(void 0,t)}function r(e,t){return Q.isUndefined(t)?Q.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(i,o,s){return s in t?n(i,o):s in e?n(void 0,i):void 0}const l={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(e,t,i)=>o(Ge(e),Ge(t),0,!0)};return Q.forEach(Object.keys(Object.assign({},e,t)),(function(n){const s=l[n]||o,r=s(e[n],t[n],n);Q.isUndefined(r)&&s!==a||(i[n]=r)})),i}const Ue=e=>{const t=We({},e);let i,{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:r,headers:a,auth:l}=t;if(t.headers=a=De.from(a),t.url=ce(He(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Q.isFormData(n))if(we.hasStandardBrowserEnv||we.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(i=a.getContentType())){const[e,...t]=i?i.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(we.hasStandardBrowserEnv&&(o&&Q.isFunction(o)&&(o=o(t)),o||!1!==o&&ze(t.url))){const e=s&&r&&Ve.read(r);e&&a.set(s,e)}return t},qe="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){const n=Ue(e);let o=n.data;const s=De.from(n.headers).normalize();let r,a,l,d,c,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=n;function g(){d&&d(),c&&c(),n.cancelToken&&n.cancelToken.unsubscribe(r),n.signal&&n.signal.removeEventListener("abort",r)}let m=new XMLHttpRequest;function f(){if(!m)return;const n=De.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ae((function(e){t(e),g()}),(function(e){i(e),g()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=f:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(f)},m.onabort=function(){m&&(i(new Z("Request aborted",Z.ECONNABORTED,e,m)),m=null)},m.onerror=function(){i(new Z("Network Error",Z.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||he;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),i(new Z(t,o.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,e,m)),m=null},void 0===o&&s.setContentType(null),"setRequestHeader"in m&&Q.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Q.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),u&&"json"!==u&&(m.responseType=n.responseType),p&&([l,c]=_e(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,d]=_e(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",d)),(n.cancelToken||n.signal)&&(r=t=>{m&&(i(!t||t.type?new je(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(r),n.signal&&(n.signal.aborted?r():n.signal.addEventListener("abort",r)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);v&&-1===we.protocols.indexOf(v)?i(new Z("Unsupported protocol "+v+":",Z.ERR_BAD_REQUEST,e)):m.send(o||null)}))},Ke=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,n=new AbortController;const o=function(e){if(!i){i=!0,r();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Z?t:new je(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,o(new Z("timeout ".concat(t," of ms exceeded"),Z.ETIMEDOUT))}),t);const r=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=n;return a.unsubscribe=()=>Q.asap(r),a}};function Ye(e,t){this.v=e,this.k=t}function Qe(e){return function(){return new $e(e.apply(this,arguments))}}function $e(e){var t,i;function n(t,i){try{var s=e[t](i),r=s.value,a=r instanceof Ye;Promise.resolve(a?r.v:r).then((function(i){if(a){var l="return"===t?"return":"next";if(!r.k||i.done)return n(l,i);i=e[l](i).value}o(s.done?"return":"normal",i)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,o){return new Promise((function(s,r){var a={key:e,arg:o,resolve:s,reject:r,next:null};i?i=i.next=a:(t=i=a,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function Xe(e){return new Ye(e,0)}function Je(e){var t={},i=!1;function n(t,n){return i=!0,n=new Promise((function(i){i(e[t](n))})),{done:!1,value:new Ye(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return i?(i=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(i)throw i=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return i?(i=!1,e):n("return",e)}),t}function Ze(e){var t,i,n,o=2;for("undefined"!=typeof Symbol&&(i=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(i&&null!=(t=e[i]))return t.call(e);if(n&&null!=(t=e[n]))return new et(t.call(e));i="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function et(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return et=function(e){this.s=e,this.n=e.next},et.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Promise.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Promise.reject(e):t(i.apply(this.s,arguments))}},new et(e)}$e.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},$e.prototype.next=function(e){return this._invoke("next",e)},$e.prototype.throw=function(e){return this._invoke("throw",e)},$e.prototype.return=function(e){return this._invoke("return",e)};const tt=function*(e,t){let i=e.byteLength;if(!t||i<t)return void(yield e);let n,o=0;for(;o<i;)n=o+t,yield e.slice(o,n),o=n},it=function(){var e=Qe((function*(e,t){var i,n=!1,o=!1;try{for(var s,r=Ze(nt(e));n=!(s=yield Xe(r.next())).done;n=!1){const e=s.value;yield*Je(Ze(tt(e,t)))}}catch(a){o=!0,i=a}finally{try{n&&null!=r.return&&(yield Xe(r.return()))}finally{if(o)throw i}}}));return function(t,i){return e.apply(this,arguments)}}(),nt=function(){var e=Qe((function*(e){if(e[Symbol.asyncIterator])return void(yield*Je(Ze(e)));const t=e.getReader();try{for(;;){const{done:e,value:i}=yield Xe(t.read());if(e)break;yield i}}finally{yield Xe(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),ot=(e,t,i,n)=>{const o=it(e,t);let s,r=0,a=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return a(),void e.close();let s=n.byteLength;if(i){let e=r+=s;i(e)}e.enqueue(new Uint8Array(n))}catch(t){throw a(t),t}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},st="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,rt=st&&"function"===typeof ReadableStream,at=st&&("function"===typeof TextEncoder?(lt=new TextEncoder,e=>lt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var lt;const dt=function(e){try{for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return!!e(...i)}catch(o){return!1}},ct=rt&&dt((()=>{let e=!1;const t=new Request(we.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ut=rt&&dt((()=>Q.isReadableStream(new Response("").body))),ht={stream:ut&&(e=>e.body)};var pt;st&&(pt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ht[e]&&(ht[e]=Q.isFunction(pt[e])?t=>t[e]():(t,i)=>{throw new Z("Response type '".concat(e,"' is not supported"),Z.ERR_NOT_SUPPORT,i)})})));const gt=async(e,t)=>{const i=Q.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(Q.isBlob(e))return e.size;if(Q.isSpecCompliantForm(e)){const t=new Request(we.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Q.isArrayBufferView(e)||Q.isArrayBuffer(e)?e.byteLength:(Q.isURLSearchParams(e)&&(e+=""),Q.isString(e)?(await at(e)).byteLength:void 0)})(t):i},mt=st&&(async e=>{let{url:t,method:i,data:n,signal:o,cancelToken:s,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:d,headers:c,withCredentials:h="same-origin",fetchOptions:p}=Ue(e);d=d?(d+"").toLowerCase():"text";let g,m=Ke([o,s&&s.toAbortSignal()],r);const f=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(l&&ct&&"get"!==i&&"head"!==i&&0!==(v=await gt(c,n))){let e,i=new Request(t,{method:"POST",body:n,duplex:"half"});if(Q.isFormData(n)&&(e=i.headers.get("content-type"))&&c.setContentType(e),i.body){const[e,t]=Oe(v,_e(Be(l)));n=ot(i.body,65536,e,t)}}Q.isString(h)||(h=h?"include":"omit");const o="credentials"in Request.prototype;g=new Request(t,u(u({},p),{},{signal:m,method:i.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:o?h:void 0}));let s=await fetch(g);const r=ut&&("stream"===d||"response"===d);if(ut&&(a||r&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=Q.toFiniteNumber(s.headers.get("content-length")),[i,n]=a&&Oe(t,_e(Be(a),!0))||[];s=new Response(ot(s.body,65536,i,(()=>{n&&n(),f&&f()})),e)}d=d||"text";let b=await ht[Q.findKey(ht,d)||"text"](s,e);return!r&&f&&f(),await new Promise(((t,i)=>{Ae(t,i,{data:b,headers:De.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:g})}))}catch(b){if(f&&f(),b&&"TypeError"===b.name&&/fetch/i.test(b.message))throw Object.assign(new Z("Network Error",Z.ERR_NETWORK,e,g),{cause:b.cause||b});throw Z.from(b,b&&b.code,e,g)}}),ft={http:null,xhr:qe,fetch:mt};Q.forEach(ft,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(i){}Object.defineProperty(e,"adapterName",{value:t})}}));const vt=e=>"- ".concat(e),bt=e=>Q.isFunction(e)||null===e||!1===e,wt=e=>{e=Q.isArray(e)?e:[e];const{length:t}=e;let i,n;const o={};for(let s=0;s<t;s++){let t;if(i=e[s],n=i,!bt(i)&&(n=ft[(t=String(i)).toLowerCase()],void 0===n))throw new Z("Unknown adapter '".concat(t,"'"));if(n)break;o[t||"#"+s]=n}if(!n){const e=Object.entries(o).map((e=>{let[t,i]=e;return"adapter ".concat(t," ")+(!1===i?"is not supported by the environment":"is not available in the build")}));let i=t?e.length>1?"since :\n"+e.map(vt).join("\n"):" "+vt(e[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n};function yt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new je(null,e)}function xt(e){yt(e),e.headers=De.from(e.headers),e.data=Ne.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return wt(e.adapter||Ce.adapter)(e).then((function(t){return yt(e),t.data=Ne.call(e,e.transformResponse,t),t.headers=De.from(t.headers),t}),(function(t){return Me(t)||(yt(e),t&&t.response&&(t.response.data=Ne.call(e,e.transformResponse,t.response),t.response.headers=De.from(t.response.headers))),Promise.reject(t)}))}const Ct="1.8.4",St={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{St[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const Rt={};St.transitional=function(e,t,i){function n(e,t){return"[Axios v1.8.4] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,o,s)=>{if(!1===e)throw new Z(n(o," has been removed"+(t?" in "+t:"")),Z.ERR_DEPRECATED);return t&&!Rt[o]&&(Rt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,o,s)}},St.spelling=function(e){return(t,i)=>(console.warn("".concat(i," is likely a misspelling of ").concat(e)),!0)};const kt={assertOptions:function(e,t,i){if("object"!==typeof e)throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const s=n[o],r=t[s];if(r){const t=e[s],i=void 0===t||r(t,s,e);if(!0!==i)throw new Z("option "+s+" must be "+i,Z.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new Z("Unknown option "+s,Z.ERR_BAD_OPTION)}},validators:St},Pt=kt.validators;class Et{constructor(e){this.defaults=e,this.interceptors={request:new ue,response:new ue}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+t):i.stack=t}catch(n){}}throw i}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=We(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:o}=t;void 0!==i&&kt.assertOptions(i,{silentJSONParsing:Pt.transitional(Pt.boolean),forcedJSONParsing:Pt.transitional(Pt.boolean),clarifyTimeoutError:Pt.transitional(Pt.boolean)},!1),null!=n&&(Q.isFunction(n)?t.paramsSerializer={serialize:n}:kt.assertOptions(n,{encode:Pt.function,serialize:Pt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),kt.assertOptions(t,{baseUrl:Pt.spelling("baseURL"),withXsrfToken:Pt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=o&&Q.merge(o.common,o[t.method]);o&&Q.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=De.concat(s,o);const r=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let d;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,u=0;if(!a){const e=[xt.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,l),c=e.length,d=Promise.resolve(t);u<c;)d=d.then(e[u++],e[u++]);return d}c=r.length;let h=t;for(u=0;u<c;){const e=r[u++],t=r[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{d=xt.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,c=l.length;u<c;)d=d.then(l[u++],l[u++]);return d}getUri(e){return ce(He((e=We(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Q.forEach(["delete","get","head","options"],(function(e){Et.prototype[e]=function(t,i){return this.request(We(i||{},{method:e,url:t,data:(i||{}).data}))}})),Q.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,o){return this.request(We(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}Et.prototype[e]=t(),Et.prototype[e+"Form"]=t(!0)}));const Ft=Et;class Dt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,o){i.reason||(i.reason=new je(e,n,o),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Dt((function(t){e=t})),cancel:e}}}const Nt=Dt;const Mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mt).forEach((e=>{let[t,i]=e;Mt[i]=t}));const Tt=Mt;const jt=function e(t){const i=new Ft(t),n=h(Ft.prototype.request,i);return Q.extend(n,Ft.prototype,i,{allOwnKeys:!0}),Q.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return e(We(t,i))},n}(Ce);jt.Axios=Ft,jt.CanceledError=je,jt.CancelToken=Nt,jt.isCancel=Me,jt.VERSION=Ct,jt.toFormData=oe,jt.AxiosError=Z,jt.Cancel=jt.CanceledError,jt.all=function(e){return Promise.all(e)},jt.spread=function(e){return function(t){return e.apply(null,t)}},jt.isAxiosError=function(e){return Q.isObject(e)&&!0===e.isAxiosError},jt.mergeConfig=We,jt.AxiosHeaders=De,jt.formToJSON=e=>ye(Q.isHTMLForm(e)?new FormData(e):e),jt.getAdapter=wt,jt.HttpStatusCode=Tt,jt.default=jt;const At=jt;function It(e){return e+.5|0}const Lt=(e,t,i)=>Math.max(Math.min(e,i),t);function _t(e){return Lt(It(2.55*e),0,255)}function Ot(e){return Lt(It(255*e),0,255)}function Bt(e){return Lt(It(e/2.55)/100,0,1)}function zt(e){return Lt(It(100*e),0,100)}const Vt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ht=[..."0123456789ABCDEF"],Gt=e=>Ht[15&e],Wt=e=>Ht[(240&e)>>4]+Ht[15&e],Ut=e=>(240&e)>>4===(15&e);function qt(e){var t=(e=>Ut(e.r)&&Ut(e.g)&&Ut(e.b)&&Ut(e.a))(e)?Gt:Wt;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Kt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yt(e,t,i){const n=t*Math.min(i,1-i),o=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return i-n*Math.max(Math.min(o-3,9-o,1),-1)};return[o(0),o(8),o(4)]}function Qt(e,t,i){const n=function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return i-i*t*Math.max(Math.min(o,4-o,1),0)};return[n(5),n(3),n(1)]}function $t(e,t,i){const n=Yt(e,1,.5);let o;for(t+i>1&&(o=1/(t+i),t*=o,i*=o),o=0;o<3;o++)n[o]*=1-t-i,n[o]+=t;return n}function Xt(e){const t=e.r/255,i=e.g/255,n=e.b/255,o=Math.max(t,i,n),s=Math.min(t,i,n),r=(o+s)/2;let a,l,d;return o!==s&&(d=o-s,l=r>.5?d/(2-o-s):d/(o+s),a=function(e,t,i,n,o){return e===o?(t-i)/n+(t<i?6:0):t===o?(i-e)/n+2:(e-t)/n+4}(t,i,n,d,o),a=60*a+.5),[0|a,l||0,r]}function Jt(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Ot)}function Zt(e,t,i){return Jt(Yt,e,t,i)}function ei(e){return(e%360+360)%360}function ti(e){const t=Kt.exec(e);let i,n=255;if(!t)return;t[5]!==i&&(n=t[6]?_t(+t[5]):Ot(+t[5]));const o=ei(+t[2]),s=+t[3]/100,r=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return Jt($t,e,t,i)}(o,s,r):"hsv"===t[1]?function(e,t,i){return Jt(Qt,e,t,i)}(o,s,r):Zt(o,s,r),{r:i[0],g:i[1],b:i[2],a:n}}const ii={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ni={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let oi;function si(e){oi||(oi=function(){const e={},t=Object.keys(ni),i=Object.keys(ii);let n,o,s,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],o=0;o<i.length;o++)s=i[o],a=a.replace(s,ii[s]);s=parseInt(ni[r],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),oi.transparent=[0,0,0,0]);const t=oi[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const ri=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const ai=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,li=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function di(e,t,i){if(e){let n=Xt(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,0===t?360:1)),n=Zt(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function ci(e,t){return e?Object.assign(t||{},e):e}function ui(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ot(e[3]))):(t=ci(e,{r:0,g:0,b:0,a:1})).a=Ot(t.a),t}function hi(e){return"r"===e.charAt(0)?function(e){const t=ri.exec(e);let i,n,o,s=255;if(t){if(t[7]!==i){const e=+t[7];s=t[8]?_t(e):Lt(255*e,0,255)}return i=+t[1],n=+t[3],o=+t[5],i=255&(t[2]?_t(i):Lt(i,0,255)),n=255&(t[4]?_t(n):Lt(n,0,255)),o=255&(t[6]?_t(o):Lt(o,0,255)),{r:i,g:n,b:o,a:s}}}(e):ti(e)}class pi{constructor(e){if(e instanceof pi)return e;const t=typeof e;let i;"object"===t?i=ui(e):"string"===t&&(i=function(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*Vt[e[1]],g:255&17*Vt[e[2]],b:255&17*Vt[e[3]],a:5===i?17*Vt[e[4]]:255}:7!==i&&9!==i||(t={r:Vt[e[1]]<<4|Vt[e[2]],g:Vt[e[3]]<<4|Vt[e[4]],b:Vt[e[5]]<<4|Vt[e[6]],a:9===i?Vt[e[7]]<<4|Vt[e[8]]:255})),t}(e)||si(e)||hi(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=ci(this._rgb);return e&&(e.a=Bt(e.a)),e}set rgb(e){this._rgb=ui(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Bt(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?qt(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Xt(e),i=t[0],n=zt(t[1]),o=zt(t[2]);return e.a<255?"hsla(".concat(i,", ").concat(n,"%, ").concat(o,"%, ").concat(Bt(e.a),")"):"hsl(".concat(i,", ").concat(n,"%, ").concat(o,"%)")}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let o;const s=t===o?.5:t,r=2*s-1,a=i.a-n.a,l=((r*a===-1?r:(r+a)/(1+r*a))+1)/2;o=1-l,i.r=255&l*i.r+o*n.r+.5,i.g=255&l*i.g+o*n.g+.5,i.b=255&l*i.b+o*n.b+.5,i.a=s*i.a+(1-s)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){const n=li(Bt(e.r)),o=li(Bt(e.g)),s=li(Bt(e.b));return{r:Ot(ai(n+i*(li(Bt(t.r))-n))),g:Ot(ai(o+i*(li(Bt(t.g))-o))),b:Ot(ai(s+i*(li(Bt(t.b))-s))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new pi(this.rgb)}alpha(e){return this._rgb.a=Ot(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=It(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return di(this._rgb,2,e),this}darken(e){return di(this._rgb,2,-e),this}saturate(e){return di(this._rgb,1,e),this}desaturate(e){return di(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=Xt(e);i[0]=ei(i[0]+t),i=Zt(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}function gi(){}const mi=(()=>{let e=0;return()=>e++})();function fi(e){return null===e||void 0===e}function vi(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function bi(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function wi(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function yi(e,t){return wi(e)?e:t}function xi(e,t){return"undefined"===typeof e?t:e}const Ci=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Si(e,t,i){if(e&&"function"===typeof e.call)return e.apply(i,t)}function Ri(e,t,i,n){let o,s,r;if(vi(e))if(s=e.length,n)for(o=s-1;o>=0;o--)t.call(i,e[o],o);else for(o=0;o<s;o++)t.call(i,e[o],o);else if(bi(e))for(r=Object.keys(e),s=r.length,o=0;o<s;o++)t.call(i,e[r[o]],r[o])}function ki(e,t){let i,n,o,s;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(o=e[i],s=t[i],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function Pi(e){if(vi(e))return e.map(Pi);if(bi(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let o=0;for(;o<n;++o)t[i[o]]=Pi(e[i[o]]);return t}return e}function Ei(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Fi(e,t,i,n){if(!Ei(e))return;const o=t[e],s=i[e];bi(o)&&bi(s)?Di(o,s,n):t[e]=Pi(s)}function Di(e,t,i){const n=vi(t)?t:[t],o=n.length;if(!bi(e))return e;const s=(i=i||{}).merger||Fi;let r;for(let a=0;a<o;++a){if(r=n[a],!bi(r))continue;const t=Object.keys(r);for(let n=0,o=t.length;n<o;++n)s(t[n],e,r,i)}return e}function Ni(e,t){return Di(e,t,{merger:Mi})}function Mi(e,t,i){if(!Ei(e))return;const n=t[e],o=i[e];bi(n)&&bi(o)?Ni(n,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Pi(o))}const Ti={"":e=>e,x:e=>e.x,y:e=>e.y};function ji(e,t){const i=Ti[t]||(Ti[t]=function(e){const t=function(e){const t=e.split("."),i=[];let n="";for(const o of t)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}(e);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t));return i(e)}function Ai(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ii=e=>"undefined"!==typeof e,Li=e=>"function"===typeof e,_i=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};const Oi=Math.PI,Bi=2*Oi,zi=Bi+Oi,Vi=Number.POSITIVE_INFINITY,Hi=Oi/180,Gi=Oi/2,Wi=Oi/4,Ui=2*Oi/3,qi=Math.log10,Ki=Math.sign;function Yi(e,t,i){return Math.abs(e-t)<i}function Qi(e){const t=Math.round(e);e=Yi(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(qi(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function $i(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Xi(e,t,i){let n,o,s;for(n=0,o=e.length;n<o;n++)s=e[n][i],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Ji(e){return e*(Oi/180)}function Zi(e){return e*(180/Oi)}function en(e){if(!wi(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function tn(e,t){const i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s<-.5*Oi&&(s+=Bi),{angle:s,distance:o}}function nn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function on(e,t){return(e-t+zi)%Bi-Oi}function sn(e){return(e%Bi+Bi)%Bi}function rn(e,t,i,n){const o=sn(e),s=sn(t),r=sn(i),a=sn(s-o),l=sn(r-o),d=sn(o-s),c=sn(o-r);return o===s||o===r||n&&s===r||a>l&&d<c}function an(e,t,i){return Math.max(t,Math.min(i,e))}function ln(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function dn(e,t,i){i=i||(i=>e[i]<t);let n,o=e.length-1,s=0;for(;o-s>1;)n=s+o>>1,i(n)?s=n:o=n;return{lo:s,hi:o}}const cn=(e,t,i,n)=>dn(e,i,n?n=>{const o=e[n][t];return o<i||o===i&&e[n+1][t]===i}:n=>e[n][t]<i),un=(e,t,i)=>dn(e,i,(n=>e[n][t]>=i));const hn=["push","pop","shift","splice","unshift"];function pn(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(t);-1!==o&&n.splice(o,1),n.length>0||(hn.forEach((t=>{delete e[t]})),delete e._chartjs)}function gn(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const mn="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function fn(e,t){let i=[],n=!1;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];i=s,n||(n=!0,mn.call(window,(()=>{n=!1,e.apply(t,i)})))}}const vn=e=>"start"===e?"left":"end"===e?"right":"center",bn=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2;function wn(e,t,i){const n=t.length;let o=0,s=n;if(e._sorted){const{iScale:r,vScale:a,_parsed:l}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,c=r.axis,{min:u,max:h,minDefined:p,maxDefined:g}=r.getUserBounds();if(p){if(o=Math.min(cn(l,c,u).lo,i?n:cn(t,c,r.getPixelForValue(u)).lo),d){const e=l.slice(0,o+1).reverse().findIndex((e=>!fi(e[a.axis])));o-=Math.max(0,e)}o=an(o,0,n-1)}if(g){let e=Math.max(cn(l,r.axis,h,!0).hi+1,i?0:cn(t,c,r.getPixelForValue(h),!0).hi+1);if(d){const t=l.slice(e-1).findIndex((e=>!fi(e[a.axis])));e+=Math.max(0,t)}s=an(e,o,n)-o}else s=n-o}return{start:o,count:s}}function yn(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,o={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=o,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),s}const xn=e=>0===e||1===e,Cn=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Bi/i),Sn=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Bi/i)+1,Rn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Gi),easeOutSine:e=>Math.sin(e*Gi),easeInOutSine:e=>-.5*(Math.cos(Oi*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>xn(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>xn(e)?e:Cn(e,.075,.3),easeOutElastic:e=>xn(e)?e:Sn(e,.075,.3),easeInOutElastic(e){const t=.1125;return xn(e)?e:e<.5?.5*Cn(2*e,t,.45):.5+.5*Sn(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Rn.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*Rn.easeInBounce(2*e):.5*Rn.easeOutBounce(2*e-1)+.5};function kn(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Pn(e){return kn(e)?e:new pi(e)}function En(e){return kn(e)?e:new pi(e).saturate(.5).darken(.1).hexString()}const Fn=["x","y","borderWidth","radius","tension"],Dn=["color","borderColor","backgroundColor"];const Nn=new Map;function Mn(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let n=Nn.get(i);return n||(n=new Intl.NumberFormat(e,t),Nn.set(i,n)),n}(t,i).format(e)}const Tn={values:e=>vi(e)?e:""+e,numeric(e,t,i){if(0===e)return"0";const n=this.chart.options.locale;let o,s=e;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<1e-4||t>1e15)&&(o="scientific"),s=function(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e));return i}(e,i)}const r=qi(Math.abs(s)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Mn(e,n,l)},logarithmic(e,t,i){if(0===e)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(qi(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?Tn.numeric.call(this,e,t,i):""}};var jn={formatters:Tn};const An=Object.create(null),In=Object.create(null);function Ln(e,t){if(!t)return e;const i=t.split(".");for(let n=0,o=i.length;n<o;++n){const t=i[n];e=e[t]||(e[t]=Object.create(null))}return e}function _n(e,t,i){return"string"===typeof t?Di(Ln(e,t),i):Di(Ln(e,""),t)}class On{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>En(t.backgroundColor),this.hoverBorderColor=(e,t)=>En(t.borderColor),this.hoverColor=(e,t)=>En(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return _n(this,e,t)}get(e){return Ln(this,e)}describe(e,t){return _n(In,e,t)}override(e,t){return _n(An,e,t)}route(e,t,i,n){const o=Ln(this,e),s=Ln(this,i),r="_"+t;Object.defineProperties(o,{[r]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[r],t=s[n];return bi(e)?Object.assign({},t,e):xi(e,t)},set(e){this[r]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Bn=new On({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Dn},numbers:{type:"number",properties:Fn}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function zn(e,t,i,n,o){let s=t[o];return s||(s=t[o]=e.measureText(o).width,i.push(o)),s>n&&(n=s),n}function Vn(e,t,i,n){let o=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(o=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const a=i.length;let l,d,c,u,h;for(l=0;l<a;l++)if(u=i[l],void 0===u||null===u||vi(u)){if(vi(u))for(d=0,c=u.length;d<c;d++)h=u[d],void 0===h||null===h||vi(h)||(r=zn(e,o,s,r,h))}else r=zn(e,o,s,r,u);e.restore();const p=s.length/2;if(p>i.length){for(l=0;l<p;l++)delete o[s[l]];s.splice(0,p)}return r}function Hn(e,t,i){const n=e.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((t-o)*n)/n+o}function Gn(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Wn(e,t,i,n){Un(e,t,i,n,null)}function Un(e,t,i,n,o){let s,r,a,l,d,c,u,h;const p=t.pointStyle,g=t.rotation,m=t.radius;let f=(g||0)*Hi;if(p&&"object"===typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(i,n),e.rotate(f),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:o?e.ellipse(i,n,o/2,m,0,0,Bi):e.arc(i,n,m,0,Bi),e.closePath();break;case"triangle":c=o?o/2:m,e.moveTo(i+Math.sin(f)*c,n-Math.cos(f)*m),f+=Ui,e.lineTo(i+Math.sin(f)*c,n-Math.cos(f)*m),f+=Ui,e.lineTo(i+Math.sin(f)*c,n-Math.cos(f)*m),e.closePath();break;case"rectRounded":d=.516*m,l=m-d,r=Math.cos(f+Wi)*l,u=Math.cos(f+Wi)*(o?o/2-d:l),a=Math.sin(f+Wi)*l,h=Math.sin(f+Wi)*(o?o/2-d:l),e.arc(i-u,n-a,d,f-Oi,f-Gi),e.arc(i+h,n-r,d,f-Gi,f),e.arc(i+u,n+a,d,f,f+Gi),e.arc(i-h,n+r,d,f+Gi,f+Oi),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,c=o?o/2:l,e.rect(i-c,n-l,2*c,2*l);break}f+=Wi;case"rectRot":u=Math.cos(f)*(o?o/2:m),r=Math.cos(f)*m,a=Math.sin(f)*m,h=Math.sin(f)*(o?o/2:m),e.moveTo(i-u,n-a),e.lineTo(i+h,n-r),e.lineTo(i+u,n+a),e.lineTo(i-h,n+r),e.closePath();break;case"crossRot":f+=Wi;case"cross":u=Math.cos(f)*(o?o/2:m),r=Math.cos(f)*m,a=Math.sin(f)*m,h=Math.sin(f)*(o?o/2:m),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-r),e.lineTo(i-h,n+r);break;case"star":u=Math.cos(f)*(o?o/2:m),r=Math.cos(f)*m,a=Math.sin(f)*m,h=Math.sin(f)*(o?o/2:m),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-r),e.lineTo(i-h,n+r),f+=Wi,u=Math.cos(f)*(o?o/2:m),r=Math.cos(f)*m,a=Math.sin(f)*m,h=Math.sin(f)*(o?o/2:m),e.moveTo(i-u,n-a),e.lineTo(i+u,n+a),e.moveTo(i+h,n-r),e.lineTo(i-h,n+r);break;case"line":r=o?o/2:Math.cos(f)*m,a=Math.sin(f)*m,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(f)*(o?o/2:m),n+Math.sin(f)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function qn(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Kn(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Yn(e){e.restore()}function Qn(e,t,i,n,o){if(!t)return e.lineTo(i.x,i.y);if("middle"===o){const n=(t.x+i.x)/2;e.lineTo(n,t.y),e.lineTo(n,i.y)}else"after"===o!==!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function $n(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Xn(e,t,i,n,o){if(o.strikethrough||o.underline){const s=e.measureText(n),r=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=i-s.actualBoundingBoxAscent,d=i+s.actualBoundingBoxDescent,c=o.strikethrough?(l+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(r,c),e.lineTo(a,c),e.stroke()}}function Jn(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Zn(e,t,i,n,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const r=vi(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,d;for(e.save(),e.font=o.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),fi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<r.length;++l)d=r[l],s.backdrop&&Jn(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),fi(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(d,i,n,s.maxWidth)),e.fillText(d,i,n,s.maxWidth),Xn(e,i,n,d,s),n+=Number(o.lineHeight);e.restore()}function eo(e,t){const{x:i,y:n,w:o,h:s,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,1.5*Oi,Oi,!0),e.lineTo(i,n+s-r.bottomLeft),e.arc(i+r.bottomLeft,n+s-r.bottomLeft,r.bottomLeft,Oi,Gi,!0),e.lineTo(i+o-r.bottomRight,n+s),e.arc(i+o-r.bottomRight,n+s-r.bottomRight,r.bottomRight,Gi,0,!0),e.lineTo(i+o,n+r.topRight),e.arc(i+o-r.topRight,n+r.topRight,r.topRight,0,-Gi,!0),e.lineTo(i+r.topLeft,n)}const to=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,io=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function no(e,t){const i=(""+e).match(to);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}function oo(e,t){const i={},n=bi(t),o=n?Object.keys(t):t,s=bi(e)?n?i=>xi(e[i],e[t[i]]):t=>e[t]:()=>e;for(const r of o)i[r]=+s(r)||0;return i}function so(e){return oo(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ro(e){return oo(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ao(e){const t=so(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function lo(e,t){e=e||{},t=t||Bn.font;let i=xi(e.size,t.size);"string"===typeof i&&(i=parseInt(i,10));let n=xi(e.style,t.style);n&&!(""+n).match(io)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:xi(e.family,t.family),lineHeight:no(xi(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:xi(e.weight,t.weight),string:""};return o.string=function(e){return!e||fi(e.size)||fi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(o),o}function co(e,t,i,n){let o,s,r,a=!0;for(o=0,s=e.length;o<s;++o)if(r=e[o],void 0!==r&&(void 0!==t&&"function"===typeof r&&(r=r(t),a=!1),void 0!==i&&vi(r)&&(r=r[i%r.length],a=!1),void 0!==r))return n&&!a&&(n.cacheable=!1),r}function uo(e,t){return Object.assign(Object.create(e),t)}function ho(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const o=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof i&&(i=So("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:i,_getTarget:n,override:n=>ho([n,...e],t,o,i)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,n)=>vo(i,n,(()=>function(e,t,i,n){let o;for(const s of t)if(o=So(mo(s,e),i),"undefined"!==typeof o)return fo(e,o)?xo(i,n,e,o):o}(n,t,e,i))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Ro(e).includes(t),ownKeys:e=>Ro(e),set(e,t,i){const o=e._storage||(e._storage=n());return e[t]=o[t]=i,delete e._keys,!0}})}function po(e,t,i,n){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:go(e,n),setContext:t=>po(e,t,i,n),override:o=>po(e.override(o),t,i,n)};return new Proxy(o,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>vo(e,t,(()=>function(e,t,i){const{_proxy:n,_context:o,_subProxy:s,_descriptors:r}=e;let a=n[t];Li(a)&&r.isScriptable(t)&&(a=function(e,t,i,n){const{_proxy:o,_context:s,_subProxy:r,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,r||n);a.delete(e),fo(e,l)&&(l=xo(o._scopes,o,e,l));return l}(t,a,e,i));vi(a)&&a.length&&(a=function(e,t,i,n){const{_proxy:o,_context:s,_subProxy:r,_descriptors:a}=i;if("undefined"!==typeof s.index&&n(e))return t[s.index%t.length];if(bi(t[0])){const i=t,n=o._scopes.filter((e=>e!==i));t=[];for(const l of i){const i=xo(n,o,e,l);t.push(po(i,s,r&&r[e],a))}}return t}(t,a,e,r.isIndexable));fo(t,a)&&(a=po(a,o,s&&s[t],r));return a}(e,t,i))),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,n)=>(e[i]=n,delete t[i],!0)})}function go(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:i,indexable:n,isScriptable:Li(i)?i:()=>i,isIndexable:Li(n)?n:()=>n}}const mo=(e,t)=>e?e+Ai(t):t,fo=(e,t)=>bi(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function vo(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=i();return e[t]=n,n}function bo(e,t,i){return Li(e)?e(t,i):e}const wo=(e,t)=>!0===e?t:"string"===typeof e?ji(t,e):void 0;function yo(e,t,i,n,o){for(const s of t){const t=wo(i,s);if(t){e.add(t);const s=bo(t._fallback,i,o);if("undefined"!==typeof s&&s!==i&&s!==n)return s}else if(!1===t&&"undefined"!==typeof n&&i!==n)return null}return!1}function xo(e,t,i,n){const o=t._rootScopes,s=bo(t._fallback,i,n),r=[...e,...o],a=new Set;a.add(n);let l=Co(a,r,i,s||i,n);return null!==l&&(("undefined"===typeof s||s===i||(l=Co(a,r,s,l,n),null!==l))&&ho(Array.from(a),[""],o,s,(()=>function(e,t,i){const n=e._getTarget();t in n||(n[t]={});const o=n[t];if(vi(o)&&bi(i))return i;return o||{}}(t,i,n))))}function Co(e,t,i,n,o){for(;i;)i=yo(e,t,i,n,o);return i}function So(e,t){for(const i of t){if(!i)continue;const t=i[e];if("undefined"!==typeof t)return t}}function Ro(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function ko(e,t,i,n){const{iScale:o}=e,{key:s="r"}=this._parsing,r=new Array(n);let a,l,d,c;for(a=0,l=n;a<l;++a)d=a+i,c=t[d],r[a]={r:o.parse(ji(c,s),d)};return r}const Po=Number.EPSILON||1e-14,Eo=(e,t)=>t<e.length&&!e[t].skip&&e[t],Fo=e=>"x"===e?"y":"x";function Do(e,t,i,n){const o=e.skip?t:e,s=t,r=i.skip?t:i,a=nn(s,o),l=nn(r,s);let d=a/(a+l),c=l/(a+l);d=isNaN(d)?0:d,c=isNaN(c)?0:c;const u=n*d,h=n*c;return{previous:{x:s.x-u*(r.x-o.x),y:s.y-u*(r.y-o.y)},next:{x:s.x+h*(r.x-o.x),y:s.y+h*(r.y-o.y)}}}function No(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const i=Fo(t),n=e.length,o=Array(n).fill(0),s=Array(n);let r,a,l,d=Eo(e,0);for(r=0;r<n;++r)if(a=l,l=d,d=Eo(e,r+1),l){if(d){const e=d[t]-l[t];o[r]=0!==e?(d[i]-l[i])/e:0}s[r]=a?d?Ki(o[r-1])!==Ki(o[r])?0:(o[r-1]+o[r])/2:o[r-1]:o[r]}!function(e,t,i){const n=e.length;let o,s,r,a,l,d=Eo(e,0);for(let c=0;c<n-1;++c)l=d,d=Eo(e,c+1),l&&d&&(Yi(t[c],0,Po)?i[c]=i[c+1]=0:(o=i[c]/t[c],s=i[c+1]/t[c],a=Math.pow(o,2)+Math.pow(s,2),a<=9||(r=3/Math.sqrt(a),i[c]=o*r*t[c],i[c+1]=s*r*t[c])))}(e,o,s),function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=Fo(i),o=e.length;let s,r,a,l=Eo(e,0);for(let d=0;d<o;++d){if(r=a,a=l,l=Eo(e,d+1),!a)continue;const o=a[i],c=a[n];r&&(s=(o-r[i])/3,a["cp1".concat(i)]=o-s,a["cp1".concat(n)]=c-s*t[d]),l&&(s=(l[i]-o)/3,a["cp2".concat(i)]=o+s,a["cp2".concat(n)]=c+s*t[d])}}(e,s,t)}function Mo(e,t,i){return Math.max(Math.min(e,i),t)}function To(e,t,i,n,o){let s,r,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)No(e,o);else{let i=n?e[e.length-1]:e[0];for(s=0,r=e.length;s<r;++s)a=e[s],l=Do(i,a,e[Math.min(s+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}t.capBezierPoints&&function(e,t){let i,n,o,s,r,a=qn(e[0],t);for(i=0,n=e.length;i<n;++i)r=s,s=a,a=i<n-1&&qn(e[i+1],t),s&&(o=e[i],r&&(o.cp1x=Mo(o.cp1x,t.left,t.right),o.cp1y=Mo(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=Mo(o.cp2x,t.left,t.right),o.cp2y=Mo(o.cp2y,t.top,t.bottom)))}(e,i)}function jo(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Ao(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Io(e,t,i){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}const Lo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const _o=["top","right","bottom","left"];function Oo(e,t,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const s=_o[o];n[s]=parseFloat(e[t+"-"+s+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Bo(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,o=Lo(i),s="border-box"===o.boxSizing,r=Oo(o,"padding"),a=Oo(o,"border","width"),{x:l,y:d,box:c}=function(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:o,offsetY:s}=n;let r,a,l=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(o,s,e.target))r=o,a=s;else{const e=t.getBoundingClientRect();r=n.clientX-e.left,a=n.clientY-e.top,l=!0}return{x:r,y:a,box:l}}(e,i),u=r.left+(c&&a.left),h=r.top+(c&&a.top);let{width:p,height:g}=t;return s&&(p-=r.width+a.width,g-=r.height+a.height),{x:Math.round((l-u)/p*i.width/n),y:Math.round((d-h)/g*i.height/n)}}const zo=e=>Math.round(10*e)/10;function Vo(e,t,i,n){const o=Lo(e),s=Oo(o,"margin"),r=Io(o.maxWidth,e,"clientWidth")||Vi,a=Io(o.maxHeight,e,"clientHeight")||Vi,l=function(e,t,i){let n,o;if(void 0===t||void 0===i){const s=e&&Ao(e);if(s){const e=s.getBoundingClientRect(),r=Lo(s),a=Oo(r,"border","width"),l=Oo(r,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,n=Io(r.maxWidth,s,"clientWidth"),o=Io(r.maxHeight,s,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:n||Vi,maxHeight:o||Vi}}(e,t,i);let{width:d,height:c}=l;if("content-box"===o.boxSizing){const e=Oo(o,"border","width"),t=Oo(o,"padding");d-=t.width+e.width,c-=t.height+e.height}d=Math.max(0,d-s.width),c=Math.max(0,n?d/n:c-s.height),d=zo(Math.min(d,r,l.maxWidth)),c=zo(Math.min(c,a,l.maxHeight)),d&&!c&&(c=zo(d/2));return(void 0!==t||void 0!==i)&&n&&l.height&&c>l.height&&(c=l.height,d=zo(Math.floor(c*n))),{width:d,height:c}}function Ho(e,t,i){const n=t||1,o=Math.floor(e.height*n),s=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height="".concat(e.height,"px"),r.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==n||r.height!==o||r.width!==s)&&(e.currentDevicePixelRatio=n,r.height=o,r.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0)}const Go=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};jo()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Wo(e,t){const i=function(e,t){return Lo(e).getPropertyValue(t)}(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Uo(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function qo(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:"middle"===n?i<.5?e.y:t.y:"after"===n?i<1?e.y:t.y:i>0?t.y:e.y}}function Ko(e,t,i,n){const o={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},r=Uo(e,o,i),a=Uo(o,s,i),l=Uo(s,t,i),d=Uo(r,a,i),c=Uo(a,l,i);return Uo(d,c,i)}function Yo(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Qo(e,t){let i,n;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function $o(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Xo(e){return"angle"===e?{between:rn,compare:on,normalize:sn}:{between:ln,compare:(e,t)=>e-t,normalize:e=>e}}function Jo(e){let{start:t,end:i,count:n,loop:o,style:s}=e;return{start:t%n,end:i%n,loop:o&&(i-t+1)%n===0,style:s}}function Zo(e,t,i){if(!i)return[e];const{property:n,start:o,end:s}=i,r=t.length,{compare:a,between:l,normalize:d}=Xo(n),{start:c,end:u,loop:h,style:p}=function(e,t,i){const{property:n,start:o,end:s}=i,{between:r,normalize:a}=Xo(n),l=t.length;let d,c,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,d=0,c=l;d<c&&r(a(t[u%l][n]),o,s);++d)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,i),g=[];let m,f,v,b=!1,w=null;const y=()=>b||l(o,v,m)&&0!==a(o,v),x=()=>!b||0===a(s,m)||l(s,v,m);for(let C=c,S=c;C<=u;++C)f=t[C%r],f.skip||(m=d(f[n]),m!==v&&(b=l(m,o,s),null===w&&y()&&(w=0===a(m,o)?C:S),null!==w&&x()&&(g.push(Jo({start:w,end:C,loop:h,count:r,style:p})),w=null),S=C,v=m));return null!==w&&g.push(Jo({start:w,end:u,loop:h,count:r,style:p})),g}function es(e,t){const i=[],n=e.segments;for(let o=0;o<n.length;o++){const s=Zo(n[o],e.points,t);s.length&&i.push(...s)}return i}function ts(e,t,i,n){return n&&n.setContext&&i?function(e,t,i,n){const o=e._chart.getContext(),s=is(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=i.length,d=[];let c=s,u=t[0].start,h=u;function p(e,t,n,o){const s=a?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=s;for(;i[t%l].skip;)t+=s;e%l!==t%l&&(d.push({start:e%l,end:t%l,loop:n,style:o}),c=o,u=t%l)}}for(const g of t){u=a?u:g.start;let e,t=i[u%l];for(h=u+1;h<=g.end;h++){const s=i[h%l];e=is(n.setContext(uo(o,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:r}))),ns(e,c)&&p(u,h-1,g.loop,c),t=s,c=e}u<h-1&&p(u,h-1,g.loop,c)}return d}(e,t,i,n):t}function is(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ns(e,t){if(!t)return!1;const i=[],n=function(e,t){return kn(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function os(e,t,i){return e.options.clip?e[i]:t[i]}function ss(e,t){const i=t._clip;if(i.disabled)return!1;const n=function(e,t){const{xScale:i,yScale:n}=e;return i&&n?{left:os(i,t,"left"),right:os(i,t,"right"),top:os(n,t,"top"),bottom:os(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===i.left?0:n.left-(!0===i.left?0:i.left),right:!1===i.right?e.width:n.right+(!0===i.right?0:i.right),top:!1===i.top?0:n.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?e.height:n.bottom+(!0===i.bottom?0:i.bottom)}}class rs{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const o=t.listeners[n],s=t.duration;o.forEach((n=>n({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(i-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=mn.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let s,r=o.length-1,a=!1;for(;r>=0;--r)s=o[r],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,i,e,"progress")),o.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=o.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var as=new rs;const ls="transparent",ds={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const n=Pn(e||ls),o=n.valid&&Pn(t||ls);return o&&o.valid?o.mix(n,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class cs{constructor(e,t,i,n){const o=t[i];n=co([e.to,n,o,e.from]);const s=co([e.from,o,n]);this._active=!0,this._fn=e.fn||ds[e.type||typeof s],this._easing=Rn[e.easing]||Rn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,s=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=co([e.to,t,n,e.from]),this._from=co([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,o=this._from,s=this._loop,r=this._to;let a;if(this._active=o!==r&&(s||t<i),!this._active)return this._target[n]=r,void this._notify(!0);t<0?this._target[n]=o:(a=t/i%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(o,r,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,i)=>{e.push({res:t,rej:i})}))}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][t]()}}class us{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bi(e))return;const t=Object.keys(Bn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const o=e[n];if(!bi(o))return;const s={};for(const e of t)s[e]=o[e];(vi(o.properties)&&o.properties||[n]).forEach((e=>{e!==n&&i.has(e)||i.set(e,s)}))}))}_animateOptions(e,t){const i=t.options,n=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(e,t){const i=[],n=Object.keys(t);for(let o=0;o<n.length;o++){const t=e[n[o]];t&&t.active()&&i.push(t.wait())}return Promise.all(i)}(e.options.$animations,i).then((()=>{e.options=i}),(()=>{})),o}_createAnimations(e,t){const i=this._properties,n=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),r=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const d=t[l];let c=o[l];const u=i.get(l);if(c){if(u&&c.active()){c.update(u,d,r);continue}c.cancel()}u&&u.duration?(o[l]=c=new cs(u,e,l,d),n.push(c)):e[l]=d}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(as.add(this._chart,i),!0):void 0}}function hs(e,t){const i=e&&e.options||{},n=i.reverse,o=void 0===i.min?t:0,s=void 0===i.max?t:0;return{start:n?s:o,end:n?o:s}}function ps(e,t){const i=[],n=e._getSortedDatasetMetas(t);let o,s;for(o=0,s=n.length;o<s;++o)i.push(n[o].index);return i}function gs(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=e.keys,s="single"===n.mode;let r,a,l,d;if(null===t)return;let c=!1;for(r=0,a=o.length;r<a;++r){if(l=+o[r],l===i){if(c=!0,n.all)continue;break}d=e.values[l],wi(d)&&(s||0===t||Ki(t)===Ki(d))&&(t+=d)}return c||n.all?t:0}function ms(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function fs(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function vs(e,t,i,n){for(const o of t.getMatchingVisibleMetas(n).reverse()){const t=e[o.index];if(i&&t>0||!i&&t<0)return o.index}return null}function bs(e,t){const{chart:i,_cachedMeta:n}=e,o=i._stacks||(i._stacks={}),{iScale:s,vScale:r,index:a}=n,l=s.axis,d=r.axis,c=function(e,t,i){return"".concat(e.id,".").concat(t.id,".").concat(i.stack||i.type)}(s,r,n),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[l]:i,[d]:s}=e;h=(e._stacks||(e._stacks={}))[d]=fs(o,c,i),h[a]=s,h._top=vs(h,r,!0,n.type),h._bottom=vs(h,r,!1,n.type);(h._visualValues||(h._visualValues={}))[a]=s}}function ws(e,t){const i=e.scales;return Object.keys(i).filter((e=>i[e].axis===t)).shift()}function ys(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][i])return;delete t[n][i],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[i]&&delete t[n]._visualValues[i]}}}const xs=e=>"reset"===e||"none"===e,Cs=(e,t)=>t?e:Object.assign({},e);class Ss{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ms(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ys(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(e,t,i,n)=>"x"===e?t:"r"===e?n:i,o=t.xAxisID=xi(i.xAxisID,ws(e,"x")),s=t.yAxisID=xi(i.yAxisID,ws(e,"y")),r=t.rAxisID=xi(i.rAxisID,ws(e,"r")),a=t.indexAxis,l=t.iAxisID=n(a,o,s,r),d=t.vAxisID=n(a,s,o,r);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(r),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pn(this._data,this),e._stacked&&ys(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(bi(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:i,vScale:n}=t,o="x"===i.axis?"x":"y",s="x"===n.axis?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,d,c;for(l=0,d=r.length;l<d;++l)c=r[l],a[l]={[o]:c,[s]:e[c]};return a}(t,e)}else if(i!==t){if(i){pn(i,this);const e=this._cachedMeta;ys(e),e._parsed=[]}t&&Object.isExtensible(t)&&(o=this,(n=t)._chartjs?n._chartjs.listeners.push(o):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),hn.forEach((e=>{const t="_onData"+Ai(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];const r=i.apply(this,o);return n._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...o)})),r}})})))),this._syncList=[],this._data=t}var n,o}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=t._stacked;t._stacked=ms(t.vScale,t),t.stack!==i.stack&&(n=!0,ys(t),t.stack=i.stack),this._resyncElements(e),(n||o!==t._stacked)&&(bs(this,t._parsed),t._stacked=ms(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:o,_stacked:s}=i,r=o.axis;let a,l,d,c=0===e&&t===n.length||i._sorted,u=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,d=n;else{d=vi(n[e])?this.parseArrayData(i,n,e,t):bi(n[e])?this.parseObjectData(i,n,e,t):this.parsePrimitiveData(i,n,e,t);const o=()=>null===l[r]||u&&l[r]<u[r];for(a=0;a<t;++a)i._parsed[a+e]=l=d[a],c&&(o()&&(c=!1),u=l);i._sorted=c}s&&bs(this,d)}parsePrimitiveData(e,t,i,n){const{iScale:o,vScale:s}=e,r=o.axis,a=s.axis,l=o.getLabels(),d=o===s,c=new Array(n);let u,h,p;for(u=0,h=n;u<h;++u)p=u+i,c[u]={[r]:d||o.parse(l[p],p),[a]:s.parse(t[p],p)};return c}parseArrayData(e,t,i,n){const{xScale:o,yScale:s}=e,r=new Array(n);let a,l,d,c;for(a=0,l=n;a<l;++a)d=a+i,c=t[d],r[a]={x:o.parse(c[0],d),y:s.parse(c[1],d)};return r}parseObjectData(e,t,i,n){const{xScale:o,yScale:s}=e,{xAxisKey:r="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let d,c,u,h;for(d=0,c=n;d<c;++d)u=d+i,h=t[u],l[d]={x:o.parse(ji(h,r),u),y:s.parse(ji(h,a),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,o=this._cachedMeta,s=t[e.axis];return gs({keys:ps(n,!0),values:t._stacks[e.axis]._visualValues},s,o.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const o=i[t.axis];let s=null===o?NaN:o;const r=n&&i._stacks[t.axis];n&&r&&(n.values=r,s=gs(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&e===i.iScale,s=n.length,r=this._getOtherScale(e),a=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:ps(i,!0),values:null})(t,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:c}=function(e){const{min:t,max:i,minDefined:n,maxDefined:o}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(r);let u,h;function p(){h=n[u];const t=h[r.axis];return!wi(h[e.axis])||d>t||c<t}for(u=0;u<s&&(p()||(this.updateRangeFromParsed(l,e,h,a),!o));++u);if(o)for(u=s-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,o,s;for(n=0,o=t.length;n<o;++n)s=t[n][e.axis],wi(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,n,o;return bi(e)?(t=e.top,i=e.right,n=e.bottom,o=e.left):t=i=n=o=e,{top:t,right:i,bottom:n,left:o,disabled:!1===e}}(xi(this.options.clip,function(e,t,i){if(!1===i)return!1;const n=hs(e,i),o=hs(t,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],o=t.chartArea,s=[],r=this._drawStart||0,a=this._drawCount||n.length-r,l=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,o,r,a),d=r;d<r+a;++d){const t=n[d];t.hidden||(t.active&&l?s.push(t):t.draw(e,o))}for(d=0;d<s.length;++d)s[d].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];o=t.$context||(t.$context=function(e,t,i){return uo(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function(e,t){return uo(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2?arguments[2]:void 0;const n="active"===t,o=this._cachedDataOpts,s=e+"-"+t,r=o[s],a=this.enableOptionSharing&&Ii(i);if(r)return Cs(r,a);const l=this.chart.config,d=l.datasetElementScopeKeys(this._type,e),c=n?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),d),h=Object.keys(Bn.elements[e]),p=l.resolveNamedOptions(u,h,(()=>this.getContext(i,n,t)),c);return p.$shared&&(p.$shared=a,o[s]=Object.freeze(Cs(p,a))),p}_resolveAnimations(e,t,i){const n=this.chart,o=this._cachedDataOpts,s="animation-".concat(t),r=o[s];if(r)return r;let a;if(!1!==n.options.animation){const n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,t),s=n.getOptionScopes(this.getDataset(),o);a=n.createResolver(s,this.getContext(e,i,t))}const l=new us(n,a&&a.animations);return a&&a._cacheable&&(o[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||xs(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,o=this.getSharedOptions(i),s=this.includeOptions(t,o)||o!==n;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:s}}updateElement(e,t,i,n){xs(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!xs(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const o=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[r,a,l]of this._syncList)this[r](a,l);this._syncList=[];const n=i.length,o=t.length,s=Math.min(o,n);s&&this.parse(0,s),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,o=n.data,s=e+t;let r;const a=e=>{for(e.length+=t,r=e.length-1;r>=s;r--)e[r]=e[r-t]};for(a(o),r=e;r<s;++r)o[r]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&ys(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Rs(e){const t=e.iScale,i=function(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,o=i.length;t<o;t++)n=n.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=gn(n.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let n,o,s,r,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(Ii(r)&&(a=Math.min(a,Math.abs(s-r)||a)),r=s)};for(n=0,o=i.length;n<o;++n)s=t.getPixelForValue(i[n]),l();for(r=void 0,n=0,o=t.ticks.length;n<o;++n)s=t.getPixelForTick(n),l();return a}function ks(e,t,i,n){return vi(e)?function(e,t,i,n){const o=i.parse(e[0],n),s=i.parse(e[1],n),r=Math.min(o,s),a=Math.max(o,s);let l=r,d=a;Math.abs(r)>Math.abs(a)&&(l=a,d=r),t[i.axis]=d,t._custom={barStart:l,barEnd:d,start:o,end:s,min:r,max:a}}(e,t,i,n):t[i.axis]=i.parse(e,n),t}function Ps(e,t,i,n){const o=e.iScale,s=e.vScale,r=o.getLabels(),a=o===s,l=[];let d,c,u,h;for(d=i,c=i+n;d<c;++d)h=t[d],u={},u[o.axis]=a||o.parse(r[d],d),l.push(ks(h,u,s,d));return l}function Es(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Fs(e,t,i,n){let o=t.borderSkipped;const s={};if(!o)return void(e.borderSkipped=s);if(!0===o)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:r,end:a,reverse:l,top:d,bottom:c}=function(e){let t,i,n,o,s;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(o="end",s="start"):(o="start",s="end"),{start:i,end:n,reverse:t,top:o,bottom:s}}(e);"middle"===o&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?o=d:(i._bottom||0)===n?o=c:(s[Ds(c,r,a,l)]=!0,o=d)),s[Ds(o,r,a,l)]=!0,e.borderSkipped=s}function Ds(e,t,i,n){var o,s,r;return n?(r=i,e=Ns(e=(o=e)===(s=t)?r:o===r?s:o,i,t)):e=Ns(e,t,i),e}function Ns(e,t,i){return"start"===e?t:"end"===e?i:e}function Ms(e,t,i){let{inflateAmount:n}=t;e.inflateAmount="auto"===n?1===i?.33:0:n}d(Ss,"defaults",{}),d(Ss,"datasetElementType",null),d(Ss,"dataElementType",null);class Ts extends Ss{parsePrimitiveData(e,t,i,n){return Ps(e,t,i,n)}parseArrayData(e,t,i,n){return Ps(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:o,vScale:s}=e,{xAxisKey:r="x",yAxisKey:a="y"}=this._parsing,l="x"===o.axis?r:a,d="x"===s.axis?r:a,c=[];let u,h,p,g;for(u=i,h=i+n;u<h;++u)g=t[u],p={},p[o.axis]=o.parse(ji(g,l),u),c.push(ks(ji(g,d),p,s,u));return c}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,o=this.getParsed(e),s=o._custom,r=Es(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,n){const o="reset"===n,{index:s,_cachedMeta:{vScale:r}}=this,a=r.getBasePixel(),l=r.isHorizontal(),d=this._getRuler(),{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,n);for(let h=t;h<t+i;h++){const t=this.getParsed(h),i=o||fi(t[r.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,d),g=(t._stacks||{})[r.axis],m={horizontal:l,base:i.base,enableBorderRadius:!g||Es(t._custom)||s===g._top||s===g._bottom,x:l?i.head:p.center,y:l?p.center:i.head,height:l?p.size:Math.abs(i.size),width:l?Math.abs(i.size):p.size};u&&(m.options=c||this.resolveDataElementOptions(h,e[h].active?"active":n));const f=m.options||e[h].options;Fs(m,f,g,s),Ms(m,f,d.ratio),this.updateElement(e[h],h,m,n)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),o=i.options.stacked,s=[],r=this._cachedMeta.controller.getParsed(t),a=r&&r[i.axis],l=e=>{const t=e._parsed.find((e=>e[i.axis]===a)),n=t&&t[e.vScale.axis];if(fi(n)||isNaN(n))return!0};for(const d of n)if((void 0===t||!l(d))&&((!1===o||-1===s.indexOf(d.stack)||void 0===o&&void 0===d.stack)&&s.push(d.stack),d.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter((i=>e[i].axis===t)).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[xi("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const n=this._getStacks(e,i),o=void 0!==t?n.indexOf(t):-1;return-1===o?n.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let o,s;for(o=0,s=t.data.length;o<s;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const r=e.barThickness;return{min:r||Rs(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:r?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:n},options:{base:o,minBarLength:s}}=this,r=o||0,a=this.getParsed(e),l=a._custom,d=Es(l);let c,u,h=a[t.axis],p=0,g=i?this.applyStack(t,a,i):h;g!==h&&(p=g-h,g=h),d&&(h=l.barStart,g=l.barEnd-l.barStart,0!==h&&Ki(h)!==Ki(l.barEnd)&&(p=0),p+=h);const m=fi(o)||d?p:o;let f=t.getPixelForValue(m);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(p+g):f,u=c-f,Math.abs(u)<s){u=function(e,t,i){return 0!==e?Ki(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(u,t,r)*s,h===r&&(f-=u/2);const e=t.getPixelForDecimal(0),o=t.getPixelForDecimal(1),l=Math.min(e,o),p=Math.max(e,o);f=Math.max(Math.min(f,p),l),c=f+u,i&&!d&&(a._stacks[t.axis]._visualValues[n]=t.getValueForPixel(c)-t.getValueForPixel(f))}if(f===t.getPixelForValue(r)){const e=Ki(u)*t.getLineWidthForValue(r)/2;f+=e,u-=e}return{size:u,base:f,head:c,center:c+u/2}}_calculateBarIndexPixels(e,t){const i=t.scale,n=this.options,o=n.skipNull,s=xi(n.maxBarThickness,1/0);let r,a;const l=this._getAxisCount();if(t.grouped){const i=o?this._getStackCount(e):t.stackCount,d="flex"===n.barThickness?function(e,t,i,n){const o=t.pixels,s=o[e];let r=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const l=i.categoryPercentage;null===r&&(r=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-r);const d=s-(s-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:i.barPercentage,start:d}}(e,t,n,i*l):function(e,t,i,n){const o=i.barThickness;let s,r;return fi(o)?(s=t.min*i.categoryPercentage,r=i.barPercentage):(s=o*n,r=1),{chunk:s/n,ratio:r,start:t.pixels[e]-s/2}}(e,t,n,i*l),c="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(xi(c,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+u;r=d.start+d.chunk*h+d.chunk/2,a=Math.min(s,d.chunk*d.ratio)}else r=i.getPixelForValue(this.getParsed(e)[i.axis],e),a=Math.min(s,t.min*t.ratio);return{base:r-a/2,head:r+a/2,center:r,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let o=0;for(;o<n;++o)null===this.getParsed(o)[t.axis]||i[o].hidden||i[o].draw(this._ctx)}}d(Ts,"id","bar"),d(Ts,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),d(Ts,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class js extends Ss{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const o=super.parsePrimitiveData(e,t,i,n);for(let s=0;s<o.length;s++)o[s]._custom=this.resolveDataElementOptions(s+i).radius;return o}parseArrayData(e,t,i,n){const o=super.parseArrayData(e,t,i,n);for(let s=0;s<o.length;s++){const e=t[i+s];o[s]._custom=xi(e[2],this.resolveDataElementOptions(s+i).radius)}return o}parseObjectData(e,t,i,n){const o=super.parseObjectData(e,t,i,n);for(let s=0;s<o.length;s++){const e=t[i+s];o[s]._custom=xi(e&&e.r&&+e.r,this.resolveDataElementOptions(s+i).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=t,s=this.getParsed(e),r=n.getLabelForValue(s.x),a=o.getLabelForValue(s.y),l=s._custom;return{label:i[e]||"",value:"("+r+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const o="reset"===n,{iScale:s,vScale:r}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,n),d=s.axis,c=r.axis;for(let u=t;u<t+i;u++){const t=e[u],i=!o&&this.getParsed(u),h={},p=h[d]=o?s.getPixelForDecimal(.5):s.getPixelForValue(i[d]),g=h[c]=o?r.getBasePixel():r.getPixelForValue(i[c]);h.skip=isNaN(p)||isNaN(g),l&&(h.options=a||this.resolveDataElementOptions(u,t.active?"active":n),o&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==t&&(n.radius=0),n.radius+=xi(i&&i._custom,o),n}}d(js,"id","bubble"),d(js,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),d(js,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class As extends Ss{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let o,s,r=e=>+i[e];if(bi(i[e])){const{key:e="value"}=this._parsing;r=t=>+ji(i[t],e)}for(o=e,s=e+t;o<s;++o)n._parsed[o]=r(o)}}_getRotation(){return Ji(this.options.rotation-90)}_getCircumference(){return Ji(this.options.circumference)}_getRotationExtents(){let e=Bi,t=-Bi;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,o=n._getRotation(),s=n._getCircumference();e=Math.min(e,o),t=Math.max(t,o+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,o=n.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-s)/2,0),a=Math.min((l=this.options.cutout,d=r,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/d),1);var l,d;const c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:m,offsetY:f}=function(e,t,i){let n=1,o=1,s=0,r=0;if(t<Bi){const a=e,l=a+t,d=Math.cos(a),c=Math.sin(a),u=Math.cos(l),h=Math.sin(l),p=(e,t,n)=>rn(e,a,l,!0)?1:Math.max(t,t*i,n,n*i),g=(e,t,n)=>rn(e,a,l,!0)?-1:Math.min(t,t*i,n,n*i),m=p(0,d,u),f=p(Gi,c,h),v=g(Oi,d,u),b=g(Oi+Gi,c,h);n=(m-v)/2,o=(f-b)/2,s=-(m+v)/2,r=-(f+b)/2}return{ratioX:n,ratioY:o,offsetX:s,offsetY:r}}(h,u,a),v=(i.width-s)/p,b=(i.height-s)/g,w=Math.max(Math.min(v,b)/2,0),y=Ci(this.options.radius,w),x=(y-Math.max(y*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*y,this.offsetY=f*y,n.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*o/Bi)}updateElements(e,t,i,n){const o="reset"===n,s=this.chart,r=s.chartArea,a=s.options.animation,l=(r.left+r.right)/2,d=(r.top+r.bottom)/2,c=o&&a.animateScale,u=c?0:this.innerRadius,h=c?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(t,n);let m,f=this._getRotation();for(m=0;m<t;++m)f+=this._circumference(m,o);for(m=t;m<t+i;++m){const t=this._circumference(m,o),i=e[m],s={x:l+this.offsetX,y:d+this.offsetY,startAngle:f,endAngle:f+t,circumference:t,outerRadius:h,innerRadius:u};g&&(s.options=p||this.resolveDataElementOptions(m,i.active?"active":n)),f+=t,this.updateElement(i,m,s,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,n=0;for(i=0;i<t.length;i++){const o=e._parsed[i];null===o||isNaN(o)||!this.chart.getDataVisibility(i)||t[i].hidden||(n+=Math.abs(o))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Bi*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Mn(t._parsed[e],i.options.locale);return{label:n[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,o,s,r,a;if(!e)for(n=0,o=i.data.datasets.length;n<o;++n)if(i.isDatasetVisible(n)){s=i.getDatasetMeta(n),e=s.data,r=s.controller;break}if(!e)return 0;for(n=0,o=e.length;n<o;++n)a=r.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(xi(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}d(As,"id","doughnut"),d(As,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),d(As,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),d(As,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map(((t,o)=>{const s=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class Is extends Ss{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=t,s=this.chart._animationsDisabled;let{start:r,count:a}=wn(t,n,s);this._drawStart=r,this._drawCount=a,yn(t)&&(r=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:l},e),this.updateElements(n,r,a,e)}updateElements(e,t,i,n){const o="reset"===n,{iScale:s,vScale:r,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:d,includeOptions:c}=this._getSharedOptions(t,n),u=s.axis,h=r.axis,{spanGaps:p,segment:g}=this.options,m=$i(p)?p:Number.POSITIVE_INFINITY,f=this.chart._animationsDisabled||o||"none"===n,v=t+i,b=e.length;let w=t>0&&this.getParsed(t-1);for(let y=0;y<b;++y){const i=e[y],p=f?i:{};if(y<t||y>=v){p.skip=!0;continue}const b=this.getParsed(y),x=fi(b[h]),C=p[u]=s.getPixelForValue(b[u],y),S=p[h]=o||x?r.getBasePixel():r.getPixelForValue(a?this.applyStack(r,b,a):b[h],y);p.skip=isNaN(C)||isNaN(S)||x,p.stop=y>0&&Math.abs(b[u]-w[u])>m,g&&(p.parsed=b,p.raw=l.data[y]),c&&(p.options=d||this.resolveDataElementOptions(y,i.active?"active":n)),f||this.updateElement(i,y,p,n),w=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),s=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}d(Is,"id","line"),d(Is,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),d(Is,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ls extends Ss{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Mn(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:o}}parseObjectData(e,t,i,n){return ko.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(n/2,0),s=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,i,n){const o="reset"===n,s=this.chart,r=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,d=a.yCenter,c=a.getIndexAngle(0)-.5*Oi;let u,h=c;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,p);for(u=t;u<t+i;u++){const t=e[u];let i=h,g=h+this._computeAngle(u,n,p),m=s.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=g,o&&(r.animateScale&&(m=0),r.animateRotate&&(i=g=c));const f={x:l,y:d,innerRadius:0,outerRadius:m,startAngle:i,endAngle:g,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,f,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++})),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Ji(this.resolveDataElementOptions(e,t).angle||i):0}}d(Ls,"id","polarArea"),d(Ls,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),d(Ls,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map(((t,o)=>{const s=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class _s extends As{}d(_s,"id","pie"),d(_s,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Os extends Ss{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,n){return ko.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],o=t.iScale.getLabels();if(i.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:o.length===n.length,options:t};this.updateElement(i,void 0,s,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const o=this._cachedMeta.rScale,s="reset"===n;for(let r=t;r<t+i;r++){const t=e[r],i=this.resolveDataElementOptions(r,t.active?"active":n),a=o.getPointPositionForValue(r,this.getParsed(r).r),l=s?o.xCenter:a.x,d=s?o.yCenter:a.y,c={x:l,y:d,angle:a.angle,skip:isNaN(l)||isNaN(d),options:i};this.updateElement(t,r,c,n)}}}d(Os,"id","radar"),d(Os,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),d(Os,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Bs extends Ss{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=t,s=this.getParsed(e),r=n.getLabelForValue(s.x),a=o.getLabelForValue(s.y);return{label:i[e]||"",value:"("+r+", "+a+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,n=this.chart._animationsDisabled;let{start:o,count:s}=wn(t,i,n);if(this._drawStart=o,this._drawCount=s,yn(t)&&(o=0,s=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:s}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!s._decimated,o.points=i;const r=this.resolveDatasetElementOptions(e);r.segment=this.options.segment,this.updateElement(o,void 0,{animated:!n,options:r},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,o,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,n){const o="reset"===n,{iScale:s,vScale:r,_stacked:a,_dataset:l}=this._cachedMeta,d=this.resolveDataElementOptions(t,n),c=this.getSharedOptions(d),u=this.includeOptions(n,c),h=s.axis,p=r.axis,{spanGaps:g,segment:m}=this.options,f=$i(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||"none"===n;let b=t>0&&this.getParsed(t-1);for(let w=t;w<t+i;++w){const t=e[w],i=this.getParsed(w),d=v?t:{},g=fi(i[p]),y=d[h]=s.getPixelForValue(i[h],w),x=d[p]=o||g?r.getBasePixel():r.getPixelForValue(a?this.applyStack(r,i,a):i[p],w);d.skip=isNaN(y)||isNaN(x)||g,d.stop=w>0&&Math.abs(i[h]-b[h])>f,m&&(d.parsed=i,d.raw=l.data[w]),u&&(d.options=c||this.resolveDataElementOptions(w,t.active?"active":n)),v||this.updateElement(t,w,d,n),b=i}this.updateSharedOptions(c,n,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const o=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,o,s)/2}}d(Bs,"id","scatter"),d(Bs,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),d(Bs,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function zs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Vs{static override(e){Object.assign(Vs.prototype,e)}constructor(e){d(this,"options",void 0),this.options=e||{}}init(){}formats(){return zs()}parse(){return zs()}format(){return zs()}add(){return zs()}diff(){return zs()}startOf(){return zs()}endOf(){return zs()}}var Hs=Vs;function Gs(e,t,i,n){const{controller:o,data:s,_sorted:r}=e,a=o._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&r&&s.length){const r=a._reversePixels?un:cn;if(!n){const n=r(s,t,i);if(l){const{vScale:t}=o._cachedMeta,{_parsed:i}=e,s=i.slice(0,n.lo+1).reverse().findIndex((e=>!fi(e[t.axis])));n.lo-=Math.max(0,s);const r=i.slice(n.hi).findIndex((e=>!fi(e[t.axis])));n.hi+=Math.max(0,r)}return n}if(o._sharedOptions){const e=s[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=r(s,t,i-n),o=r(s,t,i+n);return{lo:e.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function Ws(e,t,i,n,o){const s=e.getSortedVisibleDatasetMetas(),r=i[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:i}=s[a],{lo:l,hi:d}=Gs(s[a],t,r,o);for(let t=l;t<=d;++t){const o=i[t];o.skip||n(o,e,t)}}}function Us(e,t,i,n,o){const s=[];if(!o&&!e.isPointInArea(t))return s;return Ws(e,i,t,(function(i,r,a){(o||qn(i,e.chartArea,0))&&i.inRange(t.x,t.y,n)&&s.push({element:i,datasetIndex:r,index:a})}),!0),s}function qs(e,t,i,n,o,s){let r=[];const a=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){const o=t?Math.abs(e.x-n.x):0,s=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}(i);let l=Number.POSITIVE_INFINITY;return Ws(e,i,t,(function(i,d,c){const u=i.inRange(t.x,t.y,o);if(n&&!u)return;const h=i.getCenterPoint(o);if(!(!!s||e.isPointInArea(h))&&!u)return;const p=a(t,h);p<l?(r=[{element:i,datasetIndex:d,index:c}],l=p):p===l&&r.push({element:i,datasetIndex:d,index:c})})),r}function Ks(e,t,i,n,o,s){return s||e.isPointInArea(t)?"r"!==i||n?qs(e,t,i,n,o,s):function(e,t,i,n){let o=[];return Ws(e,i,t,(function(e,i,s){const{startAngle:r,endAngle:a}=e.getProps(["startAngle","endAngle"],n),{angle:l}=tn(e,{x:t.x,y:t.y});rn(l,r,a)&&o.push({element:e,datasetIndex:i,index:s})})),o}(e,t,i,o):[]}function Ys(e,t,i,n,o){const s=[],r="x"===i?"inXRange":"inYRange";let a=!1;return Ws(e,i,t,((e,n,l)=>{e[r]&&e[r](t[i],o)&&(s.push({element:e,datasetIndex:n,index:l}),a=a||e.inRange(t.x,t.y,o))})),n&&!a?[]:s}var Qs={evaluateInteractionItems:Ws,modes:{index(e,t,i,n){const o=Bo(t,e),s=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Us(e,o,s,n,r):Ks(e,o,s,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,i,n){const o=Bo(t,e),s=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?Us(e,o,s,n,r):Ks(e,o,s,!1,n,r);if(a.length>0){const t=a[0].datasetIndex,i=e.getDatasetMeta(t).data;a=[];for(let e=0;e<i.length;++e)a.push({element:i[e],datasetIndex:t,index:e})}return a},point:(e,t,i,n)=>Us(e,Bo(t,e),i.axis||"xy",n,i.includeInvisible||!1),nearest(e,t,i,n){const o=Bo(t,e),s=i.axis||"xy",r=i.includeInvisible||!1;return Ks(e,o,s,i.intersect,n,r)},x:(e,t,i,n)=>Ys(e,Bo(t,e),"x",i.intersect,n),y:(e,t,i,n)=>Ys(e,Bo(t,e),"y",i.intersect,n)}};const $s=["left","top","right","bottom"];function Xs(e,t){return e.filter((e=>e.pos===t))}function Js(e,t){return e.filter((e=>-1===$s.indexOf(e.pos)&&e.box.axis===t))}function Zs(e,t){return e.sort(((e,i)=>{const n=t?i:e,o=t?e:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function er(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:n,stackWeight:o}=i;if(!e||!$s.includes(n))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;let s,r,a;for(s=0,r=e.length;s<r;++s){a=e[s];const{fullSize:r}=a.box,l=i[a.stack],d=l&&a.stackWeight/l.weight;a.horizontal?(a.width=d?d*n:r&&t.availableWidth,a.height=o):(a.width=n,a.height=d?d*o:r&&t.availableHeight)}return i}function tr(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function ir(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function nr(e,t,i,n){const{pos:o,box:s}=i,r=e.maxPadding;if(!bi(o)){i.size&&(e[o]-=i.size);const t=n[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?s.height:s.width),i.size=t.size/t.count,e[o]+=i.size}s.getPadding&&ir(r,s.getPadding());const a=Math.max(0,t.outerWidth-tr(r,e,"left","right")),l=Math.max(0,t.outerHeight-tr(r,e,"top","bottom")),d=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:d,other:c}:{same:c,other:d}}function or(e,t){const i=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(t[e],i[e])})),n}return n(e?["left","right"]:["top","bottom"])}function sr(e,t,i,n){const o=[];let s,r,a,l,d,c;for(s=0,r=e.length,d=0;s<r;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,or(a.horizontal,t));const{same:r,other:u}=nr(t,i,a,n);d|=r&&o.length,c=c||u,l.fullSize||o.push(a)}return d&&sr(o,t,i,n)||c}function rr(e,t,i,n,o){e.top=i,e.left=t,e.right=t+n,e.bottom=i+o,e.width=n,e.height=o}function ar(e,t,i,n){const o=i.padding;let{x:s,y:r}=t;for(const a of e){const e=a.box,l=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/l.weight||1;if(a.horizontal){const n=t.w*d,s=l.size||e.height;Ii(l.start)&&(r=l.start),e.fullSize?rr(e,o.left,r,i.outerWidth-o.right-o.left,s):rr(e,t.left+l.placed,r,n,s),l.start=r,l.placed+=n,r=e.bottom}else{const n=t.h*d,r=l.size||e.width;Ii(l.start)&&(s=l.start),e.fullSize?rr(e,s,o.top,r,i.outerHeight-o.bottom-o.top):rr(e,s,t.top+l.placed,r,n),l.start=s,l.placed+=n,s=e.right}}t.x=s,t.y=r}var lr={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const o=ao(e.options.layout.padding),s=Math.max(t-o.width,0),r=Math.max(i-o.height,0),a=function(e){const t=function(e){const t=[];let i,n,o,s,r,a;for(i=0,n=(e||[]).length;i<n;++i)o=e[i],({position:s,options:{stack:r,stackWeight:a=1}}=o),t.push({index:i,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:r&&s+r,stackWeight:a});return t}(e),i=Zs(t.filter((e=>e.box.fullSize)),!0),n=Zs(Xs(t,"left"),!0),o=Zs(Xs(t,"right")),s=Zs(Xs(t,"top"),!0),r=Zs(Xs(t,"bottom")),a=Js(t,"x"),l=Js(t,"y");return{fullSize:i,leftAndTop:n.concat(s),rightAndBottom:o.concat(l).concat(r).concat(a),chartArea:Xs(t,"chartArea"),vertical:n.concat(o).concat(l),horizontal:s.concat(r).concat(a)}}(e.boxes),l=a.vertical,d=a.horizontal;Ri(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const c=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:o,availableWidth:s,availableHeight:r,vBoxMaxWidth:s/2/c,hBoxMaxHeight:r/2}),h=Object.assign({},o);ir(h,ao(n));const p=Object.assign({maxPadding:h,w:s,h:r,x:o.left,y:o.top},o),g=er(l.concat(d),u);sr(a.fullSize,p,u,g),sr(l,p,u,g),sr(d,p,u,g)&&sr(l,p,u,g),function(e){const t=e.maxPadding;function i(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(p),ar(a.leftAndTop,p,u,g),p.x+=p.w,p.y+=p.h,ar(a.rightAndBottom,p,u,g),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ri(a.chartArea,(t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class dr{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class cr extends dr{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ur="$chartjs",hr={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pr=e=>null===e||""===e;const gr=!!Go&&{passive:!0};function mr(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,gr)}function fr(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function vr(e,t,i){const n=e.canvas,o=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||fr(i.addedNodes,n),t=t&&!fr(i.removedNodes,n);t&&i()}));return o.observe(document,{childList:!0,subtree:!0}),o}function br(e,t,i){const n=e.canvas,o=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||fr(i.removedNodes,n),t=t&&!fr(i.addedNodes,n);t&&i()}));return o.observe(document,{childList:!0,subtree:!0}),o}const wr=new Map;let yr=0;function xr(){const e=window.devicePixelRatio;e!==yr&&(yr=e,wr.forEach(((t,i)=>{i.currentDevicePixelRatio!==e&&t()})))}function Cr(e,t,i){const n=e.canvas,o=n&&Ao(n);if(!o)return;const s=fn(((e,t)=>{const n=o.clientWidth;i(e,t),n<o.clientWidth&&i()}),window),r=new ResizeObserver((e=>{const t=e[0],i=t.contentRect.width,n=t.contentRect.height;0===i&&0===n||s(i,n)}));return r.observe(o),function(e,t){wr.size||window.addEventListener("resize",xr),wr.set(e,t)}(e,s),r}function Sr(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){wr.delete(e),wr.size||window.removeEventListener("resize",xr)}(e)}function Rr(e,t,i){const n=e.canvas,o=fn((t=>{null!==e.ctx&&i(function(e,t){const i=hr[e.type]||e.type,{x:n,y:o}=Bo(e,t);return{type:i,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==o?o:null}}(t,e))}),e);return function(e,t,i){e&&e.addEventListener(t,i,gr)}(n,t,o),o}class kr extends dr{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,n=e.getAttribute("height"),o=e.getAttribute("width");if(e[ur]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",pr(o)){const t=Wo(e,"width");void 0!==t&&(e.width=t)}if(pr(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Wo(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[ur])return!1;const i=t[ur].initial;["height","width"].forEach((e=>{const n=i[e];fi(n)?t.removeAttribute(e):t.setAttribute(e,n)}));const n=i.style||{};return Object.keys(n).forEach((e=>{t.style[e]=n[e]})),t.width=t.width,delete t[ur],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:vr,detach:br,resize:Cr}[t]||Rr;n[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:Sr,detach:Sr,resize:Sr}[t]||mr)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return Vo(e,t,i,n)}isAttached(e){const t=e&&Ao(e);return!(!t||!t.isConnected)}}class Pr{constructor(){d(this,"x",void 0),d(this,"y",void 0),d(this,"active",!1),d(this,"options",void 0),d(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return $i(this.x)&&$i(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach((e=>{n[e]=i[e]&&i[e].active()?i[e]._to:this[e]})),n}}function Er(e,t){const i=e.options.ticks,n=function(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),o=e._maxLength/i;return Math.floor(Math.min(n,o))}(e),o=Math.min(i.maxTicksLimit||n,n),s=i.major.enabled?function(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}(t):[],r=s.length,a=s[0],l=s[r-1],d=[];if(r>o)return function(e,t,i,n){let o,s=0,r=i[0];for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=i[s*n])}(t,d,s,r/o),d;const c=function(e,t,i){const n=function(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}(e),o=t.length/i;if(!n)return Math.max(o,1);const s=function(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(0|i)&&t.push(i),t.sort(((e,t)=>e-t)).pop(),t}(n);for(let r=0,a=s.length-1;r<a;r++){const e=s[r];if(e>o)return e}return Math.max(o,1)}(s,t,o);if(r>0){let e,i;const n=r>1?Math.round((l-a)/(r-1)):null;for(Fr(t,d,c,fi(n)?0:a-n,a),e=0,i=r-1;e<i;e++)Fr(t,d,c,s[e],s[e+1]);return Fr(t,d,c,l,fi(n)?t.length:l+n),d}return Fr(t,d,c),d}function Fr(e,t,i,n,o){const s=xi(n,0),r=Math.min(xi(o,e.length),e.length);let a,l,d,c=0;for(i=Math.ceil(i),o&&(a=o-n,i=a/Math.floor(a/i)),d=s;d<0;)c++,d=Math.round(s+c*i);for(l=Math.max(s,0);l<r;l++)l===d&&(t.push(e[l]),c++,d=Math.round(s+c*i))}d(Pr,"defaults",{}),d(Pr,"defaultRoutes",void 0);const Dr=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,Nr=(e,t)=>Math.min(t||e,e);function Mr(e,t){const i=[],n=e.length/t,o=e.length;let s=0;for(;s<o;s+=n)i.push(e[Math.floor(s)]);return i}function Tr(e,t,i){const n=e.ticks.length,o=Math.min(t,n-1),s=e._startPixel,r=e._endPixel,a=1e-6;let l,d=e.getPixelForTick(o);if(!(i&&(l=1===n?Math.max(d-s,r-d):0===t?(e.getPixelForTick(1)-d)/2:(d-e.getPixelForTick(o-1))/2,d+=o<t?l:-l,d<s-a||d>r+a)))return d}function jr(e){return e.drawTicks?e.tickLength:0}function Ar(e,t){if(!e.display)return 0;const i=lo(e.font,t),n=ao(e.padding);return(vi(e.text)?e.text.length:1)*i.lineHeight+n.height}function Ir(e,t,i){let n=vn(e);return(i&&"right"!==t||!i&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Lr extends Pr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=yi(e,Number.POSITIVE_INFINITY),t=yi(t,Number.NEGATIVE_INFINITY),i=yi(i,Number.POSITIVE_INFINITY),n=yi(n,Number.NEGATIVE_INFINITY),{min:yi(e,i),max:yi(t,n),minDefined:wi(e),maxDefined:wi(t)}}getMinMax(e){let t,{min:i,max:n,minDefined:o,maxDefined:s}=this.getUserBounds();if(o&&s)return{min:i,max:n};const r=this.getMatchingVisibleMetas();for(let a=0,l=r.length;a<l;++a)t=r[a].controller.getMinMax(this,e),o||(i=Math.min(i,t.min)),s||(n=Math.max(n,t.max));return i=s&&i>n?n:i,n=o&&i>n?i:n,{min:yi(i,yi(n,i)),max:yi(n,yi(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Si(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:o,ticks:s}=this.options,r=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){const{min:n,max:o}=e,s=Ci(t,(o-n)/2),r=(e,t)=>i&&0===e?0:e+t;return{min:r(n,-Math.abs(s)),max:r(o,s)}}(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=r<this.ticks.length;this._convertTicksToLabels(a?Mr(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Er(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Si(this.options.afterUpdate,[this])}beforeSetDimensions(){Si(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Si(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Si(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Si(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,o;for(i=0,n=e.length;i<n;i++)o=e[i],o.label=Si(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){Si(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Si(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Nr(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,o=t.maxRotation;let s,r,a,l=n;if(!this._isVisible()||!t.display||n>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const d=this._getLabelSizes(),c=d.widest.width,u=d.highest.height,h=an(this.chart.width-c,0,this.maxWidth);s=e.offset?this.maxWidth/i:h/(i-1),c+6>s&&(s=h/(i-(e.offset?.5:1)),r=this.maxHeight-jr(e.grid)-t.padding-Ar(e.title,this.chart.options.font),a=Math.sqrt(c*c+u*u),l=Zi(Math.min(Math.asin(an((d.highest.height+6)/s,-1,1)),Math.asin(an(r/a,-1,1))-Math.asin(an(u/a,-1,1)))),l=Math.max(n,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Si(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Si(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:o}}=this,s=this._isVisible(),r=this.isHorizontal();if(s){const s=Ar(n,t.options.font);if(r?(e.width=this.maxWidth,e.height=jr(o)+s):(e.height=this.maxHeight,e.width=jr(o)+s),i.display&&this.ticks.length){const{first:t,last:n,widest:o,highest:s}=this._getLabelSizes(),a=2*i.padding,l=Ji(this.labelRotation),d=Math.cos(l),c=Math.sin(l);if(r){const t=i.mirror?0:c*o.width+d*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=i.mirror?0:d*o.width+c*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,n,c,d)}}this._handleMargins(),r?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:o,padding:s},position:r}=this.options,a=0!==this.labelRotation,l="top"!==r&&"x"===this.axis;if(this.isHorizontal()){const r=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,u=0;a?l?(c=n*e.width,u=i*t.height):(c=i*e.height,u=n*t.width):"start"===o?u=t.width:"end"===o?c=e.width:"inner"!==o&&(c=e.width/2,u=t.width/2),this.paddingLeft=Math.max((c-r+s)*this.width/(this.width-r),0),this.paddingRight=Math.max((u-d+s)*this.width/(this.width-d),0)}else{let i=t.height/2,n=e.height/2;"start"===o?(i=0,n=e.height):"end"===o&&(i=t.height,n=0),this.paddingTop=i+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Si(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)fi(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Mr(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:n,_longestTextCache:o}=this,s=[],r=[],a=Math.floor(t/Nr(t,i));let l,d,c,u,h,p,g,m,f,v,b,w=0,y=0;for(l=0;l<t;l+=a){if(u=e[l].label,h=this._resolveTickFontOptions(l),n.font=p=h.string,g=o[p]=o[p]||{data:{},gc:[]},m=h.lineHeight,f=v=0,fi(u)||vi(u)){if(vi(u))for(d=0,c=u.length;d<c;++d)b=u[d],fi(b)||vi(b)||(f=zn(n,g.data,g.gc,f,b),v+=m)}else f=zn(n,g.data,g.gc,f,u),v=m;s.push(f),r.push(v),w=Math.max(f,w),y=Math.max(v,y)}!function(e,t){Ri(e,(e=>{const i=e.gc,n=i.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[i[o]];i.splice(0,n)}}))}(o,t);const x=s.indexOf(w),C=r.indexOf(y),S=e=>({width:s[e]||0,height:r[e]||0});return{first:S(0),last:S(t-1),widest:S(x),highest:S(C),widths:s,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return an(this._alignToPixels?Hn(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return uo(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=uo(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Ji(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,r=o?o.widest.width+s:0,a=o?o.highest.height+s:0;return this.isHorizontal()?a*i>r*n?r/i:a/n:a*n<r*i?a/i:r/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:o,position:s,border:r}=n,a=o.offset,l=this.isHorizontal(),d=this.ticks.length+(a?1:0),c=jr(o),u=[],h=r.setContext(this.getContext()),p=h.display?h.width:0,g=p/2,m=function(e){return Hn(i,e,p)};let f,v,b,w,y,x,C,S,R,k,P,E;if("top"===s)f=m(this.bottom),x=this.bottom-c,S=f-g,k=m(e.top)+g,E=e.bottom;else if("bottom"===s)f=m(this.top),k=e.top,E=m(e.bottom)-g,x=f+g,S=this.top+c;else if("left"===s)f=m(this.right),y=this.right-c,C=f-g,R=m(e.left)+g,P=e.right;else if("right"===s)f=m(this.left),R=e.left,P=m(e.right)-g,y=f+g,C=this.left+c;else if("x"===t){if("center"===s)f=m((e.top+e.bottom)/2+.5);else if(bi(s)){const e=Object.keys(s)[0],t=s[e];f=m(this.chart.scales[e].getPixelForValue(t))}k=e.top,E=e.bottom,x=f+g,S=x+c}else if("y"===t){if("center"===s)f=m((e.left+e.right)/2);else if(bi(s)){const e=Object.keys(s)[0],t=s[e];f=m(this.chart.scales[e].getPixelForValue(t))}y=f-g,C=y-c,R=e.left,P=e.right}const F=xi(n.ticks.maxTicksLimit,d),D=Math.max(1,Math.ceil(d/F));for(v=0;v<d;v+=D){const e=this.getContext(v),t=o.setContext(e),n=r.setContext(e),s=t.lineWidth,d=t.color,c=n.dash||[],h=n.dashOffset,p=t.tickWidth,g=t.tickColor,m=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=Tr(this,v,a),void 0!==b&&(w=Hn(i,b,s),l?y=C=R=P=w:x=S=k=E=w,u.push({tx1:y,ty1:x,tx2:C,ty2:S,x1:R,y1:k,x2:P,y2:E,width:s,color:d,borderDash:c,borderDashOffset:h,tickWidth:p,tickColor:g,tickBorderDash:m,tickBorderDashOffset:f}))}return this._ticksLength=d,this._borderValue=f,u}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:o}=i,s=this.isHorizontal(),r=this.ticks,{align:a,crossAlign:l,padding:d,mirror:c}=o,u=jr(i.grid),h=u+d,p=c?-d:h,g=-Ji(this.labelRotation),m=[];let f,v,b,w,y,x,C,S,R,k,P,E,F="middle";if("top"===n)x=this.bottom-p,C=this._getXAxisLabelAlignment();else if("bottom"===n)x=this.top+p,C=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);C=e.textAlign,y=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);C=e.textAlign,y=e.x}else if("x"===t){if("center"===n)x=(e.top+e.bottom)/2+h;else if(bi(n)){const e=Object.keys(n)[0],t=n[e];x=this.chart.scales[e].getPixelForValue(t)+h}C=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)y=(e.left+e.right)/2-h;else if(bi(n)){const e=Object.keys(n)[0],t=n[e];y=this.chart.scales[e].getPixelForValue(t)}C=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===a?F="top":"end"===a&&(F="bottom"));const D=this._getLabelSizes();for(f=0,v=r.length;f<v;++f){b=r[f],w=b.label;const e=o.setContext(this.getContext(f));S=this.getPixelForTick(f)+o.labelOffset,R=this._resolveTickFontOptions(f),k=R.lineHeight,P=vi(w)?w.length:1;const t=P/2,i=e.color,a=e.textStrokeColor,d=e.textStrokeWidth;let u,h=C;if(s?(y=S,"inner"===C&&(h=f===v-1?this.options.reverse?"left":"right":0===f?this.options.reverse?"right":"left":"center"),E="top"===n?"near"===l||0!==g?-P*k+k/2:"center"===l?-D.highest.height/2-t*k+k:-D.highest.height+k/2:"near"===l||0!==g?k/2:"center"===l?D.highest.height/2-t*k:D.highest.height-P*k,c&&(E*=-1),0===g||e.showLabelBackdrop||(y+=k/2*Math.sin(g))):(x=S,E=(1-P)*k/2),e.showLabelBackdrop){const t=ao(e.backdropPadding),i=D.heights[f],n=D.widths[f];let o=E-t.top,s=0-t.left;switch(F){case"middle":o-=i/2;break;case"bottom":o-=i}switch(C){case"center":s-=n/2;break;case"right":s-=n;break;case"inner":f===v-1?s-=n:f>0&&(s-=n/2)}u={left:s,top:o,width:n+t.width,height:i+t.height,color:e.backdropColor}}m.push({label:w,font:R,textOffset:E,options:{rotation:g,color:i,strokeColor:a,strokeWidth:d,textAlign:h,textBaseline:F,translation:[y,x],backdrop:u}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ji(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,s=e+o,r=this._getLabelSizes().widest.width;let a,l;return"left"===t?n?(l=this.right+o,"near"===i?a="left":"center"===i?(a="center",l+=r/2):(a="right",l+=r)):(l=this.right-s,"near"===i?a="right":"center"===i?(a="center",l-=r/2):(a="left",l=this.left)):"right"===t?n?(l=this.left+o,"near"===i?a="right":"center"===i?(a="center",l-=r/2):(a="left",l-=r)):(l=this.left+s,"near"===i?a="left":"center"===i?(a="center",l+=r/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,o,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex((t=>t.value===e));if(i>=0){return t.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,s;const r=(e,t,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(o=0,s=n.length;o<s;++o){const e=n[o];t.drawOnChartArea&&r({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&r({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),s=i.display?o.width:0;if(!s)return;const r=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,d,c,u;this.isHorizontal()?(l=Hn(e,this.left,s)-s/2,d=Hn(e,this.right,r)+r/2,c=u=a):(c=Hn(e,this.top,s)-s/2,u=Hn(e,this.bottom,r)+r/2,l=d=a),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,c),t.lineTo(d,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&Kn(t,i);const n=this.getLabelItems(e);for(const o of n){const e=o.options,i=o.font;Zn(t,o.label,0,o.textOffset,i,e)}i&&Yn(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const o=lo(i.font),s=ao(i.padding),r=i.align;let a=o.lineHeight/2;"bottom"===t||"center"===t||bi(t)?(a+=s.bottom,vi(i.text)&&(a+=o.lineHeight*(i.text.length-1))):a+=s.top;const{titleX:l,titleY:d,maxWidth:c,rotation:u}=function(e,t,i,n){const{top:o,left:s,bottom:r,right:a,chart:l}=e,{chartArea:d,scales:c}=l;let u,h,p,g=0;const m=r-o,f=a-s;if(e.isHorizontal()){if(h=bn(n,s,a),bi(i)){const e=Object.keys(i)[0],n=i[e];p=c[e].getPixelForValue(n)+m-t}else p="center"===i?(d.bottom+d.top)/2+m-t:Dr(e,i,t);u=a-s}else{if(bi(i)){const e=Object.keys(i)[0],n=i[e];h=c[e].getPixelForValue(n)-f+t}else h="center"===i?(d.left+d.right)/2-f+t:Dr(e,i,t);p=bn(n,r,o),g="left"===i?-Gi:Gi}return{titleX:h,titleY:p,maxWidth:u,rotation:g}}(this,a,t,r);Zn(e,i.text,0,0,o,{color:i.color,maxWidth:c,rotation:u,textAlign:Ir(r,t,n),textBaseline:"middle",translation:[l,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=xi(e.grid&&e.grid.z,-1),n=xi(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Lr.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,s;for(o=0,s=t.length;o<s;++o){const s=t[o];s[i]!==this.id||e&&s.type!==e||n.push(s)}return n}_resolveTickFontOptions(e){return lo(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class _r{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const n=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in n||(n[o]=e,function(e,t,i){const n=Di(Object.create(null),[i?Bn.get(i):{},Bn.get(t),e.defaults]);Bn.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((i=>{const n=i.split("."),o=n.pop(),s=[e].concat(n).join("."),r=t[i].split("."),a=r.pop(),l=r.join(".");Bn.route(s,o,l,a)}))}(t,e.defaultRoutes);e.descriptors&&Bn.describe(t,e.descriptors)}(e,s,i),this.override&&Bn.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in Bn[n]&&(delete Bn[n][i],this.override&&delete An[i])}}class Or{constructor(){this.controllers=new _r(Ss,"datasets",!0),this.elements=new _r(Pr,"elements"),this.plugins=new _r(Object,"plugins"),this.scales=new _r(Lr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.scales)}_each(e,t,i){[...t].forEach((t=>{const n=i||this._getRegistryForType(t);i||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):Ri(t,(t=>{const n=i||this._getRegistryForType(t);this._exec(e,n,t)}))}))}_exec(e,t,i){const n=Ai(e);Si(i["before"+n],[],i),t[e](i),Si(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var Br=new Or;class zr{constructor(){this._init=[]}notify(e,t,i,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=n?this._descriptors(e).filter(n):this._descriptors(e),s=this._notify(o,e,t,i);return"afterDestroy"===t&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,i,n){n=n||{};for(const o of e){const e=o.plugin;if(!1===Si(e[i],[t,n,o.options],e)&&n.cancelable)return!1}return!0}invalidate(){fi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=xi(i.options&&i.options.plugins,{}),o=function(e){const t={},i=[],n=Object.keys(Br.plugins.items);for(let s=0;s<n.length;s++)i.push(Br.getPlugin(n[s]));const o=e.plugins||[];for(let s=0;s<o.length;s++){const e=o[s];-1===i.indexOf(e)&&(i.push(e),t[e.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==n||t?function(e,t,i,n){let{plugins:o,localIds:s}=t;const r=[],a=e.getContext();for(const l of o){const t=l.id,o=Vr(i[t],n);null!==o&&r.push({plugin:l,options:Hr(e.config,{plugin:l,local:s[t]},o,a)})}return r}(e,o,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function Vr(e,t){return t||!1!==e?!0===e?{}:e:null}function Hr(e,t,i,n){let{plugin:o,local:s}=t;const r=e.pluginScopeKeys(o),a=e.getOptionScopes(i,r);return s&&o.defaults&&a.push(o.defaults),e.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gr(e,t){const i=Bn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Wr(e){if("x"===e||"y"===e||"r"===e)return e}function Ur(e){if(Wr(e))return e;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of i){const t=s.axis||("top"===(o=s.position)||"bottom"===o?"x":"left"===o||"right"===o?"y":void 0)||e.length>1&&Wr(e[0].toLowerCase());if(t)return t}var o;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function qr(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function Kr(e,t){const i=An[e.type]||{scales:{}},n=t.scales||{},o=Gr(e.type,t),s=Object.create(null);return Object.keys(n).forEach((t=>{const r=n[t];if(!bi(r))return console.error("Invalid scale configuration for scale: ".concat(t));if(r._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=Ur(t,r,function(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(i.length)return qr(e,"x",i[0])||qr(e,"y",i[0])}return{}}(t,e),Bn.scales[r.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,o),d=i.scales||{};s[t]=Ni(Object.create(null),[{axis:a},r,d[a],d[l]])})),e.data.datasets.forEach((i=>{const o=i.type||e.type,r=i.indexAxis||Gr(o,t),a=(An[o]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,r),o=i[t+"AxisID"]||t;s[o]=s[o]||Object.create(null),Ni(s[o],[{axis:t},n[o],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Ni(t,[Bn.scales[t.type],Bn.scale])})),s}function Yr(e){const t=e.options||(e.options={});t.plugins=xi(t.plugins,{}),t.scales=Kr(e,t)}function Qr(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const $r=new Map,Xr=new Set;function Jr(e,t){let i=$r.get(e);return i||(i=t(),$r.set(e,i),Xr.add(i)),i}const Zr=(e,t,i)=>{const n=ji(t,i);void 0!==n&&e.add(n)};class ea{constructor(e){this._config=function(e){return(e=e||{}).data=Qr(e.data),Yr(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Qr(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yr(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jr(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return Jr("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return Jr("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,i=this.type;return Jr("".concat(i,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return n&&!t||(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:o}=this,s=this._cachedScopes(e,i),r=s.get(t);if(r)return r;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>Zr(a,e,t)))),t.forEach((e=>Zr(a,n,e))),t.forEach((e=>Zr(a,An[o]||{},e))),t.forEach((e=>Zr(a,Bn,e))),t.forEach((e=>Zr(a,In,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),Xr.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,An[t]||{},Bn.datasets[t]||{},{type:t},Bn,In]}resolveNamedOptions(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const o={$shared:!0},{resolver:s,subPrefixes:r}=ta(this._resolverCache,e,n);let a=s;if(function(e,t){const{isScriptable:i,isIndexable:n}=go(e);for(const o of t){const t=i(o),s=n(o),r=(s||t)&&e[o];if(t&&(Li(r)||ia(r))||s&&vi(r))return!0}return!1}(s,t)){o.$shared=!1;a=po(s,i=Li(i)?i():i,this.createResolver(e,i,r))}for(const l of t)o[l]=a[l];return o}createResolver(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:o}=ta(this._resolverCache,e,i);return bi(t)?po(o,t,void 0,n):o}}function ta(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const o=i.join();let s=n.get(o);if(!s){s={resolver:ho(t,i),subPrefixes:i.filter((e=>!e.toLowerCase().includes("hover")))},n.set(o,s)}return s}const ia=e=>bi(e)&&Object.getOwnPropertyNames(e).some((t=>Li(e[t])));const na=["top","bottom","left","right","chartArea"];function oa(e,t){return"top"===e||"bottom"===e||-1===na.indexOf(e)&&"x"===t}function sa(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function ra(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Si(i&&i.onComplete,[e],t)}function aa(e){const t=e.chart,i=t.options.animation;Si(i&&i.onProgress,[e],t)}function la(e){return jo()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const da={},ca=e=>{const t=la(e);return Object.values(da).filter((e=>e.canvas===t)).pop()};function ua(e,t,i){const n=Object.keys(e);for(const o of n){const n=+o;if(n>=t){const s=e[o];delete e[o],(i>0||n>t)&&(e[n+i]=s)}}}class ha{static register(){Br.add(...arguments),pa()}static unregister(){Br.remove(...arguments),pa()}constructor(e,t){const i=this.config=new ea(t),n=la(e),o=ca(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(e){return!jo()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?cr:kr}(n)),this.platform.updateConfig(i);const r=this.platform.acquireContext(n,s.aspectRatio),a=r&&r.canvas,l=a&&a.height,d=a&&a.width;this.id=mi(),this.ctx=r,this.canvas=a,this.width=d,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t?(clearTimeout(i),i=setTimeout(e,t,o)):e.apply(this,o),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],da[this.id]=this,r&&a?(as.listen(this,"complete",ra),as.listen(this,"progress",aa),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:n,_aspectRatio:o}=this;return fi(e)?t&&o?o:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Br}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ho(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Gn(this.canvas,this.ctx),this}stop(){return as.stop(this),this}resize(e,t){as.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,e,t,o),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Ho(this,r,!0)&&(this.notifyPlugins("resize",{size:s}),Si(i.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Ri(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce(((e,t)=>(e[t]=!1,e)),{});let o=[];t&&(o=o.concat(Object.keys(t).map((e=>{const i=t[e],n=Ur(e,i),o="r"===n,s="x"===n;return{options:i,dposition:o?"chartArea":s?"bottom":"left",dtype:o?"radialLinear":s?"category":"linear"}})))),Ri(o,(t=>{const o=t.options,s=o.id,r=Ur(s,o),a=xi(o.type,t.dtype);void 0!==o.position&&oa(o.position,r)===oa(t.dposition)||(o.position=t.dposition),n[s]=!0;let l=null;if(s in i&&i[s].type===a)l=i[s];else{l=new(Br.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(o,e)})),Ri(n,((e,t)=>{e||delete i[t]})),Ri(i,(e=>{lr.configure(this,e,e.options),lr.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort(((e,t)=>e.index-t.index)),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(sa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,i)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const n=t[i];let o=this.getDatasetMeta(i);const s=n.type||this.config.type;if(o.type&&o.type!==s&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=s,o.indexAxis=n.indexAxis||Gr(s,this.options),o.order=n.order||0,o.index=i,o.label=""+n.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const t=Br.getController(s),{datasetElementType:n,dataElementType:r}=Bn.datasets[s];Object.assign(t,{dataElementType:Br.getElement(r),datasetElementType:n&&Br.getElement(n)}),o.controller=new t(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ri(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,d=this.data.datasets.length;l<d;l++){const{controller:e}=this.getDatasetMeta(l),t=!n&&-1===o.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),n||Ri(o,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sa("z","_idx"));const{_active:r,_lastEvent:a}=this;a?this._eventHandler(a,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){Ri(this.scales,(e=>{lr.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);_i(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of t){ua(e,n,"_removeElements"===i?-o:o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),n=i(0);for(let o=1;o<t;o++)if(!_i(n,i(o)))return;return Array.from(n).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;lr.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Ri(this.boxes,(e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Li(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(as.has(this)?this.attached&&!as.running(this)&&as.start(this):(this.draw(),ra({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,o;for(n=0,o=t.length;n<o;++n){const o=t[n];e&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=ss(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(n&&Kn(t,n),e.controller.draw(),n&&Yn(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return qn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const o=Qs.modes[t];return"function"===typeof o?o(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter((e=>e&&e._dataset===t)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=uo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"===typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",o=this.getDatasetMeta(e),s=o.controller._resolveAnimations(void 0,n);Ii(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),s.update(o,{visible:i}),this.update((t=>t.datasetIndex===e?n:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),as.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Gn(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete da[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};Ri(this.options.events,(e=>i(e,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(i,n)=>{e[i]&&(t.removeEventListener(this,i,n),delete e[i])},o=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const r=()=>{n("attach",r),this.attached=!0,this.resize(),i("resize",o),i("detach",s)};s=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",r)},t.isAttached(this.canvas)?r():s()}unbindEvents(){Ri(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Ri(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let o,s,r,a;for("dataset"===t&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),r=0,a=e.length;r<a;++r){s=e[r];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map((e=>{let{datasetIndex:t,index:i}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[i],index:i}}));!ki(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,i){const n=this.options.hover,o=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=o(t,e),r=i?e:o(e,t);s.length&&this.updateHoverStyle(s,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:o}=this,s=t,r=this._getActiveElements(e,n,i,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,i,n){return i&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,i,a);i&&(this._lastEvent=null,Si(o.onHover,[e,r,this],this),a&&Si(o.onClick,[e,r,this],this));const d=!ki(r,n);return(d||t)&&(this._active=r,this._updateHoverStyles(r,n,t)),this._lastEvent=l,d}_getActiveElements(e,t,i,n){if("mouseout"===e.type)return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}}function pa(){return Ri(ha.instances,(e=>e._plugins.invalidate()))}function ga(e,t,i,n){const o=oo(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(i-t)/2,r=Math.min(s,n*t/2),a=e=>{const t=(i-Math.min(s,e))*n/2;return an(e,0,Math.min(s,t))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:an(o.innerStart,0,r),innerEnd:an(o.innerEnd,0,r)}}function ma(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function fa(e,t,i,n,o,s){const{x:r,y:a,startAngle:l,pixelMargin:d,innerRadius:c}=t,u=Math.max(t.outerRadius+n+i-d,0),h=c>0?c+n+i+d:0;let p=0;const g=o-l;if(n){const e=((c>0?c-n:0)+(u>0?u-n:0))/2;p=(g-(0!==e?g*e/(e+n):g))/2}const m=(g-Math.max(.001,g*u-i/Oi)/u)/2,f=l+m+p,v=o-m-p,{outerStart:b,outerEnd:w,innerStart:y,innerEnd:x}=ga(t,h,u,v-f),C=u-b,S=u-w,R=f+b/C,k=v-w/S,P=h+y,E=h+x,F=f+y/P,D=v-x/E;if(e.beginPath(),s){const t=(R+k)/2;if(e.arc(r,a,u,R,t),e.arc(r,a,u,t,k),w>0){const t=ma(S,k,r,a);e.arc(t.x,t.y,w,k,v+Gi)}const i=ma(E,v,r,a);if(e.lineTo(i.x,i.y),x>0){const t=ma(E,D,r,a);e.arc(t.x,t.y,x,v+Gi,D+Math.PI)}const n=(v-x/h+(f+y/h))/2;if(e.arc(r,a,h,v-x/h,n,!0),e.arc(r,a,h,n,f+y/h,!0),y>0){const t=ma(P,F,r,a);e.arc(t.x,t.y,y,F+Math.PI,f-Gi)}const o=ma(C,f,r,a);if(e.lineTo(o.x,o.y),b>0){const t=ma(C,R,r,a);e.arc(t.x,t.y,b,f-Gi,R)}}else{e.moveTo(r,a);const t=Math.cos(R)*u+r,i=Math.sin(R)*u+a;e.lineTo(t,i);const n=Math.cos(k)*u+r,o=Math.sin(k)*u+a;e.lineTo(n,o)}e.closePath()}function va(e,t,i,n,o){const{fullCircles:s,startAngle:r,circumference:a,options:l}=t,{borderWidth:d,borderJoinStyle:c,borderDash:u,borderDashOffset:h,borderRadius:p}=l,g="inner"===l.borderAlign;if(!d)return;e.setLineDash(u||[]),e.lineDashOffset=h,g?(e.lineWidth=2*d,e.lineJoin=c||"round"):(e.lineWidth=d,e.lineJoin=c||"bevel");let m=t.endAngle;if(s){fa(e,t,i,n,m,o);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(m=r+(a%Bi||Bi))}g&&function(e,t,i){const{startAngle:n,pixelMargin:o,x:s,y:r,outerRadius:a,innerRadius:l}=t;let d=o/a;e.beginPath(),e.arc(s,r,a,n-d,i+d),l>o?(d=o/l,e.arc(s,r,l,i+d,n-d,!0)):e.arc(s,r,o,i+Gi,n-Gi),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-r>=Oi&&0===p&&"miter"!==c&&function(e,t,i){const{startAngle:n,x:o,y:s,outerRadius:r,innerRadius:a,options:l}=t,{borderWidth:d,borderJoinStyle:c}=l,u=Math.min(d/r,sn(n-i));if(e.beginPath(),e.arc(o,s,r-d/2,n+u/2,i-u/2),a>0){const t=Math.min(d/a,sn(n-i));e.arc(o,s,a+d/2,i-t/2,n+t/2,!0)}else{const t=Math.min(d/2,r*sn(n-i));if("round"===c)e.arc(o,s,t,i-Oi/2,n+Oi/2,!0);else if("bevel"===c){const r=2*t*t,a=-r*Math.cos(i+Oi/2)+o,l=-r*Math.sin(i+Oi/2)+s,d=r*Math.cos(n+Oi/2)+o,c=r*Math.sin(n+Oi/2)+s;e.lineTo(a,l),e.lineTo(d,c)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(fa(e,t,i,n,m,o),e.stroke())}d(ha,"defaults",Bn),d(ha,"instances",da),d(ha,"overrides",An),d(ha,"registry",Br),d(ha,"version","4.5.0"),d(ha,"getChart",ca);class ba extends Pr{constructor(e){super(),d(this,"circumference",void 0),d(this,"endAngle",void 0),d(this,"fullCircles",void 0),d(this,"innerRadius",void 0),d(this,"outerRadius",void 0),d(this,"pixelMargin",void 0),d(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.getProps(["x","y"],i),{angle:o,distance:s}=tn(n,{x:e,y:t}),{startAngle:r,endAngle:a,innerRadius:l,outerRadius:d,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,h=xi(c,a-r),p=rn(o,r,a)&&r!==a,g=h>=Bi||p,m=ln(s,l+u,d+u);return g&&m}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:o,innerRadius:s,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,d=(n+o)/2,c=(s+r+l+a)/2;return{x:t+Math.cos(d)*c,y:i+Math.sin(d)*c}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,n=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>Bi?Math.floor(i/Bi):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const r=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(r)*n,Math.sin(r)*n);const a=n*(1-Math.sin(Math.min(Oi,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,n,o){const{fullCircles:s,startAngle:r,circumference:a}=t;let l=t.endAngle;if(s){fa(e,t,i,n,l,o);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=r+(a%Bi||Bi))}fa(e,t,i,n,l,o),e.fill()}(e,this,a,o,s),va(e,this,a,o,s),e.restore()}}function wa(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=xi(i.borderCapStyle,t.borderCapStyle),e.setLineDash(xi(i.borderDash,t.borderDash)),e.lineDashOffset=xi(i.borderDashOffset,t.borderDashOffset),e.lineJoin=xi(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=xi(i.borderWidth,t.borderWidth),e.strokeStyle=xi(i.borderColor,t.borderColor)}function ya(e,t,i){e.lineTo(i.x,i.y)}function xa(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:o=0,end:s=n-1}=i,{start:r,end:a}=t,l=Math.max(o,r),d=Math.min(s,a),c=o<r&&s<r||o>a&&s>a;return{count:n,start:l,loop:t.loop,ilen:d<l&&!c?n+d-l:d-l}}function Ca(e,t,i,n){const{points:o,options:s}=t,{count:r,start:a,loop:l,ilen:d}=xa(o,i,n),c=function(e){return e.stepped?Qn:e.tension||"monotone"===e.cubicInterpolationMode?$n:ya}(s);let u,h,p,{move:g=!0,reverse:m}=n||{};for(u=0;u<=d;++u)h=o[(a+(m?d-u:u))%r],h.skip||(g?(e.moveTo(h.x,h.y),g=!1):c(e,p,h,m,s.stepped),p=h);return l&&(h=o[(a+(m?d:0))%r],c(e,p,h,m,s.stepped)),!!l}function Sa(e,t,i,n){const o=t.points,{count:s,start:r,ilen:a}=xa(o,i,n),{move:l=!0,reverse:d}=n||{};let c,u,h,p,g,m,f=0,v=0;const b=e=>(r+(d?a-e:e))%s,w=()=>{p!==g&&(e.lineTo(f,g),e.lineTo(f,p),e.lineTo(f,m))};for(l&&(u=o[b(0)],e.moveTo(u.x,u.y)),c=0;c<=a;++c){if(u=o[b(c)],u.skip)continue;const t=u.x,i=u.y,n=0|t;n===h?(i<p?p=i:i>g&&(g=i),f=(v*f+t)/++v):(w(),e.lineTo(t,i),h=n,v=0,p=g=i),m=i}w()}function Ra(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!i?Sa:Ca}d(ba,"id","arc"),d(ba,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),d(ba,"defaultRoutes",{backgroundColor:"backgroundColor"}),d(ba,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const ka="function"===typeof Path2D;function Pa(e,t,i,n){ka&&!t.options.segment?function(e,t,i,n){let o=t._path;o||(o=t._path=new Path2D,t.path(o,i,n)&&o.closePath()),wa(e,t.options),e.stroke(o)}(e,t,i,n):function(e,t,i,n){const{segments:o,options:s}=t,r=Ra(t);for(const a of o)wa(e,s,a.style),e.beginPath(),r(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}(e,t,i,n)}class Ea extends Pr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;To(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const i=e.points,n=e.options.spanGaps,o=i.length;if(!o)return[];const s=!!e._loop,{start:r,end:a}=function(e,t,i,n){let o=0,s=t-1;if(i&&!n)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,i&&(s+=o);s>o&&e[s%t].skip;)s--;return s%=t,{start:o,end:s}}(i,o,s,n);return ts(e,!0===n?[{start:r,end:a,loop:s}]:function(e,t,i,n){const o=e.length,s=[];let r,a=t,l=e[t];for(r=t+1;r<=i;++r){const i=e[r%o];i.skip||i.stop?l.skip||(n=!1,s.push({start:t%o,end:(r-1)%o,loop:n}),t=a=i.stop?r:null):(a=r,l.skip&&(t=r)),l=i}return null!==a&&s.push({start:t%o,end:a%o,loop:n}),s}(i,r,a<r?a+o:a,!!e._fullLoop&&0===r&&a===o-1),i,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],o=this.points,s=es(this,{property:t,start:n,end:n});if(!s.length)return;const r=[],a=function(e){return e.stepped?qo:e.tension||"monotone"===e.cubicInterpolationMode?Ko:Uo}(i);let l,d;for(l=0,d=s.length;l<d;++l){const{start:d,end:c}=s[l],u=o[d],h=o[c];if(u===h){r.push(u);continue}const p=a(u,h,Math.abs((n-u[t])/(h[t]-u[t])),i.stepped);p[t]=e[t],r.push(p)}return 1===r.length?r[0]:r}pathSegment(e,t,i){return Ra(this)(e,this,t,i)}path(e,t,i){const n=this.segments,o=Ra(this);let s=this._loop;t=t||0,i=i||this.points.length-t;for(const r of n)s&=o(e,this,r,{start:t,end:t+i-1});return!!s}draw(e,t,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),Pa(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Fa(e,t,i,n){const o=e.options,{[i]:s}=e.getProps([i],n);return Math.abs(t-s)<o.radius+o.hitRadius}d(Ea,"id","line"),d(Ea,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),d(Ea,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),d(Ea,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Da extends Pr{constructor(e){super(),d(this,"parsed",void 0),d(this,"skip",void 0),d(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:o,y:s}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(t-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return Fa(this,e,"x",t)}inYRange(e,t){return Fa(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const i=this.options;this.skip||i.radius<.1||!qn(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Wn(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Na(e,t){const{x:i,y:n,base:o,width:s,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,d,c,u;return e.horizontal?(u=r/2,a=Math.min(i,o),l=Math.max(i,o),d=n-u,c=n+u):(u=s/2,a=i-u,l=i+u,d=Math.min(n,o),c=Math.max(n,o)),{left:a,top:d,right:l,bottom:c}}function Ma(e,t,i,n){return e?0:an(t,i,n)}function Ta(e){const t=Na(e),i=t.right-t.left,n=t.bottom-t.top,o=function(e,t,i){const n=e.options.borderWidth,o=e.borderSkipped,s=so(n);return{t:Ma(o.top,s.top,0,i),r:Ma(o.right,s.right,0,t),b:Ma(o.bottom,s.bottom,0,i),l:Ma(o.left,s.left,0,t)}}(e,i/2,n/2),s=function(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,s=ro(o),r=Math.min(t,i),a=e.borderSkipped,l=n||bi(o);return{topLeft:Ma(!l||a.top||a.left,s.topLeft,0,r),topRight:Ma(!l||a.top||a.right,s.topRight,0,r),bottomLeft:Ma(!l||a.bottom||a.left,s.bottomLeft,0,r),bottomRight:Ma(!l||a.bottom||a.right,s.bottomRight,0,r)}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:s},inner:{x:t.left+o.l,y:t.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function ja(e,t,i,n){const o=null===t,s=null===i,r=e&&!(o&&s)&&Na(e,n);return r&&(o||ln(t,r.left,r.right))&&(s||ln(i,r.top,r.bottom))}function Aa(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ia(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==i.x?-t:0,o=e.y!==i.y?-t:0,s=(e.x+e.w!==i.x+i.w?t:0)-n,r=(e.y+e.h!==i.y+i.h?t:0)-o;return{x:e.x+n,y:e.y+o,w:e.w+s,h:e.h+r,radius:e.radius}}d(Da,"id","point"),d(Da,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),d(Da,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class La extends Pr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:s}=Ta(this),r=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?eo:Aa;var a;e.save(),s.w===o.w&&s.h===o.h||(e.beginPath(),r(e,Ia(s,t,o)),e.clip(),r(e,Ia(o,-t,s)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),r(e,Ia(o,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return ja(this,e,t,i)}inXRange(e,t){return ja(this,e,null,t)}inYRange(e,t){return ja(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+n)/2:t,y:o?i:(i+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}d(La,"id","bar"),d(La,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),d(La,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const _a=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}};class Oa extends Pr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Si(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,i)=>e.sort(t,i,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,n=lo(i.font),o=n.size,s=this._computeTitleHeight(),{boxWidth:r,itemHeight:a}=_a(i,o);let l,d;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,d=this._fitRows(s,o,r,a)+10):(d=this.maxHeight,l=this._fitCols(s,n,r,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:o,maxWidth:s,options:{labels:{padding:r}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],d=n+r;let c=e;o.textAlign="left",o.textBaseline="middle";let u=-1,h=-d;return this.legendItems.forEach(((e,p)=>{const g=i+t/2+o.measureText(e.text).width;(0===p||l[l.length-1]+g+2*r>s)&&(c+=d,l[l.length-(p>0?0:1)]=0,h+=d,u++),a[p]={left:0,top:h,row:u,width:g,height:n},l[l.length-1]+=g+r})),c}_fitCols(e,t,i,n){const{ctx:o,maxHeight:s,options:{labels:{padding:r}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],d=s-e;let c=r,u=0,h=0,p=0,g=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:m,itemHeight:f}=function(e,t,i,n,o){const s=function(e,t,i,n){let o=e.text;o&&"string"!==typeof o&&(o=o.reduce(((e,t)=>e.length>t.length?e:t)));return t+i.size/2+n.measureText(o).width}(n,e,t,i),r=function(e,t,i){let n=e;"string"!==typeof t.text&&(n=Ba(t,i));return n}(o,n,t.lineHeight);return{itemWidth:s,itemHeight:r}}(i,t,o,e,n);s>0&&h+f+2*r>d&&(c+=u+r,l.push({width:u,height:h}),p+=u+r,g++,u=h=0),a[s]={left:p,top:h,col:g,width:m,height:f},u=Math.max(u,m),h+=f+r})),c+=u,l.push({width:u,height:h}),c}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:o}}=this,s=Yo(o,this.left,this.width);if(this.isHorizontal()){let o=0,r=bn(i,this.left+n,this.right-this.lineWidths[o]);for(const a of t)o!==a.row&&(o=a.row,r=bn(i,this.left+n,this.right-this.lineWidths[o])),a.top+=this.top+e+n,a.left=s.leftForLtr(s.x(r),a.width),r+=a.width+n}else{let o=0,r=bn(i,this.top+e+n,this.bottom-this.columnSizes[o].height);for(const a of t)a.col!==o&&(o=a.col,r=bn(i,this.top+e+n,this.bottom-this.columnSizes[o].height)),a.top=r,a.left+=this.left+n,a.left=s.leftForLtr(s.x(a.left),a.width),r+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Kn(e,this),this._draw(),Yn(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:o,labels:s}=e,r=Bn.color,a=Yo(e.rtl,this.left,this.width),l=lo(s.font),{padding:d}=s,c=l.size,u=c/2;let h;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=_a(s,c),f=this.isHorizontal(),v=this._computeTitleHeight();h=f?{x:bn(o,this.left+d,this.right-i[0]),y:this.top+d+v,line:0}:{x:this.left+d,y:bn(o,this.top+v+d,this.bottom-t[0].height),line:0},Qo(this.ctx,e.textDirection);const b=m+d;this.legendItems.forEach(((w,y)=>{n.strokeStyle=w.fontColor,n.fillStyle=w.fontColor;const x=n.measureText(w.text).width,C=a.textAlign(w.textAlign||(w.textAlign=s.textAlign)),S=p+u+x;let R=h.x,k=h.y;a.setWidth(this.width),f?y>0&&R+S+d>this.right&&(k=h.y+=b,h.line++,R=h.x=bn(o,this.left+d,this.right-i[h.line])):y>0&&k+b>this.bottom&&(R=h.x=R+t[h.line].width+d,h.line++,k=h.y=bn(o,this.top+v+d,this.bottom-t[h.line].height));if(function(e,t,i){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const o=xi(i.lineWidth,1);if(n.fillStyle=xi(i.fillStyle,r),n.lineCap=xi(i.lineCap,"butt"),n.lineDashOffset=xi(i.lineDashOffset,0),n.lineJoin=xi(i.lineJoin,"miter"),n.lineWidth=o,n.strokeStyle=xi(i.strokeStyle,r),n.setLineDash(xi(i.lineDash,[])),s.usePointStyle){const r={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:o},l=a.xPlus(e,p/2);Un(n,r,l,t+u,s.pointStyleWidth&&p)}else{const s=t+Math.max((c-g)/2,0),r=a.leftForLtr(e,p),l=ro(i.borderRadius);n.beginPath(),Object.values(l).some((e=>0!==e))?eo(n,{x:r,y:s,w:p,h:g,radius:l}):n.rect(r,s,p,g),n.fill(),0!==o&&n.stroke()}n.restore()}(a.x(R),k,w),R=((e,t,i,n)=>e===(n?"left":"right")?i:"center"===e?(t+i)/2:t)(C,R+p+u,f?R+S:this.right,e.rtl),function(e,t,i){Zn(n,i.text,e,t+m/2,l,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(R),k,w),f)h.x+=S+d;else if("string"!==typeof w.text){const e=l.lineHeight;h.y+=Ba(w,e)+d}else h.y+=b})),$o(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=lo(t.font),n=ao(t.padding);if(!t.display)return;const o=Yo(e.rtl,this.left,this.width),s=this.ctx,r=t.position,a=i.size/2,l=n.top+a;let d,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+l,c=bn(e.align,c,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);d=l+bn(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=bn(r,c,c+u);s.textAlign=o.textAlign(vn(r)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=i.string,Zn(s,t.text,h,d,i)}_computeTitleHeight(){const e=this.options.title,t=lo(e.font),i=ao(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,o;if(ln(e,this.left,this.right)&&ln(t,this.top,this.bottom))for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],ln(e,n.left,n.left+n.width)&&ln(t,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,r=(o=i,null!==(n=s)&&null!==o&&n.datasetIndex===o.datasetIndex&&n.index===o.index);s&&!r&&Si(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Si(t.onHover,[e,i,this],this)}else i&&Si(t.onClick,[e,i,this],this);var n,o}}function Ba(e,t){return t*(e.text?e.text.length:0)}var za={id:"legend",_element:Oa,start(e,t,i){const n=e.legend=new Oa({ctx:e.ctx,options:i,chart:e});lr.configure(e,n,i),lr.addBox(e,n)},stop(e){lr.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;lr.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),t.hidden=!0):(o.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:s,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(i?0:void 0),d=ao(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:o||l.textAlign,borderRadius:r&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};new WeakMap;const Va={average(e){if(!e.length)return!1;let t,i,n=new Set,o=0,s=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();n.add(e.x),o+=e.y,++s}}if(0===s||0===n.size)return!1;return{x:[...n].reduce(((e,t)=>e+t))/n.size,y:o/s}},nearest(e,t){if(!e.length)return!1;let i,n,o,s=t.x,r=t.y,a=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){const n=e[i].element;if(n&&n.hasValue()){const e=nn(t,n.getCenterPoint());e<a&&(a=e,o=n)}}if(o){const e=o.tooltipPosition();s=e.x,r=e.y}return{x:s,y:r}}};function Ha(e,t){return t&&(vi(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ga(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Wa(e,t){const{element:i,datasetIndex:n,index:o}=t,s=e.getDatasetMeta(n).controller,{label:r,value:a}=s.getLabelAndValue(o);return{chart:e,label:r,parsed:s.getParsed(o),raw:e.data.datasets[n].data[o],formattedValue:a,dataset:s.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function Ua(e,t){const i=e.chart.ctx,{body:n,footer:o,title:s}=e,{boxWidth:r,boxHeight:a}=t,l=lo(t.bodyFont),d=lo(t.titleFont),c=lo(t.footerFont),u=s.length,h=o.length,p=n.length,g=ao(t.padding);let m=g.height,f=0,v=n.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*d.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v){m+=p*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*c.lineHeight+(h-1)*t.footerSpacing);let b=0;const w=function(e){f=Math.max(f,i.measureText(e).width+b)};return i.save(),i.font=d.string,Ri(e.title,w),i.font=l.string,Ri(e.beforeBody.concat(e.afterBody),w),b=t.displayColors?r+2+t.boxPadding:0,Ri(n,(e=>{Ri(e.before,w),Ri(e.lines,w),Ri(e.after,w)})),b=0,i.font=c.string,Ri(e.footer,w),i.restore(),f+=g.width,{width:f,height:m}}function qa(e,t,i,n){const{x:o,width:s}=i,{width:r,chartArea:{left:a,right:l}}=e;let d="center";return"center"===n?d=o<=(a+l)/2?"left":"right":o<=s/2?d="left":o>=r-s/2&&(d="right"),function(e,t,i,n){const{x:o,width:s}=n,r=i.caretSize+i.caretPadding;return"left"===e&&o+s+r>t.width||"right"===e&&o-s-r<0||void 0}(d,e,t,i)&&(d="center"),d}function Ka(e,t,i){const n=i.yAlign||t.yAlign||function(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||qa(e,t,i,n),yAlign:n}}function Ya(e,t,i,n){const{caretSize:o,caretPadding:s,cornerRadius:r}=e,{xAlign:a,yAlign:l}=i,d=o+s,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:p}=ro(r);let g=function(e,t){let{x:i,width:n}=e;return"right"===t?i-=n:"center"===t&&(i-=n/2),i}(t,a);const m=function(e,t,i){let{y:n,height:o}=e;return"top"===t?n+=i:n-="bottom"===t?o+i:o/2,n}(t,l,d);return"center"===l?"left"===a?g+=d:"right"===a&&(g-=d):"left"===a?g-=Math.max(c,h)+o:"right"===a&&(g+=Math.max(u,p)+o),{x:an(g,0,n.width-t.width),y:an(m,0,n.height-t.height)}}function Qa(e,t,i){const n=ao(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function $a(e){return Ha([],Ga(e))}function Xa(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Ja={beforeTitle:gi,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:gi,beforeBody:gi,beforeLabel:gi,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return fi(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:gi,afterBody:gi,beforeFooter:gi,footer:gi,afterFooter:gi};function Za(e,t,i,n){const o=e[t].call(i,n);return"undefined"===typeof o?Ja[t].call(i,n):o}class el extends Pr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,o=new us(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,uo(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}getTitle(e,t){const{callbacks:i}=t,n=Za(i,"beforeTitle",this,e),o=Za(i,"title",this,e),s=Za(i,"afterTitle",this,e);let r=[];return r=Ha(r,Ga(n)),r=Ha(r,Ga(o)),r=Ha(r,Ga(s)),r}getBeforeBody(e,t){return $a(Za(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return Ri(e,(e=>{const t={before:[],lines:[],after:[]},o=Xa(i,e);Ha(t.before,Ga(Za(o,"beforeLabel",this,e))),Ha(t.lines,Za(o,"label",this,e)),Ha(t.after,Ga(Za(o,"afterLabel",this,e))),n.push(t)})),n}getAfterBody(e,t){return $a(Za(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=Za(i,"beforeFooter",this,e),o=Za(i,"footer",this,e),s=Za(i,"afterFooter",this,e);let r=[];return r=Ha(r,Ga(n)),r=Ha(r,Ga(o)),r=Ha(r,Ga(s)),r}_createItems(e){const t=this._active,i=this.chart.data,n=[],o=[],s=[];let r,a,l=[];for(r=0,a=t.length;r<a;++r)l.push(Wa(this.chart,t[r]));return e.filter&&(l=l.filter(((t,n,o)=>e.filter(t,n,o,i)))),e.itemSort&&(l=l.sort(((t,n)=>e.itemSort(t,n,i)))),Ri(l,(t=>{const i=Xa(e.callbacks,t);n.push(Za(i,"labelColor",this,t)),o.push(Za(i,"labelPointStyle",this,t)),s.push(Za(i,"labelTextColor",this,t))})),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let o,s=[];if(n.length){const e=Va[i.position].call(this,n,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const t=this._size=Ua(this,i),r=Object.assign({},e,t),a=Ka(this.chart,i,r),l=Ya(i,r,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,o={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const o=this.getCaretPosition(e,i,n);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:o}=this,{caretSize:s,cornerRadius:r}=i,{topLeft:a,topRight:l,bottomLeft:d,bottomRight:c}=ro(r),{x:u,y:h}=e,{width:p,height:g}=t;let m,f,v,b,w,y;return"center"===o?(w=h+g/2,"left"===n?(m=u,f=m-s,b=w+s,y=w-s):(m=u+p,f=m+s,b=w-s,y=w+s),v=m):(f="left"===n?u+Math.max(a,d)+s:"right"===n?u+p-Math.max(l,c)-s:this.caretX,"top"===o?(b=h,w=b-s,m=f-s,v=f+s):(b=h+g,w=b+s,m=f+s,v=f-s),y=b),{x1:m,x2:f,x3:v,y1:b,y2:w,y3:y}}drawTitle(e,t,i){const n=this.title,o=n.length;let s,r,a;if(o){const l=Yo(i.rtl,this.x,this.width);for(e.x=Qa(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",s=lo(i.titleFont),r=i.titleSpacing,t.fillStyle=i.titleColor,t.font=s.string,a=0;a<o;++a)t.fillText(n[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+r,a+1===o&&(e.y+=i.titleMarginBottom-r)}}_drawColorBox(e,t,i,n,o){const s=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=o,d=lo(o.bodyFont),c=Qa(this,"left",o),u=n.x(c),h=a<d.lineHeight?(d.lineHeight-a)/2:0,p=t.y+h;if(o.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},i=n.leftForLtr(u,l)+l/2,d=p+a/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Wn(e,t,i,d),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Wn(e,t,i,d)}else{e.lineWidth=bi(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=n.leftForLtr(u,l),i=n.leftForLtr(n.xPlus(u,1),l-2),r=ro(s.borderRadius);Object.values(r).some((e=>0!==e))?(e.beginPath(),e.fillStyle=o.multiKeyBackground,eo(e,{x:t,y:p,w:l,h:a,radius:r}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),eo(e,{x:i,y:p+1,w:l-2,h:a-2,radius:r}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(t,p,l,a),e.strokeRect(t,p,l,a),e.fillStyle=s.backgroundColor,e.fillRect(i,p+1,l-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:o,bodyAlign:s,displayColors:r,boxHeight:a,boxWidth:l,boxPadding:d}=i,c=lo(i.bodyFont);let u=c.lineHeight,h=0;const p=Yo(i.rtl,this.x,this.width),g=function(i){t.fillText(i,p.x(e.x+h),e.y+u/2),e.y+=u+o},m=p.textAlign(s);let f,v,b,w,y,x,C;for(t.textAlign=s,t.textBaseline="middle",t.font=c.string,e.x=Qa(this,m,i),t.fillStyle=i.bodyColor,Ri(this.beforeBody,g),h=r&&"right"!==m?"center"===s?l/2+d:l+2+d:0,w=0,x=n.length;w<x;++w){for(f=n[w],v=this.labelTextColors[w],t.fillStyle=v,Ri(f.before,g),b=f.lines,r&&b.length&&(this._drawColorBox(t,e,w,p,i),u=Math.max(c.lineHeight,a)),y=0,C=b.length;y<C;++y)g(b[y]),u=c.lineHeight;Ri(f.after,g)}h=0,u=c.lineHeight,Ri(this.afterBody,g),e.y-=o}drawFooter(e,t,i){const n=this.footer,o=n.length;let s,r;if(o){const a=Yo(i.rtl,this.x,this.width);for(e.x=Qa(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",s=lo(i.footerFont),t.fillStyle=i.footerColor,t.font=s.string,r=0;r<o;++r)t.fillText(n[r],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:o,yAlign:s}=this,{x:r,y:a}=e,{width:l,height:d}=i,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:p}=ro(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(r+c,a),"top"===s&&this.drawCaret(e,t,i,n),t.lineTo(r+l-u,a),t.quadraticCurveTo(r+l,a,r+l,a+u),"center"===s&&"right"===o&&this.drawCaret(e,t,i,n),t.lineTo(r+l,a+d-p),t.quadraticCurveTo(r+l,a+d,r+l-p,a+d),"bottom"===s&&this.drawCaret(e,t,i,n),t.lineTo(r+h,a+d),t.quadraticCurveTo(r,a+d,r,a+d-h),"center"===s&&"left"===o&&this.drawCaret(e,t,i,n),t.lineTo(r,a+c),t.quadraticCurveTo(r,a,r+c,a),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const i=Va[e.position].call(this,this._active,this._eventPosition);if(!i)return;const s=this._size=Ua(this,e),r=Object.assign({},i,this._size),a=Ka(t,e,r),l=Ya(e,r,a,t);n._to===l.x&&o._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=ao(t.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&r&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,n,t),Qo(e,t.textDirection),o.y+=s.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),$o(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map((e=>{let{datasetIndex:t,index:i}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[i],index:i}})),o=!ki(i,n),s=this._positionChanged(n,t);(o||s)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],s=this._getActiveElements(e,o,t,i),r=this._positionChanged(s,e),a=t||!ki(s,o)||r;return a&&(this._active=s,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,n){const o=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:i,caretY:n,options:o}=this,s=Va[o.position].call(this,e,t);return!1!==s&&(i!==s.x||n!==s.y)}}d(el,"positioners",Va);var tl={id:"tooltip",_element:el,positioners:Va,afterInit(e,t,i){i&&(e.tooltip=new el({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",u(u({},i),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ja},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function il(e,t,i,n){const o=e.indexOf(t);if(-1===o)return((e,t,i,n)=>("string"===typeof t?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i))(e,t,i,n);return o!==e.lastIndexOf(t)?i:o}function nl(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ol extends Lr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:i,label:n}of t)e[i]===n&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(fi(e))return null;const i=this.getLabels();return((e,t)=>null===e?null:an(Math.round(e),0,t))(t=isFinite(t)&&i[t]===e?t:il(i,e,xi(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=0===e&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=e;s<=t;s++)n.push({value:s});return n}getLabelForValue(e){return nl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function sl(e,t){const i=[],{bounds:n,step:o,min:s,max:r,precision:a,count:l,maxTicks:d,maxDigits:c,includeBounds:u}=e,h=o||1,p=d-1,{min:g,max:m}=t,f=!fi(s),v=!fi(r),b=!fi(l),w=(m-g)/(c+1);let y,x,C,S,R=Qi((m-g)/p/h)*h;if(R<1e-14&&!f&&!v)return[{value:g},{value:m}];S=Math.ceil(m/R)-Math.floor(g/R),S>p&&(R=Qi(S*R/p/h)*h),fi(a)||(y=Math.pow(10,a),R=Math.ceil(R*y)/y),"ticks"===n?(x=Math.floor(g/R)*R,C=Math.ceil(m/R)*R):(x=g,C=m),f&&v&&o&&function(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}((r-s)/o,R/1e3)?(S=Math.round(Math.min((r-s)/R,d)),R=(r-s)/S,x=s,C=r):b?(x=f?s:x,C=v?r:C,S=l-1,R=(C-x)/S):(S=(C-x)/R,S=Yi(S,Math.round(S),R/1e3)?Math.round(S):Math.ceil(S));const k=Math.max(en(R),en(x));y=Math.pow(10,fi(a)?k:a),x=Math.round(x*y)/y,C=Math.round(C*y)/y;let P=0;for(f&&(u&&x!==s?(i.push({value:s}),x<s&&P++,Yi(Math.round((x+P*R)*y)/y,s,rl(s,w,e))&&P++):x<s&&P++);P<S;++P){const e=Math.round((x+P*R)*y)/y;if(v&&e>r)break;i.push({value:e})}return v&&u&&C!==r?i.length&&Yi(i[i.length-1].value,r,rl(r,w,e))?i[i.length-1].value=r:i.push({value:r}):v&&C!==r||i.push({value:C}),i}function rl(e,t,i){let{horizontal:n,minRotation:o}=i;const s=Ji(o),r=(n?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/r,a)}d(ol,"id","category"),d(ol,"defaults",{ticks:{callback:nl}});class al extends Lr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return fi(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const s=e=>n=t?n:e,r=e=>o=i?o:e;if(e){const e=Ki(n),t=Ki(o);e<0&&t<0?r(0):e>0&&t>0&&s(0)}if(n===o){let t=0===o?1:Math.abs(.05*o);r(o+t),e||s(n-t)}this.min=n,this.max=o}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:i,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n=sl({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Xi(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Mn(e,this.chart.options.locale,this.options.ticks.format)}}class ll extends al{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=wi(e)?e:0,this.max=wi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Ji(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}d(ll,"id","linear"),d(ll,"defaults",{ticks:{callback:jn.formatters.numeric}});const dl=e=>Math.floor(qi(e)),cl=(e,t)=>Math.pow(10,dl(e)+t);function ul(e){return 1===e/Math.pow(10,dl(e))}function hl(e,t,i){const n=Math.pow(10,i),o=Math.floor(e/n);return Math.ceil(t/n)-o}function pl(e,t){let{min:i,max:n}=t;i=yi(e.min,i);const o=[],s=dl(i);let r=function(e,t){let i=dl(t-e);for(;hl(e,t,i)>10;)i++;for(;hl(e,t,i)<10;)i--;return Math.min(i,dl(e))}(i,n),a=r<0?Math.pow(10,Math.abs(r)):1;const l=Math.pow(10,r),d=s>r?Math.pow(10,s):0,c=Math.round((i-d)*a)/a,u=Math.floor((i-d)/l/10)*l*10;let h=Math.floor((c-u)/Math.pow(10,r)),p=yi(e.min,Math.round((d+u+h*Math.pow(10,r))*a)/a);for(;p<n;)o.push({value:p,major:ul(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,a=r>=0?1:a),p=Math.round((d+u+h*Math.pow(10,r))*a)/a;const g=yi(e.max,p);return o.push({value:g,major:ul(g),significand:h}),o}class gl extends Lr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=al.prototype.parse.apply(this,[e,t]);if(0!==i)return wi(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=wi(e)?Math.max(0,e):null,this.max=wi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wi(this._userMin)&&(this.min=e===cl(this.min,0)?cl(this.min,-1):cl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const o=t=>i=e?i:t,s=e=>n=t?n:e;i===n&&(i<=0?(o(1),s(10)):(o(cl(i,-1)),s(cl(n,1)))),i<=0&&o(cl(n,-1)),n<=0&&s(cl(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t=pl({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Xi(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Mn(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=qi(e),this._valueRange=qi(this.max)-qi(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(qi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function ml(e){const t=e.ticks;if(t.display&&e.display){const e=ao(t.backdropPadding);return xi(t.font&&t.font.size,Bn.font.size)+e.height}return 0}function fl(e,t,i,n,o){return e===n||e===o?{start:t-i/2,end:t+i/2}:e<n||e>o?{start:t-i,end:t}:{start:t,end:t+i}}function vl(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],o=[],s=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?Oi/s:0;for(let u=0;u<s;u++){const s=r.setContext(e.getPointLabelContext(u));o[u]=s.padding;const h=e.getPointPosition(u,e.drawingArea+o[u],a),p=lo(s.font),g=(l=e.ctx,d=p,c=vi(c=e._pointLabels[u])?c:[c],{w:Vn(l,d.string,c),h:c.length*d.lineHeight});n[u]=g;const m=sn(e.getIndexAngle(u)+a),f=Math.round(Zi(m));bl(i,t,m,fl(f,h.x,g.w,0,180),fl(f,h.y,g.h,90,270))}var l,d,c;e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){const n=[],o=e._pointLabels.length,s=e.options,{centerPointLabels:r,display:a}=s.pointLabels,l={extra:ml(s)/2,additionalAngle:r?Oi/o:0};let d;for(let c=0;c<o;c++){l.padding=i[c],l.size=t[c];const o=wl(e,c,l);n.push(o),"auto"===a&&(o.visible=yl(o,d),o.visible&&(d=o))}return n}(e,n,o)}function bl(e,t,i,n,o){const s=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/s,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(l=(t.t-o.start)/r,e.t=Math.min(e.t,t.t-l)):o.end>t.b&&(l=(o.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function wl(e,t,i){const n=e.drawingArea,{extra:o,additionalAngle:s,padding:r,size:a}=i,l=e.getPointPosition(t,n+o+r,s),d=Math.round(Zi(sn(l.angle+Gi))),c=function(e,t,i){90===i||270===i?e-=t/2:(i>270||i<90)&&(e-=t);return e}(l.y,a.h,d),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(d),h=function(e,t,i){"right"===i?e-=t:"center"===i&&(e-=t/2);return e}(l.x,a.w,u);return{visible:!0,x:l.x,y:c,textAlign:u,left:h,top:c,right:h+a.w,bottom:c+a.h}}function yl(e,t){if(!t)return!0;const{left:i,top:n,right:o,bottom:s}=e;return!(qn({x:i,y:n},t)||qn({x:i,y:s},t)||qn({x:o,y:n},t)||qn({x:o,y:s},t))}function xl(e,t,i){const{left:n,top:o,right:s,bottom:r}=i,{backdropColor:a}=t;if(!fi(a)){const i=ro(t.borderRadius),l=ao(t.backdropPadding);e.fillStyle=a;const d=n-l.left,c=o-l.top,u=s-n+l.width,h=r-o+l.height;Object.values(i).some((e=>0!==e))?(e.beginPath(),eo(e,{x:d,y:c,w:u,h:h,radius:i}),e.fill()):e.fillRect(d,c,u,h)}}function Cl(e,t,i,n){const{ctx:o}=e;if(i)o.arc(e.xCenter,e.yCenter,t,0,Bi);else{let i=e.getPointPosition(0,t);o.moveTo(i.x,i.y);for(let s=1;s<n;s++)i=e.getPointPosition(s,t),o.lineTo(i.x,i.y)}}d(gl,"id","logarithmic"),d(gl,"defaults",{ticks:{callback:jn.formatters.logarithmic,major:{enabled:!0}}});class Sl extends al{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ao(ml(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=wi(e)&&!isNaN(e)?e:0,this.max=wi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ml(this.options))}generateTickLabels(e){al.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const i=Si(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?vl(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){return sn(e*(Bi/(this._pointLabels.length||1))+Ji(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(fi(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(fi(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function(e,t,i){return uo(e,{label:i,index:t,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getIndexAngle(e)-Gi+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:o}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),Cl(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:n,border:o}=t,s=this._pointLabels.length;let r,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:i,options:{pointLabels:n}}=e;for(let o=t-1;o>=0;o--){const t=e._pointLabelItems[o];if(!t.visible)continue;const s=n.setContext(e.getPointLabelContext(o));xl(i,s,t);const r=lo(s.font),{x:a,y:l,textAlign:d}=t;Zn(i,e._pointLabels[o],a,l+r.lineHeight/2,r,{color:s.color,textAlign:d,textBaseline:"middle"})}}(this,s),n.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const i=this.getContext(t),r=n.setContext(i),l=o.setContext(i);!function(e,t,i,n,o){const s=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!n||!a||!l||i<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(o.dash||[]),s.lineDashOffset=o.dashOffset,s.beginPath(),Cl(e,i,r,n),s.closePath(),s.stroke(),s.restore())}(this,r,a,s,l)}})),i.display){for(e.save(),r=s-1;r>=0;r--){const n=i.setContext(this.getPointLabelContext(r)),{color:o,lineWidth:s}=n;s&&o&&(e.lineWidth=s,e.strokeStyle=o,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(r,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((n,r)=>{if(0===r&&this.min>=0&&!t.reverse)return;const a=i.setContext(this.getContext(r)),l=lo(a.font);if(o=this.getDistanceFromCenterForValue(this.ticks[r].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(n.label).width,e.fillStyle=a.backdropColor;const t=ao(a.backdropPadding);e.fillRect(-s/2-t.left,-o-l.size/2-t.top,s+t.width,l.size+t.height)}Zn(e,n.label,0,-o,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}d(Sl,"id","radialLinear"),d(Sl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:jn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),d(Sl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),d(Sl,"descriptors",{angleLines:{_fallback:"grid"}});const Rl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kl=Object.keys(Rl);function Pl(e,t){return e-t}function El(e,t){if(fi(t))return null;const i=e._adapter,{parser:n,round:o,isoWeekday:s}=e._parseOpts;let r=t;return"function"===typeof n&&(r=n(r)),wi(r)||(r="string"===typeof n?i.parse(r,n):i.parse(r)),null===r?null:(o&&(r="week"!==o||!$i(s)&&!0!==s?i.startOf(r,o):i.startOf(r,"isoWeek",s)),+r)}function Fl(e,t,i,n){const o=kl.length;for(let s=kl.indexOf(e);s<o-1;++s){const e=Rl[kl[s]],o=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(o*e.size))<=n)return kl[s]}return kl[o-1]}function Dl(e,t,i){if(i){if(i.length){const{lo:n,hi:o}=dn(i,t);e[i[n]>=t?i[n]:i[o]]=!0}}else e[t]=!0}function Nl(e,t,i){const n=[],o={},s=t.length;let r,a;for(r=0;r<s;++r)a=t[r],o[a]=r,n.push({value:a,major:!1});return 0!==s&&i?function(e,t,i,n){const o=e._adapter,s=+o.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=s;a<=r;a=+o.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}(e,n,o,i):n}class Ml extends Lr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.time||(e.time={}),n=this._adapter=new Hs(e.adapters.date);n.init(t),Ni(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:El(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:o,minDefined:s,maxDefined:r}=this.getUserBounds();function a(e){s||isNaN(e.min)||(n=Math.min(n,e.min)),r||isNaN(e.max)||(o=Math.max(o,e.max))}s&&r||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),n=wi(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),o=wi(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,s=function(e,t,i){let n=0,o=e.length;for(;n<o&&e[n]<t;)n++;for(;o>n&&e[o-1]>i;)o--;return n>0||o<e.length?e.slice(n,o):e}(n,o,this.max);return this._unit=t.unit||(i.autoSkip?Fl(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(e,t,i,n,o){for(let s=kl.length-1;s>=kl.indexOf(i);s--){const i=kl[s];if(Rl[i].common&&e._adapter.diff(o,n,i)>=t-1)return i}return kl[i?kl.indexOf(i):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=kl.indexOf(e)+1,i=kl.length;t<i;++t)if(Rl[kl[t]].common)return kl[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&s.reverse(),Nl(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,o=0;this.options.offset&&i.length&&(e=this.getDecimalForValue(i[0]),n=1===i.length?1-e:(this.getDecimalForValue(i[1])-e)/2,t=this.getDecimalForValue(i[i.length-1]),o=1===i.length?t:(t-this.getDecimalForValue(i[i.length-2]))/2);const s=i.length<3?.5:.25;n=an(n,0,s),o=an(o,0,s),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,o=n.time,s=o.unit||Fl(o.minUnit,t,i,this._getLabelCapacity(t)),r=xi(n.ticks.stepSize,1),a="week"===s&&o.isoWeekday,l=$i(a)||!0===a,d={};let c,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,l?"day":s),e.diff(i,t,s)>1e5*r)throw new Error(t+" and "+i+" are too far apart with stepSize of "+r+" "+s);const p="data"===n.ticks.source&&this.getDataTimestamps();for(c=h,u=0;c<i;c=+e.add(c,r,s),u++)Dl(d,c,p);return c!==i&&"ticks"!==n.bounds&&1!==u||Dl(d,c,p),Object.keys(d).sort(Pl).map((e=>+e))}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,n=this._unit,o=t||i[n];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,n){const o=this.options,s=o.ticks.callback;if(s)return Si(s,[e,t,i],this);const r=o.time.displayFormats,a=this._unit,l=this._majorUnit,d=a&&r[a],c=l&&r[l],u=i[t],h=l&&c&&u&&u.major;return this._adapter.format(e,n||(h?c:d))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=Ji(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(n),s=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:i*o+r*s,h:i*s+r*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,Nl(this,[e],this._majorUnit),n),s=this._getLabelSize(o),r=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return r>0?r:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)i=i.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(El(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return gn(e.sort(Pl))}}function Tl(e,t,i){let n,o,s,r,a=0,l=e.length-1;i?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=cn(e,"pos",t)),({pos:n,time:s}=e[a]),({pos:o,time:r}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=cn(e,"time",t)),({time:n,pos:s}=e[a]),({time:o,pos:r}=e[l]));const d=o-n;return d?s+(r-s)*(t-n)/d:s}d(Ml,"id","time"),d(Ml,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class jl extends Ml{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Tl(t,this.min),this._tableRange=Tl(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],o=[];let s,r,a,l,d;for(s=0,r=e.length;s<r;++s)l=e[s],l>=t&&l<=i&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(s=0,r=n.length;s<r;++s)d=n[s+1],a=n[s-1],l=n[s],Math.round((d+a)/2)!==l&&o.push({time:l,pos:s/(r-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return i.includes(e)&&i.length||i.splice(0,0,e),i.includes(t)&&1!==i.length||i.push(t),i.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Tl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Tl(this._table,i*this._tableRange+this._minPos,!0)}}d(jl,"id","timeseries"),d(jl,"defaults",Ml.defaults);var Al=i(579);"".concat("https://cuisine-tracker-5.preview.emergentagent.com","/api");const Il=()=>{const[e,t]=(0,o.useState)([]),[i,n]=(0,o.useState)(!1),[s,r]=(0,o.useState)(!1),[a,l]=(0,o.useState)(null),[d,c]=(0,o.useState)({username:"",email:"",password:"",role:"chef_cuisine",full_name:""}),h="https://cuisine-tracker-5.preview.emergentagent.com",p={super_admin:{name:"Super Admin",description:"Acc\xe8s complet incluant gestion des utilisateurs",icon:"\ud83d\udc51",color:"bg-purple-100 text-purple-800"},patron:{name:"Patron (Owner)",description:"Acc\xe8s complet restaurant, analytics et gestion \xe9quipe",icon:"\ud83d\udc51",color:"bg-red-100 text-red-800"},gerant:{name:"G\xe9rant (Manager)",description:"Acc\xe8s complet sauf gestion utilisateurs - Page Analytics par d\xe9faut",icon:"\ud83d\udc54",color:"bg-blue-100 text-blue-800"},chef_cuisine:{name:"Chef de cuisine",description:"Gestion Stock (non-Bar), Production, Commandes, Ajustements stock",icon:"\ud83d\udc68\u200d\ud83c\udf73",color:"bg-green-100 text-green-800"},barman:{name:"Barman",description:"Gestion Stock cat\xe9gorie Bar uniquement",icon:"\ud83c\udf78",color:"bg-orange-100 text-orange-800"},caissier:{name:"Caissier",description:"Acc\xe8s principal au module OCR pour rapports Z quotidiens",icon:"\ud83d\udcb3",color:"bg-yellow-100 text-yellow-800"},employe_cuisine:{name:"Employ\xe9 de Cuisine",description:"Acc\xe8s limit\xe9 : missions et ajustements stock uniquement",icon:"\ud83e\udd58",color:"bg-red-100 text-red-800"}};(0,o.useEffect)((()=>{g()}),[]);const g=async()=>{n(!0);try{const e=await fetch("".concat(h,"/api/admin/users"));if(e.ok){const i=await e.json();t(i)}else console.error("Erreur lors du chargement des utilisateurs")}catch(e){console.error("Erreur lors du chargement des utilisateurs:",e)}finally{n(!1)}},m=()=>{c({username:"",email:"",password:"",role:"chef_cuisine",full_name:""})},f=e=>new Date(e).toLocaleString("fr-FR"),v=e=>p[e]||{name:e,description:"R\xf4le inconnu",icon:"\u2753",color:"bg-gray-100 text-gray-800"};return(0,Al.jsxs)("div",{className:"p-6 bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen",children:[(0,Al.jsxs)("div",{className:"mb-8",children:[(0,Al.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83d\udc51 Gestion des Utilisateurs"}),(0,Al.jsx)("p",{className:"text-gray-600",children:"Panneau d'administration pour la gestion des comptes utilisateurs et des r\xf4les"})]}),(0,Al.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Al.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,Al.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Utilisateurs"}),(0,Al.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.length})]}),(0,Al.jsx)("div",{className:"text-3xl text-blue-500",children:"\ud83d\udc65"})]})}),Object.entries(p).map((t=>{let[i,n]=t;const o=e.filter((e=>e.role===i)).length;return(0,Al.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,Al.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-sm font-medium text-gray-600",children:n.name}),(0,Al.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:o})]}),(0,Al.jsx)("div",{className:"text-3xl",children:n.icon})]})},i)})).slice(0,3)," "]}),(0,Al.jsx)("div",{className:"mb-6",children:(0,Al.jsxs)("button",{onClick:()=>{l(null),m(),r(!0)},className:"bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\u2795"}),"Nouvel Utilisateur"]})}),(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udc65"}),"Utilisateurs du Syst\xe8me"]}),(0,Al.jsxs)("button",{onClick:g,className:"text-primary-500 hover:text-primary-600 font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udd04"}),"Actualiser"]})]})}),(0,Al.jsx)("div",{className:"p-6",children:i?(0,Al.jsxs)("div",{className:"text-center py-8",children:[(0,Al.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),(0,Al.jsx)("p",{className:"mt-2 text-gray-600",children:"Chargement des utilisateurs..."})]}):(0,Al.jsx)("div",{className:"overflow-x-auto",children:(0,Al.jsxs)("table",{className:"min-w-full",children:[(0,Al.jsx)("thead",{children:(0,Al.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Utilisateur"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Email"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Mot de passe"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"R\xf4le"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Statut"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Cr\xe9\xe9 le"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Derni\xe8re connexion"}),(0,Al.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,Al.jsxs)("tbody",{children:[e.map((e=>{const t=v(e.role);return(0,Al.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,Al.jsx)("td",{className:"py-3 px-4",children:(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{className:"font-medium text-gray-900",children:e.username}),e.full_name&&(0,Al.jsx)("div",{className:"text-sm text-gray-500",children:e.full_name})]})}),(0,Al.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.email}),(0,Al.jsx)("td",{className:"py-3 px-4",children:(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",background:"#f3f4f6",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[(0,Al.jsx)("span",{style:{color:"#374151"},children:"password123"}),(0,Al.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("password123"),alert("\ud83d\udd11 Mot de passe copi\xe9 dans le presse-papiers !")},style:{background:"#10b981",color:"white",border:"none",padding:"2px 6px",borderRadius:"3px",cursor:"pointer",fontSize:"10px"},children:"\ud83d\udccb"})]})}),(0,Al.jsx)("td",{className:"py-3 px-4",children:(0,Al.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.color),children:[(0,Al.jsx)("span",{className:"mr-1",children:t.icon}),t.name]})}),(0,Al.jsx)("td",{className:"py-3 px-4",children:(0,Al.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"\u2705 Actif":"\u274c Inactif"})}),(0,Al.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:f(e.created_at)}),(0,Al.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.last_login?f(e.last_login):"Jamais connect\xe9"}),(0,Al.jsx)("td",{className:"py-3 px-4",children:(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsx)("button",{onClick:()=>(e=>{l(e),c({username:e.username,email:e.email,password:"",role:e.role,full_name:e.full_name||""}),r(!0)})(e),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"\u270f\ufe0f Modifier"}),"super_admin"!==e.role&&(0,Al.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Confirmer la suppression de l'utilisateur \"".concat(t,'" ?')))try{const t=await fetch("".concat(h,"/api/admin/users/").concat(e),{method:"DELETE"});if(t.ok)g(),alert("Utilisateur supprim\xe9 avec succ\xe8s!");else{const e=await t.json();alert("Erreur: ".concat(e.detail))}}catch(i){console.error("Erreur lors de la suppression:",i),alert("Erreur lors de la suppression")}})(e.id,e.username),className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"\ud83d\uddd1\ufe0f Supprimer"})]})})]},e.id)})),0===e.length&&(0,Al.jsx)("tr",{children:(0,Al.jsx)("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:"Aucun utilisateur trouv\xe9"})})]})]})})})]}),(0,Al.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm",children:[(0,Al.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udd10"}),"Guide des R\xf4les et Permissions"]})}),(0,Al.jsx)("div",{className:"p-6",children:(0,Al.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(p).map((e=>{let[t,i]=e;return(0,Al.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Al.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Al.jsx)("span",{className:"text-2xl mr-2",children:i.icon}),(0,Al.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(i.color),children:i.name})]}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:i.description})]},t)}))})})]}),s&&(0,Al.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Al.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full m-4 max-h-[90vh] overflow-y-auto",children:[(0,Al.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Al.jsx)("h3",{className:"text-lg font-semibold",children:a?"Modifier l'utilisateur":"Nouvel utilisateur"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a?"Modifiez les informations de l'utilisateur":"Cr\xe9ez un nouveau compte utilisateur"})]}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n(!0);try{const e=a?"PUT":"POST",t=a?"".concat(h,"/api/admin/users/").concat(a.id):"".concat(h,"/api/admin/users"),i=a?u(u({},d),{},{password:d.password||void 0}):d,n=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(n.ok){r(!1),l(null),m(),await g();const e='\u2705 Utilisateur "'.concat(d.full_name||d.username,a?'" modifi\xe9 avec succ\xe8s !':'" cr\xe9\xe9 avec succ\xe8s !');alert(e),console.log("\u2705 Utilisateur sauvegard\xe9 avec succ\xe8s")}else{const e=await n.json(),t=e.detail||e.message||"Erreur HTTP ".concat(n.status);alert("\u274c Erreur lors de la sauvegarde: ".concat(t)),console.error("Erreur sauvegarde:",e)}}catch(t){console.error("Erreur lors de la sauvegarde:",t),alert("\u274c Erreur de connexion: ".concat(t.message))}finally{n(!1)}},className:"p-6",children:[(0,Al.jsxs)("div",{className:"space-y-4",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom d'utilisateur *"}),(0,Al.jsx)("input",{type:"text",value:d.username,onChange:e=>c(u(u({},d),{},{username:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,Al.jsx)("input",{type:"email",value:d.email,onChange:e=>c(u(u({},d),{},{email:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mot de passe ",a?"(laisser vide pour ne pas changer)":"*"]}),(0,Al.jsx)("input",{type:"password",value:d.password,onChange:e=>c(u(u({},d),{},{password:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",required:!a,minLength:"6"}),(0,Al.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 caract\xe8res"})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet"}),(0,Al.jsx)("input",{type:"text",value:d.full_name,onChange:e=>c(u(u({},d),{},{full_name:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xf4le *"}),(0,Al.jsx)("select",{value:d.role,onChange:e=>c(u(u({},d),{},{role:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:Object.entries(p).map((e=>{let[t,i]=e;return(0,Al.jsxs)("option",{value:t,children:[i.icon," ",i.name," - ",i.description]},t)}))})]}),(0,Al.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,Al.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Al.jsx)("strong",{children:"Permissions du r\xf4le s\xe9lectionn\xe9:"}),(0,Al.jsx)("br",{}),v(d.role).description]})})]}),(0,Al.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Al.jsx)("button",{type:"button",onClick:()=>{r(!1),l(null),m()},style:{background:"#6b7280",color:"white",padding:"8px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Annuler"}),(0,Al.jsxs)("button",{type:"submit",className:"font-medium transition-colors",style:{background:"#10b981",color:"white",padding:"8px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:[a?"Modifier":"Cr\xe9er"," l'utilisateur"]})]})]})]})})]})},Ll=["rowSpan","spanRows"],_l=["key"];var Ol,Bl,zl=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let o=n.get(e);return!o&&i&&(o=new Set,n.set(e,o)),o}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getListeners(e,i,!1);n&&(n.delete(t),0===n.size&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getGlobalListeners(t).add(e)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const n=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const{frameworkOverrides:o}=this,s=e=>{const i=o?()=>o.wrapIncoming(e):e;t?this.dispatchAsync(i):i()},r=this.getListeners(n,t,!1);if((null!==(i=null===r||void 0===r?void 0:r.size)&&void 0!==i?i:0)>0){const t=new Set(r);for(const i of t)null!==r&&void 0!==r&&r.has(i)&&s((()=>i(e)))}const a=this.getGlobalListeners(t);if(a.size>0){const t=new Set(a);for(const i of t)s((()=>i(n,e)))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}};function Vl(e,t){return t}function Hl(e){var t;return null!==(t=null===e||void 0===e?void 0:e.getLocaleTextFunc())&&void 0!==t?t:Vl}function Gl(e){return null==e||""===e?null:e}function Wl(e){return null!=e&&""!==e}function Ul(e){return!Wl(e)}function ql(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function Kl(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function Yl(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=null==e,o=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&o)return 0;if(n)return-1;if(o)return 1;function s(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return s(e,t);if(!i)return s(e,t);try{return e.localeCompare(t)}catch(r){return s(e,t)}}var Ql=new Set(["__proto__","constructor","prototype"]);function $l(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Wl(t)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const i of Object.keys(e).filter((e=>!Ql.has(e))))t(i,e[i])}(t,((t,o)=>{let s=e[t];if(s!==o){if(n){if(null==s&&null!=o){"object"===typeof o&&o.constructor===Object&&(s={},e[t]=s)}}Jl(o)&&Jl(s)&&!Array.isArray(s)?$l(s,o,i,n):(i||void 0!==o)&&(e[t]=o)}}))}function Xl(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let o=e;for(let s=0;s<n.length;s++){if(null==o)return;o=o[n[s]]}return o}function Jl(e){return"object"===typeof e&&null!==e}var Zl=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return u({},t);let i={};return $l(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?$l(i,t,!0,!0):i=u(u({},i),t),e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&$l(t.context,i.context,!0,!0),i.context=t.context),i}};Zl.gridOptions=void 0,Zl.mergeStrategy="shallow";var ed=Zl;var td,id,nd,od,sd,rd,ad,ld={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1};function dd(e,t,i){null==i||"string"===typeof i&&""==i?ud(e,t):cd(e,t,i)}function cd(e,t,i){e.setAttribute(hd(t),i.toString())}function ud(e,t){e.removeAttribute(hd(t))}function hd(e){return"aria-".concat(e)}function pd(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function gd(e,t){dd(e,"label",t)}function md(e,t){dd(e,"labelledby",t)}function fd(e,t){dd(e,"live",t)}function vd(e,t){dd(e,"hidden",t)}function bd(e,t){cd(e,"expanded",t)}function wd(e,t){cd(e,"rowcount",t)}function yd(e,t){cd(e,"rowindex",t)}function xd(e,t){cd(e,"colcount",t)}function Cd(e,t){cd(e,"colindex",t)}function Sd(e,t){cd(e,"sort",t)}function Rd(e){ud(e,"sort")}function kd(e,t){dd(e,"selected",t)}function Pd(e,t){!function(e,t){dd(e,"controls",t)}(e,t.id),md(t,e.id)}function Ed(e,t){dd(e,"owns",t)}function Fd(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function Dd(){return void 0===td&&(td=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),td}function Nd(){return void 0===id&&(id=/(firefox)/i.test(navigator.userAgent)),id}function Md(){return void 0===nd&&(nd=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),nd}function Td(){return void 0===od&&(od=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),od}function jd(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||Nd())?t.toString():null}function Ad(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(rd=i,sd=0===i)}function Id(){return null==sd&&Ad(),sd}var Ld="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _d(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),n=t.call(e,Ld),o=Jd(e);return i&&!n&&o}function Od(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||vd(e,!t)}function Bd(e,t){var i;const n="disabled",o=t?e=>e.setAttribute(n,""):e=>e.removeAttribute(n);o(e);const s=null!==(i=e.querySelectorAll("input"))&&void 0!==i?i:[];for(const r of s)o(r)}function zd(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++n>i)break}else if(e===i)break}return!1}function Vd(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:o,borderBottomWidth:s,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:c,marginTop:u,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function Hd(e){const t=Vd(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function Gd(e){const t=Vd(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function Wd(e){const{height:t,marginBottom:i,marginTop:n}=Vd(e);return Math.floor(t+i+n)}function Ud(e){const{width:t,marginLeft:i,marginRight:n}=Vd(e);return Math.floor(t+i+n)}function qd(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:o,borderBottomWidth:s}=Vd(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(o||0),bottom:t.bottom+(s||0)}}function Kd(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function Yd(e,t,i){i&&(t*=-1),e.scrollLeft=t}function Qd(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function $d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Xd(e){return!!e.offsetParent}function Jd(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!Xd(e)||"visible"!==window.getComputedStyle(e).visibility)}function Zd(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function ec(e){return()=>{const t=e();return!t||(tc(t)||ic(t))}}function tc(e){return e.clientWidth<e.scrollWidth}function ic(e){return e.clientHeight<e.scrollHeight}function nc(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):oc(e,t)}function oc(e,t){t=rc(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function sc(e,t){t=rc(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function rc(e){return"number"===typeof e?"".concat(e,"px"):e}function ac(e){return e instanceof Node||e instanceof HTMLElement}function lc(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function dc(e,t,i){const n=eu(e).ResizeObserver,o=n?new n(i):null;return null===o||void 0===o||o.observe(t),()=>null===o||void 0===o?void 0:o.disconnect()}function cc(e,t){const i=eu(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var uc,hc="data-ref";function pc(){var e;return null!==(e=uc)&&void 0!==e||(uc=document.createTextNode(" ")),uc.cloneNode()}function gc(e){const{attrs:t,children:i,cls:n,ref:o,role:s,tag:r}=e,a=document.createElement(r);if(n&&(a.className=n),o&&a.setAttribute(hc,o),s&&a.setAttribute("role",s),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(i)if("string"===typeof i)a.textContent=i;else{let e=!0;for(const t of i)t&&("string"===typeof t?(a.appendChild(document.createTextNode(t)),e=!1):"function"===typeof t?a.appendChild(t()):(e&&(a.appendChild(pc()),e=!1),a.append(gc(t)),a.appendChild(pc())))}return a}var mc={};function fc(e,t){mc[t]||(e(),mc[t]=!0)}function vc(e,t){if(e.get("debug")){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];console.log("AG Grid: "+t,...n)}}function bc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];fc((()=>console.warn("AG Grid: "+e,...i)),e+(null===i||void 0===i?void 0:i.join("")))}function wc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];fc((()=>console.error("AG Grid: "+e,...i)),e+(null===i||void 0===i?void 0:i.join("")))}var yc={pending:!1,funcs:[]},xc={pending:!1,funcs:[]};function Cc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"setTimeout",i=arguments.length>2?arguments[2]:void 0;const n="raf"===t?xc:yc;if(n.funcs.push(e),n.pending)return;n.pending=!0;const o=()=>{const e=n.funcs.slice();n.funcs.length=0,n.pending=!1,e.forEach((e=>e()))};"raf"===t?cc(i,o):window.setTimeout(o,0)}function Sc(e,t,i){let n;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];const a=this;window.clearTimeout(n),n=window.setTimeout((function(){e.isAlive()&&t.apply(a,s)}),i)}}function Rc(e,t){let i=0;return function(){const n=Date.now();if(!(n-i<t)){i=n;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];e.apply(this,s)}}}var kc="https://www.ag-grid.com",Pc="34.1.2",Ec="_version_",Fc=null,Dc="".concat(kc,"/javascript-data-grid");function Nc(e,t,i){var n,o;return null!==(n=null===(o=Fc)||void 0===o?void 0:o.getConsoleMessage(e,t))&&void 0!==n?n:[Lc(e,t,i)]}function Mc(e,t,i,n){e("error #".concat(t),...Nc(t,i,n))}function Tc(e){let t=e;return e instanceof Error?t=e.toString():"object"===typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))"object"!==typeof e[i]&&"function"!==typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}function jc(e){return void 0===e?"undefined":null===e?"null":e}function Ac(e,t){return"".concat(e,"?").concat(t.toString())}function Ic(e,t){const i=new URLSearchParams;if(i.append(Ec,Pc),t)for(const s of Object.keys(t))i.append(s,Tc(t[s]));const n="".concat(Dc,"/errors/").concat(e),o=Ac(n,i);return o.length<=2e3?o:function(e,t,i){const n=Array.from(t.entries()).sort(((e,t)=>t[1].length-e[1].length));let o=Ac(e,t);for(const[s,r]of n){if(s===Ec)continue;const n=o.length-i;if(n<=0)break;const a="...",l=n+a.length,d=r.length-l>100?r.slice(0,r.length-l)+a:r.slice(0,100)+a;t.set(s,d),o=Ac(e,t)}return o}(n,i,2e3)}var Lc=(e,t,i)=>{const n=Ic(e,t);return"".concat(i?i+" \n":"","Visit ").concat(n).concat(i?"":" \n  Alternatively register the ValidationModule to see the full message in the console.")};function _c(){Mc(bc,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}function Oc(){Mc(wc,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}function Bc(e,t,i){Mc(wc,e,t,i)}function zc(e,t){const i=t[0];return"error #".concat(i," ")+Nc(i,t[1],e).join(" ")}function Vc(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return zc(void 0,t)}function Hc(e,t){return e.get("rowModelType")===t}function Gc(e,t){return Hc(e,"clientSide")}function Wc(e,t){return Hc(e,"serverSide")}function Uc(e,t){return e.get("domLayout")===t}function qc(e){return void 0!==xu(e)}function Kc(e){return"function"===typeof e.get("getRowHeight")}function Yc(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const{gos:o,environment:s}=e;if(null==n&&(n=s.getDefaultRowHeight()),Kc(o)){if(i)return{height:n,estimated:!0};const e={node:t,data:t.data},s=o.getCallback("getRowHeight")(e);if($c(s))return 0===s&&_c(23),{height:Math.max(1,s),estimated:!1}}if(t.detail&&o.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if($c(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(o);const r=o.get("rowHeight");return{height:r&&$c(r)?r:n,estimated:!1}}function Qc(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||Ul(n))return t.getDefaultRowHeight();const o=t.refreshRowHeightVariable();return-1!==o?o:(_c(24),t.getDefaultRowHeight())}function $c(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}function Xc(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0}function Jc(e,t,i,n){const o=e.getDomDataKey();let s=t[o];Ul(s)&&(s={},t[o]=s),s[i]=n}function Zc(e){const{gos:t,eGridDiv:i}=e;let n=null;const o=t.get("getDocument");return o&&Wl(o)?n=o():i&&(n=i.ownerDocument),n&&Wl(n)?n:document}function eu(e){return Zc(e).defaultView||window}function tu(e){return e.eGridDiv.getRootNode()}function iu(e){return tu(e).activeElement}function nu(e){let t=null,i=null;try{t=Zc(e).fullscreenElement}catch(o){}finally{t||(t=tu(e));const o=t.querySelector("body");if(o)i=o;else if(t instanceof ShadowRoot)i=t;else if(t instanceof Document){var n;i=null===(n=t)||void 0===n?void 0:n.documentElement}else i=t}return i}function ou(e,t,i){const n=e.getBoundingClientRect().height,o=function(e){var t;const i=nu(e);return null!==(t=null===i||void 0===i?void 0:i.clientWidth)&&void 0!==t?t:window.innerWidth||-1}(i)-2,s=function(e){var t;const i=nu(e);return null!==(t=null===i||void 0===i?void 0:i.clientHeight)&&void 0!==t?t:window.innerHeight||-1}(i)-2;if(!e.offsetParent)return;const r=qd(e.offsetParent),{clientY:a,clientX:l}=t;let d=a-r.top-n/2,c=l-r.left-10;const u=Zc(i),h=u.defaultView||window,p=h.pageYOffset||u.documentElement.scrollTop,g=h.pageXOffset||u.documentElement.scrollLeft;o>0&&c+e.clientWidth>o+g&&(c=o+g-e.clientWidth),c<0&&(c=0),s>0&&d+e.clientHeight>s+p&&(d=s+p-e.clientHeight),d<0&&(d=0),e.style.left="".concat(c,"px"),e.style.top="".concat(d,"px")}function su(e){const t=iu(e);return null===t||t===Zc(e).body}function ru(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function au(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Uc(e,"print"))}function lu(e){const t=e.get("autoGroupColumnDef");return!(null!==t&&void 0!==t&&t.comparator)&&!e.get("treeData")}function du(e){const t=e.get("groupAggFiltering");return"function"===typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function cu(e){return e.get("grandTotalRow")}function uu(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function hu(e,t,i){return!!t.group&&!t.footer&&uu(e,i)}function pu(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!==typeof i&&(fc((()=>_c(25,{id:i})),"getRowIdString"),i=String(i)),i}}function gu(e){var t;return null===(t=null===e||void 0===e?void 0:e.checkboxes)||void 0===t||t}function mu(e){var t;return"multiRow"===(null===e||void 0===e?void 0:e.mode)&&(null===(t=e.headerCheckbox)||void 0===t||t)}function fu(e){var t;if("object"===typeof e)return null!==(t=e.checkboxLocation)&&void 0!==t?t:"selectionColumn"}function vu(e){var t;return null!==(t=null===e||void 0===e?void 0:e.hideDisabledCheckboxes)&&void 0!==t&&t}function bu(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function wu(e){var t,i;const n=null!==(t=e.get("rowSelection"))&&void 0!==t?t:"single";if("string"===typeof n){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===n.mode||"multiRow"===n.mode)&&(null!==(i=n.enableClickSelection)&&void 0!==i&&i)}function yu(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("isRowSelectable"):null===t||void 0===t?void 0:t.isRowSelectable}function xu(e){const t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"===typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(null===t||void 0===t?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Cu(e){return"multiRow"===xu(e)}function Su(e){const t=e.get("rowSelection");if("string"===typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===(null===t||void 0===t?void 0:t.mode)?t.groupSelects:void 0}function Ru(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.get("rowSelection");return"object"!==typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"}function ku(e){const t=Su(e);return"descendants"===t||"filteredDescendants"===t}function Pu(e){const t=e.get("rowSelection");return"object"===typeof t&&t.masterSelects||"self"}function Eu(e){return"legacy"===e.get("columnMenu")}function Fu(e,t){return e.addGridCommonParams(t)}function Du(e){return e.get("treeData")?e.get("treeDataParentIdField")?"treeSelfRef":e.get("treeDataChildrenField")?"treeNested":"treePath":"group"}function Nu(e,t){var i,n,o,s;return null!==(i=null!==(n=null!==(o=e[t])&&void 0!==o?o:null===(s=e.gridOptions)||void 0===s?void 0:s[t])&&void 0!==n?n:function(e){var t;return null===(t=ed.gridOptions)||void 0===t?void 0:t[e]}(t))&&void 0!==i?i:ld[t]}var Mu="__ag_Grid_Stop_Propagation",Tu=["touchstart","touchend","touchmove","touchcancel","scroll"],ju=["wheel"],Au={};function Iu(e){e[Mu]=!0}function Lu(e){return!0===e[Mu]}var _u=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof Au[t])return Au[t];const i=document.createElement(e[t]||"div");return Au[t="on"+t]=t in i}})();function Ou(e,t,i){let n=t;for(;n;){const t=Xc(e,n,i);if(t)return t;n=n.parentElement}return null}function Bu(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var zu=e=>{const t=Tu.includes(e),i=ju.includes(e);return!!t||!i&&void 0},Vu=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new zl),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){var n;null===(n=this.localEventService)||void 0===n||n.removeEventListener(e,t,i)}dispatchLocalEvent(e){var t;null===(t=this.localEventService)||void 0===t||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const o=t[n];o&&i.push(this._setupListener(e,n,o))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let n;return!function(e){return void 0!==e.__addEventListener}(e)?(e instanceof HTMLElement?function(e,t,i,n){const o=zu(i);let s;null!=o&&(s={passive:o}),e&&e.addEventListener&&e.addEventListener(t,i,n,s)}(this.beans.frameworkOverrides,e,t,i):e.addEventListener(t,i),n=()=>(e.removeEventListener(t,i),null)):(e.__addEventListener(t,i),n=()=>(e.__removeEventListener(t,i),null)),this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}setupGridOptionListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const n={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(n)};e.forEach((e=>this.setupGridOptionListener(e,n)))}getLocaleTextFunc(){return Hl(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};var Hu=/[&<>"']/g,Gu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wu(e){var t;return null!==(t=null===e||void 0===e?void 0:e.toString().toString())&&void 0!==t?t:null}function Uu(e){var t,i;return null!==(t=null===(i=Wu(e))||void 0===i?void 0:i.replace(Hu,(e=>Gu[e])))&&void 0!==t?t:null}var qu={resizable:!0,sortable:!0},Ku=0;function Yu(){return Ku++}function Qu(e){return e instanceof $u}var $u=class extends Vu{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=Yu(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new zl,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Uu(i)}destroy(){var e;super.destroy(),null===(e=this.beans.rowSpanSvc)||void 0===e||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;null===t||void 0===t||t.initCol(this);const o=e.hide;this.visible=void 0!==o?!o:!e.initialHide,null===i||void 0===i||i.initCol(this),null===n||void 0===n||n.initCol(this)}setColDef(e,t,i){const n=e.spanRows!==this.colDef.spanRows;var o;(this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n)&&(null===(o=this.beans.rowSpanSvc)||void 0===o||o.deregister(this),this.initRowSpan());this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=Wl(t)&&t.indexOf(".")>=0&&!n,this.tooltipFieldContainsDots=Wl(i)&&i.indexOf(".")>=0&&!n}initMinAndMaxWidths(){var e,t;const i=this.colDef;this.minWidth=null!==(e=i.minWidth)&&void 0!==e?e:this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=null!==(t=i.maxWidth)&&void 0!==t?t:Number.MAX_SAFE_INTEGER}initTooltip(){var e;null===(e=this.beans.tooltipSvc)||void 0===e||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&(null===(e=this.beans.rowSpanSvc)||void 0===e||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;e&&t&&this.addManagedListeners(t,{colDefChanged:t=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,t.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return t=null!=i?i:null!=n?n:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t,i;return null!==(t=null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.isRowGroupDisplayed(this,e))&&void 0!==t&&t}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var i,n,o,s;this.frameworkEventListenerService=null===(i=(n=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===i?void 0:i.call(n,this.frameworkEventListenerService,this.colEventSvc);const r=null!==(o=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.wrap(e,t))&&void 0!==o?o:t;this.colEventSvc.addEventListener(e,r)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(e,t))&&void 0!==i?i:t;this.colEventSvc.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return Fu(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t,i;return null!==(t=null===(i=this.beans.cellNavigation)||void 0===i?void 0:i.isSuppressNavigable(this,e))&&void 0!==t&&t}isCellEditable(e){var t,i;return null!==(t=null===(i=this.beans.editSvc)||void 0===i?void 0:i.isCellEditable({rowNode:e,column:this}))&&void 0!==t&&t}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t,i;return null!==(t=null===(i=this.beans.selectionSvc)||void 0===i?void 0:i.isCellCheckboxSelection(this,e))&&void 0!==t&&t}isSuppressPaste(e){var t,i;return this.isColumnFunc(e,null!==(t=null===(i=this.colDef)||void 0===i?void 0:i.suppressPaste)&&void 0!==t?t:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!==(t=this.colDef[e])&&void 0!==t?t:qu[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}createColumnEvent(e,t){return Fu(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return Ul(this.sort)}isSorting(){return Wl(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return _c(261),!(null===(e=this.beans.colHover)||void 0===e||!e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Fu(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Ul(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Ul(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&$l(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Xu(e){return e instanceof Ju}var Ju=class extends Vu{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=Yu(),this.expandableListenerRemoveCallback=null,this.expanded=!(null===e||void 0===e||!e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)Qu(t)?e(t):Xu(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){this.children&&this.children.forEach((t=>{Qu(t)?e.push(t):Xu(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.__addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.__removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let s=0,r=n.length;s<r;s++){const o=n[s];if(!o.isVisible())continue;const r=o.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const o=e&&t&&i;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{Xu(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Zu={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function eh(e,t,i){const n={},o=e.gos;return Object.assign(n,o.get("defaultColGroupDef")),Object.assign(n,t),o.validateColDef(n,i),n}var th=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=ql(e);let i=0;for(;;){var n;let o=null!==(n=e)&&void 0!==n?n:t;if(o?0!==i&&(o+="_"+i):o=i,!this.existingKeys[o]){const t=String(o);return e&&i>0&&_c(273,{providedId:e,usedId:t}),this.existingKeys[t]=!0,t}i++}}},ih=Object.freeze([]);function nh(e){if(null!==e&&void 0!==e&&e.length)return e[e.length-1]}function oh(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,n)=>i?i(e,t[n]):t[n]===e))}function sh(e,t){if(e)for(const i of e)t(i)}function rh(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function ah(e,t,i){for(let n=0;n<t.length;n++)rh(e,t[n]);for(let n=t.length-1;n>=0;n--)e.splice(i,0,t[n])}var lh="ag-Grid-AutoColumn",dh="ag-Grid-SelectionColumn",ch="ag-Grid-RowNumbersColumn";function uh(e){const t=[],i=e=>{for(let n=0;n<e.length;n++){const o=e[n];Qu(o)?t.push(o):Xu(o)&&i(o.getChildren())}};return i(e),t}function hh(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}function ph(e,t,i){const n={};if(!t)return;Eh(null,t,(e=>{n[e.getInstanceId()]=e})),i&&Eh(null,i,(e=>{n[e.getInstanceId()]=null}));const o=Object.values(n).filter((e=>null!=e));e.context.destroyBeans(o)}function gh(e){return e.getId().startsWith(lh)}function mh(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(dh))&&void 0!==t&&t}function fh(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(ch))&&void 0!==t&&t}function vh(e){let t=[];return e instanceof Array?t=e:"string"===typeof e&&(t=e.split(",")),t}function bh(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function wh(e,t){const i=e===t,n=e.getColDef()===t,o=e.getColId()==t;return i||n||o}function yh(e){const t=[],i=[],n=[];return e&&Eh(null,e,(e=>{if(Xu(e)){const t=e;i.push(t)}else{const i=e;n.push(i.getId()),t.push(i)}})),{existingCols:t,existingGroups:i,existingColKeys:n}}function xh(e,t,i,n,o,s,r,a){if(!t)return[];const{colGroupSvc:l}=e,d=new Array(t.length);for(let c=0;c<d.length;c++){const u=t[c];l&&Ph(u)?d[c]=l.createProvidedColumnGroup(n,u,i,o,s,r,a):d[c]=Ch(e,n,u,o,s,a)}return d}function Ch(e,t,i,n,o,s){var r;const a=function(e,t){if(!t)return;for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(n.field===e.field)return{idx:i,column:t[i]}}else if(n===e)return{idx:i,column:t[i]}}return}(i,n);a&&(null===n||void 0===n||n.splice(a.idx,1));let l=null===a||void 0===a?void 0:a.column;if(l){const t=kh(e,i,l.getColId());l.setColDef(t,i,s),Rh(e,l,t,s)}else{const n=o.getUniqueKey(i.colId,i.field),s=kh(e,i,n);l=new $u(s,i,n,t),e.context.createBean(l)}return null===(r=e.dataTypeSvc)||void 0===r||r.addColumnListeners(l),l}function Sh(e,t,i,n,o,s,r,a){const{sortSvc:l,pinnedCols:d,colFlex:c}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),void 0!==o&&l.setColSortIndex(t,o)),void 0!==s&&(null===d||void 0===d||d.setColPinned(t,s)),void 0!==r&&(null===c||void 0===c||c.setColFlex(t,r))}function Rh(e,t,i,n){Sh(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const o=t.getFlex();if(!(null!=o&&o>0))if(null!=i.width)t.setActualWidth(i.width,n);else{const e=t.getActualWidth();t.setActualWidth(e,n)}}function kh(e,t,i,n){const{gos:o,dataTypeSvc:s}=e,r={};$l(r,o.get("defaultColDef"),!1,!0);const a=function(e,t,i,n){var o,s,r;const a=null===(o=e.dataTypeSvc)||void 0===o?void 0:o.updateColDefAndGetColumnType(t,i,n),l=null!==(s=null!==(r=i.type)&&void 0!==r?r:a)&&void 0!==s?s:t.type;return t.type=l,l?vh(l):void 0}(e,r,t,i);a&&function(e,t,i){if(!t.length)return;const n=Object.assign({},Zu),o=e.gos.get("columnTypes")||{};for(const s of Object.keys(o)){const e=o[s];if(s in n)_c(34,{key:s});else{e.type&&_c(35),n[s]=e}}t.forEach((e=>{const t=n[e.trim()];t?$l(i,t,!1,!0):_c(36,{t:e})}))}(e,a,r);const l=r.cellDataType;$l(r,t,!1,!0),void 0!==l&&(r.cellDataType=l);const d=o.get("autoGroupColumnDef"),c=lu(o);return t.rowGroup&&d&&c&&$l(r,{sort:d.sort,initialSort:d.initialSort},!1,!0),s&&(s.postProcess(r),s.validateColDef(r)),o.validateColDef(r,i,n),r}function Ph(e){return void 0!==e.children}function Eh(e,t,i){if(t)for(let n=0;n<t.length;n++){const o=t[n];Xu(o)&&Eh(o,o.getChildren(),i),i(o,e)}}function Fh(e,t){const i=[],n=[],o=[];e.forEach((e=>{const t=e.getColDef().lockPosition;"right"===t?o.push(e):"left"===t||!0===t?i.push(e):n.push(e)}));return t.get("enableRtl")?[...o,...n,...i]:[...i,...n,...o]}function Dh(e,t){let i=!0;return Eh(null,t,(t=>{if(!Xu(t))return;const n=t,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;const s=[];n.getLeafColumns().forEach((t=>{const i=e.indexOf(t);s.push(i)}));Math.max.apply(Math,s)-Math.min.apply(Math,s)>n.getLeafColumns().length-1&&(i=!1)})),i}function Nh(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}function Mh(e,t,i){if(!t.length)return;const n=1===t.length?t[0]:null,o=Nh(t,(e=>e.getPinned()));e.dispatchEvent({type:"columnPinned",pinned:null!=o?o:null,columns:t,column:n,source:i})}function Th(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&1==i.length?i[0]:null,source:n})}function jh(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null!==t&&void 0!==t&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:o,finished:i,source:n})}function Ah(e,t,i){var n;const{colModel:o,rowGroupColsSvc:s,pivotColsSvc:r,autoColSvc:a,selectionColSvc:l,colAnimation:d,visibleCols:c,pivotResultCols:u,environment:h,valueColsSvc:p,eventSvc:g,gos:m}=e,f=null!==(n=o.getColDefCols())&&void 0!==n?n:[],v=null===l||void 0===l?void 0:l.getColumns();if((null===f||void 0===f||!f.length)&&(null===v||void 0===v||!v.length))return!1;if(null!==t&&void 0!==t&&t.state&&!t.state.forEach)return _c(32),!1;const b=(n,o,a,l,d)=>{if(!n)return;const c=((e,t)=>(i,n)=>{const o={value1:void 0,value2:void 0};let s=!1;return e&&(void 0!==e[i]&&(o.value1=e[i],s=!0),Wl(n)&&void 0!==e[n]&&(o.value2=e[n],s=!0)),!s&&t&&(void 0!==t[i]&&(o.value1=t[i]),Wl(n)&&void 0!==t[n]&&(o.value2=t[n])),o})(o,t.defaultState),u=c("flex").value1;if(Sh(e,n,c("hide").value1,c("sort").value1,c("sortIndex").value1,c("pinned").value1,u,i),null==u){const e=c("width").value1;if(null!=e){var g;const t=null!==(g=n.getColDef().minWidth)&&void 0!==g?g:h.getDefaultColumnMinWidth();null!=t&&e>=t&&n.setActualWidth(e,i)}}!d&&n.isPrimary()&&(null===p||void 0===p||p.syncColumnWithState(n,i,c),null===s||void 0===s||s.syncColumnWithState(n,i,c,a),null===r||void 0===r||r.syncColumnWithState(n,i,c,l))},w=(n,d,u)=>{var h,p,f,v;const w=Ih(e,i),y=d.slice(),x={},C={},S=[],R=[],k=[];let P=0;const E=null!==(h=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==h?h:[],F=null!==(p=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==p?p:[];n.forEach((e=>{const t=e.colId;if(t.startsWith(lh))return S.push(e),void k.push(e);if(mh(t))return R.push(e),void k.push(e);const i=u(t);i?(b(i,e,x,C,!1),rh(y,i)):(k.push(e),P+=1)}));const D=e=>b(e,null,x,C,!1);y.forEach(D),null===s||void 0===s||s.sortColumns(Oh.bind(s,x,E)),null===r||void 0===r||r.sortColumns(Oh.bind(r,C,F)),o.refreshCols(!1);const N=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.forEach((t=>{const n=e(t.colId);rh(i,n),b(n,t,null,null,!0)})),i.forEach(D)};return N((e=>{var t;return null!==(t=null===a||void 0===a?void 0:a.getColumn(e))&&void 0!==t?t:null}),S,null===a||void 0===a||null===(f=a.getColumns())||void 0===f?void 0:f.slice()),N((e=>{var t;return null!==(t=null===l||void 0===l?void 0:l.getColumn(e))&&void 0!==t?t:null}),R,null===l||void 0===l||null===(v=l.getColumns())||void 0===v?void 0:v.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;const n=[];e.state.forEach((e=>{null!=e.colId&&n.push(e.colId)})),function(e,t,i,n){if(null==e)return;let o=[];const s={};t.forEach((t=>{if(s[t])return;const i=e.map[t];i&&(o.push(i),s[t]=!0)}));let r=0;if(e.list.forEach((e=>{const t=e.getColId();if(null!=s[t])return;t.startsWith(lh)?o.splice(r++,0,e):o.push(e)})),o=Fh(o,n),!Dh(o,i.getColTree()))return void _c(39);e.list=o}(t.cols,n,t,i)}(t,o,m),c.refresh(i),g.dispatchEvent({type:"columnEverythingChanged",source:i}),w(),{unmatchedAndAutoStates:k,unmatchedCount:P}};null===d||void 0===d||d.start();let{unmatchedAndAutoStates:y,unmatchedCount:x}=w(t.state||[],f,(e=>o.getColDefCol(e)));if(y.length>0||Wl(t.defaultState)){var C,S;x=w(y,null!==(C=null===u||void 0===u||null===(S=u.getPivotResultCols())||void 0===S?void 0:S.list)&&void 0!==C?C:[],(e=>{var t;return null!==(t=null===u||void 0===u?void 0:u.getPivotResultCol(e))&&void 0!==t?t:null})).unmatchedCount}return null===d||void 0===d||d.finish(),0===x}function Ih(e,t){var i,n,o;const{rowGroupColsSvc:s,pivotColsSvc:r,valueColsSvc:a,colModel:l,sortSvc:d,eventSvc:c}=e,u={rowGroupColumns:null!==(i=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==i?i:[],pivotColumns:null!==(n=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==n?n:[],valueColumns:null!==(o=null===a||void 0===a?void 0:a.columns.slice())&&void 0!==o?o:[]},h=Lh(e),p={};return h.forEach((e=>{p[e.colId]=e})),()=>{var i,n;const o=(e,i,n,o)=>{if(oh(i.map(o),n.map(o)))return;const s=new Set(i);n.forEach((e=>{s.delete(e)||s.add(e)}));const r=[...s];c.dispatchEvent({type:e,columns:r,column:1===r.length?r[0]:null,source:t})},a=e=>{const t=[];return l.forAllCols((i=>{const n=p[i.getColId()];n&&e(n,i)&&t.push(i)})),t},g=e=>e.getColId();o("columnRowGroupChanged",u.rowGroupColumns,null!==(i=null===s||void 0===s?void 0:s.columns)&&void 0!==i?i:[],g),o("columnPivotChanged",u.pivotColumns,null!==(n=null===r||void 0===r?void 0:r.columns)&&void 0!==n?n:[],g);const m=a(((e,t)=>{const i=null!=e.aggFunc,n=i!=t.isValueActive(),o=i&&e.aggFunc!=t.getAggFunc();return n||o}));m.length>0&&Th(c,"columnValueChanged",m,t);jh(c,a(((e,t)=>e.width!=t.getActualWidth())),!0,t);Mh(c,a(((e,t)=>e.pinned!=t.getPinned())),t);!function(e,t,i){if(!t.length)return;const n=1===t.length?t[0]:null,o=Nh(t,(e=>e.isVisible()));e.dispatchEvent({type:"columnVisible",visible:o,columns:t,column:n,source:i})}(c,a(((e,t)=>e.hide==t.isVisible())),t);const f=a(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));f.length>0&&(null===d||void 0===d||d.dispatchSortChangedEvents(t,f));const v=Lh(e);!function(e,t,i,n,o){const s={};t.forEach((e=>s[e.colId]=e));const r={};e.forEach((e=>{s[e.colId]&&(r[e.colId]=!0)}));const a=e.filter((e=>r[e.colId])),l=t.filter((e=>r[e.colId])),d=[];if(l.forEach(((e,t)=>{const i=a&&a[t];if(i&&i.colId!==e.colId){const e=n.getCol(i.colId);e&&d.push(e)}})),!d.length)return;o.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,finished:!0,source:i})}(h,v,t,l,c)}}function Lh(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e;if(Ul(t.getColDefCols())||!t.isAlive())return[];const o=null===i||void 0===i?void 0:i.columns,s=null===n||void 0===n?void 0:n.columns,r=[];t.forAllCols((e=>(e=>{var t;const i=e.isRowGroupActive()&&o?o.indexOf(e):null,n=e.isPivotActive()&&s?s.indexOf(e):null,a=e.isValueActive()?e.getAggFunc():null,l=null!=e.getSort()?e.getSort():null,d=null!=e.getSortIndex()?e.getSortIndex():null;r.push({colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:l,sortIndex:d,aggFunc:a,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:n,flex:null!==(t=e.getFlex())&&void 0!==t?t:null})})(e)));const a=new Map(t.getCols().map(((e,t)=>[e.getColId(),t])));return r.sort(((e,t)=>(a.has(e.colId)?a.get(e.colId):-1)-(a.has(t.colId)?a.get(t.colId):-1))),r}function _h(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),n=t(i.sort,i.initialSort),o=t(i.sortIndex,i.initialSortIndex),s=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let d=t(i.rowGroupIndex,i.initialRowGroupIndex),c=t(i.rowGroup,i.initialRowGroup);null!=d||null!=c&&0!=c||(d=null,c=null);let u=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);null!=u||null!=h&&0!=h||(u=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:o,hide:s,pinned:r,width:a,flex:l,rowGroup:c,rowGroupIndex:d,pivot:h,pivotIndex:u,aggFunc:p}}var Oh=(e,t,i,n)=>{const o=e[i.getId()],s=e[n.getId()],r=null!=o,a=null!=s;if(r&&a)return o-s;if(r)return-1;if(a)return 1;const l=t.indexOf(i),d=t.indexOf(n),c=l>=0;return c&&d>=0?l-d:c?-1:1},Bh=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},zh=class extends Vu{};function Vh(e,t,i){return i&&e.addDestroyFunc((()=>t.destroyBean(i))),null!==i&&void 0!==i?i:e}var Hh=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.toggleCss(e,t)))}var i;this.cssClassStates[e]!==t&&e.length&&(null===(i=this.getGui())||void 0===i||i.classList.toggle(e,t),this.cssClassStates[e]=t)}},Gh=0,Wh=null,Uh=class extends Vu{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Gh++,this.cssManager=new Hh((()=>this.eGui)),this.componentSelectors=new Map((null!==t&&void 0!==t?t:[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preConstruct(){var e,t;this.wireTemplate(this.getGui());const i="component-"+(null===(e=Object.getPrototypeOf(this))||void 0===e||null===(e=e.constructor)||void 0===e?void 0:e.name);null===(t=this.css)||void 0===t||t.forEach((e=>this.beans.environment.addGlobalCSS(e,i)))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(hc):null}applyElementsToComponent(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const o=this[t];if(o===Wh)this[t]=null!==n&&void 0!==n?n:e;else{const e=i&&i[t];if(!this.suppressDataRefValidation&&!e)throw new Error("data-ref: ".concat(t," on ").concat(this.constructor.name," with ").concat(o))}}}createChildComponentsFromTags(e,t){const i=[];for(const o of null!==(n=e.childNodes)&&void 0!==n?n:[]){var n;i.push(o)}i.forEach((i=>{if(!(i instanceof HTMLElement))return;const n=this.createComponentFromElement(i,(e=>{const t=e.getGui();if(t)for(const o of null!==(n=i.attributes)&&void 0!==n?n:[]){var n;t.setAttribute(o.name,o.value)}}),t);if(n){if(n.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);n.addItems(e)}this.swapComponentForNode(n,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(e,t,i){const n=e.nodeName,o=this.getDataRefAttribute(e),s=0===n.indexOf("AG-"),r=s?this.componentSelectors.get(n):null;let a=null;if(r){const e=i&&o?i[o]:void 0;a=new r.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(s)throw new Error("selector: ".concat(n));return this.applyElementsToComponent(e,o,i,a),a}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){let n;n="string"===typeof e||null==e?Zd(e):gc(e),this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let o=0;o<t.length;o++){const e=t[o];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),ac(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};i&&n&&n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||vd(e,!t)}(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Od(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}};function qh(e){return"object"===typeof e&&!!e.component}var Kh=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return t.length?new e((e=>{let i=t.length;const n=new Array(i);t.forEach(((t,o)=>{t.then((t=>{n[o]=t,i--,0===i&&e(n)}))}))})):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((i=>e(t(i))))}))}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}};function Yh(e,t,i,n){const{name:o}=i;let s,r,a,l,d,c;if(t){const i=t,u=i[o+"Selector"],h=u?u(n):null,p=t=>{if("string"===typeof t)s=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:r=t}};h?(p(h.component),l=h.params,d=h.popup,c=h.popupPosition):p(i[o])}return{compName:s,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:d,popupPositionFromSelector:c}}var Qh={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},$h={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},Xh={name:"headerComponent",optionalMethods:["refresh"]},Jh={name:"innerHeaderComponent"},Zh={name:"innerHeaderGroupComponent"},ep={name:"headerGroupComponent"},tp={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},ip={name:"loadingCellRenderer",cellRenderer:!0},np={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},op={name:"loadingOverlayComponent",optionalMethods:["refresh"]},sp={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},rp={name:"tooltipComponent"},ap={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},lp={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},dp={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},cp={name:"loadingCellRenderer",cellRenderer:!0},up={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},hp={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function pp(e,t,i){return e.getCompDetails(t,tp,void 0,i)}function gp(e,t,i){return e.getCompDetails(t,ip,"agSkeletonCellRenderer",i,!0)}function mp(e,t,i){return e.getCompDetails(t,np,"agCellEditor",i,!0)}function fp(e,t){return Yh(e,t,ap)}function vp(e,t,i){return e.mergeParams(t,ap,i)}function bp(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}var wp,yp=new Set,xp={},Cp={},Sp=!1,Rp=!1,kp=!1;function Pp(e){wp||(wp=e.version);const t=e=>"You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ".concat(e," Please update all modules to the same version.");if(e.version?function(e){const[t,i]=e.version.split(".")||[],[n,o]=wp.split(".")||[];return t===n&&i===o}(e)||wc(t("'".concat(e.moduleName,"' is version ").concat(e.version," but the other modules are version ").concat(wp,"."))):wc(t("'".concat(e.moduleName,"' is incompatible."))),e.validate){const t=e.validate();if(!t.isValid){wc("".concat(t.message))}}}function Ep(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||(Sp=!0),Pp(e);const o=null!==(i=e.rowModels)&&void 0!==i?i:["all"];let s;yp.add(e),void 0!==t?(Rp=!0,void 0===Cp[t]&&(Cp[t]={}),s=Cp[t]):s=xp,o.forEach((t=>{void 0===s[t]&&(s[t]={}),s[t][e.moduleName]=e})),e.dependsOn&&e.dependsOn.forEach((e=>Ep(e,t,n)))}function Fp(e,t,i){const n=i=>{var n,o;return!(null===(n=xp[i])||void 0===n||!n[e])||!(null===(o=Cp[t])||void 0===o||null===(o=o[i])||void 0===o||!o[e])};return n(i)||n("all")}function Dp(){return Rp}var Np=class{static register(e){Ep(e,void 0)}static registerModules(e){e.forEach((e=>Ep(e,void 0)))}},Mp=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;for(const i of Object.keys(e.providedBeanInstances))this.beans[i]=e.providedBeanInstances[i];e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error("Bean ".concat(e.name," is missing beanName")),this.createdBeans.push(t)})),null===(t=e.derivedBeans)||void 0===t||t.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{var t,i;null===(t=e.preWireBeans)||void 0===t||t.call(e,this.beans),null===(i=e.wireBeans)||void 0===i||i.call(e,this.beans)})),e.forEach((e=>{var t;return null===(t=e.preConstruct)||void 0===t?void 0:t.call(e)})),t&&e.forEach(t),e.forEach((e=>{var t;return null===(t=e.postConstruct)||void 0===t?void 0:t.call(e)}))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;null===e||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}};var Tp=class extends Mp{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){var e,t;super.destroy(),t=this.gridId,delete Cp[t],null===(e=this.destroyCallback)||void 0===e||e.call(this)}getGridId(){return this.gridId}},jp=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var t;const{rowNode:i,column:n}=e||{};return null===(t=this.cellValidations)||void 0===t||null===(t=t.get(i))||void 0===t?void 0:t.get(n)}hasCellValidation(e){return e&&e.rowNode&&e.column?!!this.getCellValidation(e):this.cellValidations.size>0}setCellValidation(e,t){const{rowNode:i,column:n}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(n,t)}clearCellValidation(e){var t;const{rowNode:i,column:n}=e;null===(t=this.cellValidations.get(i))||void 0===t||t.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},Ap=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e&&e.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation(e,t){let{rowNode:i}=e;this.rowValidations.set(i,t)}clearRowValidation(e){let{rowNode:t}=e;this.rowValidations.delete(t)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function Ip(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return i&&n&&o}function Lp(e,t){var i,n;switch(t.rowPinned){case"top":return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t.rowIndex);case"bottom":return null===(n=e.pinnedRowModel)||void 0===n?void 0:n.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function _p(e,t){var i;const n=null===(i=e.spannedRowRenderer)||void 0===i?void 0:i.getCellByPosition(t);if(n)return n;const o=e.rowRenderer.getRowByPosition(t);return o?o.getCellCtrl(t.column):null}function Op(e,t){var i;const{rowIndex:n,rowPinned:o}=t,{pageBounds:s,pinnedRowModel:r,rowModel:a}=e;if(0===n)return"top"===o?null:"bottom"===o&&a.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:null!==r&&void 0!==r&&r.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;return null!==(i=zp(e,o?void 0:a.getRow(n),!0))&&void 0!==i?i:{rowIndex:n-1,rowPinned:o}}function Bp(e,t){var i;const{rowIndex:n,rowPinned:o}=t,{pageBounds:s,pinnedRowModel:r,rowModel:a}=e;if(function(e,t){const{rowPinned:i,rowIndex:n}=t,{pinnedRowModel:o,pageBounds:s}=e;if("top"===i){var r;return(null!==(r=null===o||void 0===o?void 0:o.getPinnedTopRowCount())&&void 0!==r?r:0)-1<=n}if("bottom"===i){var a;return(null!==(a=null===o||void 0===o?void 0:o.getPinnedBottomRowCount())&&void 0!==a?a:0)-1<=n}const l=s.getLastRow();return l<=n}(e,t))return"bottom"===o?null:"top"===o&&a.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:null!==r&&void 0!==r&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;return null!==(i=zp(e,o?void 0:a.getRow(n)))&&void 0!==i?i:{rowIndex:n+1,rowPinned:o}}function zp(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{gos:n,rowRenderer:o}=e;if(null===t||void 0===t||!t.sticky||!au(n))return;const s=o.getStickyTopRowCtrls(),r=o.getStickyBottomRowCtrls(),a=!r.some((e=>e.rowNode.rowIndex===t.rowIndex)),l=a?s:r,d=(i?-1:1)*(a?-1:1);let c;for(let u=0;u<l.length;u++)if(l[u].rowNode.rowIndex===t.rowIndex){c=l[u+d];break}return c?{rowIndex:c.rowNode.rowIndex,rowPinned:null}:void 0}function Vp(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{rowIndex:n,rowId:o,rowCtrl:s,rowPinned:r}=i;if(s)return s;const{rowModel:a,rowRenderer:l}=e;let{rowNode:d}=i;return d||(o?d=function(e,t,i){var n;const{rowModel:o,pinnedRowModel:s}=e;let r;var a,l,d;return null!==(n=r)&&void 0!==n||(r=null===o||void 0===o?void 0:o.getRowNode(t)),i?null!==(a=r)&&void 0!==a||(r=null===s||void 0===s?void 0:s.getPinnedRowById(t,i)):(null!==(l=r)&&void 0!==l||(r=null===s||void 0===s?void 0:s.getPinnedRowById(t,"top")),null!==(d=r)&&void 0!==d||(r=null===s||void 0===s?void 0:s.getPinnedRowById(t,"bottom"))),r}(e,o,r):null!=n&&(d=a.getRow(n))),null===(t=l.getRowCtrls(d?[d]:[]))||void 0===t?void 0:t[0]}function Hp(e){var t,i,n,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellCtrl:r,colId:a,columnId:l,column:d}=s;if(r)return r;const c=e.colModel.getCol(null!==(t=null!==a&&void 0!==a?a:l)&&void 0!==t?t:Wp(d)),u=null!==(i=s.rowCtrl)&&void 0!==i?i:Vp(e,s),h=null!==(n=null===u||void 0===u?void 0:u.getCellCtrl(c))&&void 0!==n?n:void 0;if(h)return h;const p=null!==(o=s.rowNode)&&void 0!==o?o:null===u||void 0===u?void 0:u.rowNode;var g;return p?null===(g=e.rowRenderer.getCellCtrls([p],[c]))||void 0===g?void 0:g[0]:void 0}function Gp(e){const{editSvc:t}=e;null!==t&&void 0!==t&&t.isBatchEditing()?tg(e):null===t||void 0===t||t.stopEditing(void 0,{source:"api"})}function Wp(e){if(e)return"string"===typeof e?e:e.getColId()}var Up=Symbol("unedited");function qp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],n=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of n){var o;const e=null===(o=s.comp)||void 0===o?void 0:o.getCellEditor();e&&i.push({ctrl:s,editor:bp(e)})}return i}function Kp(e){let{pendingValue:t,sourceValue:i}=e;return t===Up&&(t=i),t!==i}function Yp(e,t,i){var n,o,s;const{key:r,event:a,cellStartedEdit:l,silent:d}=null!==i&&void 0!==i?i:{},c=Hp(e,t),u=null===c||void 0===c||null===(n=c.comp)||void 0===n?void 0:n.getCellEditor(),h=$p(e,t,r,l&&!d),p=null===(o=e.editModelSvc)||void 0===o?void 0:o.getEdit(t);let g=h.value;var m;if(void 0===g&&(g=null===p||void 0===p?void 0:p.sourceValue),null===(s=e.editModelSvc)||void 0===s||s.setEdit(t,{editorValue:g,state:"editing"}),u)return void(null===(m=u.refresh)||void 0===m||m.call(u,h));const f=t.column.getColDef(),v=mp(e.userCompFactory,f,h),b=null!=(null===v||void 0===v?void 0:v.popupFromSelector)?v.popupFromSelector:!!f.cellEditorPopup,w=null!=(null===v||void 0===v?void 0:v.popupPositionFromSelector)?v.popupPositionFromSelector:f.cellEditorPopupPosition;var y,x,C;(Jp(v.params,a),c)&&(c.editCompDetails=v,null===(y=c.comp)||void 0===y||y.setEditDetails(v,b,w,e.gos.get("reactiveCustomComponents")),null===c||void 0===c||null===(x=c.rowCtrl)||void 0===x||x.refreshRow({suppressFlash:!0}),d||null===(C=e.editSvc)||void 0===C||C.dispatchCellEvent(t,a,"cellEditingStarted"))}function Qp(e){var t,i;const n={editorValueExists:!1},o=null===(t=e.getValidationErrors)||void 0===t?void 0:t.call(e);if((null!==(i=null===o||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0)return n;return{editorValue:e.getValue(),editorValueExists:!0}}function $p(e,t,i,n){var o,s,r,a,l,d;const{valueSvc:c,gos:u,editSvc:h}=e,p=Hp(e,t),g=null!==(o=null===(s=t.rowNode)||void 0===s?void 0:s.rowIndex)&&void 0!==o?o:void 0,m=null===h||void 0===h?void 0:h.isBatchEditing(),f=e.colModel.getCol(t.column.getId()),{rowNode:v,column:b}=t,w=null===(r=p.comp)||void 0===r?void 0:r.getCellEditor(),y=null!==(a=null===h||void 0===h?void 0:h.getCellDataValue(t,!1))&&void 0!==a?a:w?null===(l=Qp(w))||void 0===l?void 0:l.editorValue:void 0;return Fu(u,{value:y===Up?null===(d=c.getValueForDisplay(f,v))||void 0===d?void 0:d.value:y,eventKey:null!==i&&void 0!==i?i:null,column:b,colDef:b.getColDef(),rowIndex:g,node:v,data:v.data,cellStartedEdit:null!==n&&void 0!==n&&n,onKeyDown:null===p||void 0===p?void 0:p.onKeyDown.bind(p),stopEditing:i=>{h.stopEditing(t,{source:m?"ui":"api",suppressNavigateAfterEdit:i}),ig(e,t)},eGridCell:null===p||void 0===p?void 0:p.eGui,parseValue:e=>c.parseValue(f,v,e,null===p||void 0===p?void 0:p.value),formatValue:null===p||void 0===p?void 0:p.formatValue.bind(p),validate:()=>{null===h||void 0===h||h.validateEdit()}})}function Xp(e,t){const{editModelSvc:i}=e;null===i||void 0===i||i.getEditMap().forEach(((e,n)=>{e.forEach(((e,o)=>{(t||"editing"!==e.state&&e.pendingValue!==Up)&&(Kp(e)||"editing"===e.state&&!t||null===i||void 0===i||i.removeEdits({rowNode:n,column:o}))}))}))}function Jp(e,t){var i,n;t instanceof KeyboardEvent&&"agNumberCellEditor"===e.column.getColDef().cellEditor?e.suppressPreventDefault=["-","+",".","e"].includes(null!==(i=null===t||void 0===t?void 0:t.key)&&void 0!==i?i:"")||e.suppressPreventDefault:null===t||void 0===t||null===(n=t.preventDefault)||void 0===n||n.call(t);return e}function Zp(e,t){var i;null===(i=e.editModelSvc)||void 0===i||i.getEditPositions().forEach((i=>{var n;const o=Hp(e,i);if(!o)return;const s=null===(n=o.comp)||void 0===n?void 0:n.getCellEditor();if(!s)return;const{editorValue:r,editorValueExists:a}=Qp(s);eg(e,i,t,r,void 0,!a)}))}function eg(e,t,i,n,o,s){var r,a;const{editModelSvc:l,valueSvc:d}=e;if(!l)return;const{rowNode:c,column:u}=t;if(!c||!u)return;const h=Hp(e,t),p=!(null===h||void 0===h||null===(r=h.comp)||void 0===r||!r.getCellEditor());let g=l.getEdit(t,!0);null!==(a=g)&&void 0!==a&&a.sourceValue||(g=l.setEdit(t,{sourceValue:d.getValue(u,c,void 0,"api"),pendingValue:Up,state:p?"editing":"changed"})),l.setEdit(t,{editorValue:s?g.sourceValue:n,state:p?"editing":"changed"}),i&&function(e,t){const{editModelSvc:i}=e,n=null===i||void 0===i?void 0:i.getEdit(t,!0);null===i||void 0===i||i.setEdit(t,{pendingValue:null===n||void 0===n?void 0:n.editorValue})}(e,t)}function tg(e,t,i){var n;t||(t=null===(n=e.editModelSvc)||void 0===n?void 0:n.getEditPositions());t.forEach((t=>ig(e,t,i)))}function ig(e,t,i){var n,o;const{editSvc:s,editModelSvc:r}=e,{rowNode:a,column:l}=t,d=Hp(e,t);if(!d)return void(null!==r&&void 0!==r&&r.hasEdits(t)&&a&&l&&(null===r||void 0===r||r.setEdit(t,{state:"changed"})));const{comp:c}=d;if(c&&!c.getCellEditor())return void(null===d||void 0===d||d.refreshCell());const u=null===c||void 0===c||null===(n=c.getCellEditor())||void 0===n||null===(o=n.getValidationErrors)||void 0===o?void 0:o.call(n),h=null===r||void 0===r?void 0:r.getCellValidationModel();null!==u&&void 0!==u&&u.length?null===h||void 0===h||h.setCellValidation(t,{errorMessages:u}):null===h||void 0===h||h.clearCellValidation(t),null!==r&&void 0!==r&&r.getEdit(t)&&(null===r||void 0===r||r.setEdit(t,{state:"changed"})),null===c||void 0===c||c.setEditDetails(),null===c||void 0===c||c.refreshEditStyles(!1,!1),null===d||void 0===d||d.refreshCell({force:!0,suppressFlash:!0});const p=null===r||void 0===r?void 0:r.getEdit(t);"changed"!==(null===p||void 0===p?void 0:p.state)||null!==i&&void 0!==i&&i.silent||null===s||void 0===s||s.dispatchCellEvent(t,null===i||void 0===i?void 0:i.event,"cellEditingStopped",{valueChanged:Kp(p),newValue:null===p||void 0===p?void 0:p.pendingValue,oldValue:null===p||void 0===p?void 0:p.sourceValue})}function ng(e){const t=qp(e),i=new jp,{ariaAnnounce:n,localeSvc:o,editModelSvc:s,gos:r}=e,a="fullRow"===r.get("editType"),l=Hl(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(const y of t){var d,c,u,h;const{ctrl:e,editor:t}=y,{rowNode:o,column:s}=e,r=null!==(d=null===(c=t.getValidationErrors)||void 0===c?void 0:c.call(t))&&void 0!==d?d:[],a=(null===(u=t.getValidationElement)||void 0===u?void 0:u.call(t,!1))||!(null!==(h=t.isPopup)&&void 0!==h&&h.call(t))&&e.eGui;if(a){const e=null!=r&&r.length>0,t=e?r.join(". "):"";dd(a,"invalid",e),e&&n.announceValue("".concat(l," ").concat(r),"editorValidation"),a instanceof HTMLInputElement?a.setCustomValidity(t):a.classList.toggle("invalid",e)}(null===r||void 0===r?void 0:r.length)>0&&i.setCellValidation({rowNode:o,column:s},{errorMessages:r})}Zp(e,!1),null===s||void 0===s||s.setCellValidationModel(i);const p=new Set;for(const{ctrl:y}of t)p.add(y.rowCtrl);if(a){const t=og(e);null===s||void 0===s||s.setRowValidationModel(t)}for(const y of p.values()){var g;null===(g=y.rowEditStyleFeature)||void 0===g||g.applyRowStyles();for(const e of y.getAllCellCtrls()){var m,f,v,b,w;null===(m=e.tooltipFeature)||void 0===m||m.refreshTooltip(!0),null===(f=e.editorTooltipFeature)||void 0===f||f.refreshTooltip(!0),null===(v=e.editStyleFeature)||void 0===v||null===(b=(w=v).applyCellStyles)||void 0===b||b.call(w)}}}var og=e=>{var t;const i=new Ap,n=e.gos.get("getFullRowEditValidationErrors"),o=null===(t=e.editModelSvc)||void 0===t?void 0:t.getEditMap();if(!o)return i;for(const a of o.keys()){var s;const e=o.get(a);if(!e)continue;const t=[],{rowIndex:l,rowPinned:d}=a;for(const i of e.keys()){var r;const n=e.get(i);if(!n)continue;const{editorValue:o,pendingValue:s,sourceValue:a}=n,c=null!==(r=null!==o&&void 0!==o?o:s===Up?void 0:s)&&void 0!==r?r:a;t.push({column:i,colId:i.getColId(),rowIndex:l,rowPinned:d,oldValue:a,newValue:c})}const c=null!==(s=null===n||void 0===n?void 0:n({editorsState:t}))&&void 0!==s?s:[];c.length>0&&i.setRowValidation({rowNode:a},{errorMessages:c})}return i};function sg(e,t,i,n){return Ul(e)?[]:ag(e.headerClass,e,t,i,n)}function rg(e,t,i){e.toggleCss("ag-column-first",i.isColAtEdge(t,"first")),e.toggleCss("ag-column-last",i.isColAtEdge(t,"last"))}function ag(e,t,i,n,o){if(Ul(e))return[];let s;if("function"===typeof e){const r=function(e,t,i,n){return Fu(t,{colDef:e,column:i,columnGroup:n})}(t,i,n,o);s=e(r)}else s=e;return"string"===typeof s?[s]:Array.isArray(s)?[...s]:[]}function lg(e){return!(!e.rowPinned||!e.pinnedSibling)}function dg(e,t,i,n){const o="top"===t;if(!i)return dg(e,t,o?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),n);if(!n){const n=o?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return dg(e,t,i,o?e.getPinnedTopRow(n-1):e.getPinnedBottomRow(n-1))}let s=!1,r=!1;const a=[];return e.forEachPinnedRow(t,(e=>e!==i||s?s&&e===n?(r=!0,void a.push(e)):void(s&&!r&&a.push(e)):(s=!0,void a.push(e)))),a}var cg="Backspace",ug="Tab",hg="Enter",pg="Escape",gg=" ",mg="ArrowLeft",fg="ArrowUp",vg="ArrowRight",bg="ArrowDown",wg="Delete",yg="F2",xg="PageUp",Cg="PageDown",Sg="Home",Rg="End",kg="KeyA",Pg="KeyC",Eg="KeyD",Fg="KeyV",Dg="KeyX",Ng="KeyY",Mg="KeyZ",Tg=!1,jg=0;function Ag(e){const t=Tg,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(Tg=i)}function Ig(e){const t=Zc(e);var i;return i=t,jg>0||(i.addEventListener("keydown",Ag),i.addEventListener("mousedown",Ag)),jg++,()=>{jg--,function(e){jg>0||(e.removeEventListener("keydown",Ag),e.removeEventListener("mousedown",Ag))}(t)}}function Lg(e,t){let i=Ld;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const n=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter((e=>Jd(e))),o=Array.prototype.slice.apply(e.querySelectorAll(i));if(!o.length)return n;return s=o,n.filter((e=>-1===s.indexOf(e)));var s}function _g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Lg(e,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?".ag-tab-guard":null,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=t?nh(i):i[0];return!!n&&(n.focus({preventScroll:!0}),!0)}function Og(e,t,i,n){const o=Lg(t,i?':not([tabindex="-1"])':null),s=iu(e);let r;r=i?o.findIndex((e=>e.contains(s))):o.indexOf(s);const a=r+(n?-1:1);return a<0||a>=o.length?null:o[a]}function Bg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===jd(e)&&++i<=t;)e=e.parentElement;return null===jd(e)?null:e}function zg(e){var t;return e.gos.get("suppressHeaderFocus")||!(null===(t=e.overlays)||void 0===t||!t.isExclusive())}function Vg(e){var t;return e.gos.get("suppressCellFocus")||!(null===(t=e.overlays)||void 0===t||!t.isExclusive())}function Hg(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.ctrlsSvc.get("gridCtrl");return!(i||!n.focusNextInnerContainer(t))||((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}var Gg=class extends Vu{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case hg:this.onEnterKeyDown(e);break;case yg:this.onF2KeyDown(e);break;case pg:this.onEscapeKeyDown(e);break;case ug:this.onTabKeyDown(e);break;case cg:case wg:this.onBackspaceOrDeleteKeyDown(t,e);break;case bg:case fg:case vg:case mg:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){var i;const{cellCtrl:n,beans:o}=this;if(null===(i=o.editSvc)||void 0===i||!i.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{var s;const i=n.getFocusedCellPosition();null===(s=o.navigation)||void 0===s||s.navigateToNextCell(e,t,i,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&(e.key===mg||e.key===vg?null===i||void 0===i||i.ensureColumnVisible(n.column):null===i||void 0===i||i.ensureRowVisible(n.rowIndex))}onTabKeyDown(e){var t;null===(t=this.beans.navigation)||void 0===t||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:o}=this,{gos:s,rangeSvc:r,eventSvc:a,editSvc:l}=n;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),!function(e){return e===wg||!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&e===cg&&Md()}(e,s.get("enableCellEditingOnBackspace"))||null!==l&&void 0!==l&&l.isEditing(i,{withOpenEditor:!0})){if(null===l||void 0===l||!l.isEditing(i,{withOpenEditor:!0})){var d;null===(d=n.editSvc)||void 0===d||d.startEditing(i,{startedEdit:!0,event:t})}}else if(r&&bu(s))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,o);o.setDataValue(e,t,"cellClear")}a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this,{editSvc:n,navigation:o}=i,s=null===n||void 0===n?void 0:n.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=null===n||void 0===n?void 0:n.isRowEditing(r,{withOpenEditor:!0}),l=t=>{(null===n||void 0===n?void 0:n.startEditing(t,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(s||a){var d;if(this.isCtrlEnter(e))return void(null===n||void 0===n||n.applyBulkEdit(t,(null===i||void 0===i||null===(d=i.rangeSvc)||void 0===d?void 0:d.getCellRanges())||[]));if(ng(i),"block-stop"===(null===n||void 0===n?void 0:n.checkNavWithValidation(void 0,e)))return;null!==n&&void 0!==n&&n.isEditing(t,{withOpenEditor:!0})?null===n||void 0===n||n.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?null===n||void 0===n||n.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){const i=e.shiftKey?fg:bg;null===o||void 0===o||o.navigateToNextCell(null,i,t.cellPosition,!1)}else{if(null!==n&&void 0!==n&&n.hasValidationErrors())return;null!==n&&void 0!==n&&n.hasValidationErrors(t)&&n.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===hg}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;(null===i||void 0===i?void 0:i.isEditing())&&(ng(this.beans),"block-stop"===(null===i||void 0===i?void 0:i.checkNavWithValidation(void 0,e)))||null===i||void 0===i||i.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;"block-stop"===(null===i||void 0===i?void 0:i.checkNavWithValidation(t,e))&&i.revertSingleCellEdit(t),null===i||void 0===i||i.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){const t=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:n}=this;if(t)return;if(null!==i&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0}))return;if(e.key===gg)this.onSpaceKeyDown(e);else if(null!==i&&void 0!==i&&i.isCellEditable(n,"ui")){var o;if(null!==i&&void 0!==i&&i.hasValidationErrors()&&(null===i||void 0===i||!i.hasValidationErrors(n)))return;null===i||void 0===i||i.startEditing(n,{startedEdit:!0,event:e,source:"api"});const t=n.editCompDetails;!(null!==t&&void 0!==t&&null!==(o=t.params)&&void 0!==o&&o.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:i}=this.beans,{rowNode:n}=this.cellCtrl;var o;null!==i&&void 0!==i&&i.isEditing(this.cellCtrl,{withOpenEditor:!0})||!qc(t)||(null===(o=this.beans.selectionSvc)||void 0===o||o.handleSelectionEvent(e,n,"spaceKey"));e.preventDefault()}};function Wg(e,t,i){if(0===i)return!1;const n=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(n,o)<=i}function Ug(e,t){let{gos:i}=e;return 2===t.button||t.ctrlKey&&i.get("allowContextMenuWithControlKey")}var qg=class extends Vu{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!Lu(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){var t;if(null!==(t=this.beans.touchSvc)&&void 0!==t&&t.handleCellDoubleClick(this,e))return;const{eventSvc:i,rangeSvc:n,editSvc:o,editModelSvc:s,frameworkOverrides:r}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:d,cellPosition:c}=l;n&&a&&n.getCellRangeCount(c)>1&&n.intersectLastRange(!0);const u=l.createEvent(e,"cellClicked");i.dispatchEvent(u);const h=d.getColDef();if(h.onCellClicked&&window.setTimeout((()=>{r.wrapOutgoing((()=>{h.onCellClicked(u)}))}),0),"editing"!==(null===s||void 0===s?void 0:s.getState(l))){var p,g;const t=null===o||void 0===o?void 0:o.isEditing(),i=null!==(p=null===s||void 0===s?void 0:s.getCellValidationModel().getCellValidationMap().size)&&void 0!==p?p:0,n=null!==(g=null===s||void 0===s?void 0:s.getRowValidationModel().getRowValidationMap().size)&&void 0!==g?g:0;if(t&&(i>0||n>0))return;null!==o&&void 0!==o&&o.shouldStartEditing(l,e)?null===o||void 0===o||o.startEditing(l,{event:e}):null!==o&&void 0!==o&&o.shouldStopEditing(l,e)&&("fullRow"===this.beans.gos.get("editType")?null===o||void 0===o||o.stopEditing(l,{event:e,source:"edit"}):null===o||void 0===o||o.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){var t;const{column:i,beans:n,cellCtrl:o}=this,{eventSvc:s,frameworkOverrides:r,editSvc:a,editModelSvc:l}=n,d=i.getColDef(),c=o.createEvent(e,"cellDoubleClicked");if(s.dispatchEvent(c),"function"===typeof d.onCellDoubleClicked&&window.setTimeout((()=>{r.wrapOutgoing((()=>{d.onCellDoubleClicked(c)}))}),0),null!==a&&void 0!==a&&a.shouldStartEditing(this.cellCtrl,e)&&"editing"!==(null===(t=this.beans.editModelSvc)||void 0===t?void 0:t.getState(this.cellCtrl))){var u,h;const t=null===a||void 0===a?void 0:a.isEditing(),i=null!==(u=null===l||void 0===l?void 0:l.getCellValidationModel().getCellValidationMap().size)&&void 0!==u?u:0,n=null!==(h=null===l||void 0===l?void 0:l.getRowValidationModel().getRowValidationMap().size)&&void 0!==h?h:0;if(t&&(i>0||n>0))return;null===a||void 0===a||a.startEditing(o,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:n}=e,o=e.target,{cellCtrl:s,beans:r}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:d,focusSvc:c,gos:u,editSvc:h}=r;if(this.isRightClickInExistingRange(e))return;const p=l&&!l.isEmpty(),g=this.containsWidget(o),{cellPosition:m,column:f}=s,v=fh(f);if(d&&v&&!d.handleMouseDownOnCell(m,e))return l&&e.preventDefault(),void e.stopImmediatePropagation();if(!n||!p){const t=null===h||void 0===h?void 0:h.isEditing(s),i=u.get("enableCellTextSelection")&&e.defaultPrevented,n=(Dd()||i)&&!t&&!_d(o)&&!g;s.focusCell(n,e)}if(n&&p&&!c.isCellFocused(m)){e.preventDefault();const t=c.getFocusedCell();if(t){const{column:i,rowIndex:n,rowPinned:o}=t;null!==h&&void 0!==h&&h.isEditing(t)&&(null===h||void 0===h||h.stopEditing(t)),c.setFocusedCell({column:i,rowIndex:n,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!g){if(l){v&&e.preventDefault();const o=Ug(this.beans,e)&&v;if(n)l.extendLatestRangeToCell(m);else if(!o){const e=t||i;l.setRangeToCell(m,e)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=Ug(this.beans,e);if(i&&n)return!0}return!1}containsWidget(e){return zd(e,"ag-selection-checkbox",3)||zd(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),null===i||void 0===i||i.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),null===i||void 0===i||i.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}},Kg=class extends Vu{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();null!=t&&(this.eContent.style.height="".concat(t,"px"))}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();oh(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width="".concat(e,"px")}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(1===i)n.push(e);else{let t=e;const o=e.getPinned();for(let e=0;t&&e<i&&(n.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!Ul(t))&&o===t.getPinned();e++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?nh(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if("right"===this.column.getPinned()){return i+t.bodyWidth+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=Qc(this.beans)*this.rowSpan;this.eContent.style.height="".concat(t,"px"),this.eContent.style.zIndex="1"}destroy(){super.destroy()}},Yg="cellCtrl";function Qg(e,t){return Ou(e,t,Yg)}var $g=0,Xg=class extends Vu{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:o}=e;this.instanceId=o+"-"+$g++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var e,t;const{beans:i}=this;this.positionFeature=new Kg(this,i),this.customStyleFeature=null===(e=i.cellStyles)||void 0===e?void 0:e.createCellCustomStyleFeature(this,i),this.editStyleFeature=null===(t=i.editSvc)||void 0===t?void 0:t.createCellStyleFeature(this,i),this.mouseListener=new qg(this,i,this.column),this.keyboardListener=new Gg(this,i,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:n}=i;n&&bu(i.gos)&&(this.rangeFeature=n.createCellRangeFeature(i,this)),fh(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(i,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=null===(t=this.beans.tooltipSvc)||void 0===t?void 0:t.setupCellEditorTooltip(this,e),ng(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,n,o,s,r){var a,l,d,c,u,h,p,g,m;(this.comp=e,this.eGui=t,this.printLayout=o,null!==(a=r)&&void 0!==a||(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc((()=>this.removeFeatures())),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null===(l=this.positionFeature)||void 0===l||l.init(),null===(d=this.customStyleFeature)||void 0===d||d.setComp(e),null===(c=this.editStyleFeature)||void 0===c||c.setComp(e),null===(u=this.tooltipFeature)||void 0===u||u.refreshTooltip(),null===(h=this.keyboardListener)||void 0===h||h.init(),null===(p=this.rangeFeature)||void 0===p||p.setComp(e),null===(g=this.rowResizeFeature)||void 0===g||g.refreshRowResizer(),s&&this.isCellEditable())?null===(m=this.editSvc)||void 0===m||m.startEditing(this,{startedEdit:!1,source:"api",silent:!0}):this.showValue(!1,!0);this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach((e=>e())),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){var i,n;this.isAutoHeight=null!==(i=null===(n=this.beans.rowAutoHeight)||void 0===n?void 0:n.setupCellAutoHeight(this,e,t))&&void 0!==i&&i}getCellAriaRole(){var e;return null!==(e=this.column.getColDef().cellAriaRole)&&void 0!==e?e:"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){var e;return null!==(e=this.valueFormatted)&&void 0!==e?e:this.value}getDeferLoadingCellRenderer(){var e;const{beans:t,column:i}=this,{userCompFactory:n,ctrlsSvc:o,eventSvc:s}=t,r=i.getColDef(),a=this.createCellRendererParams();a.deferRender=!0;const l=gp(n,r,a);if(null!==(e=o.getGridBodyCtrl())&&void 0!==e&&null!==(e=e.scrollFeature)&&void 0!==e&&e.isScrolling()){let e;const t=new Kh((t=>{e=t}));return this.addManagedListeners(s,{bodyScrollEnd:()=>e()}),{loadingComp:l,onReady:t}}return{loadingComp:l,onReady:Kh.resolve()}}showValue(e,t){var i,n,o;const{beans:s,column:r,rowNode:a,rangeFeature:l}=this,{userCompFactory:d}=s;let c,h=this.getValueToDisplay();const p=a.stub&&null==(null===(i=a.groupData)||void 0===i?void 0:i[r.getId()]),g=r.getColDef();if(p||this.isCellRenderer()){const e=this.createCellRendererParams();c=!p||fh(r)?pp(d,g,e):gp(d,g,e)}if(!c&&!p&&null!==(n=s.findSvc)&&void 0!==n&&n.isMatch(a,r)){const e=this.createCellRendererParams();c=pp(d,u(u({},r.getColDef()),{},{cellRenderer:"agFindCellRenderer"}),e)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(a,{checkSiblings:!0})){const e=this.editSvc.prepDetailsDuringBatch(this,{compDetails:c,valueToDisplay:h});e&&(e.compDetails?c=e.compDetails:e.valueToDisplay&&(h=e.valueToDisplay))}this.comp.setRenderDetails(c,h,e),!t&&l&&cc(s,(()=>null===l||void 0===l?void 0:l.refreshHandle())),null===(o=this.rowResizeFeature)||void 0===o||o.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==this.rowNode.rowPinned||t&&lg(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,n=fu(t),o=mh(this.column);return("custom"!==i||"selectionColumn"===n||!o)&&(e.checkboxSelection||o&&"object"===typeof t&&gu(t))}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||o}onPopupEditorClosed(){const{editSvc:e}=this.beans;null!==e&&void 0!==e&&e.isEditing(this,{withOpenEditor:!0})&&(null===e||void 0===e||e.stopEditing(this,{source:null!==e&&void 0!==e&&e.isBatchEditing()?"ui":"api"}))}stopEditing(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{editSvc:i}=this.beans;return null!==(e=null===i||void 0===i?void 0:i.stopEditing(this,{cancel:t,source:null!==i&&void 0!==i&&i.isBatchEditing()?"ui":"api"}))&&void 0!==e&&e}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:o,eGui:s,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return Fu(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(i,n).value,setValue:e=>(null===l||void 0===l?void 0:l.setDataValue({rowNode:n,column:i},e))||r.setValue(n,i,e),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:o.getParentOfValue(),registerRowDragger:(e,t,i,n)=>this.registerRowDragger(e,t,n),setTooltip:(e,t)=>{var i;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null===(i=this.tooltipFeature)||void 0===i||i.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?null===(t=this.rowCtrl)||void 0===t||t.recreateCell(this):this.refreshCell(e);if(this.hasEdit&&this.editCompDetails){const{editSvc:e,comp:t}=this;null!==t&&void 0!==t&&t.getCellEditor()||!e.isEditing(this,{withOpenEditor:!0})||e.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell(){var e,t;let{force:i,suppressFlash:n,newData:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.suppressRefreshCell)return;const s=this.column.getColDef(),r=null==s.field&&null==s.valueGetter&&null==s.showRowGroup,a=i||r||o,l=!!this.comp,d=this.updateAndFormatValue(l);if(l){if(a||d){var c,u,h,p,g;this.showValue(!!o,!1);const e=null===(c=this.beans.filterManager)||void 0===c?void 0:c.isSuppressFlashingCellsBecauseFiltering();var m;if(!n&&!e&&s.enableCellChangeFlash)null===(m=this.beans.cellFlashSvc)||void 0===m||m.flashCell(this);null===(u=this.editStyleFeature)||void 0===u||null===(h=u.applyCellStyles)||void 0===h||h.call(u),null===(p=this.customStyleFeature)||void 0===p||p.applyUserStyles(),null===(g=this.customStyleFeature)||void 0===g||g.applyClassesFromColDef()}null===(e=this.tooltipFeature)||void 0===e||e.refreshTooltip(),null===(t=this.customStyleFeature)||void 0===t||t.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){var t;return null!==(t=this.callValueFormatter(e))&&void 0!==t?t:e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted,{value:n,valueFormatted:o}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=n,this.valueFormatted=o,!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;Jc(this.beans.gos,t,Yg,this),e.addDestroyFunc((()=>Jc(this.beans.gos,t,Yg,null)))}createEvent(e,t){const{rowNode:i,column:n,value:o,beans:s}=this;return function(e,t,i,n,o){let{rowNode:s,column:r}=n;return Fu(e.gos,{type:i,node:s,data:s.data,value:o,column:r,colDef:r.getColDef(),rowPinned:s.rowPinned,event:t,rowIndex:s.rowIndex})}(s,e,t,{rowNode:i,column:n},o)}processCharacter(e){var t;null===(t=this.keyboardListener)||void 0===t||t.processCharacter(e)}onKeyDown(e){var t;null===(t=this.keyboardListener)||void 0===t||t.onKeyDown(e)}onMouseEvent(e,t){var i;null===(i=this.mouseListener)||void 0===i||i.onMouseEvent(e,t)}getColSpanningList(){var e,t;return null!==(e=null===(t=this.positionFeature)||void 0===t?void 0:t.getColSpanningList())&&void 0!==e?e:[]}onLeftChanged(){var e;this.comp&&(null===(e=this.positionFeature)||void 0===e||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;rg(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);Cd(this.eGui,e)}onWidthChanged(){var e;return null===(e=this.positionFeature)||void 0===e?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;const n=null===(e=this.editSvc)||void 0===e?void 0:e.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell(u(u({},this.getFocusedCellPosition()),{},{forceBrowserFocus:t,sourceEvent:i}))}restoreFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{beans:{editSvc:t,focusSvc:i},comp:n}=this;if(!n||null!==t&&void 0!==t&&t.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;const o=()=>{if(!this.isAlive())return;const e=n.getFocusableElement();this.isCellFocused()&&e.focus({preventScroll:!0})};e?setTimeout(o,0):o()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged(),null===(t=this.rowResizeFeature)||void 0===t||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(fh(this.column)&&(e=!0),lc(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss("ag-cell-last-left-pinned",e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){var e;this.restoreFocus(!0),this.onCellFocused(null!==(e=this.focusEventWhileNotReady)&&void 0!==e?e:void 0)}onCellFocused(e){var t,i;const{beans:n}=this;if(Vg(n))return;if(!this.comp)return void(e&&(this.focusEventWhileNotReady=e));const o=this.isCellFocused(),s=null!==(t=null===(i=n.editSvc)||void 0===i?void 0:i.isEditing(this))&&void 0!==t&&t;if(this.comp.toggleCss("ag-cell-focus",o),o&&e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(s){const e=Lg(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}o&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Gl(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss("ag-cell",!0),e.toggleCss("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.toggleCss("ag-cell-auto-height",t),e.toggleCss("ag-cell-normal-height",!t)}onColumnHover(){var e;null===(e=this.beans.colHover)||void 0===e||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),null!==(e=this.editSvc)&&void 0!==e&&e.isEditing(this)?null===(t=this.editSvc)||void 0===t||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.toggleCss("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{n.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){var e,t;return null!==(e=null===(t=this.comp)||void 0===t?void 0:t.getCellRenderer())&&void 0!==e?e:null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e,t;return null!==(e=null===(t=this.eGui)||void 0===t?void 0:t.contains(iu(this.beans)))&&void 0!==e&&e}createSelectionCheckbox(){var e;const t=null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc((()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null})))}createRowDragComp(e,t,i){var n;const o=null===(n=this.beans.rowDragSvc)||void 0===n?void 0:n.createRowDragCompForCell(this.rowNode,this.column,(()=>this.value),e,t,i);if(o)return this.beans.context.createBean(o),o}cellEditorAttached(){this.onEditorAttachedFuncs.forEach((e=>e())),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},Jg="__ag_grid_instance";function Zg(e,t){t[Jg]=e.gridInstanceId}function em(e,t){return tm(e,t.target)}function tm(e,t){let i=t;for(;i;){const t=i[Jg];if(Wl(t)){return t===e.gridInstanceId}i=i.parentElement}return!1}function im(e,t){const i=Uc(e.gos,"normal"),n=t;let o,s;null!=n.clientX||null!=n.clientY?(o=n.clientX,s=n.clientY):(o=n.x,s=n.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(s+=r,i){const t=e.ctrlsSvc.getScrollFeature(),i=t.getVScrollPosition();o+=t.getHScrollPosition().left,s+=i.top}return{x:o,y:s}}function nm(e,t){return e+"_"+t}function om(e){return e instanceof sm}var sm=class extends Vu{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return nm(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{om(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=nh(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){var e;let t=0;return null===(e=this.displayedChildren)||void 0===e||e.forEach((e=>{t+=e.getActualWidth()})),t}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!(null===(e=this.getColGroupDef())||void 0===e||!e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{Qu(t)?e.push(t):om(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{Qu(t)?e.push(t):om(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{var i;if(om(t)&&!(null!==(i=t.displayedChildren)&&void 0!==i&&i.length))return;switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},rm="row-group-",am="t-",lm="b-",dm=0,cm=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=dm++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var i;const{valueCache:n,eventSvc:o}=this.beans,s=this.data;this.data=e,null===n||void 0===n||n.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);if(null===(i=this.__localEventService)||void 0===i||i.dispatchEvent(r),this.sibling){var a;this.sibling.data=e;const i=this.sibling.createDataChangedEvent(e,s,t);null===(a=this.sibling.__localEventService)||void 0===a||a.dispatchEvent(i)}o.dispatchEvent({type:"rowNodeDataChanged",node:this});const l=this.pinnedSibling;var d;l&&(l.data=e,null===(d=l.__localEventService)||void 0===d||d.dispatchEvent(l.createDataChangedEvent(e,s,t)),o.dispatchEvent({type:"rowNodeDataChanged",node:l}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(Oc(13),null):"top"===this.rowPinned?am+this.rowIndex:"bottom"===this.rowPinned?lm+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var i,n;const{selectionSvc:o}=this.beans,s=null===o||void 0===o||null===(i=o.createDaemonNode)||void 0===i?void 0:i.call(o,this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),o&&(o.updateRowSelectable(this),o.syncInRowNode(this,s));const a=this.createDataChangedEvent(e,r,!1);null===(n=this.__localEventService)||void 0===n||n.dispatchEvent(a)}setId(e){const t=pu(this.beans.gos);if(t)if(this.data){var i,n;const e=null!==(i=null===(n=this.parent)||void 0===n?void 0:n.getRoute())&&void 0!==i?i:[];this.id=t({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(rm)&&Oc(14,{groupPrefix:rm})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){var n;null===(n=this.beans.expansionSvc)||void 0===n||n.setExpanded(this,e,t,i)}setDataValue(e,t,i){var n;const{colModel:o,valueSvc:s,gos:r,editSvc:a}=this.beans,l="string"!==typeof e?e:null!==(n=o.getCol(e))&&void 0!==n?n:o.getColDefCol(e);if(!l)return!1;const d=s.getValueForDisplay(l,this,void 0,void 0,"api").value;if(r.get("readOnlyEdit")){const{beans:{eventSvc:e},data:n,rowIndex:o,rowPinned:s}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:o,rowPinned:s,column:l,colDef:l.colDef,data:n,node:this,oldValue:d,newValue:t,value:t,source:i}),!1}if(a&&!a.committing){const e=a.setDataValue({rowNode:this,column:l},t,i);if(null!=e)return e}const c=s.setValue(this,l,t,i);this.dispatchCellChangedEvent(l,t,d);const u=this.pinnedSibling;return u&&c&&u.dispatchCellChangedEvent(l,t,d),c}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){var n;const o={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};null===(n=this.__localEventService)||void 0===n||n.dispatchEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e,t;return null!==(e=null===(t=this.beans.expansionSvc)||void 0===t?void 0:t.isExpandable(this))&&void 0!==e&&e}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(e){var t;null===(t=this.childrenAfterGroup)||void 0===t||t.forEach((t=>t.depthFirstSearch(e))),e(this)}dispatchRowEvent(e){var t;null===(t=this.__localEventService)||void 0===t||t.dispatchEvent({type:e,node:this})}setSelected(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";null===(t=this.beans.selectionSvc)||void 0===t||t.setNodesSelected({nodes:[this],newValue:e,clearSelection:i,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new zl),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var i,n,o,s,r;null===(i=this.beans.validation)||void 0===i||i.checkRowEvents(e),this.__localEventService||(this.__localEventService=new zl),this.frameworkEventListenerService=null===(n=(o=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===n?void 0:n.call(o,this.frameworkEventListenerService,this.__localEventService);const a=null!==(s=null===(r=this.frameworkEventListenerService)||void 0===r?void 0:r.wrap(e,t))&&void 0!==s?s:t;this.__localEventService.addEventListener(e,a)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(e,t))&&void 0!==i?i:t;this.removeLocalListener(e,o)}removeLocalListener(e,t){var i,n;null===(i=this.__localEventService)||void 0===i||i.removeEventListener(e,t),null!==(n=this.__localEventService)&&void 0!==n&&n.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(_c(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var e,t;return this.childStore?this.childStore.getFirstNode():null!==(e=null===(t=this.childrenAfterSort)||void 0===t?void 0:t[0])&&void 0!==e?e:null}};var um=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced","childStore"]);var hm={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},pm=new Set(Object.values(hm));function gm(e,t){const i=e.filterUi;if(!i)return null;if(i.created)return i.promise;if(t)return null;const n=i.create(i.refreshed),o=i;return o.created=!0,o.promise=n,n}function mm(e,t,i,n,o){var s;null===e||void 0===e||null===(s=e.refresh)||void 0===s||s.call(e,u(u({},t),{},{model:i,state:n,source:o}))}function fm(e,t,i){const n=e();null!==n&&void 0!==n&&n.created&&n.promise.then((e=>{var o;const s=t();mm(e,n.filterParams,s,null!==(o=i())&&void 0!==o?o:{model:s},"ui")}))}function vm(e,t,i,n,o,s){let r,a,l=!1;switch(e){case"apply":{var d;const e=n();a=null!==(d=null===e||void 0===e?void 0:e.model)&&void 0!==d?d:null,r={state:null===e||void 0===e?void 0:e.state,model:a},l=!0;break}case"clear":r={model:null};break;case"reset":r={model:null},l=!0,a=null;break;case"cancel":r={model:i()}}o(r),l?s(a):fm(t,i,n)}function bm(e,t){var i;return null!==(i=e[t])&&void 0!==i?i:null}var wm=class extends Uh{constructor(e){const{className:t="ag-filter-apply-panel"}=null!==e&&void 0!==e?e:{};super(function(e){return{tag:"div",cls:e}}(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const i=this.buttons;if(this.buttons=e,i===e)return;const n=this.getGui();let o;Qd(n),this.destroyListeners();const s=document.createDocumentFragment(),r=this.className,a=e=>{let{type:i,label:n}=e;const a=e=>{this.dispatchLocalEvent({type:i,event:e})};["apply","clear","reset","cancel"].includes(i)||_c(75);const l="apply"===i,d=gc({tag:"button",attrs:{type:l&&t?"submit":"button"},ref:"".concat(i,"FilterButton"),cls:"ag-button ag-standard-button ".concat(r,"-button").concat(l?" "+r+"-apply-button":""),children:n});this.activateTabIndex([d]),l&&(o=d);const c=e=>{e.key===hg&&(e.preventDefault(),a(e))},u=this.listeners;d.addEventListener("click",a),u.push((()=>d.removeEventListener("click",a))),d.addEventListener("keydown",c),u.push((()=>d.removeEventListener("keydown",c))),s.append(d)};e.forEach((e=>a(e))),this.eApply=o;const l=this.validationTooltipFeature;o&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!o&&l&&(this.validationTooltipFeature=this.destroyBean(l)),n.append(s)}getApplyButton(){return this.eApply}updateValidity(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.eApply;n&&(Bd(n,!1===e),this.validationMessage=null!==i&&void 0!==i?i:null,null===(t=this.validationTooltipFeature)||void 0===t||t.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){this.listeners.forEach((e=>e())),this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},ym={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>"(".concat(e[0],", ").concat(e[1],")"),filterSummaryTextQuote:e=>'"'.concat(e[0],'"')};function xm(e,t,i){return function(e,t,i,n){const o=t[i];return e.getLocaleTextFunc()(i,"function"===typeof o?o(n):o,n)}(e,ym,t,i)}function Cm(e,t){const{debounceMs:i}=e;return Sm(e)?(null!=i&&_c(71),0):null!==i&&void 0!==i?i:t}function Sm(e){var t,i;return(null!==(t=null===(i=e.buttons)||void 0===i?void 0:i.indexOf("apply"))&&void 0!==t?t:-1)>=0}var Rm=class extends Uh{constructor(e,t,i,n,o,s){super(),this.column=e,this.wrapper=t,this.eventParent=i,this.updateModel=n,this.isGlobalButtons=o,this.enableGlobalButtonCheck=s,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,i=t,n=i.useForm,o=n?"form":"div";this.setTemplate({tag:o,cls:"ag-filter-wrapper"}),n&&this.addManagedElementListeners(this.getGui(),{submit:e=>{null===e||void 0===e||e.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=i,this.resetButtonsPanel(i),this.addManagedListeners(this.eventParent,u({filterParamsChanged:e=>{let{column:t,params:i}=e;t===this.column&&this.resetButtonsPanel(i,this.params)},filterStateChanged:e=>{let{column:t,state:i}=e;var n;t===this.column&&(null===(n=this.eButtons)||void 0===n||n.updateValidity(!1!==i.valid))},filterAction:e=>{let{column:t,action:i,event:n}=e;t===this.column&&this.afterAction(i,n)}},this.enableGlobalButtonCheck?{filterGlobalButtons:e=>{let{isGlobal:t}=e;if(t!==this.isGlobalButtons){this.isGlobalButtons=t;const e=this.params;this.resetButtonsPanel(e,e,!0)}}}:void 0))}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,i){const{buttons:n,readOnly:o}=null!==t&&void 0!==t?t:{},{buttons:s,readOnly:r,useForm:a}=e;if(!i&&o===r&&Kl(n,s))return;const l=s&&s.length>0&&!e.readOnly&&!this.isGlobalButtons;let d=this.eButtons;if(l){const e=s.map((e=>({type:e,label:xm(this,"".concat(e,"Filter"))})));if(this.applyActive=Sm(this.params),!d){var c;d=this.createBean(new wm),this.appendChild(d.getGui());const e=this.column,t=t=>i=>{let{event:n}=i;this.updateModel(e,t),this.afterAction(t,n)};null===(c=d)||void 0===c||c.addManagedListeners(d,{apply:t("apply"),clear:t("clear"),reset:t("reset"),cancel:t("cancel")}),this.eButtons=d}d.updateButtons(e,a)}else this.applyActive=!1,d&&($d(d.getGui()),this.eButtons=this.destroyBean(d))}close(e){const t=this.hidePopup;if(!t)return;const i=e,n=i&&i.key;let o;n!==hg&&n!==gg||(o={keyboardEvent:i}),t(o),this.hidePopup=null}afterAction(e,t){const{params:i,applyActive:n}=this,o=null===i||void 0===i?void 0:i.closeOnApply;switch(e){case"apply":null===t||void 0===t||t.preventDefault(),o&&n&&this.close(t);break;case"reset":o&&n&&this.close();break;case"cancel":o&&this.close(t)}}handleKeyDown(e){!e.defaultPrevented&&e.key===hg&&this.applyActive&&(this.updateModel(this.column,"apply"),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},km={tag:"div",cls:"ag-filter"},Pm=class extends Uh{constructor(e,t,i){super(km),this.column=e,this.source=t,this.enableGlobalButtonCheck=i,this.wrapper=null}postConstruct(){var e;null===(e=this.beans.colFilter)||void 0===e||e.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return null!=this.wrapper}getFilter(){var e,t;return null!==(e=null===(t=this.wrapper)||void 0===t?void 0:t.then((e=>e.comp)))&&void 0!==e?e:null}afterInit(){var e,t;return null!==(e=null===(t=this.wrapper)||void 0===t?void 0:t.then((()=>{})))&&void 0!==e?e:Kh.resolve()}afterGuiAttached(e){var t;this.afterGuiAttachedParams=e,null===(t=this.wrapper)||void 0===t||t.then((t=>{var i,n,o;null===(i=this.comp)||void 0===i||i.afterGuiAttached(e),null===t||void 0===t||null===(n=t.comp)||void 0===n||null===(o=n.afterGuiAttached)||void 0===o||o.call(n,e)}))}afterGuiDetached(){var e;null===(e=this.wrapper)||void 0===e||e.then((e=>{var t,i;null===e||void 0===e||null===(t=e.comp)||void 0===t||null===(i=t.afterGuiDetached)||void 0===i||i.call(t)}))}createFilter(e){var t;const{column:i,source:n,beans:{colFilter:o}}=this,s=null!==(t=o.getFilterUiForDisplay(i))&&void 0!==t?t:null;this.wrapper=s,null===s||void 0===s||s.then((t=>{if(!t)return;const{isHandler:s,comp:r}=t;let a;if(s){const e=!!this.enableGlobalButtonCheck,n=this.createBean(new Rm(i,t,o,o.updateModel.bind(o),e&&o.isGlobalButtons,e));this.comp=n,a=n.getGui()}else a=r.getGui(),Wl(a)||_c(69,{guiFromFilter:a});var l;(this.appendChild(a),e)?this.eventSvc.dispatchEvent({type:"filterOpened",column:i,source:n,eGui:this.getGui()}):null===(l=r.afterGuiAttached)||void 0===l||l.call(r,this.afterGuiAttachedParams)}))}onFilterDestroyed(e){const{source:t,column:i}=e;"api"!==t&&"paramsUpdated"!==t||i.getId()!==this.column.getId()||!this.beans.colModel.getColDefCol(this.column)||(Qd(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){var e;null===(e=this.beans.colFilter)||void 0===e||e.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},Em=new RegExp("^\\d{4}-\\d{2}-\\d{2}(".concat("T","\\d{2}:\\d{2}:\\d{2}\\D?)?"));function Fm(e,t){return e.toString().padStart(t,"0")}function Dm(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>Fm(e,2))).join(i);return t&&(n+="T"+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>Fm(e,2))).join(":")),n}function Nm(e){return e?!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[String(e.getFullYear()),String(e.getMonth()+1),Fm(e.getDate(),2),Fm(e.getHours(),2),":".concat(Fm(e.getMinutes(),2)),":".concat(Fm(e.getSeconds(),2))]:[e.getFullYear(),e.getMonth()+1,Fm(e.getDate(),2)].map(String):null}var Mm=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Tm(e,t){if(null==t)return Dm(e,!1);const i=Fm(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>"".concat(e.getFullYear()),MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>Fm(e.getMonth()+1,2),Mo:()=>"".concat(e.getMonth()+1).concat(Mm(e.getMonth()+1)),M:()=>"".concat(e.getMonth()+1),Do:()=>"".concat(e.getDate()).concat(Mm(e.getDate())),DD:()=>Fm(e.getDate(),2),D:()=>"".concat(e.getDate()),dddd:()=>o[e.getDay()],ddd:()=>o[e.getDay()].slice(0,3),dd:()=>o[e.getDay()].slice(0,2),do:()=>"".concat(e.getDay()).concat(Mm(e.getDay())),d:()=>"".concat(e.getDay())},r=new RegExp(Object.keys(s).join("|"),"g");return t.replace(r,(e=>e in s?s[e]():e))}function jm(e){return!!Am(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function Am(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if(!Em.test(e))return null;const[i,n]=e.split("T");if(!i)return null;const o=i.split("-").map((e=>parseInt(e,10)));if(3!==o.filter((e=>!isNaN(e))).length)return null;const[s,r,a]=o,l=new Date(s,r-1,a);if(l.getFullYear()!==s||l.getMonth()!==r-1||l.getDate()!==a)return null;if(!n&&t)return null;if(!n||"00:00:00"===n)return l;const[d,c,u]=n.split(":").map((e=>parseInt(e,10)));if(d>=0&&d<24)l.setHours(d);else if(t)return null;if(c>=0&&c<60)l.setMinutes(c);else if(t)return null;if(u>=0&&u<60)l.setSeconds(u);else if(t)return null;return l}var Im={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Lm=["january","february","march","april","may","june","july","august","september","october","november","december"];function _m(e,t){return null==e?-1:null==t?1:parseFloat(e)-parseFloat(t)}function Om(e){return e instanceof Date&&!isNaN(e.getTime())}var Bm={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]}),date:()=>({isValidDate:Om}),dateString:e=>{let{dataTypeDefinition:t}=e;return{comparator:(e,i)=>{const n=t.dateParser(i);return null==i||n<e?-1:n>e?1:0},isValidDate:e=>"string"===typeof e&&Om(t.dateParser(e))}},dateTime:e=>Bm.date(e),dateTimeString:e=>Bm.dateString(e),object:()=>{},text:()=>{}},zm={number:()=>({comparator:_m}),boolean:e=>{let{t:t}=e;return{valueFormatter:e=>Wl(e.value)?t(String(e.value),e.value?"True":"False"):t("blanks","(Blanks)")}},date:e=>{let{formatValue:t,t:i}=e;return{valueFormatter:e=>{const n=t(e);return Wl(n)?n:i("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if("NaN"===e)return i("invalidDate","Invalid Date");if(1===t&&null!=e){const t=Lm[Number(e)-1];return i(t,Im[t])}return null!==e&&void 0!==e?e:i("blanks","(Blanks)")},treeListPathGetter:e=>Nm(e,!1)}},dateString:e=>{let{formatValue:t,dataTypeDefinition:i,t:n}=e;return{valueFormatter:e=>{const i=t(e);return Wl(i)?i:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:e=>Nm(i.dateParser(null!==e&&void 0!==e?e:void 0),!1),treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Lm[Number(e)-1];return n(t,Im[t])}return null!==e&&void 0!==e?e:n("blanks","(Blanks)")}}},dateTime:e=>{const t=zm.date(e);return t.treeListPathGetter=Nm,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,i=zm.dateString(e);return i.treeListPathGetter=e=>Nm(t(null!==e&&void 0!==e?e:void 0)),i},object:e=>{let{formatValue:t,t:i}=e;return{valueFormatter:e=>{const n=t(e);return Wl(n)?n:i("blanks","(Blanks)")}}},text:()=>{}};var Vm={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},Hm={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};var Gm="ag-resizer-wrapper",Wm=(e,t)=>({tag:"div",ref:"".concat(e,"Resizer"),cls:"ag-resizer ag-resizer-".concat(t)}),Um={tag:"div",cls:Gm,children:[Wm("eTopLeft","topLeft"),Wm("eTop","top"),Wm("eTopRight","topRight"),Wm("eRight","right"),Wm("eBottomRight","bottomRight"),Wm("eBottom","bottom"),Wm("eBottomLeft","bottomLeft"),Wm("eLeft","left")]},qm=class extends Vu{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:i}=this.offsetParent,n=i/2-this.getWidth()/2,o=t/2-this.getHeight()/2;this.offsetElement(n,o,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:i,minWidth:n,width:o,minHeight:s,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let d=0,c=0;const u=Jd(this.element);if(u){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;c=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;d=parseInt(t.minHeight,10)-i}}if(this.minHeight=s||d,this.minWidth=n||c,o&&this.setWidth(o),r&&this.setHeight(r),o&&r||this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(u&&i){let t=this.boundaryEl,i=!0;if(t||(t=this.findBoundaryElement(),i=!1),t){const n=parseFloat(t.style.top),o=parseFloat(t.style.left);i?this.offsetElement(isNaN(o)?0:o,isNaN(n)?0:n,e):this.setPosition(o,n)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};var n,o;e?(null===(n=this.dragSvc)||void 0===n||n.addDragSource(i),this.moveElementDragListener=i):(null===(o=this.dragSvc)||void 0===o||o.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};if(i||!this.isAlive()&&!i){var s;if(i)null===(s=this.dragSvc)||void 0===s||s.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all";else n.style.pointerEvents="none";this.resizable[t]=i}}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width="".concat(t,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if("string"===typeof e&&-1!==e.indexOf("%"))sc(i,e),e=Wd(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?sc(i,e):(i.style.height="".concat(e,"px"),i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,r=e?0:o.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-n.bottom}}return i+r-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if("string"===typeof e&&-1!==e.indexOf("%"))oc(t,e),e=Ud(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+n>t&&(e=t-n)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?oc(t,e):(t.style.width="".concat(e,"px"),t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:parseFloat(e)))}offsetElement(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;const{forcePopupParentAsOffsetParent:o}=this.config,s=o?this.boundaryEl:this.element;s&&(null===(e=this.popupSvc)||void 0===e||e.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:i}),postProcessCallback:n}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height","".concat(e,"px"))};var i,n;e&&this.popupSvc?(null===(i=this.resizeObserverSubscriber)||void 0===i||i.call(this),this.resizeObserverSubscriber=dc(this.beans,null===(n=this.popupSvc)||void 0===n?void 0:n.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:o,topBuffer:s}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!o,r)?0:r,movementY:this.shouldSkipY(t,!!n,s,a)?0:a}}shouldSkipX(e,t,i,n){const o=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=r.right;return!!l||(l=t?n<0&&e.clientX>a+s.left||n>0&&e.clientX<a+s.left:i?n<0&&e.clientX>r.right||n>0&&e.clientX<a+s.left:n<0&&e.clientX>r.right||n>0&&e.clientX<r.right,l)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const o=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=r.bottom;return!!l||(l=t?n<0&&e.clientY>a+s.top+i||n>0&&e.clientY<a+s.top:n<0&&e.clientY>r.bottom||n>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=e=>({element:this.element.querySelector("[data-ref=".concat(e,"Resizer]"))});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(gc(Um)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(".".concat(Gm));e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;i||n||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const o=e[n],s=!!o.style.flex&&"0 0 auto"!==o.style.flex;if(o===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(s){const e=window.getComputedStyle(o);e.minHeight&&(r=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else r=o.offsetHeight,a=o.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const o=i[n];o!==t&&(e?o.style.height="".concat(o.offsetHeight,"px"):o.style.width="".concat(o.offsetWidth,"px"),o.style.flex="0 0 auto",o===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:o,isBottom:s,isLeft:r}=this.currentResizer,a=o||r,l=s||n,{movementX:d,movementY:c}=this.calculateMouseMovement({e:e,isLeft:r,isTop:n}),u=this.position.x,h=this.position.y;let p=0,g=0;if(a&&d){const e=r?-1:1,t=this.getWidth(),i=t+d*e;let n=!1;r&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(n=!0,p=0)),n||this.setWidth(i)}if(l&&c){const e=n?-1:1,t=this.getHeight(),i=t+c*e;let o=!1;n?(g=t-i,(h+g<=0||i<=this.minHeight)&&(o=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(o=!0),o||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(u+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:o,movementY:s}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+o,i+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){var e;const t=this.resizeListeners.pop();null===(e=this.dragSvc)||void 0===e||e.removeDragSource(t)}}destroy(){var e;(super.destroy(),this.moveElementDragListener)&&(null===(e=this.dragSvc)||void 0===e||e.removeDragSource(this.moveElementDragListener));this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Km=class extends Vu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.eFocusable=e,this.callbacks=t,this.callbacks=u({shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=Og(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())}},t)}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add("ag-focus-managed"),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||Lu(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?Iu(e):e.key===ug?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},Ym=class extends Uh{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:"ag-filter-body-wrapper ag-".concat(this.cssIdentifier,"-body-wrapper"),children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Km(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new qm(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then((()=>this.updateUiVisibility()))}refresh(e){const t=e,i=this.params;this.params=t;"colDef"===t.source&&this.updateParams(t,i);const n=t.state,o=this.state;return this.state=n,n.model===o.model&&n.state===o.state||this.setModelIntoUi(n.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=Sm(e),this.setupApplyDebounced()}doesFilterPass(e){_c(283);const{getHandler:t,model:i,column:n}=this.params;return t().doesFilterPass(u(u({},e),{},{model:i,handlerParams:this.beans.colFilter.getHandlerParams(n)}))}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return _c(284),null!=this.params.model}setupApplyDebounced(){const e=Cm(this.params,this.defaultDebounceMs),t=Sc(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return _c(285),this.params.model}setModel(e){_c(286);const{beans:t,params:i}=this;return t.colFilter.setModelForColumnLegacy(i.column,e)}applyModel(){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:i}=this,n=!this.areModelsEqual(t.model,i.model);return n&&t.onAction("apply",e),n}onNewRowsLoaded(){}onUiChanged(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateUiVisibility();const n=this.getModelFromUi(),o={model:n,state:this.getState(),valid:this.canApply(n)};this.state=o;const s=this.params;s.onStateChange(o),s.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:s.column,filterInstance:this}),null!==(t=e)&&void 0!==t||(e=this.applyActive?void 0:"debounce"),"immediately"===e?this.doApplyModel({afterFloatingFilter:i,afterDataChange:!1}):"debounce"===e&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=null===e||void 0===e?void 0:e.container,this.refreshFilterResizer(null===e||void 0===e?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t)return;const n="floatingFilter"===e||"columnFilter"===e;n?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(n)}afterGuiDetached(){var e;this.checkApplyDebounce(),null===(e=this.positionableFeature)||void 0===e||e.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return xm(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&this.areNonNullModelsEqual(e,t)}};var Qm={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},$m=class extends Vu{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?Qm.AUTO_HEIGHT:t.print?Qm.PRINT:Qm.NORMAL;this.view.updateLayoutClasses(i,t)}},Xm="Viewport",Jm="fakeVScrollComp",Zm=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],ef=class extends Vu{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Sc(this,(()=>this.lastScrollSource[1]=null),150),this.resetLastVScrollDebounced=Sc(this,(()=>this.lastScrollSource[0]=null),150)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Xm)});for(const e of Zm){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Sc(this,this.onVScroll.bind(this,Xm),100):this.onVScroll.bind(this,Xm),n=t?Sc(this,this.onVScroll.bind(this,Jm),100):this.onVScroll.bind(this,Jm);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Zm,Xm]){if(this.lastScrollSource[1]===t)continue;Yd(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return e===Xm?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const n=Kd(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(t=e===Xm?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;null===i||void 0===i||i.setScrollTop(t),this.nextScrollTop=t,e===Xm?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,null!==i&&void 0!==i&&i.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout((()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent(u(u({},t),{},{type:"bodyScrollEnd"}))}),150)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!Td())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=Hd(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const i of Zm){if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}}t&&this.onHScroll(Xm)}scrollGridIfNeeded(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:i:Math.min(Math.max(e,0),i)),Yd(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{rowModel:i}=this.beans,n=i.getRowCount();let o=-1;for(let s=0;s<n;s++){const t=i.getRow(s);if("function"===typeof e){if(t&&e(t)){o=s;break}}else if(e===t||e===t.data){o=s;break}}o>=0&&this.ensureIndexVisible(o,t)}ensureIndexVisible(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Uc(this.gos,"print"))return;const{rowModel:n}=this.beans,o=n.getRowCount();if("number"!==typeof e||e<0||e>=o)return void _c(88,{index:e});this.clearRetryListeners();const{frameworkOverrides:s,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;s.wrapIncoming((()=>{var o,s;const d=this.ctrlsSvc.getGridBodyCtrl(),c=n.getRow(e);let u,h,p=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:e,stickyBottomHeight:i}=d,n=c.rowTop,o=c.rowHeight,s=r.getPixelOffset(),g=c.rowTop-s,m=g+c.rowHeight,f=this.getVScrollPosition(),v=a.divStretchOffset,b=f.top+v,w=f.bottom+v,y=w-b,x=a.getScrollPositionForPixel(g),C=a.getScrollPositionForPixel(m-y),S=Math.min((x+C)/2,g);let R=null;"top"===t?R=x-e:"bottom"===t?R=C+i:"middle"===t?R=S:b+e>g?R=x-e:w-i<m&&(R=C-x>y?x-e:C+i),null!==R&&(this.setVerticalScrollPosition(R),l.redraw({afterScroll:!0})),u=n!==c.rowTop||o!==c.rowHeight,h=e!==d.stickyTopHeight||i!==d.stickyBottomHeight,p++}while((u||h)&&p<10);if(null===(o=this.animationFrameSvc)||void 0===o||o.flushAllFrames(),i<10&&(null!==c&&void 0!==c&&c.stub||null===(s=this.beans.rowAutoHeight)||void 0===s||!s.areRowsMeasured())){const o=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const e=this.getVScrollPosition().top;o!==e&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),e>=n.getRowCount()||this.ensureIndexVisible(e,t,i+1)}})}}))}clearRetryListeners(){this.clearRetryListenerFncs.forEach((e=>e())),this.clearRetryListenerFncs=[]}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const{colModel:i,frameworkOverrides:n}=this.beans,o=i.getCol(e);if(!o)return;if(o.isPinned())return;if(!this.visibleCols.isColDisplayed(o))return;const s=this.getPositionedHorizontalScroll(o,t);n.wrapIncoming((()=>{var e;null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),null===(e=this.animationFrameSvc)||void 0===e||e.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:n)||o,l=r?n:i;"auto"!==t&&(a="start"===t,l="end"===t);const d="middle"===t;if(a||l||d){const{colLeft:t,colMiddle:i,colRight:n}=this.getColumnBounds(e);return d?i-s/2:a?r?n:t:r?t-s:n-s}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:o}=this.getColumnBounds(e),s=this.enableRtl;return{columnBeforeStart:s?t>o:i<o,columnAfterEnd:s?i<n:t>n}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),o=e.getLeft(),s=t?-1:1,r=t?i-o:o;return{colLeft:r,colMiddle:r+n/2*s,colRight:r+n*s}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},tf=class extends Vu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Uc(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,o=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let r;if(e)r=n+o+s;else if(r=n,this.addSpacer){0===(this.gos.get("enableRtl")?o:s)&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())}this.callback(r)}},nf=class extends Vu{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{cc(e,(()=>{this.onCenterViewportResized()}))};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;null===e||void 0===e||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,null===t||void 0===t||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=Hd(this.gridBodyCtrl.eBodyViewport);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function of(e,t,i,n,o,s){if(null==i&&null==t)return;const r={},a={},l=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(i){const t=Object.keys(i);for(let o=0;o<t.length;o++){const s=t[o],d=i[s];let c;"string"===typeof d?c=!e||e.evaluate(d,n):"function"===typeof d&&(c=d(n)),l(s,(e=>{c?r[e]=!0:a[e]=!0}))}}t&&s&&Object.keys(t).forEach((e=>l(e,(e=>{r[e]||(a[e]=!0)})))),s&&Object.keys(a).forEach(s),Object.keys(r).forEach(o)}function sf(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var rf=0,af="renderedRow",lf=class extends Vu{constructor(e,t,i,n,o){var s,r,a;super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=o,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=null!==(s=null===(r=t.pagination)||void 0===r?void 0:r.getCurrentPage())&&void 0!==s?s:0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+rf++,this.rowId=Uu(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=sf(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=null===(a=t.editSvc)||void 0===a?void 0:a.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Uu(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,n){var o;const{context:s,focusSvc:r}=this.beans,a={rowComp:e,element:t,containerType:i,compBean:n=Vh(this,s,n)};this.allRowGuis.push(a),this.updateGui(i,a),this.initialiseRowComp(a);const l=this.rowNode,d="FullWidthLoading"===this.rowType||l.stub,c=!l.data&&"infinite"===this.beans.rowModel.getType();d||c||l.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const u=null===(o=this.fullWidthGui)||void 0===o?void 0:o.element;if(u){var h;!(null===(h=this.beans.editSvc)||void 0===h?void 0:h.isEditing(this))&&r.isRowFocused(l.rowIndex,l.rowPinned)&&r.shouldTakeFocus()&&setTimeout((()=>u.focus({preventScroll:!0})),0)}}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),qc(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp;this.getInitialRowClasses(e.containerType).forEach((e=>i.toggleCss(e,!0))),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&bd(e.element,1==this.rowNode.expanded),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Jc(t,e.element,af,this),e.compBean.addDestroyFunc((()=>Jc(t,e.element,af,null))),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask((()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=Uu(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(Cc((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(Cc((()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var t;const i=null===(t=this.beans.rowDragSvc)||void 0===t?void 0:t.createRowDragCompForRow(this.rowNode,e.element);if(!i)return;const n=this.createBean(i,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((e=>e!==n)),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)}))}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){var e;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>{var t;return null===e||void 0===e||null===(t=e.rowComp)||void 0===t?void 0:t.getFullWidthCellRenderer()})):[null===(e=this.fullWidthGui)||void 0===e||null===(e=e.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,o=!!e||!n.isPinningLeft(),s=!!t,r=!!i||!n.isPinningRight();return o&&s&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),o=hu(this.gos,this.rowNode,n);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":o?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;null!==i&&void 0!==i&&i.active&&!e&&!this.printLayout?this.updateColumnListsPending||(i.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0):this.updateColumnListsImpl(t)}getNewCellCtrl(e){var t;if(!(null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.isCellSpanning(e,this.rowNode)))return new Xg(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!(null!==(t=this.beans.rowSpanSvc)&&void 0!==t&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={list:[],map:{}},o=(e,t,i)=>{null!=i?n.list.splice(i,0,t):n.list.push(t),n.map[e]=t},s=[];for(const d of t){const t=d.getInstanceId();let i=e.map[t];i&&!this.isCorrectCtrlForSpan(i)&&(i.destroy(),i=void 0),i||(i=this.getNewCellCtrl(d)),i&&o(t,i)}for(const d of e.list){const e=d.column.getInstanceId();if(null!=n.map[e])continue;!this.isCellEligibleToBeRemoved(d,i)?s.push([e,d]):d.destroy()}if(s.length)for(const[d,c]of s){const e=n.list.findIndex((e=>e.column.getLeft()>c.column.getLeft())),t=-1===e?void 0:Math.max(e-1,0);o(d,c,t)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==i){const e=l.column.getInstanceId();if(!n.map[e]&&a.allCols.includes(l.column)){const t=this.createFocusedCellCtrl();if(t){const i=n.list.findIndex((e=>e.column.getLeft()>t.column.getLeft())),s=-1===i?void 0:Math.max(i-1,0);o(e,t,s)}}}return n}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;const n=null===t||void 0===t?void 0:t.getCellSpan(i.column,this.rowNode);if(n){if(n.firstNode!==this.rowNode||!n.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0,{column:n}=e;if(n.getPinned()!=t)return i;if(!this.isCorrectCtrlForSpan(e))return i;const{visibleCols:o,editSvc:s}=this.beans,r=null===s||void 0===s?void 0:s.isEditing(e),a=e.isCellFocused();if(r||a){return!(o.allCols.indexOf(n)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||Uc(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],(()=>{e.rowComp.setDomOrder(this.getDomOrder())}))}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Wl(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),o=i.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=n,e.right=o}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&i&&n&&o}addListeners(){var e;const{beans:t,gos:i,rowNode:n}=this,{expansionSvc:o,eventSvc:s,context:r,rowSpanSvc:a}=t;this.addManagedListeners(this.rowNode,u({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},null!==(e=null===o||void 0===o?void 0:o.getRowExpandedListeners(this))&&void 0!==e?e:{})),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(s,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),a&&this.addManagedListeners(a,{spannedCellsUpdated:e=>{let{pinned:t}=e;t&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,r),this.tooltipFeature=this.destroyBean(this.tooltipFeature,r),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,r)})),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",(()=>{i.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,r)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged())),cellChanged:e=>this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell(e))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),null===(e=this.rowEditStyleFeature)||void 0===e||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(null===e||void 0===e?void 0:e.row)===this.rowNode?e.position:"none",i="above"===t,n="inside"===t,o="below"===t,s=this.gos.get("treeData")&&(o||i),r=this.rowNode.uiLevel.toString();this.allRowGuis.forEach((e=>{const t=e.rowComp;t.toggleCss("ag-row-highlight-above",i),t.toggleCss("ag-row-highlight-inside",n),t.toggleCss("ag-row-highlight-below",o),t.toggleCss("ag-row-highlight-indent",s),s?e.element.style.setProperty("--ag-row-highlight-level",r):e.element.style.removeProperty("--ag-row-highlight-level")}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.toggleCss("ag-row-dragging",e)))}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),null===(e=this.beans.rowAutoHeight)||void 0===e||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Gl(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){var t;const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:n,column:o}=i;if(!(n.element===e.target))return;const s=this.rowNode,{focusSvc:r,navigation:a}=this.beans,l=r.getFocusedCell(),d={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:null!==(t=null===l||void 0===l?void 0:l.column)&&void 0!==t?t:o};null===a||void 0===a||a.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Lu(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,n=i===e.target,o=iu(this.beans);let s=!1;i&&o&&(s=i.contains(o)&&o.classList.contains("ag-cell"));let r=null;var a;(n||s||(r=Og(this.beans,i,!1,e.shiftKey)),this.isFullWidth()&&n||!r)&&(null===(a=this.beans.navigation)||void 0===a||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null===(e=this.allRowGuis.find((e=>Jd(e.element))))||void 0===e?void 0:e.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach((e=>{lc(e.element,"tabindex",t)}))}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned);let n;if(this.fullWidthGui)n=this.fullWidthGui.element;else{const t=this.beans.colModel.getCol(null===e||void 0===e?void 0:e.column),i=null===t||void 0===t?void 0:t.pinned;var o,s,r;if(i)n="right"===i?null===(o=this.rightGui)||void 0===o?void 0:o.element:null===(s=this.leftGui)||void 0===s?void 0:s.element;else n=null===(r=this.centerGui)||void 0===r?void 0:r.element}n&&(n.classList.toggle("ag-full-width-focus",i),i&&null!==e&&void 0!==e&&e.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.column.getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:i}=this;return Fu(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){Lu(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);return t&&i?{rowGui:t,column:i}:void 0}findFullWidthRowGui(e){return this.allRowGuis.find((t=>t.element.contains(e)))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(null===e||void 0===e?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=zd(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:i,focusSvc:n}=this.beans;null===i||void 0===i||i.removeAllCellRanges();const o=this.findFullWidthInfoForEvent(e);if(!o)return;const{rowGui:s,column:r}=o,a=s.element,l=e.target;let d=e.defaultPrevented||Dd();a&&a.contains(l)&&_d(l)&&(d=!1),n.setFocusedCell({rowIndex:t.rowIndex,column:r,rowPinned:t.rowPinned,forceBrowserFocus:d})}onRowClick(e){if(Lu(e)||this.lastMouseDownOnDragger)return;const{eventSvc:t,selectionSvc:i}=this.beans;t.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),null===i||void 0===i||i.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;"FullWidthDetail"===this.rowType&&(null===(t=this.beans.masterDetailSvc)||void 0===t||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,o=Fu(i,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,n)=>this.addFullWidthRowDragging(e,t,i,n),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(e,t)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return function(e,t){return e.getCompDetailsFromGridOptions(hp,"agDetailCellRenderer",t,!0)}(s,o);case"FullWidthGroup":{const{value:e,valueFormatted:t}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return o.value=e,o.valueFormatted=t,function(e,t){return e.getCompDetailsFromGridOptions(up,"agGroupRowRenderer",t,!0)}(s,o)}case"FullWidthLoading":return function(e,t){return e.getCompDetailsFromGridOptions(cp,"agLoadingCellRenderer",t,!0)}(s,o);default:return function(e,t){return e.getCompDetailsFromGridOptions(dp,void 0,t,!0)}(s,o)}}setupFullWidthRowTooltip(e,t){var i;this.fullWidthGui&&(this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const{rowDragSvc:o,context:s}=this.beans;if(!o||!this.isFullWidth())return;const r=o.createRowDragComp((()=>i),this.rowNode,void 0,e,t,n);this.createBean(r,s),this.addDestroyFunc((()=>{this.destroyBean(r,s)}))}onUiLevelChanged(){const e=sf(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.toggleCss(t,!0),e.rowComp.toggleCss(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.toggleCss("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.toggleCss("ag-row-last",t))))}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var e;const t=[];null===(e=this.beans.rowStyleSvc)||void 0===e||e.processClassesFromGridOptions(t,this.rowNode),t.length&&t.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.toggleCss(e,!0)))}))}postProcessRowClassRules(){var e;null===(e=this.beans.rowStyleSvc)||void 0===e||e.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.toggleCss(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.toggleCss(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){var t;const i=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:o,beans:s}=this,r=[];var a;(r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(o.rowIndex%2===0?"ag-row-even":"ag-row-odd"),o.isRowPinned())&&(r.push("ag-row-pinned"),null!==(a=s.pinnedRowModel)&&void 0!==a&&a.isManual()&&r.push("ag-row-pinned-manual"));!o.isRowPinned()&&o.pinnedSibling&&r.push("ag-row-pinned-source"),o.isSelected()&&r.push("ag-row-selected"),o.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),o.stub&&r.push("ag-row-loading"),n&&r.push("ag-full-width-row"),null===(t=s.expansionSvc)||void 0===t||t.addExpandedCss(r,o),o.dragging&&r.push("ag-row-dragging");const{rowStyleSvc:l}=s;return l&&(l.processClassesFromGridOptions(r,o),l.preProcessRowClassRules(r,o)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),n&&("left"===i&&r.push("ag-cell-last-left-pinned"),"right"===i&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){var e,t;return null!==(e=null===(t=this.beans.rowStyleSvc)||void 0===t?void 0:t.processStylesFromGridOptions(this.rowNode))&&void 0!==e?e:this.emptyStyle}onRowSelected(e){var t;null===(t=this.beans.selectionSvc)||void 0===t||t.onRowCtrlSelected(this,(e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}),e)}announceDescription(){var e;null===(e=this.beans.selectionSvc)||void 0===e||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:o,gos:s}=this;i.addManagedListeners(t,{pointerenter:e=>{"mouse"===e.pointerType&&n.dispatchRowEvent("mouseEnter")},pointerleave:e=>{"mouse"===e.pointerType&&n.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(n,{mouseEnter:()=>{var e;null!==(e=o.dragSvc)&&void 0!==e&&e.dragging||s.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map((e=>e.element));for(const i of t)i.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=Kc(this.gos)?Yc(this.beans,this.rowNode).height:void 0,o=n?"".concat(Math.min(i,n)-2,"px"):void 0;this.forEachGui(e,(e=>{e.element.style.height="".concat(t,"px"),o&&e.element.style.setProperty("--ag-line-height",o)}))}destroyFirstPass(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.active=!1;const{rowNode:i}=this;if(!t&&ru(this.gos)&&!i.sticky){if(null!=i.rowTop){const e=this.roundRowTopToBounds(i.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.toggleCss("ag-opacity-zero",!0)))}null!==(e=this.fullWidthGui)&&void 0!==e&&e.element.contains(iu(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),i.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var e,t;const i=null!==(e=null===(t=this.beans.pagination)||void 0===t?void 0:t.getCurrentPage())&&void 0!==e?e:0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Wl(e)){const t=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t),n="".concat(i,"px");this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(n);i=t.isRowPinned()?o:this.beans.rowContainerHeight.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform("translateY(".concat(e,")"))))}getCellCtrl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;return this.getAllCellCtrls().forEach((t=>{t.column==e&&(i=t)})),null!=i||t||this.getAllCellCtrls().forEach((t=>{(null===t||void 0===t?void 0:t.getColSpanningList().indexOf(e))>=0&&(i=t)})),i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var t,i,n,o;const s=this.rowNode.getRowIndexString();if(null===s)return;const r=(null!==(t=null===(i=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0)+(null!==(n=null===(o=this.beans.filterManager)||void 0===o?void 0:o.getHeaderRowCount())&&void 0!==n?n:0),a=this.rowNode.rowIndex%2===0,l=r+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(s),e.rowComp.toggleCss("ag-row-even",a),e.rowComp.toggleCss("ag-row-odd",!a),yd(e.element,l)}))}};function df(e){var t;if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===(null===(t=e.key)||void 0===t?void 0:t.length)}function cf(e,t,i,n,o){const s=n?n.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const r=Fu(e,{event:t,editing:o,column:n,node:i,data:i.data,colDef:n.getColDef()});if(s){if(s(r))return!0}return!1}var uf=class extends Vu{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),null===(e=this.beans.touchSvc)||void 0===e||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",_u("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!em(this.gos,t)||Lu(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);var o;"contextmenu"===e?(null!==i&&void 0!==i&&i.column&&i.dispatchCellContextMenuEvent(t),null===(o=this.beans.contextMenuSvc)||void 0===o||o.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:Qg(t,e),rowCtrl:Ou(t,e,af)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):null!==n&&void 0!==n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){var n,o;const s=null!==(n=null===(o=this.editSvc)||void 0===o?void 0:o.isEditing(e,{withOpenEditor:!0}))&&void 0!==n&&n;if(!cf(this.gos,i,e.rowNode,e.column,s)&&"keydown"===t){var r;!s&&(null===(r=this.beans.navigation)||void 0===r?void 0:r.handlePageScrollingKey(i))||e.onKeyDown(i),this.doGridOperations(i,s),df(i)&&e.processCharacter(i)}"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:n}=e,{focusSvc:o,navigation:s}=this.beans,r=o.getFocusedCell(),a=null===r||void 0===r?void 0:r.column;if(!cf(this.gos,i,n,a,!1)){const n=i.key;if("keydown"===t)switch(n){case Sg:case Rg:case xg:case Cg:null===s||void 0===s||s.handlePageScrollingKey(i,!0);break;case mg:case vg:if(!this.gos.get("embedFullWidthRows"))break;case fg:case bg:e.onKeyboardNavigate(i);break;case ug:e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!em(this.gos,e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=kg;break;case 67:i=Pg;break;case 86:i=Fg;break;case 68:i=Eg;break;case 90:i=Mg;break;case 89:i=Ng;break;default:i=e.code}return i}(e),{clipboardSvc:n,undoRedo:o}=this.beans;return i===kg?this.onCtrlAndA(e):i===Pg?this.onCtrlAndC(n,e):i===Eg?this.onCtrlAndD(n,e):i===Fg?this.onCtrlAndV(n,e):i===Dg?this.onCtrlAndX(n,e):i===Ng?this.onCtrlAndY(o):i===Mg?this.onCtrlAndZ(o,e):void 0}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:n},gos:o}=this;i&&bu(o)&&t.isRowsToRender()?function(e){var t,i;const{pinnedRowModel:n,rowModel:o}=e,[s,r]=[null===(t=null===n||void 0===n?void 0:n.isEmpty("top"))||void 0===t||t,null===(i=null===n||void 0===n?void 0:n.isEmpty("bottom"))||void 0===i||i],a=s?null:"top";let l,d;var c;r?(l=null,d=o.getRowCount()-1):(l="bottom",d=null!==(c=null===n||void 0===n?void 0:n.getPinnedBottomRowCount())&&void 0!==c?c:-1);const{visibleCols:u,rangeSvc:h}=e,p=u.allCols;h&&null!==p&&void 0!==p&&p.length&&h.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:d,rowEndPinned:l})}(this.beans):n&&(null===n||void 0===n||n.selectAllRowNodes({source:"keyboardSelectAll",selectAll:Ru(o)})),e.preventDefault()}onCtrlAndC(e,t){var i;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var i;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var i;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){null===e||void 0===e||e.redo("ui")}},hf=class extends Vu{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=null!=t?"".concat(t,"px"):"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},pf=e=>e.topRowCtrls,gf=e=>e.getStickyTopRowCtrls(),mf=e=>e.getStickyBottomRowCtrls(),ff=e=>e.bottomRowCtrls,vf=e=>e.allRowCtrls,bf=e=>e.getCtrls("top"),wf=e=>e.getCtrls("center"),yf=e=>e.getCtrls("bottom"),xf={center:{type:"center",name:"center-cols",getRowCtrls:vf,getSpannedRowCtrls:wf},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:vf,getSpannedRowCtrls:wf},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:vf,getSpannedRowCtrls:wf},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:vf},topCenter:{type:"center",name:"floating-top",getRowCtrls:pf,getSpannedRowCtrls:bf},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:pf,getSpannedRowCtrls:bf},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:pf,getSpannedRowCtrls:bf},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:pf},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:gf},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:gf},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:gf},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:gf},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:mf},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:mf},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:mf},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:mf},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:ff,getSpannedRowCtrls:yf},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:ff,getSpannedRowCtrls:yf},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:ff,getSpannedRowCtrls:yf},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:ff}};function Cf(e){const t=kf(e);return"ag-".concat(t.name,"-viewport")}function Sf(e){var t;const i=kf(e);return null!==(t=i.container)&&void 0!==t?t:"ag-".concat(i.name,"-container")}function Rf(e){const t=kf(e);return"ag-".concat(t.name,"-spanned-cells-container")}function kf(e){return xf[e]}var Pf=["center","left","right","fullWidth"],Ef=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Ff=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Df=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Nf=["stickyTopCenter","stickyTopLeft","stickyTopRight"],Mf=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Tf=[...Nf,"stickyTopFullWidth",...Mf,"stickyBottomFullWidth"],jf=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...Nf,...Mf],Af=class extends Vu{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=kf(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new nf(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop("".concat(e.offset,"px"))}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,n){var o;this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=n,this.createManagedBean(new uf(null!==(o=this.eViewport)&&void 0!==o?o:this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:r}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(Ff,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===s||void 0===s?void 0:s.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})})),this.forContainers(Df,(()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===s||void 0===s?void 0:s.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})})),this.forContainers(Pf,(()=>this.createManagedBean(new hf(this.eContainer,"center"===this.name?n:void 0)))),r&&this.forContainers(jf,(()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer)))),this.forContainers(Ef,(()=>this.createManagedBean(new tf((e=>this.comp.setContainerWidth("".concat(e,"px"))))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(Tf.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=Uc(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",t)))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Gd(this.eViewport)}getCenterViewportScrollLeft(){return Kd(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=dc(this.beans,this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return Xd(this.eViewport)}getViewportScrollLeft(){return Kd(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||tc(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Yd(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=Uc(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!n&&t:n||!t}));this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},If="ag-force-vertical-scroll",Lf=class extends Vu{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,o,s,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=o,this.eStickyTop=s,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(".".concat(Cf("center"))),this.eFullWidthContainer=i.querySelector(".".concat(Sf("fullWidth"))),this.eStickyTopFullWidthContainer=s.querySelector(".".concat(Sf("stickyTopFullWidth"))),this.eStickyBottomFullWidthContainer=r.querySelector(".".concat(Sf("stickyBottomFullWidth"))),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new $m(this.comp)),this.scrollFeature=this.createManagedBean(new ef(i)),null===(a=this.beans.rowDragSvc)||void 0===a||a.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,o,s,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),null===(l=this.filterManager)||void 0===l||l.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t="rowResizeStarted"===e.type;this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,n=Id()?16:0,o="calc(100% + ".concat(i+n,"px)");cc(this.beans,(()=>this.comp.setBodyViewportWidth(o))),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const n=t.isPivotMode();i=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,n=zd(i,"ag-root",e);e.classList.toggle("ag-has-focus",!n)},focusout:t=>{const{target:i,relatedTarget:n}=t,o=e.contains(n),s=zd(n,"ag-root",e);zd(i,"ag-root",e)||o&&!s||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;null===(e=this.beans.editSvc)||void 0===e||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var e,t,i,n;const o=(null!==(e=null===(t=this.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===t?void 0:t.getRowCount())&&void 0!==e?e:0)+(null!==(i=null===(n=this.filterManager)||void 0===n?void 0:n.getHeaderRowCount())&&void 0!==i?i:0),{rowModel:s}=this.beans,r=s.isLastRowIndexKnown()?s.getRowCount():-1,a=-1===r?-1:o+r;this.comp.setRowCount(a)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?If:null,i=Uc(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&ic(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const t=i&&ru(this.gos)&&!e.stretching,n=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,t)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:n,eBottom:o,beans:{popupSvc:s,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),null===r||void 0===r||r.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,s)});const l=this.onStickyWheel.bind(this);for(const c of[t,i,n,o])this.addManagedElementListeners(c,{wheel:l});const d=this.onHorizontalWheel.bind(this);for(const c of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(c).eContainer,{wheel:d});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&em(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:n}=e||t;var o;n!==this.eBodyViewport&&n!==this.ctrlsSvc.get("center").eViewport||(null===(o=this.beans.contextMenuSvc)||void 0===o||o.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&null!==e&&void 0!==e&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,i=null===e||void 0===e?void 0:e.getPinnedTopTotalHeight(),n=null===e||void 0===e?void 0:e.getPinnedBottomTotalHeight(),o=t.getPinnedRowBorderWidth()-t.getRowBorderWidth(),s=i?o+i:0,r=n?o+n:0;this.comp.setTopHeight(s),this.comp.setBottomHeight(r),this.comp.setTopInvisible(s<=0),this.comp.setBottomInvisible(r<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight("".concat(e,"px")),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)")),this.comp.setStickyBottomWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){var e,t,i,n;const o=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getHeaderHeight())&&void 0!==e?e:0),s=null!==(i=null===(n=this.pinnedRowModel)||void 0===n?void 0:n.getPinnedTopTotalHeight())&&void 0!==i?i:0;let r=0;o>0&&(r+=o),s>0&&(r+=s),r>0&&(r+=1),this.comp.setStickyTopTop("".concat(r,"px"))}setStickyBottomOffsetBottom(){var e;const{pinnedRowModel:t,scrollVisibleSvc:i,comp:n}=this,o=(null!==(e=null===t||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0)+(i.horizontalScrollShowing&&i.getScrollbarWidth()||0);n.setStickyBottomBottom("".concat(o,"px"))}},_f=class extends Uh{constructor(e,t){super(),this.direction=t,this.eViewport=Wh,this.eContainer=Wh,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",Md()||Td())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Id(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),cc(this.beans,(()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0}),400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=arguments.length>3?arguments[3]:void 0;const o=Date.now();let s=null,r=!1;const a=()=>{const a=Date.now()-o>i;(e()||a)&&(t(),r=!0,null!=s&&(window.clearInterval(s),s=null),a&&n&&bc(n))};a(),r||(s=window.setInterval(a,10))}((()=>Jd(t)),(()=>this.setScrollPosition(e)),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Of={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Bf=class extends _f{constructor(){super(Of,"horizontal"),this.eLeftSpacer=Wh,this.eRightSpacer=Wh,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new tf((e=>this.eContainer.style.width="".concat(e,"px")))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var e,t;if(!this.invisibleScrollbar)return;const i=null!==(e=null===(t=this.beans.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0;this.getGui().style.bottom="".concat(i,"px")}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=n),oc(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let o=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(o+=n),oc(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=n)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:0===n&&t?16:n,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),sc(this.getGui(),o),sc(this.eViewport,o),sc(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return Kd(this.eViewport,this.enableRtl)}setScrollPosition(e){Jd(this.eViewport)||this.attemptSettingScrollPosition(e),Yd(this.eViewport,e,this.enableRtl)}},zf={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},Vf=class extends _f{constructor(){super(zf,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new hf(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,n=t&&e.getScrollbarWidth()||0,o=0===n&&i?16:n;this.toggleCss("ag-scrollbar-invisible",i),oc(this.getGui(),o),oc(this.eViewport,o),oc(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=t.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||Jd(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function Hf(e){var t,i;return null!==(t=null===(i=e.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0}function Gf(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const n of i){if(!n)continue;const i=n.getGroupRowCount()||0;for(let o=0;o<i;o++){const i=n.getGroupRowCtrlAtIndex(o),s=t[o];if(i){const n=Wf(e,i);(null==s||n>s)&&(t[o]=n)}}}return t}function Wf(e,t){let i=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotGroupHeaderHeight"))&&void 0!==t?t:Yf(e)}(e):Yf(e);const n=t.getHeaderCellCtrls();for(const o of n){const{column:e}=o,t=e.getAutoHeaderHeight();null!=t&&t>i&&e.isAutoHeaderHeight()&&(i=t)}return i}function Uf(e){let t=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotHeaderHeight"))&&void 0!==t?t:qf(e)}(e):qf(e);return e.colModel.forAllCols((e=>{const i=e.getAutoHeaderHeight();null!=i&&i>t&&e.isAutoHeaderHeight()&&(t=i)})),t}function qf(e){var t;return null!==(t=e.gos.get("headerHeight"))&&void 0!==t?t:e.environment.getDefaultHeaderHeight()}function Kf(e){var t;return null!==(t=e.gos.get("floatingFiltersHeight"))&&void 0!==t?t:qf(e)}function Yf(e){var t;return null!==(t=e.gos.get("groupHeaderHeight"))&&void 0!==t?t:qf(e)}var Qf=class extends Vu{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:o,touchSvc:s,ctrlsSvc:r}=n;o&&this.createManagedBean(new Km(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),null===s||void 0===s||s.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>cc(this.beans,(()=>e())),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var e;const{beans:t}=this;let i=0;const n=Gf(t).reduce(((e,t)=>e+t),0),o=Uf(t);if(null!==(e=t.filterManager)&&void 0!==e&&e.hasFloatingFilters()&&(i+=Kf(t)),i+=n,i+=o,this.headerHeight===i)return;this.headerHeight=i;const s="".concat(i+1,"px");this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some((e=>e.isSpanHeaderHeight()));this.comp.toggleCss("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:o}=this,{headerNavigation:s,focusSvc:r}=o;(s.navigateHorizontally(n,!0,e)||!i&&r.focusOverlay(!1)||Hg(o,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case mg:t="LEFT";case vg:Wl(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case fg:t="UP";case bg:Wl(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains(iu(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){var n;const{menuSvc:o,ctrlsSvc:s}=this.beans;if(!e&&!i||null===o||void 0===o||!o.isHeaderContextMenuEnabled())return;const{target:r}=null!==e&&void 0!==e?e:t;r!==this.eGui&&r!==(null===(n=s.getHeaderRowContainerCtrl())||void 0===n?void 0:n.eViewport)||o.showHeaderContextMenu(void 0,e,i)}},$f=class extends Vu{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?nh(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=Wl(this.columnOrGroup.getOldLeft());(null===t||void 0===t?void 0:t.isActive())&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn((()=>{this.actualLeft===i&&this.setLeft(i)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!Uc(i,"print"))return t;if("left"===e.getPinned())return t;const o=n.getColsLeftWidth();if("right"===e.getPinned()){return o+n.bodyWidth+t}return o+t}setLeft(e){if(Wl(e)&&(this.eCell.style.left="".concat(e,"px")),om(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(t=this.ariaEl,i=e.length,cd(t,"colspan",i))}var t,i}},Xf=0,Jf="headerCtrl",Zf=class extends Vu{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+Xf++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!Wl(o))return!1;return!!o(Fu(this.gos,{colDef:n,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return iu(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if("function"===typeof t){i=t(this.getHeaderClassParams())}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:o}=this,s=e=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:i,paddingBottom:r,borderBottomWidth:a,borderTopWidth:l}=Vd(this.eGui),d=i+r+a+l,c=t.offsetHeight+d;if(e<5){const i=Zc(o);if(!i||!i.contains(t)||0==c)return void Cc((()=>s(e+1)),"raf",o)}this.setColHeaderHeight(this.column,c)};let r,a=!1;const l=()=>{const e=this.column.isAutoHeaderHeight();e&&!a&&d(),!e&&a&&c()},d=()=>{a=!0,s(0),this.comp.toggleCss("ag-header-cell-auto-height",!0),r=dc(this.beans,t,(()=>s(0)))},c=()=>{a=!1,r&&r(),this.comp.toggleCss("ag-header-cell-auto-height",!1),r=void 0};l(),n.addDestroyFunc((()=>c())),n.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),n.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout((()=>s(0)))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;e&&t&&n&&(rg(e,t,i.visibleCols),Cd(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=zg(this.beans);this.eGui&&lc(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=iu(this.beans),i=e.key===mg||e.key===vg;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const n=e.key===mg!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){var o;this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),null===(o=this.resizeFeature)||void 0===o||o.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){var t;null===(t=this.beans.colMoves)||void 0===t||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===mg!==t.get("enableRtl");const o=i.getPinned(),s=t.get("enableRtl");return o&&s!==("right"===o)&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{var e;null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case Cg:case xg:case Sg:case Rg:t&&e.preventDefault()}}addDomData(e){const t=Jf,{eGui:i,gos:n}=this;Jc(n,i,t,this),e.addDestroyFunc((()=>Jc(n,i,t,null)))}focus(e){const{eGui:t}=this;return!!t&&(this.lastFocusEvent=e||null,t.focus(),!0)}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&(null===(e=this.beans.dragAndDrop)||void 0===e||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=null!==e&&void 0!==e?e:t,{menuSvc:o,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&n.preventDefault(),null!==o&&void 0!==o&&o.isHeaderContextMenuEnabled(i)&&o.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},ev=class extends Zf{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,i,n,o){this.comp=e;const{rowCtrl:s,column:r,beans:a}=this,{colResize:l,context:d,colHover:c,rangeSvc:u}=a,h=Vh(this,d,o);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(s.pinned,r,i,e,this)):Od(i,!1),null===c||void 0===c||c.createHoverFeature(h,[r],t),null===u||void 0===u||u.createRangeHighlightFeature(h,r,e),h.createManagedBean(new $f(r,t,a)),h.createManagedBean(new Km(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],(()=>this.refresh())),h.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),h.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc((()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()}))}resizeHeader(e,t){var i;null===(i=this.beans.colResize)||void 0===i||i.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return Fu(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return function(e,t,i){return e.getCompDetails(t,Xh,"agColumnHeader",i)}(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return Fu(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!(null===e||void 0===e||!e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!i&&(!this.openFilterEnabled||Eu(this.gos)),showColumnMenu:(t,i)=>{null===e||void 0===e||e.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(t,i)=>{null===e||void 0===e||e.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:i})},showFilter:t=>{null===e||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{null===t||void 0===t||t.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{null===t||void 0===t||t.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){var t;const{selectionSvc:i}=this.beans;i&&(this.selectAllFeature=e.createOptionalManagedBean(i.createSelectAllFeature(this.column)),null===(t=this.selectAllFeature)||void 0===t||t.setComp(this),e.addManagedPropertyListener("rowSelection",(()=>{const t=i.createSelectAllFeature(this.column);var n;t&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(t),null===(n=this.selectAllFeature)||void 0===n||n.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!t&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))})))}getSelectAllGui(){var e;return null===(e=this.selectAllFeature)||void 0===e?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;(super.handleKeyDown(e),e.key===gg)&&(null===(t=this.selectAllFeature)||void 0===t||t.onSpaceKeyDown(e));e.key===hg&&this.onEnterKeyDown(e),e.key===bg&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){var t;null===(t=this.beans.sortSvc)||void 0===t||t.progressSort(this.column,e.shiftKey,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();tv(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),Tg&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const e=sg(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach((e=>{t.has(e)?t.delete(e):this.comp.toggleCss(e,!0)})),t.forEach((e=>this.comp.toggleCss(e,!1)))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t,i;this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!(null===e||void 0===e||!e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!(null===e||void 0===e||!e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach((e=>e()))}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth("".concat(e,"px"))};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var e;null===(e=this.comp)||void 0===e||e.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var e,t;const{eGui:i,column:n,comp:o,beans:s}=this,r=Gf(this.beans),a=0===r.reduce(((e,t)=>e+t),0);if(o.toggleCss("ag-header-parent-hidden",a),!n.isSpanHeaderHeight())return i.style.removeProperty("top"),i.style.removeProperty("height"),o.toggleCss("ag-header-span-height",!1),void o.toggleCss("ag-header-span-total",!1);const{numberOfParents:l,isSpanningTotal:d}=this.column.getColumnGroupPaddingInfo();o.toggleCss("ag-header-span-height",l>0);const c=Uf(s);if(0===l)return o.toggleCss("ag-header-span-total",!1),i.style.setProperty("top","0px"),void i.style.setProperty("height","".concat(c,"px"));o.toggleCss("ag-header-span-total",d);const u=(null!==(e=null===(t=this.column.getFirstRealParent())||void 0===t?void 0:t.getLevel())&&void 0!==e?e:-1)+1,h=r.length-u;let p=0;for(let g=0;g<h;g++)p+=r[r.length-1-g];i.style.setProperty("top","".concat(-p,"px")),i.style.setProperty("height","".concat(c+p,"px"))}refreshAriaSort(){if(this.sortable){var e;const t=this.getLocaleTextFunc(),i=(null===(e=this.beans.sortSvc)||void 0===e?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(i)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Eu(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var e;if(!this.eGui.contains(iu(this.beans)))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");null===(e=this.beans.ariaAnnounce)||void 0===e||e.announceValue(t,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return tv(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function tv(e){return"function"===typeof(null===e||void 0===e?void 0:e.getAnchorElementForMenu)&&"function"===typeof e.onMenuKeyboardShortcut}var iv=0,nv=class extends Vu{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=iv++,this.comp=null,this.allCtrls=[];let n="ag-header-row-column";"group"===i?n="ag-header-row-group":"filter"===i&&(n="ag-header-row-filter"),this.headerRowClass="ag-header-row ".concat(n)}setRowIndex(e){var t;this.rowIndex=e,null===(t=this.comp)||void 0===t||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=Uc(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.allCtrls.every((e=>null!=e.eGui))}setComp(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.comp=e,t=Vh(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=Uc(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))}getWidthForRow(){const{visibleCols:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=Gf(this.beans);for(let n=0;n<t.length;n++){if(n===this.rowIndex&&"group"===this.type)return{topOffset:e,rowHeight:t[n]};e+=t[n]}const i=Uf(this.beans);if("column"===this.type)return{topOffset:e,rowHeight:i};e+=i;return{topOffset:e,rowHeight:Kf(this.beans)}}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,this.ctrlsById,e);const i=e=>{const{focusSvc:t,visibleCols:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.column)};if(e)for(const[n,o]of e){i(o)?this.ctrlsById.set(n,o):this.destroyBean(o)}return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){if(e.isEmptyGroup())return;const n=e.getUniqueId();let o;i&&(o=i.get(n),i.delete(n));if(o&&o.column!=e&&(this.destroyBean(o),o=void 0),null==o)switch(this.type){case"filter":o=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":o=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:o=this.createBean(new ev(e,this))}t.set(n,o)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];return["left",null,"right"].forEach((t=>{e.push(...this.getComponentsToRender(t))})),e}getComponentsToRender(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pinned;return"group"===this.type?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const i=this.allCtrls.find((t=>t.column==e));if(!i)return!1;return i.focus(t)}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},ov=class extends Vu{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:o,colMoves:s}=this.beans;this.setupCenterWidth(),null===i||void 0===i||i.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a="".concat("string"===typeof this.pinned?this.pinned:"center","Header");n.register(a,this),o.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{focusSvc:t,filterManager:i,visibleCols:n}=this.beans;let o=0;const s=t.getFocusHeaderToUseAfterRefresh(),r=this.getAllCtrls();(()=>{const e=n.headerGroupRowCount;o=e;const t=this.groupsRowCtrls.length;if(t!==e)if(t>e){for(let i=e;i<t;i++)this.destroyBean(this.groupsRowCtrls[i]);this.groupsRowCtrls.length=e}else for(let i=t;i<e;i++){const e=this.createBean(new nv(i,this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const t=o++;this.hidden?this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl):null!=this.columnsRowCtrl&&e?this.columnsRowCtrl.rowIndex!==t&&this.columnsRowCtrl.setRowIndex(t):(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new nv(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!(null===i||void 0===i||!i.hasFloatingFilters())&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();e||t();const n=o++;if(this.filtersRowCtrl){this.filtersRowCtrl.rowIndex!==n&&this.filtersRowCtrl.setRowIndex(n)}else this.filtersRowCtrl=this.createBean(new nv(n,this.pinned,"filter"))})();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(t,s),r.length!==a.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=t=>null===t||void 0===t?void 0:t.getHeaderCellCtrls().find((t=>t.column===e));if(Qu(e))return t(this.columnsRowCtrl);if(0!==this.groupsRowCtrls.length)for(let i=0;i<this.groupsRowCtrls.length;i++){const e=t(this.groupsRowCtrls[i]);if(e)return e}}getHtmlElementForColumnHeader(e){var t,i;return null!==(t=null===(i=this.getHeaderCtrlForColumn(e))||void 0===i?void 0:i.eGui)&&void 0!==t?t:null}getRowType(e){var t;return null===(t=this.getAllCtrls()[e])||void 0===t?void 0:t.type}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return!!n&&n.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=null===e||void 0===e?void 0:e.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new tf((e=>this.comp.setCenterWidth("".concat(e,"px"))),!0))}};function sv(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}function rv(e){const{enterpriseMenuFactory:t,filterMenuFactory:i,gos:n}=e;return t&&Eu(n)?t:i}var av=class extends Uh{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},lv=class extends av{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange((()=>e.validate()))}destroy(){this.errorMessages=null}},dv=class extends Uh{constructor(){super()}},cv={tag:"span",cls:"ag-overlay-loading-center",attrs:{"aria-live":"polite","aria-atomic":"true"}},uv={tag:"span",cls:"ag-overlay-no-rows-center"};function hv(e,t,i){let n=null;"smallDown"===e?_c(262):"smallLeft"===e?_c(263):"smallRight"===e&&_c(264);const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t.gos&&!n){const i=t.gos.get("icons");i&&(n=i[e])}if(n){let t;if("function"===typeof n)t=n();else{if("string"!==typeof n)return void _c(38,{iconName:e});t=n}return"string"===typeof t?Zd(t):ac(t)?t:void _c(133,{iconName:e})}{const i=t.registry.getIcon(e);var s;if(!i)null===(s=t.validation)||void 0===s||s.validateIcon(e);return gc({tag:"span",cls:"ag-icon ag-icon-".concat(null!==i&&void 0!==i?i:e),role:"presentation",attrs:{unselectable:"on"}})}}var pv={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},gv=class extends Uh{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}")}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:o}=this.config;null!=o&&this.setDisabled(o),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Qd(t),"string"===typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?(Od(t,!1),pd(t,"presentation")):(Od(t,!0),pd(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||"ag-".concat(this.getCompId(),"-label"),e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||nc(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return Bd(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},mv=class extends gv{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?md(e,""):md(e,null!==t&&void 0!==t?t:"")}setAriaLabel(e){return gd(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return oc(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}};var fv=class extends mv{constructor(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,null!==(i=null===e||void 0===e?void 0:e.template)&&void 0!==i?i:function(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}(o),[],t),this.inputType=n,this.displayFieldTag=o,this.eLabel=Wh,this.eWrapper=Wh,this.eInput=Wh}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add("".concat(n,"-label")),t.classList.add("".concat(n,"-input-wrapper")),i.classList.add("".concat(n,"-input")),this.addCss("ag-input-field"),i.id=i.id||"ag-".concat(this.getCompId(),"-input");const{inputName:o,inputWidth:s}=this.config;null!=o&&this.setInputName(o),null!=s&&this.setInputWidth(s),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){"input"===this.displayFieldTag&&(this.inputType=e,lc(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return nc(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return lc(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return gd(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Bd(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)lc(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";lc(this.eInput,"autocomplete",t)}return this}},vv=class extends fv{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}},bv={selector:"AG-CHECKBOX",component:vv},wv={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},yv=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:i,order:n}=this;t.has(e)||(t.add(e),i.add(e),n.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),rh(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:i,queued:n}=this;e.clear(),n.clear(),t.clear(),i.length=0}sort(){var e,t;const{sortSvc:i,rowNodeSorter:n,gos:o}=this.beans,s=null!==(e=null===i||void 0===i?void 0:i.getSortOptions())&&void 0!==e?e:[],r=function(e){const t=e.findIndex(Sv);var i;if(t>-1)return null===(i=e.splice(t,1))||void 0===i?void 0:i[0]}(this.order);if(this.order.sort(((e,t)=>{var i,n,o,s;return(null!==(i=null===(n=e.pinnedSibling)||void 0===n?void 0:n.rowIndex)&&void 0!==i?i:0)-(null!==(o=null===(s=t.pinnedSibling)||void 0===s?void 0:s.rowIndex)&&void 0!==o?o:0)})),this.order=null!==(t=null===n||void 0===n?void 0:n.doFullSort(this.order,s))&&void 0!==t?t:this.order,!r)return;const a=cu(o);"bottom"===a||"pinnedBottom"===a?this.order.push(r):this.order.unshift(r)}hide(e){const{all:t,visible:i}=this;t.forEach((t=>e(t)?i.delete(t):i.add(t))),this.order=Array.from(i),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function xv(e){var t;if(-1===e.level)return!0;const i=e.parent;return!(null===i||void 0===i||null===(t=i.childrenAfterSort)||void 0===t||!t.some((t=>t==e)))&&xv(i)}function Cv(e,t){const{gos:i,rowModel:n,filterManager:o}=e;return Wc(i)?!n.getRowNode(t.id):null!==o&&void 0!==o&&o.isAnyFilterPresent()?!xv(t):!!i.get("pivotMode")&&!t.group}function Sv(e){return!!e.pinnedSibling&&function(e){return!!e.footer&&-1===e.level}(e.pinnedSibling)}var Rv=class extends Vu{postConstruct(){const{gos:e,beans:t}=this;this.top=new yv(t,"top"),this.bottom=new yv(t,"bottom");const i=e=>Cv(t,e.pinnedSibling),n=()=>{const i=e.get("isRowPinned");i&&e.get("enableRowPinning")&&t.rowModel.forEachNode((e=>this.pinRow(e,i(e))),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:e=>{let{keepRenderedRows:t}=e;this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers((e=>e.hide(i))),this.refreshRowPositions(),t||this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(Ev),this.refreshRowPositions()},rowNodeDataChanged:t=>{var i;let{node:n}=t;const o=e.get("isRowPinnable");null===(i=null===o||void 0===o?void 0:o(n))||void 0===i||i||this.pinRow(n,null)},firstDataRendered:n}),this.addManagedPropertyListener("pivotMode",(()=>{this.forContainers((e=>e.hide(i))),this.dispatchRowPinnedEvents()})),this.addManagedPropertyListener("grandTotalRow",(e=>{let{currentValue:t}=e;this._grandTotalPinned="pinnedBottom"===t?"bottom":"pinnedTop"===t?"top":null})),this.addManagedPropertyListener("isRowPinned",n)}destroy(){this.reset(!1),super.destroy()}reset(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.forContainers((e=>{const t=[];e.forEach((e=>t.push(e))),t.forEach((e=>this.pinRow(e,null))),e.clear()})),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,i){var n,o;if(e.footer&&e.level>-1)return;if(e.footer&&-1===e.level)return this._grandTotalPinned=t,void function(e){let{gos:t,rowModel:i}=e;Gc(t)&&i.refreshModel({step:"map"})}(this.beans);const s=null!==(n=e.rowPinned)&&void 0!==n?n:null===(o=e.pinnedSibling)||void 0===o?void 0:o.rowPinned;if(null!=s&&null!=t&&t!=s){const n=e.rowPinned?e:e.pinnedSibling,o=e.rowPinned?e.pinnedSibling:e;return this.pinRow(n,null,i),void this.pinRow(o,t,i)}const r=i&&function(e,t,i){var n;const{rowSpanSvc:o}=e,s=null!==(n=i&&(null===o||void 0===o?void 0:o.isCellSpanning(i,t)))&&void 0!==n&&n;var r;if(i&&s)return null===o||void 0===o||null===(r=o.getCellSpan(i,t))||void 0===r?void 0:r.spannedNodes}(this.beans,e,i);if(r)r.forEach((e=>this.pinRow(e,t)));else if(null==t){const i=e.rowPinned?e:e.pinnedSibling,n=this.findPinnedRowNode(i);if(!n)return;n.delete(i);const o=i.pinnedSibling;Pv(i),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(o)}else{const i=kv(this.beans,e,t),n=this.getContainer(t);n.add(i),Cv(this.beans,e)&&n.hide((e=>Cv(this.beans,e.pinnedSibling))),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return 0===this.getContainer(e).size()}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const n=Yc(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return this.bottom.forEach(i),t=0,this.top.forEach(i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return Fv(this.top)}getPinnedBottomTotalHeight(){return Fv(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=e=>{const t=[];return this.forEachPinnedRow(e,(e=>t.push(e.pinnedSibling.id))),t};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers(((t,i)=>{for(const n of e[i]){const e=this.beans.rowModel.getRowNode(n);e?this.pinRow(e,i):t.queue(n)}}))}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers(((e,t)=>{const i=new Set;e.forEachQueued((e=>{const t=this.beans.rowModel.getRowNode(e);t&&i.add(t)}));for(const n of i)e.unqueue(n.id),this.pinRow(n,t)}))}pinGrandTotalRow(){var e;const{gos:t,beans:i,_grandTotalPinned:n}=this,o=i.rowModel;if(!Gc(t))return;const s=null===(e=o.rootNode)||void 0===e?void 0:e.sibling;if(!s)return;const r=s.pinnedSibling,a=r&&this.findPinnedRowNode(r);if(n){if(a&&a.floating!==n&&(a.delete(r),Pv(r)),!a||a.floating!==n){const e=kv(i,s,n);this.getContainer(n).add(e)}}else{if(!a)return;a.delete(r),Pv(r)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers((e=>e.forEach((e=>e.setRowHeight(e.rowHeight,!0)))))}getContainer(e){return"top"===e?this.top:this.bottom}findPinnedRowNode(e){return this.top.has(e)?this.top:this.bottom.has(e)?this.bottom:void 0}refreshRowPositions(e){const t=e=>function(e,t){let i=0;t.forEach(((t,n)=>{t.setRowTop(i),(t.rowHeightEstimated||null==t.rowHeight)&&t.setRowHeight(Yc(e,t).height),t.setRowIndex(n),i+=t.rowHeight}))}(this.beans,e);return null==e?this.forContainers(t):t(this.getContainer(e))}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),null===e||void 0===e||e.dispatchRowEvent("rowPinned")}};function kv(e,t,i){if(t.pinnedSibling)return t.pinnedSibling;const n=function(e,t){const i=new cm(t);return Object.keys(e).forEach((t=>{um.has(t)||(i[t]=e[t])})),i.oldRowTop=null,i}(t,e);n.setRowTop(null),n.setRowIndex(null),n.rowPinned=i;const o="top"===i?am:lm;return n.id="".concat(o).concat(i,"-").concat(t.id),n.pinnedSibling=t,t.pinnedSibling=n,n}function Pv(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function Ev(e){const t=new Set;e.forEach((e=>{e.group&&t.add(e)})),t.forEach((t=>e.delete(t)))}function Fv(e){const t=e.size();if(0===t)return 0;const i=e.getByIndex(t-1);return void 0===i?0:i.rowTop+i.rowHeight}var Dv=class extends Vu{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",(e=>this.setPinnedRowData(e.currentValue,"top"))),this.addManagedPropertyListener("pinnedBottomRowData",(e=>this.setPinnedRowData(e.currentValue,"bottom"))),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return 0===this.getCache(e).order.length}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};jv(this.pinnedBottomRows,e),jv(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const n=Yc(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return jv(this.pinnedBottomRows,i),t=0,jv(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(void 0===e)return i.order.length=0,void(i.cache={});const n=pu(this.gos),o="top"===t?am:lm,s=new Set(i.order),r=[],a=new Set;let l=0,d=-1;for(const u of e){var c;const e=null!==(c=null===n||void 0===n?void 0:n({data:u,level:0,rowPinned:t}))&&void 0!==c?c:o+this.nextId++;if(a.has(e)){_c(96,{id:e,data:u});continue}d++,a.add(e),r.push(e);const h=Mv(i,e);if(void 0!==h)h.data!==u&&h.updateData(u),l+=this.setRowTopAndRowIndex(h,l,d),s.delete(e);else{const n=new cm(this.beans);n.id=e,n.data=u,n.rowPinned=t,l+=this.setRowTopAndRowIndex(n,l,d),i.cache[e]=n,i.order.push(e)}}s.forEach((e=>{var t;null===(t=Mv(i,e))||void 0===t||t.clearRowTopAndRowIndex(),delete i.cache[e]})),i.order=r}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Yc(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return Nv(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return Nv(this.pinnedBottomRows)}getPinnedTopRowCount(){return Av(this.pinnedTopRows)}getPinnedBottomRowCount(){return Av(this.pinnedBottomRows)}getPinnedTopRow(e){return Tv(this.pinnedTopRows,e)}getPinnedBottomRow(e){return Tv(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Mv(this.getCache(t),e)}forEachPinnedRow(e,t){return jv(this.getCache(e),t)}getCache(e){return"top"===e?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function Nv(e){const t=Av(e);if(0===t)return 0;const i=Tv(e,t-1);return void 0===i?0:i.rowTop+i.rowHeight}function Mv(e,t){return e.cache[t]}function Tv(e,t){return Mv(e,e.order[t])}function jv(e,t){e.order.forEach(((i,n)=>{const o=Mv(e,i);o&&t(o,n)}))}function Av(e){return e.order.length}var Iv=class extends Vu{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}getRowNode(e){return this.allNodesMap[e]}extractRowData(){var e;return null===(e=this.rootNode)||void 0===e||null===(e=e.allLeafChildren)||void 0===e?void 0:e.map((e=>e.data))}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){var t;this.rootNode.allLeafChildren=null!==(t=null===e||void 0===e?void 0:e.map(((e,t)=>this.createRowNode(e,t))))&&void 0!==t?t:[]}setImmutableRowData(e,t){const i=pu(this.gos),n=!this.gos.get("suppressMaintainUnsortedOrder"),o=e.changedRowNodes,s=new Set,r=this.rootNode,a=r.allLeafChildren,l=a.length;let d=!1,c=!1,u=!1,h=!1;for(let m=0,f=-1,v=t.length;m<v;m++){const e=t[m];let r=this.getRowNode(i({data:e,level:0}));if(r){if(n){const e=r.sourceRowIndex;h||(h=e<=f||d),f=e}r.data!==e&&(u=!0,r.updateData(e),o.update(r))}else d=!0,r=this.createRowNode(e,-1),o.add(r);s.add(r)}const p=[];for(let m=0;m<l;m++){const e=a[m];if(!s.has(e)){var g;if(c=!0,e.isSelected()&&p.push(e),e.pinnedSibling)null===(g=this.beans.pinnedRowModel)||void 0===g||g.pinRow(e.pinnedSibling,null);this.rowNodeDeleted(e),o.remove(e)}}if(d||c||h){const t=new Array(s.size);let i=0;if(!n)for(let e=0;e<l;++e){const n=a[e];s.delete(n)&&(n.sourceRowIndex=i,t[i++]=n)}for(const e of s)e.sourceRowIndex=i,t[i++]=e;r.allLeafChildren=t;const o=r.sibling;o&&(o.allLeafChildren=t),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=h)}(d||c||h||u)&&(this.deselectNodes(p),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,i=this.allNodesMap;i[t]===e&&delete i[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const i={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},n=[],o=pu(this.gos);return this.executeRemove(o,e,i,n),this.executeUpdate(o,e,i,n),this.executeAdd(e,i),this.deselectNodes(n),i}executeAdd(e,t){const i=e.add;if(null===i||void 0===i||!i.length)return;let n=this.rootNode.allLeafChildren,o=n.length;if("number"===typeof e.addIndex&&(o=this.sanitizeAddIndex(e.addIndex),o>0)){if(this.gos.get("treeData")&&this.gos.get("getDataPath"))for(let e=0;e<n.length;e++){const t=n[e];if((null===t||void 0===t?void 0:t.rowIndex)==o-1){o=e+1;break}}}const s=i.length,r=t.changedRowNodes,a=new Array(s);for(let c=0;c<s;c++){const e=this.createRowNode(i[c],o+c);r.add(e),a[c]=e}const l=this.rootNode;if(o<n.length){const e=n.slice(0,o),i=n.slice(o,n.length),s=e.length+a.length;for(let t=0,n=i.length;t<n;++t)i[t].sourceRowIndex=s+t;n=[...e,...a,...i],t.rowsInserted=!0}else n=n.concat(a);l.allLeafChildren=n;const d=l.sibling;d&&(d.allLeafChildren=n),t.rowNodeTransaction.add=a}executeRemove(e,t,i,n){var o,s,r;let{changedRowNodes:a,rowNodeTransaction:l}=i;const{remove:d}=t;if(null===d||void 0===d||!d.length)return;const c={};d.forEach((t=>{const i=this.lookupRowNode(e,t);if(i){var o;if(i.isSelected()&&n.push(i),i.pinnedSibling)null===(o=this.beans.pinnedRowModel)||void 0===o||o.pinRow(i.pinnedSibling,null);i.clearRowTopAndRowIndex(),c[i.id]=!0,delete this.allNodesMap[i.id],l.remove.push(i),a.remove(i)}}));const u=this.rootNode;u.allLeafChildren=null!==(o=null===(s=u.allLeafChildren)||void 0===s?void 0:s.filter((e=>!c[e.id])))&&void 0!==o?o:null,null===(r=u.allLeafChildren)||void 0===r||r.forEach(((e,t)=>{e.sourceRowIndex=t}));const h=u.sibling;h&&(h.allLeafChildren=u.allLeafChildren)}executeUpdate(e,t,i,n){let{changedRowNodes:o,rowNodeTransaction:s}=i;const{update:r}=t;null!==r&&void 0!==r&&r.length&&r.forEach((t=>{const i=this.lookupRowNode(e,t);i&&(i.updateData(t),!i.selectable&&i.isSelected()&&n.push(i),s.update.push(i),o.update(i))}))}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:null!==e&&void 0!==e&&e.length?e[0]:null})}deselectNodes(e){var t;const i="rowDataChanged",n=this.beans.selectionSvc,o=e.length>0;var s;(o&&(null===n||void 0===n||n.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i})),null===n||void 0===n||null===(t=n.updateGroupsFromChildrenSelections)||void 0===t||t.call(n,i),o)&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:i,selectedNodes:null!==(s=null===n||void 0===n?void 0:n.getSelectedNodes())&&void 0!==s?s:null,serverSideState:null})}sanitizeAddIndex(e){var t,i;const n=null!==(t=null===(i=this.rootNode.allLeafChildren)||void 0===i?void 0:i.length)&&void 0!==t?t:0;return e<0||e>=n||Number.isNaN(e)?n:Math.ceil(e)}createRowNode(e,t){const i=new cm(this.beans);return i.parent=this.rootNode,i.level=0,i.group=!1,i.expanded=!1,i.sourceRowIndex=t,i.setDataAndId(e,String(this.nextId)),this.allNodesMap[i.id]&&_c(2,{nodeId:i.id}),this.allNodesMap[i.id]=i,this.nextId++,i}lookupRowNode(e,t){let i;if(e){const n=e({data:t,level:0});if(i=this.allNodesMap[n],!i)return Oc(4,{id:n}),null}else{var n;if(i=null===(n=this.rootNode)||void 0===n||null===(n=n.allLeafChildren)||void 0===n?void 0:n.find((e=>e.data===t)),!i)return Oc(5,{data:t}),null}return i||null}},Lv={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},_v=class extends Uh{constructor(){super(Lv,[bv]),this.eCheckbox=Wh}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,n=t.isSelected(),o=Fd(e,n),[s,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(s,r);i.setValue(n,!0),i.setInputAriaLabel("".concat(a," (").concat(o,")"))}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:Iu,click:e=>{var t;Iu(e),null===(t=this.beans.selectionSvc)||void 0===t||t.handleSelectionEvent(e,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",(e=>{let{currentValue:t,previousValue:i}=e;("object"===typeof t?vu(t):void 0)!==("object"===typeof i?vu(i):void 0)&&this.onSelectableChanged()}));if(yu(this.gos)||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:n}=this,o=t.selectable,s=this.getIsVisible();let r;if("function"===typeof s){const n=null===i||void 0===i?void 0:i.callbackParams;if(e){const i=e.createColumnFunctionCallbackParams(t);r=s(u(u({},n),i))}else r=s(u(u({},n),{},{node:t,data:t.data}))}else r=null!==s&&void 0!==s&&s;const a=o&&!r||!o&&r,l=o||r,d=n.get("rowSelection"),c=d&&"string"!==typeof d?!vu(d):!(null===e||void 0===e||!e.getColDef().showDisabledCheckboxes);this.setVisible(l&&(!a||c)),this.setDisplayed(l&&(!a||c)),l&&this.eCheckbox.setDisabled(a),null!==i&&void 0!==i&&i.removeHidden&&this.setDisplayed(l)}getIsVisible(){var e;const t=this.overrides;if(t)return t.isVisible;const i=this.gos.get("rowSelection");return i&&"string"!==typeof i?gu(i):null===(e=this.column)||void 0===e||null===(e=e.getColDef())||void 0===e?void 0:e.checkboxSelection}},Ov=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){var e;const t=this.getRoot(),i=this.getEnd();if(null==t||null==i)return this.cachedRange;this.cachedRange=null!==(e=this.getNodesInRange(t,i))&&void 0!==e?e:[]}return this.cachedRange}isInRange(e){return null!==this.rootId&&this.getRange().some((t=>t.id===e.id))}getRoot(e){return this.rootId?this.getRowNode(this.rootId):e?(this.setRoot(e),e):void 0}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){var t;let i;const{rowModel:n,pinnedRowModel:o}=this;var s,r;(null!==(t=i)&&void 0!==t||(i=n.getRowNode(e)),null!==o&&void 0!==o&&o.isManual())&&(null!==(s=i)&&void 0!==s||(i=o.getPinnedRowById(e,"top")),null!==(r=i)&&void 0!==r||(i=o.getPinnedRowById(e,"bottom")));return i}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.rootId,n=t.findIndex((t=>t.id===e.id));if(n>-1){const o=t.slice(0,n),s=t.slice(n+1);return this.setEndRange(e),i?{keep:o,discard:s}:{keep:s,discard:o}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}const n=this.getNodesInRange(i,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find((e=>e.id===this.endId)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}getNodesInRange(e,t){const{pinnedRowModel:i,rowModel:n}=this;if(null===i||void 0===i||!i.isManual())return n.getNodesInRangeForSelection(e,t);if("top"===e.rowPinned&&!t.rowPinned){var o;return dg(i,"top",e,void 0).concat(null!==(o=n.getNodesInRangeForSelection(n.getRow(0),t))&&void 0!==o?o:[])}if("bottom"===e.rowPinned&&!t.rowPinned){var s;const o=dg(i,"bottom",void 0,e),r=n.getRowCount(),a=n.getRow(r-1);return(null!==(s=n.getNodesInRangeForSelection(t,a))&&void 0!==s?s:[]).concat(o)}if(!e.rowPinned&&!t.rowPinned)return n.getNodesInRangeForSelection(e,t);if("top"===e.rowPinned&&"top"===t.rowPinned)return dg(i,"top",e,t);if("bottom"===e.rowPinned&&"top"===t.rowPinned){var r;const o=dg(i,"top",t,void 0),s=dg(i,"bottom",void 0,e),a=n.getRow(0),l=n.getRow(n.getRowCount()-1);return o.concat(null!==(r=n.getNodesInRangeForSelection(a,l))&&void 0!==r?r:[]).concat(s)}if(!e.rowPinned&&"top"===t.rowPinned){var a;return dg(i,"top",t,void 0).concat(null!==(a=n.getNodesInRangeForSelection(n.getRow(0),e))&&void 0!==a?a:[])}if("top"===e.rowPinned&&"bottom"===t.rowPinned){var l;const o=dg(i,"top",e,void 0),s=dg(i,"bottom",void 0,t),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return o.concat(null!==(l=n.getNodesInRangeForSelection(r,a))&&void 0!==l?l:[]).concat(s)}if("bottom"===e.rowPinned&&"bottom"===t.rowPinned)return dg(i,"bottom",e,t);if(!e.rowPinned&&"bottom"===t.rowPinned){var d;const o=dg(i,"bottom",void 0,t),s=n.getRow(n.getRowCount());return(null!==(d=n.getNodesInRangeForSelection(e,s))&&void 0!==d?d:[]).concat(o)}return null}},Bv=class extends Vu{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(iu(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new vv);this.cbSelectAll=t,t.addCss("ag-header-select-all"),pd(t.getGui(),"presentation"),this.showOrHideSelectAll();const i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i}),this.addManagedPropertyListener("rowSelection",(e=>{let{currentValue:t,previousValue:i}=e;const n=e=>"string"!==typeof e&&e&&"singleRow"!==e.mode?e.selectAll:void 0;n(t)!==n(i)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()})),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll("uiColumnMoved"===e.source)}showOrHideSelectAll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,n=t.getSelectAllState(e);i.setValue(n);const o=t.hasNodesToSelect(e);i.setDisabled(!o),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:n,cbSelectAllVisible:o}=this,s=Fd(t,n.getValue()),r=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",o?"".concat(r," (").concat(s,")"):null),n.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return!!Cu(this.gos)||(_c(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return!(!Gc(t)&&!Wc(t))||(_c(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";"currentPage"===t?i="uiSelectAllCurrentPage":"filtered"===t&&(i="uiSelectAllFiltered");const n={source:i,selectAll:t},o=this.beans.selectionSvc;e?o.selectAllRowNodes(n):o.deselectAllRowNodes(n)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,n="object"===typeof t.get("rowSelection")?"headerCheckbox":"headerCheckboxSelection";return zv(i,e)&&this.checkRightRowModelType(n)&&this.checkSelectionType(n)}getSelectAllMode(){const e=Ru(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function zv(e,t){let{gos:i,selectionColSvc:n}=e;const o=i.get("rowSelection"),s=t.getColDef(),{headerCheckboxSelection:r}=s;let a=!1;if("object"===typeof o){const e=mh(t),i=gh(t);("autoGroupColumn"===fu(o)&&i||e&&null!==n&&void 0!==n&&n.isSelectionColumnEnabled())&&(a=mu(o))}else a="function"===typeof r?r(Fu(i,{column:t,colDef:s})):!!r;return a}var Vv=class extends Vu{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new Ov(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],(()=>{const t=yu(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())})),this.isRowSelectable=yu(e),this.addManagedEventListeners({cellValueChanged:e=>this.updateRowSelectable(e.node),rowNodeDataChanged:e=>this.updateRowSelectable(e.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new _v}createSelectAllFeature(e){if(zv(this.beans,e))return new Bv(e)}isMultiSelect(){return Cu(this.gos)}onRowCtrlSelected(e,t,i){const n=!!e.rowNode.isSelected();e.forEachGui(i,(e=>{e.rowComp.toggleCss("ag-row-selected",n);const i=e.element;kd(i,n);i.contains(iu(this.beans))&&t(e)}))}announceAriaRowSelection(e){var t;if(this.isRowSelectionBlocked(e))return;const i=e.isSelected();if(!e.selectable)return;const n=this.getLocaleTextFunc()(i?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(i?"deselect":"select"," this row"));null===(t=this.beans.ariaAnnounce)||void 0===t||t.announceValue(n,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!lg(e)||!qc(this.gos)}updateRowSelectable(e,t){var i,n;const o=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:null===(i=null===(n=this.isRowSelectable)||void 0===n?void 0:n.call(this,e))||void 0===i||i;return this.setRowSelectable(e,o,t),o}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if(ku(this.gos)){const t=this.calculateSelectedFromChildren(e);return void this.setNodesSelected({nodes:[e],newValue:null!==t&&void 0!==t&&t,source:"selectableChanged"})}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var t;let i=!1,n=!1;if(null===(t=e.childrenAfterGroup)||void 0===t||!t.length)return e.selectable?e.__selected:null;for(let o=0;o<e.childrenAfterGroup.length;o++){const t=e.childrenAfterGroup[o];let s=t.isSelected();if(!t.selectable){const e=this.calculateSelectedFromChildren(t);if(null===e)continue;s=e}switch(s){case!0:i=!0;break;case!1:n=!0;break;default:return}}return i&&n?void 0:!!i||!n&&(e.selectable?e.__selected:null)}selectRowNode(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";const o=!e.selectable&&t,s=e.__selected===t;if(o||s)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a&&a.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent(u(u({},function(e,t,i){return Fu(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}(e,this.gos,"rowSelected")),{},{event:i||null,source:n})),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&"string"!==typeof i){const n=mh(e)&&gu(i);return e.isColumnFunc(t,n)}return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,n){const{gos:o,selectionCtx:s}=this,r=e.isSelected(),a=ku(o),l=function(e){const t=wu(e);return!0===t||"enableSelection"===t}(o),d=function(e){const t=wu(e);return!0===t||"enableDeselection"===t}(o),c=this.isMultiSelect(),u="rowClicked"===n;if(u&&!l&&!d)return null;if(t&&i&&c){const t=s.getRoot();if(t){if(t.isSelected()){const t=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{deselect:t.discard,select:t.keep,reset:!1}}return{select:[],deselect:s.extend(e,a).keep,reset:!1}}return null}if(t&&c){const t=s.selectAll?this.beans.rowModel.getRow(0):void 0,i=s.getRoot(t),n=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{select:n.keep,deselect:n.discard,reset:s.selectAll||!(!i||i.isSelected())}}if(i){if(u){const t=!r;return t&&!l||!t&&!d?null:(s.setRoot(e),{node:e,newValue:t,clearSelection:!1})}return s.setRoot(e),{node:e,newValue:!r,clearSelection:!c}}{s.setRoot(e);const t=function(e){var t;const i=e.get("rowSelection");return"string"===typeof i?e.get("rowMultiSelectWithClick"):null!==(t=null===i||void 0===i?void 0:i.enableSelectionWithoutKeys)&&void 0!==t&&t}(o),i=u&&(!t||!l);if("filteredDescendants"===Su(o)&&void 0===r&&Gc(o))return{node:e,newValue:!1,clearSelection:!c||i};if(u){const n=r?!t:l;return n===r&&!i||n&&!l||!n&&!d?null:{node:e,newValue:n,clearSelection:!c||i,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!c||i}}}},Hv=class extends vv{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},Gv=class extends fv{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=Wl(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp("[".concat(this.config.allowedCharPattern,"]"));this.addManagedListeners(this.eInput,{keydown:t=>{df(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{var i;const n=null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text");n&&n.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}},Wv={selector:"AG-INPUT-TEXT-FIELD",component:Gv},Uv={selector:"AG-INPUT-TEXT-AREA",component:class extends fv{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},qv=class extends Gv{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const t=parseFloat(e.value),i=isNaN(t)?"":this.normalizeValue(t.toString());this.value!==i&&this.setValue(i)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:n,step:o}=this.config;"number"===typeof t&&this.setPrecision(t),"number"===typeof i&&this.setMin(i),"number"===typeof n&&this.setMax(n),"number"===typeof o&&this.setStep(o)}onWheel(e){iu(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return""===e?"":(null!=this.precision&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const i=this.precision;if(null==i)return e;if(t){const t=parseFloat(e).toFixed(i);return parseFloat(t).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=i)return e;if(i>0)return"".concat(n[0],".").concat(n[1].slice(0,i))}return n[0]}setMin(e){return this.min===e||(this.min=e,lc(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,lc(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,lc(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if(Wl(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){n=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(n)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},Kv={selector:"AG-INPUT-NUMBER-FIELD",component:qv},Yv={selector:"AG-INPUT-DATE-FIELD",component:class extends Gv{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Dd();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){iu(this.beans)===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?null!==(t=Dm(null!==e&&void 0!==e?e:null,!!this.includeTime))&&void 0!==t?t:void 0:e;return this.min===i||(this.min=i,lc(this.eInput,"min",i)),this}setMax(e){var t;const i=e instanceof Date?null!==(t=Dm(null!==e&&void 0!==e?e:null,!!this.includeTime))&&void 0!==t?t:void 0:e;return this.max===i||(this.max=i,lc(this.eInput,"max",i)),this}setStep(e){return this.step===e||(this.step=e,lc(this.eInput,"step",e)),this}setIncludeTime(e){return this.includeTime===e||(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1)),this}getDate(){var e;if(this.eInput.validity.valid)return null!==(e=Am(this.getValue()))&&void 0!==e?e:void 0}setDate(e,t){this.setValue(Dm(null!==e&&void 0!==e?e:null,this.includeTime),t)}}},Qv=class extends Uh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super({tag:"div",cls:"ag-list ag-".concat(e,"-list")}),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case hg:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case bg:case fg:e.preventDefault(),this.navigate(t);break;case Cg:case xg:case Sg:case Rg:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===bg;let i;const{itemEls:n,highlightedEl:o}=this;if(o){let e=n.indexOf(o)+(t?1:-1);e=Math.min(Math.max(e,0),n.length-1),i=n[e]}else i=n[t?0:n.length-1];this.highlightItem(i)}navigateToPage(e){const{itemEls:t,highlightedEl:i}=this;if(!i||0===t.length)return;const n=t.indexOf(i),o=this.options.length-1,s=t[0].clientHeight,r=Math.floor(this.getGui().clientHeight/s);let a=-1;e===Sg?a=0:e===Rg?a=o:e===Cg?a=Math.min(n+r,o):e===xg&&(a=Math.max(n-r,0)),-1!==a&&this.highlightItem(t[a])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,n=null!==i&&void 0!==i?i:t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{$d(e)})),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){pd(this.getGui(),0===this.options.length?"presentation":"listbox")}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");this.refreshAriaRole(),e.forEach(((t,i)=>{cd(t,"posinset",i+1),function(e,t){cd(e,"setsize",t)}(t,e.length)}))}renderOption(e,t){const i=gc({tag:"div",cls:"ag-list-item ag-".concat(this.cssIdentifier,"-list-item"),attrs:{role:"option"}}),n=gc({tag:"span",children:t});i.appendChild(n),this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Jd(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),kd(e,!0);const t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:o,offsetHeight:s}=e;(o+s>i+n||o<i)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;e&&Jd(e)&&(e.classList.remove(this.activeClass),kd(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},$v={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Xv=class extends mv{constructor(e){if(super(e,(null===e||void 0===e?void 0:e.template)||$v,(null===e||void 0===e?void 0:e.agComponents)||[],null===e||void 0===e?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Wh,this.eWrapper=Wh,this.eDisplayField=Wh,this.eIcon=Wh,this.registerCSS(".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}"),this.ariaRole=null===e||void 0===e?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:o,maxPickerWidth:s}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!n,null!=i&&this.setPickerMaxHeight(i),null!=o&&this.setPickerMinWidth(o),null!=s&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const e=hv(i,this.beans);e&&this.eIcon.appendChild(e)}null!=n&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),bd(e,!1),this.ariaRole&&pd(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(null===e||void 0===e?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case fg:case bg:case hg:case gg:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case pg:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:o=!0},maxPickerHeight:s,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:d,eWrapper:c}=this,u={modal:o,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=su(d);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:c};e.style.position="absolute";const h=d.popupSvc,p=h.addPopup(u);l?(r&&(e.style.minWidth=r),e.style.width=rc(Ud(c)),a&&(e.style.maxWidth=a)):nc(e,null!==a&&void 0!==a?a:Ud(c));const g=null!==s&&void 0!==s?s:"".concat(Hd(h.getPopupParent()),"px");return e.style.setProperty("max-height",g),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:n},eWrapper:o,pickerComponent:s}=this,r=n.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:o,ePopup:s.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;bd(this.getAriaElement(),e);const t=this.eWrapper.classList;t.toggle("ag-picker-expanded",e),t.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;null!==(t=this.pickerComponent)&&void 0!==t&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return nc(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},Jv=class extends Xv{constructor(e){super(u({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},e)),this.registerCSS(".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}")}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:ec((()=>this.eDisplayField)),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new Qv("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i="ag-select-list-".concat(e.getCompId());t.setAttribute("id",i),Pd(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:e=>{null===e||void 0===e||e.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===ug&&this.hidePicker(),t){case hg:case fg:case bg:case xg:case Cg:case Sg:case Rg:var i;if(e.preventDefault(),this.isPickerDisplayed)null===(i=this.listComponent)||void 0===i||i.handleKeyDown(e);else super.onKeyDown(e);break;case pg:super.onKeyDown(e);break;case gg:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return null===(e=this.listComponent)||void 0===e||e.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,i){var n;const{listComponent:o,config:{placeholder:s},eDisplayField:r,tooltipFeature:a}=this;if(this.value===e||!o)return this;i||o.setValue(e,!0);if(o.getValue()===this.getValue())return this;let l=o.getDisplayValue();return null==l&&s&&(l=s),r.textContent=l,null===a||void 0===a||a.setTooltipAndRefresh(null!==(n=l)&&void 0!==n?n:null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Zv={selector:"AG-SELECT",component:Jv},eb="ag-tab-guard",tb="ag-tab-guard-top",ib="ag-tab-guard-bottom",nb=class extends Vu{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:d,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:h,isEmpty:p,eFocusableElement:g}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=g,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=d,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=h,this.providedIsEmpty=p}postConstruct(){this.createManagedBean(new Km(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(this.providedIsEmpty?this.providedIsEmpty():0===Lg(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var t;const i=Lg(Zc(this.beans).body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;let o,s;e?(o=0,s=n):(o=n+1,s=i.length);const r=i.slice(o,s),a=this.gos.get("tabIndex");r.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),n=parseInt(t.getAttribute("tabindex")||"0");return n===a?1:i===a?-1:0===i?1:0===n?-1:i-n})),null===(t=r[e?r.length-1:0])||void 0===t||t.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Lg(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return Og(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(null===t||void 0===t||t)}setAllowFocus(e){this.allowFocus=e}},ob=class extends Vu{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,o=[t,i],s={setTabIndex:e=>{o.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:h,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new nb({comp:s,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:a,onFocusOut:l,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:h,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:m}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Zc(this.beans).createElement("div"),i="top"===e?tb:ib;return t.classList.add(eb,i),pd(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Qd(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){ac(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;$d(e),$d(t),super.destroy()}},sb=class extends Uh{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new ob(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},rb=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new zl,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",n,{passive:!0}),e.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push((()=>{e.removeEventListener("touchstart",i,{passive:!0}),e.removeEventListener("touchmove",n,{passive:!0}),e.removeEventListener("touchend",o,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!Wg(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=Date.now();if(this.lastTapTime&&this.lastTapTime>0){if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}},ab=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<i.left+n,this.tickRight=e.clientX>i.right-n,this.tickUp=e.clientY<i.top+n&&!t,this.tickDown=e.clientY>i.bottom-n&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},lb=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";var t;this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink="".concat(kc,"/").concat(this.frameworkName,"-data-grid"),t=this.baseDocLink,Dc=t}setInterval(e,t){return new Kh((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,n){let o={};if("object"===typeof n?o=n:"boolean"===typeof n&&(o={capture:n}),null==o.passive){const e=zu(t);null!=e&&(o.passive=e)}e.addEventListener(t,i,o)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return"".concat(this.baseDocLink).concat(e?"/".concat(e):"")}};function db(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var cb=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map(((e,t)=>[e,t])));function ub(e,t){var i,n;return(null!==(i=e.beanName?cb[e.beanName]:void 0)&&void 0!==i?i:Number.MAX_SAFE_INTEGER)-(null!==(n=t.beanName?cb[t.beanName]:void 0)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)}function hb(e,t){return"gridDestroySvc"===(null===e||void 0===e?void 0:e.beanName)?-1:"gridDestroySvc"===(null===t||void 0===t?void 0:t.beanName)?1:0}var pb=class extends Vu{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:n,ctrlsSvc:o}=this.beans;null===n||void 0===n||n.registerGridDropTarget((()=>this.eGui),this),Zg(this.gos,t),this.createManagedBean(new $m(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=dc(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>s())),o.register("gridCtrl",this)}isDetailGrid(){var e;const t=Bg(this.getGui());return(null===t||void 0===t||null===(e=t.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1}getOptionalSelectors(){var e,t,i,n,o;const s=this.beans;return{paginationSelector:null===(e=s.pagination)||void 0===e?void 0:e.getPaginationSelector(),gridHeaderDropZonesSelector:null===(t=s.registry)||void 0===t?void 0:t.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:null===(i=s.sideBar)||void 0===i?void 0:i.getSelector(),statusBarSelector:null===(n=s.registry)||void 0===n?void 0:n.getSelector("AG-STATUS-BAR"),watermarkSelector:null===(o=s.licenseManager)||void 0===o?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(!1===e)t.setCursor(null);else{const i=1===e?"ew-resize":"ns-resize";t.setCursor(i)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(0===n){if(i>0){const{visibleCols:e,focusSvc:t}=this.beans,i=nh(e.allCols);if(t.focusGridView({column:i,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:o}=this.beans,s=o.allCols;if(e){if(i.length>1)return this.focusContainer(nh(i),e);const t=nh(s);if(n.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||zg(this.beans)){if(n.focusGridView({column:s[0],backwards:e}))return!0;for(let t=1;t<i.length;t++)if(_g(i[t].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var t;const i=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:o}=this.getNextFocusableIndex(i,e);if(-1===o||n<0||n>=i.length)return;const s=i[n];null===(t=s.setAllowFocus)||void 0===t||t.call(s,!0),setTimeout((()=>{var e;null===(e=s.setAllowFocus)||void 0===e||e.call(s,!1)}))}isFocusable(){var e;const t=this.beans;return!Vg(t)||!zg(t)||!(null===(e=t.sideBar)||void 0===e||null===(e=e.comp)||void 0===e||!e.isDisplayed())}getNextFocusableIndex(e,t){const i=iu(this.beans),n=e.findIndex((e=>e.getGui().contains(i)));return{indexWithFocus:n,nextIndex:n+(t?-1:1)}}focusContainer(e,t){var i,n;null===(i=e.setAllowFocus)||void 0===i||i.call(e,!0);const o=_g(e.getGui(),t,!1,!0);return null===(n=e.setAllowFocus)||void 0===n||n.call(e,!1),o}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},gb=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},mb=u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({dispatchEvent:"CommunityCore"},gb("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0})),gb("GridState",{getState:0,setState:0})),gb("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),gb("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),gb("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),gb("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),gb("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),gb("ValueCache",{expireValueCache:0})),gb("CellApi",{getCellValue:0})),gb("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),gb("Sort",{onSortChanged:0})),gb("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0})),gb("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),gb("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),gb("HighlightChanges",{flashCells:0})),gb("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0})),gb("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),gb("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),gb("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),gb("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),gb("ColumnResize",{setColumnWidths:0})),gb("ColumnHover",{isColumnHovered:0})),gb("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0})),gb("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0})),gb("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),gb("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),gb("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0})),gb("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),gb("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0})),gb("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),gb("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0})),gb("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),gb("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),gb("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),gb("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),gb("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),gb("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),gb("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),gb("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),gb("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),gb("ContextMenu",{showContextMenu:0})),gb("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),gb("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),gb("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),gb("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),gb("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),gb("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),gb("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),gb("StatusBar",{getStatusPanel:0})),fb={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},vb=(e,t)=>e.eventSvc.dispatchEvent(t),bb=class{};Reflect.defineProperty(bb,"name",{value:"GridApi"});function wb(e){return e.context.getGridId()}function yb(e,t){e.gos.updateGridOptions({options:t})}var xb={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}};var Cb={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},Sb=class extends Uh{constructor(e,t,i,n,o,s){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=o,this.suppressVisibilityChange=s,this.dragSource=null}isCustomGui(){return null!=this.customGui}postConstruct(){const{beans:e,rowNode:t,column:i,gos:n}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate(Cb),this.getGui().appendChild(hv("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const e=n.get("rowDragManaged")?new Pb(this,t,i):new kb(this,t,i);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){var e,t;const i=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[i];const n=null!==(e=null===(t=this.beans.selectionSvc)||void 0===t?void 0:t.getSelectedNodes())&&void 0!==e?e:[];return-1!==n.indexOf(i)?n:[i]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{null===e||void 0===e||e.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var e;const t=this.getDragItem(),n=(null===(e=t.rowNodes)||void 0===e?void 0:e.length)||1,o=this.getRowDragText(this.column);return o?o(t,n):1===n?this.cellValueFn():"".concat(n," ").concat(i("rowDragRows","rows"))},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Rb=class extends Vu{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,i);else{let e=!t,n=!1;const{column:o,rowNode:s,parent:r}=this;if(o){const i=o.getColDef().rowDrag;n="function"===typeof i,e=(t?!!i:o.isRowDrag(s))||r.isCustomGui()}n?(r.setDisplayed(!0,i),r.setVisible(e&&!t,i)):(r.setDisplayed(e,i),r.setVisible(!t,i))}}},kb=class extends Rb{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},Pb=class extends Rb{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:i}=this.beans,n=e.rowDragFeature,o=n&&n.shouldPreventRowMove(),s=i.get("suppressRowDrag"),r=t.hasExternalDropZones(),a=o&&!r||s;this.setDisplayedOrVisible(a,this.rowNode.footer)}},Eb=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let o=0;o<n.length;++o)this.depthFirstSearchChangedPath(n[o],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let o=0,s=n.length;o<s;++o){const e=n[o];e.childrenAfterGroup?this.depthFirstSearchEverything(e,t,i):i&&t(e)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}},Fb=class extends Vu{constructor(e){super(),this.eContainer=null,this.lastDraggingEvent=null,this.autoScrollService=null,this.makeGroupThrottleTimer=null,this.makeGroupThrottleTarget=null,this.makeGroupThrottled=!1,this.makeGroupThrottleCallback=()=>{this.makeGroupThrottleTimer=null;const e=this.lastDraggingEvent;e&&(this.makeGroupThrottled=!0,this.doManagedDrag(e,!1),this.makeGroupExpanded(this.makeGroupThrottleTarget))},this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:i}=this.beans;Gc(t)&&(this.clientSideRowModel=e),i.whenReady(this,(e=>{const t=e.gridBodyCtrl;let i=0;const n=()=>t.scrollFeature.getVScrollPosition().top;this.autoScrollService=new ab({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:n,setVerticalPosition:e=>t.scrollFeature.setVerticalScrollPosition(e),onScrollCallback:()=>{const e=n();if(i!==e){i=e;const t=this.lastDraggingEvent;t&&this.onDragging(t)}}})}))}destroy(){super.destroy(),this.eContainer=null,this.lastDraggingEvent=null,this.makeGroupThrottleClear();const e=this.autoScrollService;e&&(this.autoScrollService=null,null===e||void 0===e||e.ensureCleared())}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var e;const{rowGroupColsSvc:t,filterManager:i,sortSvc:n}=this.beans;if((null!==(e=null===t||void 0===t?void 0:t.columns)&&void 0!==e?e:[]).length)return!0;if(null===i||void 0===i?void 0:i.isAnyFilterPresent())return!0;return!!(null===n||void 0===n?void 0:n.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){var i,n;const e=[...null!==(i=null===(n=this.beans.selectionSvc)||void 0===n?void 0:n.getSelectedNodes())&&void 0!==i?i:[]].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{this.setRowNodeDragging(e,!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.autoScrollService&&(this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e,this.gos.get("rowDragManaged")&&this.doManagedDrag(e,!0),this.autoScrollService.check(e.event))}doManagedDrag(e,t){const{dragAndDrop:i,gos:n}=this.beans,o=this.isFromThisGrid(e);if(!n.get("rowDragManaged")||!this.shouldPreventRowMove())if(n.get("suppressMoveWhenRowDragging")||!o){if(i.isDropZoneWithinThisGrid(e)){const i=this.managedRowsDrop(e,t),n=null===i||void 0===i?void 0:i.target,o=this.beans.rowDropHighlightSvc;n&&i.rows.length?o.set(n,i.position):o.clear()}}else{const i=this.managedRowsDrop(e,t);i&&this.dropRows(i)}}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(nh(t.split("-")),10)}managedRowsDrop(e,t){var i,n,o,s;const{rowNode:r,rowNodes:a}=e.dragItem,l=(null===a||void 0===a?void 0:a.length)&&(null!==r&&void 0!==r?r:a[0]);if(!l)return this.makeGroupThrottleClear(),null;const{beans:d,gos:c,clientSideRowModel:u}=this,h=u.rootNode,p=im(d,e).y;let g=u.getRowIndexAtPixel(p),m=null!==(i=u.getRow(g))&&void 0!==i?i:null;const f=l!==m;let v=m?(p-m.rowTop-m.rowHeight/2)/m.rowHeight||0:1;const b=this.isFromThisGrid(e),w="group"!==Du(c)&&b;let y=null;if(w&&null!==(n=m)&&void 0!==n&&n.footer){var x,C;y=null!==(x=m.sibling)&&void 0!==x?x:h;const e=null!==(C=Nb(u,-1,m))&&void 0!==C?C:Nb(u,1,m);v=e&&e.rowIndex>m.rowIndex?-.5:.5,m=null!==e&&void 0!==e?e:null}let S=v<0,R=!1;if(b&&m){if(f){if(R=a.indexOf(m)>=0,R){const e=Db(u,g<l.rowIndex,a);(null===e||void 0===e?void 0:e.parent)===m.parent&&(m=e,g=m.rowIndex)}}else{if(Math.abs(v)<=.5)return this.makeGroupThrottleClear(),null;R=!0}(R||!w&&1===Math.abs(g-l.rowIndex))&&(S=g<l.rowIndex)}const k=this.makeGroupThrottleTarget;var P,E,F;(null!==k&&k!==m&&this.makeGroupThrottleClear(),null!==(o=m)&&void 0!==o&&o.expanded&&null!==(s=m.childrenAfterSort)&&void 0!==s&&s.length&&(this.makeGroupThrottled=!0,this.makeGroupThrottleTarget=m),null===y&&w)&&(!m||v>=.5&&m.rowIndex===d.pageBounds.getLastRow()?y=h:this.targetShouldBeParent(m,v,R,a)&&(this.makeGroupThrottled&&(y=m),!t||null!==y&&m.expanded||(this.makeGroupThrottleTarget=m,this.makeGroupThrottleStart())),null!==(P=y)&&void 0!==P||(y=null!==(E=null===(F=m)||void 0===F?void 0:F.parent)&&void 0!==E?E:h));let D=!1;if(null!==y){if(y===m&&y!==h){D=!0;const e=y.expanded?Nb(u,1,m):null;(null===e||void 0===e?void 0:e.parent)===y&&(m=e,D=!1,S=!0)}if(m&&!D){let e=m;for(;e&&e!==h&&e!==y;)m=e,e=e.parent}Tb(a,y)&&(y=null)}if(!y&&R&&(w||l===m))return null;const N=D?"inside":S?"above":"below",M={api:this.beans.gridApi,context:this.beans.gridOptions.context,draggingEvent:e,sameGrid:b,position:N,source:l,target:m,newParent:y,rows:a};let T=!1;const j=c.get("isRowValidDropPosition");if(j){const e=j(M);if(e){if("object"===typeof e){var A;if(void 0!==e.rows)M.rows=null!==(A=e.rows)&&void 0!==A?A:ih;void 0!==e.newParent&&(M.newParent=e.newParent),void 0!==e.target&&(M.target=e.target),e.position&&(T=!0,M.position=e.position)}}else M.rows=ih}return M.newParent&&M.rows.length||T||(M.position=S?"above":"below"),M}makeGroupThrottleStart(){null===this.makeGroupThrottleTimer&&(this.makeGroupThrottleTimer=window.setTimeout(this.makeGroupThrottleCallback,this.gos.get("rowDragInsertDelay")))}makeGroupExpanded(e){var t,i;e&&!e.expanded&&null!==(t=e.childrenAfterSort)&&void 0!==t&&t.length&&e.isExpandable()&&e.setExpanded(!0,null===(i=this.lastDraggingEvent)||void 0===i?void 0:i.event,!0)}makeGroupThrottleClear(){this.makeGroupThrottled=!1,this.makeGroupThrottleTarget=null;const e=this.makeGroupThrottleTimer;null!==e&&(this.makeGroupThrottleTimer=null,clearTimeout(e))}targetShouldBeParent(e,t,i,n){const o=null===e||void 0===e?void 0:e.rowIndex;if(i||null===o)return!1;if(t<-.25)return!1;if(t<.25)return!0;let s,r=o+1;const a=this.clientSideRowModel;do{s=a.getRow(r++)}while(s&&s.footer);const l=e.childrenAfterGroup;if(s&&s.parent===e&&null!==l&&void 0!==l&&l.length){const e=new Set(n);for(const t of l)if(null!==t.rowIndex&&!e.has(t))return!0}return!1}addRowDropZone(e){if(!e.getContainer())return void _c(55);const t=this.beans.dragAndDrop;if(t.findExternalZone(e))return void _c(56);let i={getContainer:e.getContainer};e.fromGrid?i=e:(e.onDragEnter&&(i.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(i.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(i.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(i.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(i.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const n=u({isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0},i);t.addDropTarget(n),this.addDestroyFunc((()=>t.removeDropTarget(n)))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),o=this.onDragging.bind(this),s=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{n(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:n,onDragging:e.onDragging?t=>{o(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:o,onDragStop:e.onDragStop?t=>{s(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:s,onDragCancel:e.onDragCancel?t=>{r(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:o,onDragStop:s,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.beans,{pageBounds:n,rowModel:o,gos:s}=i,r=im(this.beans,t).y;let a,l=-1;r>n.getCurrentPagePixelRange().pageLastPixel||(l=o.getRowIndexAtPixel(r),a=o.getRow(l));return Fu(s,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:l,overNode:a,y:r,vDirection:t.vDirection})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.beans.rowDropHighlightSvc.clear(),this.makeGroupThrottleClear()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;if(i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)){const t=this.managedRowsDrop(e,!1);t&&this.dropRows(t),this.beans.rowDropHighlightSvc.clear()}this.makeGroupThrottleClear()}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:i}=this.beans;i.get("rowDragManaged")&&(i.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.beans.rowDropHighlightSvc.clear(),this.makeGroupThrottleClear()}stopDragging(e){var t;null===(t=this.autoScrollService)||void 0===t||t.ensureCleared(),this.getRowNodes(e).forEach((e=>{this.setRowNodeDragging(e,!1)}))}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}dropRows(e){return e.sameGrid?this.moveRows(e):this.addRows(e)}addRows(e){let{position:t,target:i,rows:n}=e;const o=pu(this.gos),s=this.clientSideRowModel,r=n.filter((e=>{var t;let{data:i,rowPinned:n}=e;return!s.getRowNode(null!==(t=null===o||void 0===o?void 0:o({data:i,level:0,rowPinned:n}))&&void 0!==t?t:i.id)})).map((e=>{let{data:t}=e;return t}));if(0===r.length)return!1;const a=i?jb(i)+("above"===t?0:1):void 0;return s.updateRowData({add:r,addIndex:a}),!0}refreshModelAfterDrop(){this.clientSideRowModel.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Eb(!1,this.clientSideRowModel.rootNode),rowNodesOrderChanged:!0})}moveRows(e){let{position:t,target:i,rows:n,newParent:o}=e,s=!1;const r=this.clientSideRowModel,a=new Set;for(const u of n){if(u.footer||null===u.rowTop&&u!==r.getRowNode(u.id))continue;if(o&&u.parent!==o){if(Mb(u,o))continue;u.treeParent=o,s=!0}const e=Ab(u);e&&a.add(e)}if(!s&&0===a.size)return!1;const l=this.beans.focusSvc,d=l.getFocusedCell(),c=d&&_p(this.beans,d);return a.size&&this.reorderLeafChildren(a,...this.getMoveRowsBounds(a,i,"above"===t))&&(s=!0),!!s&&(this.refreshModelAfterDrop(),c?c.focusCell():l.clearFocusedCell(),!0)}getMoveRowsBounds(e,t,i){var n,o;const s=null!==(n=null===(o=this.clientSideRowModel.rootNode)||void 0===o?void 0:o.allLeafChildren.length)&&void 0!==n?n:0;let r=jb(t);r<0||r>=s?r=s:i||++r;let a=r,l=Math.min(r,s-1);for(const d of e){const e=d.sourceRowIndex;e<a&&(a=e),e>l&&(l=e)}return[a,r,l]}reorderLeafChildren(e,t,i,n){var o;let s=!1;const r=null===(o=this.clientSideRowModel.rootNode)||void 0===o?void 0:o.allLeafChildren;if(!e.size||!r)return!1;let a=t;for(let d=t;d<i;++d){const t=r[d];e.has(t)||(t.sourceRowIndex!==a&&(t.sourceRowIndex=a,r[a]=t,s=!0),++a)}let l=n;for(let d=n;d>=i;--d){const t=r[d];e.has(t)||(t.sourceRowIndex!==l&&(t.sourceRowIndex=l,r[l]=t,s=!0),--l)}for(const d of e)d.sourceRowIndex!==a&&(d.sourceRowIndex=a,r[a]=d,s=!0),++a;return s}},Db=(e,t,i)=>t?Nb(e,-1,i[0]):Nb(e,1,nh(i)),Nb=(e,t,i)=>{if(i){const n=e.getRowCount();let o=i.rowIndex+t;for(;o>=0&&o<n;){const i=e.getRow(o);if(!i||!i.footer)return i;o+=t}}},Mb=(e,t)=>{let i=t;for(;i;){if(i===e)return!0;i=i.parent}return!1},Tb=(e,t)=>{for(let i=0,n=e.length;i<n;++i)if(e[i].parent!==t)return!1;return!0},jb=e=>{const t=Ab(e);return void 0!==t?t.sourceRowIndex:-1},Ab=e=>{for(;e;){if(e.sourceRowIndex>=0)return e;const t=e.childrenAfterGroup;if(null===t||void 0===t||!t.length)return;e=t[0]}},Ib={moduleName:"Drag",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,i=t.find((t=>t.dragSource===e));i&&(this.removeListener(i),rh(t,i))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:o}=e;i.addEventListener("mousedown",t);let s=null;const r=this.gos.get("suppressTouch");n&&!r&&(s=t=>{_d(t.target)||(o&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!n})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const n=t=>this.onTouchUp(t,e.eElement),o=t.target,s=[{target:tu(this.beans),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:o,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:o,type:"touchend",listener:n,options:{passive:!0}},{target:o,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(s),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const n=tu(this.beans),o=[{target:n,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:n,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:n,type:"contextmenu",listener:e=>e.preventDefault()},{target:n,type:"keydown",listener:t=>{t.key===pg&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:n,options:o}=e;t.addEventListener(i,n,o)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:n,options:o}=e;t.removeEventListener(i,n,o)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return Wg(e,t,Wl(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var n;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams)return void(this.dragging=!1);this.currentDragParams.onDragging(t)}null===(n=this.currentDragParams)||void 0===n||n.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if(Dd()){var i;null===(i=Zc(this.beans).getSelection())||void 0===i||i.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,i=t.get("enableCellTextSelection"),n="mousemove"===e.type;return i&&n&&e.cancelable&&em(t,e)&&!(e=>{const t=e.target,i=null===t||void 0===t?void 0:t.tagName.toLocaleLowerCase();return!(null===i||void 0===i||!i.match("^a$|textarea|input|select|button"))})(e)}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),null===(t=this.currentDragParams)||void 0===t||null===(i=t.onDragCancel)||void 0===i||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach((e=>e())),e.length=0}}]},Lb={moduleName:"DragAndDrop",version:Pc,dynamicBeans:{dndSourceComp:class extends Uh{constructor(e,t,i){super(xb),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(hv("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:n,gos:o}=this,s=i.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(n,0,0),s){s(Fu(o,{rowNode:t,dragEvent:e}))}else try{const e=JSON.stringify(t.data);r.setData("application/json",e),r.setData("text/plain",e)}catch(a){}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}},icons:{rowDrag:"grip"}},_b={moduleName:"SharedDragAndDrop",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragSvc.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:i}=this,n=t.find((t=>t.dragSource===e));n&&(i.removeDragSource(n.params),rh(t,n))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:i}=this;e.forEach((e=>t.removeDragSource(e.params))),e.length=0,i.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),null===(i=e.onDragStarted)||void 0===i||i.call(e),this.createDragAndDropImageComponent()}onDragStop(e){var t,i;null===(t=this.dragSource)||void 0===t||null===(i=t.onDragStopped)||void 0===i||i.call(t);const{lastDropTarget:n}=this;if(null!==n&&void 0!==n&&n.onDragStop){const t=this.createDropTargetEvent(n,e,null,null,!1);n.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){var e;const{dragSource:t,lastDropTarget:i}=this;null===t||void 0===t||null===(e=t.onDragCancelled)||void 0===e||e.call(t),null!==i&&void 0!==i&&i.onDragCancel&&i.onDragCancel(this.createDropTargetEvent(i,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const o=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),s=this.findCurrentDropTarget(e,o),{lastDropTarget:r,dragSource:a,dragAndDropImageComp:l,dragItem:d}=this;if(s!==r){var c,u;if(this.leaveLastTargetIfExists(e,i,n,t),null!==r&&null===s)null===a||void 0===a||null===(c=a.onGridExit)||void 0===c||c.call(a,d);if(null===r&&null!==s)null===a||void 0===a||null===(u=a.onGridEnter)||void 0===u||u.call(a,d);if(this.enterDragTargetIfExists(s,e,i,n,t),s&&l){const{comp:e,promise:t}=l;e?e.setIcon(s.getIconName?s.getIconName():null,!1):t.then((e=>{e&&e.setIcon(s.getIconName?s.getIconName():null,!1)}))}this.lastDropTarget=s}else if(s&&s.onDragging){const o=this.createDropTargetEvent(s,e,i,n,t);s.onDragging(o)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const o=(e,t)=>{for(const i of t){const{width:t,height:n,left:o,right:s,top:r,bottom:a}=i.getBoundingClientRect();if(0===t||0===n)return!1;const l=e.clientX>=o&&e.clientX<s,d=e.clientY>=r&&e.clientY<a;if(!l||!d)return!1}return!0};for(const a of i)if(o(e,a)){n=!0;break}const{eElement:s,type:r}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(s))&&(n&&t.isInterestedIn(r,s))}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const n=tu(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const e of t){if(-1!==this.getAllContainersFromDropTarget(e).flatMap((e=>e)).indexOf(o))return e}return null}enterDragTargetIfExists(e,t,i,n,o){if(e&&e.onDragEnter){const s=this.createDropTargetEvent(e,t,i,n,o);e.onDragEnter(s)}}leaveLastTargetIfExists(e,t,i,n){const{lastDropTarget:o}=this;if(!o)return;if(o.onDragLeave){const s=this.createDropTargetEvent(o,e,t,i,n);o.onDragLeave(s)}const s=this.getDragAndDropImageComponent();s&&s.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){var t;const i=null===(t=this.eventLastTime)||void 0===t?void 0:t.clientX,n=e.clientX;return i===n?null:i>n?"left":"right"}getVerticalDirection(e){var t;const i=null===(t=this.eventLastTime)||void 0===t?void 0:t.clientY,n=e.clientY;return i===n?null:i>n?"up":"down"}createDropTargetEvent(e,t,i,n,o){const s=e.getContainer(),r=s.getBoundingClientRect(),{dragItem:a,dragSource:l,gos:d}=this;return Fu(d,{event:t,x:t.clientX-r.left,y:t.clientY-r.top,vDirection:n,hDirection:i,dragSource:l,fromNudge:o,dragItem:a,dropZoneTarget:s})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&ou(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;if(e){const{comp:i}=e;if(i){var t;const e=i.getGui();null===(t=this.dragAndDropImageParent)||void 0===t||t.removeChild(e),this.destroyBean(i)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:i}=this;if(!e)return;const n=function(e,t){return e.getCompDetailsFromGridOptions($h,"agDragAndDropImage",t,!0)}(i,Fu(t,{dragSource:e}));if(!n)return;const o=n.newAgStackInstance();this.dragAndDropImageComp={promise:o},o.then((e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)}))}processDragAndDropImageComponent(e){const{dragSource:t,environment:i}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),Zg(this.gos,n),i.applyThemeClasses(n),e.setIcon(null,!1);let{dragItemName:o}=t;"function"===typeof o&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const s=nu(this.beans);this.dragAndDropImageParent=s,s?s.appendChild(n):_c(54)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc((()=>this.removeDropTarget(i)))}}],dependsOn:[Ib],userComponents:{agDragAndDropImage:class extends Uh{constructor(){super(),this.dragSource=null,this.eIcon=Wh,this.eLabel=Wh,this.eGhost=Wh,this.registerCSS(".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}")}postConstruct(){const e=e=>function(e,t,i){const n=hv(e,t,i);if(n){const{className:e}=n;if("string"===typeof e&&e.indexOf("ag-icon")>-1||"object"===typeof e&&e["ag-icon"])return n}const o=gc({tag:"span"});return o.appendChild(n),o}(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(pv),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:i,dragSource:n,dropIconMap:o,gos:s}=this;Qd(i);let r=null;e||(e=null!==n&&void 0!==n&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),r=o[e],i.classList.toggle("ag-shake-left-to-right",t),r===o.hide&&s.get("suppressDragLeaveHidesColumns")||r&&i.appendChild(r)}setLabel(e){this.eLabel.textContent=e}}},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},Ob={moduleName:"RowDrag",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row;e&&null!==e.rowIndex&&"none"!==this.position?this.set(e,this.position):this.clear()}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const i=e!==this.row,n=e.uiLevel,o=t!==this.position,s=n!==this.uiLevel;(i||o||s)&&(i&&this.clear(),this.uiLevel=n,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}},class extends Vu{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new Fb(e)),n=this.beans.dragAndDrop;n.addDropTarget(i),t.addDestroyFunc((()=>n.removeDropTarget(i))),this.rowDragFeature=i}createRowDragComp(e,t,i,n,o,s){return new Sb(e,t,i,n,o,s)}createRowDragCompForRow(e,t){if(bu(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp((()=>"1 ".concat(i("rowDragRow","row"))),e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,n,o,s){const r=this.gos;if(r.get("rowDragManaged")&&(!Gc(r)||r.get("pagination")))return;return this.createRowDragComp(i,e,t,n,o,s)}}],apiFunctions:{addRowDropZone:function(e,t){var i;null===(i=e.rowDragSvc)||void 0===i||null===(i=i.rowDragFeature)||void 0===i||i.addRowDropZone(t)},removeRowDropZone:function(e,t){var i;const n=null===(i=e.dragAndDrop)||void 0===i?void 0:i.findExternalZone(t);var o;n&&(null===(o=e.dragAndDrop)||void 0===o||o.removeDropTarget(n))},getRowDropZoneParams:function(e,t){var i;return null===(i=e.rowDragSvc)||void 0===i||null===(i=i.rowDragFeature)||void 0===i?void 0:i.getRowDropZone(t)},getRowDropPositionIndicator:function(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}},setRowDropPositionIndicator:function(e,t){const i=e.rowDropHighlightSvc;if(!i)return;const n=null===t||void 0===t?void 0:t.row;let o=null===t||void 0===t?void 0:t.dropIndicatorPosition;"above"!==o&&"below"!==o&&"inside"!==o&&(o="none");const s=null===n||void 0===n?void 0:n.rowIndex;null===s||void 0===s||"none"===o?i.clear():i.set(n,o)}},dependsOn:[_b]},Bb={moduleName:"HorizontalResize",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;i.addDragSource(t);return()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}],dependsOn:[Ib]};var zb=class extends Vu{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&(null===t||void 0===t||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(null===i||void 0===i||i.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(null===n||void 0===n||n.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function Vb(e){const{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:o,fakeEvent:s,pinned:r,gos:a,colModel:l,colMoves:d,visibleCols:c}=e;let{allMovingColumns:u}=e;t&&(u=function(e){const t=[...e];return e.forEach((e=>{let i=null,n=e.getParent();for(;null!=n&&1===n.getDisplayedLeafColumns().length;)i=n,n=n.getParent();var o;null!=i&&(null!==(o=i.getColGroupDef())&&void 0!==o&&o.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((e=>{t.includes(e)||t.push(e)}))})),t}(u));const h=u.slice();!function(e,t){if(!t||t.length<=1)return;t.filter((t=>e.indexOf(t)<0)).length>0||t.sort(((t,i)=>e.indexOf(t)-e.indexOf(i)))}(l.getCols(),h);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:o,gos:s,colModel:r,visibleCols:a}=e,l=s.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable));if(l)return[];const d=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,o),c=r.getCols(),u=d.filter((e=>t.includes(e))),h=d.filter((e=>!t.includes(e))),p=c.filter((e=>!t.includes(e)));let g,m=0,f=n;if(i){let e=0;u.forEach((t=>e+=t.getActualWidth())),f-=e}if(f>0){for(let e=0;e<h.length;e++){if(f-=h[e].getActualWidth(),f<0)break;m++}i&&m++}if(m>0){const e=h[m-1];g=p.indexOf(e)+1}else g=p.indexOf(h[0]),-1===g&&(g=0);const v=[g],b=(e,t)=>e-t;if(i){let e=g+1;const t=c.length-1;for(;e<=t;)v.push(e),e++;v.sort(b)}else{let e=g;const t=c.length-1;let i=c[e];for(;e<=t&&d.indexOf(i)<0;)e++,v.push(e),i=c[e];e=g-1;const n=0;for(;e>=n;)v.push(e),e--;v.sort(b).reverse()}return v}({movingCols:h,draggingRight:i,xPosition:n,pinned:r,gos:a,colModel:l,visibleCols:c}),g=function(e,t){const i=t.getCols(),n=e.map((e=>i.indexOf(e))).sort(((e,t)=>e-t)),o=n[0],s=nh(n)-o,r=s!==n.length-1;return r?null:o}(h,l);if(0===p.length)return;const m=p[0];if(null!==g&&(t||!o)&&!s){if(!i&&m>=g)return;if(i&&m<=g)return}const f=function(e,t,i,n){const o=n.allCols;let s=null,r=null;for(let a=0;a<e.length;a++){const n=e[a],l=i.getProposedColumnOrder(t,n);if(!i.doesOrderPassRules(l))continue;const d=l.filter((e=>o.includes(e)));if(null===r)r=d;else if(!oh(d,r))break;const c=Gb(l);(null===s||c<s.fragCount)&&(s={move:n,fragCount:c})}return s}(p,h,d,c);if(!f)return;const v=f.move;return v>l.getCols().length-h.length?void 0:{columns:h,toIndex:v}}function Hb(e){const{columns:t,toIndex:i}=Vb(e)||{},{finished:n,colMoves:o}=e;return t&&null!=i?(o.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i}):null}function Gb(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let n=0;n<e.length-1;n++){let o=t(e[n]),s=t(e[n+1]);[o,s]=o.length>s.length?[o,s]:[s,o],o.forEach((e=>{-1===s.indexOf(e)&&i++}))}return i}function Wb(e){var t;const{pinned:i,fromKeyboard:n,gos:o,ctrlsSvc:s,useHeaderRow:r,skipScrollPadding:a}=e;let l=null===(t=s.getHeaderRowContainerCtrl(i))||void 0===t?void 0:t.eViewport,{x:d}=e;return l?(n&&(d-=l.getBoundingClientRect().left),o.get("enableRtl")&&(r&&(l=l.querySelector(".ag-header-row")),d=l.clientWidth-d),null!=i||a||(d+=s.get("center").getCenterViewportScrollLeft()),d):0}function Ub(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var qb=class extends Vu{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Wl(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){var e;const{pinned:t,lastDraggingEvent:i}=this,{dragItem:n}=i||{},o=null!==(e=null===n||void 0===n?void 0:n.columns)&&void 0!==e?e:[];for(const s of o){const e=s.getPinned();if(s.getColDef().lockPinned){if(e==t)return"move";continue}const i=null===n||void 0===n?void 0:n.containerType;if(i===t||!t)return"move";if(t&&(!e||i!==t))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(0===e.dragSource.type)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const e=t.visibleState,n=(i||[]).filter((t=>e[t.getId()]&&!t.isVisible()));this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{gos:o,ctrlsSvc:s}=this.beans,r=o.get("suppressMoveWhenColumnDragging");if(n&&!r)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!n&&Ul(e.hDirection))return;const a=Wb({x:e.x,pinned:this.pinned,gos:o,ctrlsSvc:s});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,n):this.handleColumnDragWhileAllowingMovement(e,t,i,a,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(null===e||void 0===e||!e.length)return;const n=e.filter((e=>!e.getColDef().lockVisible));n.length&&this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e,!0);if(o){const e=this.isAttemptingToPin(s);e&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:n,xPosition:o}=this.getNormalisedXPositionInfo(s,e)||{};if(null==n||null==o)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:o,fromEnter:t,fakeEvent:i,fromLeft:n})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,o){const s=this.getAllMovingColumns(e),r="right"===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=Hb(u(u({},this.getMoveColumnParams({allMovingColumns:s,isFromHeader:a,xPosition:n,fromLeft:r,fromEnter:t,fakeEvent:i})),{},{finished:o}));l&&(this.lastMovedInfo=l)}getAllMovingColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;return n?n.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:o,fromEnter:s,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:d,visibleCols:c}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:o,xPosition:n,pinned:this.pinned,fromEnter:s,fakeEvent:r,gos:a,colModel:l,colMoves:d,visibleCols:c}}highlightHoveredColumn(e,t){var i;const{gos:n,colModel:o}=this.beans,s=n.get("enableRtl"),r=o.getCols().filter((e=>e.isVisible()&&e.getPinned()===this.pinned));let a,l=null,d=null,c=null;for(const u of r){if(d=u.getActualWidth(),l=this.getNormalisedColumnLeft(u,0,s),null!=l){if(l<=t&&l+d>=t){c=u;break}}l=null,d=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let e=r.length-1;e>=0;e--){const t=r[e],i=r[e].getParent();if(!i){c=t;break}const n=null===i||void 0===i?void 0:i.getDisplayedLeafColumns();if(n.length){c=nh(n);break}}if(!c)return;l=this.getNormalisedColumnLeft(c,0,s),d=c.getActualWidth()}(null===(i=this.lastHighlightedColumn)||void 0===i?void 0:i.column)!==c&&this.clearHighlighted(),null!=c&&null!=l&&null!=d&&(a=t-l<d/2!==s?0:1,Kb(c,a),this.lastHighlightedColumn={column:c,position:a})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,o=i.get("enableRtl"),{firstMovingCol:s,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,o);if(!s||!r||null==a)return;const l=n.allCols,d=l.indexOf(s),c=l.indexOf(r),u=0===a!==o,h=d<c||d===c&&!u;let p=0;if(u?h&&(p-=1):h||(p+=1),c+p===d)return;const g=l[c+p];if(!g)return;return{fromLeft:h,xPosition:this.getNormalisedColumnLeft(g,20,o)}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:s}=function(e){const t=e.length;let i,n;for(let o=0;o<t;o++){if(!i){const t=e[o];null!=t.getLeft()&&(i=t)}if(!n){const i=e[t-1-o];null!=i.getLeft()&&(n=i)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}(e);if(!o||!s||n.column||!t)return u({firstMovingCol:o},n);const r="left"===this.getPinDirection();return{firstMovingCol:o,position:r?1:0,column:r!==i?o:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:o}=this.beans,s=e.getLeft();if(null==s)return null;const r=e.getActualWidth();return Wb({x:i?s+r-t:s+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:o})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some((e=>e.getPinned()!==this.pinned))}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:o,fromLeft:s}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:s,fromEnter:n,fakeEvent:o}),{columns:a,toIndex:l}=Vb(r)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(Kb(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let o,s;this.gos.get("enableRtl")?(o=e<i+50,s=e>n-50):(s=e<i+50,o=e>n-50),this.needToMoveRight=o,this.needToMoveLeft=s,s||o?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),null===(e=this.beans.dragAndDrop.getDragAndDropImageComponent())||void 0===e||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,null===(e=this.beans.dragAndDrop.getDragAndDropImageComponent())||void 0===e||e.setIcon(this.getIconName(),!1))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{var n;this.failedMoveAttempts++;const{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(null===(n=t.getDragAndDropImageComponent())||void 0===n||n.setIcon("pinned",!1),!i.get("suppressMoveWhenColumnDragging")){var o;const e=null===(o=this.lastDraggingEvent)||void 0===o?void 0:o.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(e||[]).filter((e=>!e.getColDef().lockPinned));if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:o,dragAndDrop:s}=this.beans;return null===o||void 0===o||o.setColsPinned(n,t,"uiColumnDragged"),i&&s.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Kb(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}var Yb=class extends Vu{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,(e=>{let t;const n=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[n,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[n,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[n,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t})),this.moveColumnFeature=this.createManagedBean(new qb(i)),this.bodyDropPivotTarget=this.createManagedBean(new zb(i)),t.addDropTarget(this),this.addDestroyFunc((()=>t.removeDropTarget(this)))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}};var Qb={moduleName:"ColumnMove",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const o=n[e];this.moveColumns([o],t,i)}moveColumns(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{colModel:o,colAnimation:s,visibleCols:r,eventSvc:a}=this.beans,l=o.getCols();if(!l)return;if(t>l.length-e.length)return void _c(30,{toIndex:t});null===s||void 0===s||s.start();const d=o.getColsForKeys(e);this.doesMovePassRules(d,t)&&(ah(o.getCols(),d,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,toIndex:t,finished:n,source:i})),null===s||void 0===s||s.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;if(!Dh(e,t.getColTree()))return!1;return!!(e=>{const t=i.get("enableRtl");let n=t?1:-1,o=!0;return e.forEach((e=>{const i=(s=e.getColDef().lockPosition)?"left"===s||!0===s?-1:1:0;var s;t?i>n&&(o=!1):i<n&&(o=!1),n=i})),o})(e)}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return ah(i,e,t),i}createBodyDropTarget(e,t){return new Yb(e,t)}moveHeader(e,t,i,n,o){const{ctrlsSvc:s,gos:r,colModel:a,visibleCols:l,focusSvc:d}=this.beans,c=t.getBoundingClientRect(),h=c.left,p=om(i),g=p?c.width:i.getActualWidth(),m="left"===e!==r.get("enableRtl"),f=Wb({x:m?h-20:h+g+20,pinned:n,fromKeyboard:!0,gos:r,ctrlsSvc:s}),v=d.focusedHeader;let b;if(Hb({allMovingColumns:p?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:f,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0}),p){const e=i.getDisplayedLeafColumns();b=m?e[0]:nh(e)}else b=i;if(s.getScrollFeature().ensureColumnVisible(b,"auto"),(!o.isAlive()||r.get("ensureDomOrder"))&&v){let e;if(p){const t=i.getGroupId(),n=i.getLeafColumns();if(!n.length)return;const o=n[0].getParent();if(!o)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return}(o,t)}else e=i;e&&d.focusHeaderPosition({headerPosition:u(u({},v),{},{column:e})})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:o,dragAndDrop:s,visibleCols:r}=this.beans;let a=!n.get("suppressDragLeaveHidesColumns");const l=om(t),d=l?t.getProvidedColumnGroup().getLeafColumns():[t],c=l?()=>function(e,t){var i;const n=e.getProvidedColumnGroup().getLeafColumns(),o={};n.forEach((e=>o[e.getId()]=e.isVisible()));const s=[];t.forEach((e=>{n.indexOf(e)>=0&&(s.push(e),rh(n,e))})),n.forEach((e=>s.push(e)));const r=[],a=e.getLeafColumns();for(const l of s)-1!==a.indexOf(l)&&r.push(l);return{columns:s,columnsInSplit:r,visibleState:o,containerType:null===(i=r[0])||void 0===i?void 0:i.pinned}}(t,r.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}(t),u={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:c,dragItemName:i,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),Ub(d,!0)},onDragStopped:()=>Ub(d,!1),onDragCancelled:()=>Ub(d,!1),onGridEnter:e=>{if(a){const{columns:t=[],visibleState:i}=null!==e&&void 0!==e?e:{},n=l?e=>!i||i[e.getColId()]:()=>!0,s=t.filter((e=>!e.getColDef().lockVisible&&n(e)));o.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];o.setColsVisible(i,!1,"uiColumnMoved")}}};return s.addDragSource(u,!0),u}},class extends Vu{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush((()=>this.activeNext=!1),(()=>this.active=!1))}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)}))}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(0===i.length&&0===n.length)return e(),void t();const o=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e(),o(i)}),0),window.setTimeout((()=>{t(),o(n)}),200)}))}}],apiFunctions:{moveColumnByIndex:function(e,t,i){var n;null===(n=e.colMoves)||void 0===n||n.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){var n;null===(n=e.colMoves)||void 0===n||n.moveColumns(t,i,"api")}},dependsOn:[_b],css:[":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"]},$b={moduleName:"AutoWidth",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){var i;const n=document.createElement("form");n.style.position="fixed";const o=this.centerRowContainerCtrl.eContainer;e.forEach((e=>this.cloneItemIntoDummy(e,n))),o.appendChild(n);const s=n.offsetWidth;return o.removeChild(n),s+(t=null!==(i=t)&&void 0!==i?i:this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach((i=>{const n=i.getHtmlElementForColumnHeader(e);null!=n&&(t=n)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),o=n.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(o.add("ag-header","ag-header-row"),n.style.position="static"):o.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some((e=>s.classList.contains(e)))){for(let e=0;e<s.classList.length;e++){const t=s.classList[e];"ag-row-position-absolute"!=t&&o.add(t)}break}s=s.parentElement}n.appendChild(i),t.appendChild(n)}}]};var Xb=class extends Vu{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,(()=>this.resizeLeafColumnsToFit("uiColumnResized"))))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:o,groupAfterStartWidth:s,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const n=this.normaliseDragChange(t),o=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(o,i,e)}getInitialValues(e){const t=e=>e.reduce(((e,t)=>e+t.getActualWidth()),0),i=(e,t)=>e.map((e=>e.getActualWidth()/t)),n=this.getColumnsToResize(),o=t(n),s={columnsToResize:n,resizeStartWidth:o,resizeRatios:i(n,o)};let r=null;var a,l;e&&(r=null!==(a=null===(l=this.beans.colGroupSvc)||void 0===l?void 0:l.getGroupAtDirection(this.columnGroup,"After"))&&void 0!==a?a:null);if(r){const e=r.getDisplayedLeafColumns(),n=s.groupAfterColumns=e.filter((e=>e.isResizable())),o=s.groupAfterStartWidth=t(n);s.groupAfterRatios=i(n,o)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i){var n;let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:s,resizeStartWidth:r,resizeRatios:a,groupAfterColumns:l,groupAfterStartWidth:d,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:a,width:t}),l){const e=t-r;u.push({columns:l,ratios:c,width:d-e})}null===(n=this.beans.colResize)||void 0===n||n.resizeColumnSets({resizeSets:u,finished:o,source:i}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},Jb=class extends Vu{constructor(e,t,i,n,o){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=o}postConstruct(){const e=[];let t,i;const n=()=>{if(Od(this.eResize,t),!t)return;const{horizontalResizeSvc:n,colAutosize:o}=this.beans,s=n.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(s),i&&o&&e.push(o.addColumnAutosize(this.eResize,this.column))},o=()=>{e.forEach((e=>e())),e.length=0},s=()=>{const e=this.column.isResizable(),s=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||s!==i)&&(t=e,i=s,o(),n())};s(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:o,beans:s}=this,r=this.normaliseResizeAmount(t),a=[{key:i,newWidth:o+r}],{pinnedCols:l,ctrlsSvc:d,colResize:c}=s;if(this.column.getPinned()){var u,h;if((null!==(u=null===l||void 0===l?void 0:l.leftWidth)&&void 0!==u?u:0)+(null!==(h=null===l||void 0===l?void 0:l.rightWidth)&&void 0!==h?h:0)+(r-n)>Gd(d.getGridBodyCtrl().eBodyViewport)-50)return}this.lastResizeAmount=r,null===c||void 0===c||c.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,n="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}};var Zb={moduleName:"ColumnResize",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const o=[],{colModel:s,gos:r,visibleCols:a}=this.beans;e.forEach((e=>{const i=s.getColDefCol(e.key)||s.getCol(e.key);if(!i)return;o.push({width:e.newWidth,ratios:[1],columns:[i]});if("shift"===r.get("colResizeDefault")&&(t=!t),t){const t=a.getColAfter(i);if(!t)return;const n=i.getActualWidth()-e.newWidth,s=t.getActualWidth()+n;o.push({width:s,ratios:[1],columns:[t]})}})),0!==o.length&&this.resizeColumnSets({resizeSets:o,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every((e=>function(e){const{columns:t,width:i}=e;let n=0,o=0,s=!0;t.forEach((e=>{const t=e.getMinWidth();n+=t||0;const i=e.getMaxWidth();i>0?o+=i:s=!1}));const r=!s||i<=o;return i>=n&&r}(e))))){if(i){const e=t&&t.length>0?t[0].columns:null;jh(this.eventSvc,e,i,n)}return}const o=[],s=[];t.forEach((e=>{const{width:t,columns:i,ratios:r}=e,a={},l={};i.forEach((e=>s.push(e)));let d=!0,c=0;for(;d;){if(c++,c>1e3){Oc(31);break}d=!1;const e=[];let n=0,o=t;i.forEach(((t,i)=>{if(l[t.getId()])o-=a[t.getId()];else{e.push(t);const o=r[i];n+=o}}));const s=1/n;e.forEach(((i,n)=>{let c;n===e.length-1?c=o:(c=Math.round(r[n]*t*s),o-=c);const u=i.getMinWidth(),h=i.getMaxWidth();c<u?(c=u,l[i.getId()]=!0,d=!0):h>0&&c>h&&(c=h,l[i.getId()]=!0,d=!0),a[i.getId()]=c}))}i.forEach((e=>{const t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,n),o.push(e))}))}));const r=o.length>0;let a=[];if(r){var l;const{colFlex:e,visibleCols:t,colViewport:i}=this.beans;a=null!==(l=null===e||void 0===e?void 0:e.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}))&&void 0!==l?l:[],t.setLeftValues(n),t.updateBodyWidths(),i.checkViewportColumns()}const d=s.concat(a);(r||i)&&jh(this.eventSvc,d,i,n,a)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),o=e.getMinWidth(),s=e.getMaxWidth(),r=Math.min(Math.max(n+t,o),s);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,o){return new Jb(e,t,i,n,o)}createGroupResizeFeature(e,t,i,n){return new Xb(e,t,i,n)}}],apiFunctions:{setColumnWidths:function(e,t){var i;let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";null===(i=e.colResize)||void 0===i||i.setColumnWidths(t,!1,n,o)}},dependsOn:[Bb,$b]},ew=class extends Vu{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.toggleCss("ag-hidden",0===e)}};function tw(e,t,i){if(e)for(let n=0;n<e.length;n++){const o=e[n];if(om(o)){tw(t?o.getDisplayedChildren():o.getChildren(),t,i)}i(o)}}function iw(e){const t=[];return tw(e,!0,(e=>{Qu(e)&&t.push(e)})),t}var nw={moduleName:"ColumnGroup",version:Pc,dynamicBeans:{headerGroupCellCtrl:class extends Zf{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,i,n,o){const{column:s,beans:r}=this,{context:a,colNames:l,colHover:d,rangeSvc:c,colResize:u}=r;this.comp=e,o=Vh(this,a,o),this.setGui(t,o),this.displayName=l.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(),this.setupAutoHeight({wrapperElement:n,compBean:o}),this.setupUserComp(),this.addHeaderMouseListeners(o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const h=this.rowCtrl.pinned,p=s.getProvidedColumnGroup().getLeafColumns();null===d||void 0===d||d.createHoverFeature(o,p,t),null===c||void 0===c||c.createRangeHighlightFeature(o,s,e),o.createManagedBean(new $f(s,t,r)),o.createManagedBean(new ew(e,s)),u?this.resizeFeature=o.createManagedBean(u.createGroupResizeFeature(e,i,h,s)):e.setResizableDisplayed(!1),o.createManagedBean(new Km(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,p),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc((()=>this.clearComponent()))}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return Fu(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=nh(t)===e;if(!i&&!n)return;const o=e.getHighlighted();let s=!1,r=!1;if(!!this.rowCtrl.getHeaderCellCtrls().find((e=>e.column.isMoving()))){const e=this.beans.gos.get("enableRtl"),t=1===o,a=0===o;i&&(e?r=t:s=a),n&&(e?s=a:r=t)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",r)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;null===(t=this.resizeFeature)||void 0===t||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i,enterpriseMenuFactory:n}=this.beans,o=this.column,s=o.getProvidedColumnGroup(),r=function(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,ep,"agColumnGroupHeader",t)}(t,Fu(i,{displayName:this.displayName,columnGroup:o,setExpanded:t=>{e.setColumnGroupOpened(s,t,"gridInitializing")},setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)},showColumnMenu:(e,t)=>null===n||void 0===n?void 0:n.showMenuAfterButtonClick(s,e,"columnMenu",t),showColumnMenuAfterMouseClick:(e,t)=>null===n||void 0===n?void 0:n.showMenuAfterMouseEvent(s,e,"columnMenu",t),eGridHeader:this.eGui}));r&&this.comp.setUserCompDetails(r)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=sg(t,this.gos,null,e);if(e.isPadding()){i.push("ag-header-group-cell-no-group");e.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&i.push("ag-header-span-height")}else i.push("ag-header-group-cell-with-group"),null!==t&&void 0!==t&&t.wrapHeaderText&&i.push("ag-header-cell-wrap-text");i.forEach((e=>this.comp.toggleCss(e,!0)))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());i.forEach((t=>{e.addManagedListeners(t,{movingChanged:n})})),n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===hg){const e=this.column,t=!e.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){var t,i;this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some((e=>e.getColDef().suppressMovable||e.getColDef().lockPosition))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}},beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[];return Eh(null,this.beans.colModel.getColTree(),(t=>{Xu(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];Eh(null,t,(e=>{if(Xu(e)){const t=e.getColGroupDef(),n={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(n)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:o,eventSvc:s}=this.beans;if(!i.getColTree().length)return;null===n||void 0===n||n.start();const r=[];e.forEach((e=>{const t=e.groupId,i=e.open,n=this.getProvidedColGroup(t);n&&n.isExpanded()!==i&&(n.setExpanded(i),r.push(n))})),o.refresh(t,!0),r.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:1===r.length?r[0]:void 0,columnGroups:r}),null===n||void 0===n||n.finish()}setColumnGroupOpened(e,t,i){let n;n=Xu(e)?e.getId():e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return Eh(null,this.beans.colModel.getColTree(),(i=>{Xu(i)&&i.getId()===e&&(t=i)})),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),o="After"===t?nh(n):n[0],s="getCol".concat(t);for(;;){const t=this.beans.visibleCols[s](o);if(!t)return null;const n=this.getColGroupAtLevel(t,i);if(n!==e)return n}}getColGroupAtLevel(e,t){let i,n,o=e.getParent();for(;;){if(i=o.getProvidedColumnGroup().getLevel(),n=o.getPaddingLevel(),i+n<=t)break;o=o.getParent()}return o}updateOpenClosedVisibility(){tw(this.beans.visibleCols.getAllTrees(),!1,(e=>{om(e)&&e.calculateDisplayedColumns()}))}getColumnGroup(e,t){if(!e)return null;if(om(e))return e;const i=this.beans.visibleCols.getAllTrees(),n="number"===typeof t;let o=null;return tw(i,!1,(i=>{if(om(i)){const s=i;let r;r=n?e===s.getGroupId()&&t===s.getPartId():e===s.getGroupId(),r&&(o=s)}})),o}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:o,isStandaloneStructure:s}=e,r=this.mapOldGroupsById(o),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const o=o=>{const d=t;t=o;const c=e[d],u=(om(c)?c.getProvidedColumnGroup():c).getOriginalParent();if(null==u){for(let t=d;t<o;t++)a.push(e[t]);return}const h=this.createColumnGroup(u,i,r,n,s);for(let t=d;t<o;t++)h.addChild(e[t]);l.push(h)};for(let i=1;i<e.length;i++){const n=e[i],s=(om(n)?n.getProvidedColumnGroup():n).getOriginalParent(),r=e[t];s!==(om(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&o(i)}t<e.length&&o(e.length)}return s||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,n,o,s,r){const a=o.getUniqueKey(t.groupId||null,null),l=eh(this.beans,t,a),d=new Ju(l,a,!1,i);this.createBean(d);const c=this.findExistingGroup(t,s);c&&s.splice(c.idx,1);const u=null===c||void 0===c?void 0:c.group;u&&d.setExpanded(u.isExpanded());const h=xh(this.beans,l.children,i+1,e,n,o,s,r);return d.setChildren(h),d}balanceColumnTree(e,t,i,n){const o=[];for(let s=0;s<e.length;s++){const r=e[s];if(Xu(r)){const e=r,s=this.balanceColumnTree(e.getChildren(),t+1,i,n);e.setChildren(s),o.push(e)}else{let s,a;for(let e=t;e<i;e++){const t=n.getUniqueKey(null,null),i=eh(this.beans,null,t),o=new Ju(i,t,!0,e);this.createBean(o),a&&a.setChildren([o]),a=o,s||(s=a)}if(s&&a){o.push(s);if(e.some((e=>Xu(e)))){a.setChildren([r]);continue}a.setChildren(e);break}o.push(r)}}return o}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Xu(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const o=e[n];if(Xu(o)){const e=o,n=this.findMaxDepth(e.getChildren(),t+1);i<n&&(i=n)}}return i}balanceTreeForAutoCols(e,t){const i=[];return e.forEach((e=>{let n=e;for(let i=t-1;i>=0;i--){const t=new Ju(null,"FAKE_PATH_".concat(e.getId(),"}_").concat(i),!0,i);this.createBean(t),t.setChildren([n]),n.originalParent=t,n=t}0===t&&(e.originalParent=null),i.push(n)})),i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,i,n,o){const s=e.getGroupId(),r=t.getInstanceIdForKey(s);let a=i[nm(s,r)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),Wl(a)?a.reset():(a=new sm(e,s,r,n),o||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if(om(e)){const n=e;t[e.getUniqueId()]=n,i(n.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),e.parent=t,om(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}}],apiFunctions:{getAllDisplayedColumnGroups:function(e){return e.visibleCols.getAllTrees()},getCenterDisplayedColumnGroups:function(e){return e.visibleCols.treeCenter},getColumnGroup:function(e,t,i){var n,o;return null!==(n=null===(o=e.colGroupSvc)||void 0===o?void 0:o.getColumnGroup(t,i))&&void 0!==n?n:null},getColumnGroupState:function(e){var t,i;return null!==(t=null===(i=e.colGroupSvc)||void 0===i?void 0:i.getColumnGroupState())&&void 0!==t?t:[]},getDisplayNameForColumnGroup:function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},getLeftDisplayedColumnGroups:function(e){return e.visibleCols.treeLeft},getProvidedColumnGroup:function(e,t){var i,n;return null!==(i=null===(n=e.colGroupSvc)||void 0===n?void 0:n.getProvidedColGroup(t))&&void 0!==i?i:null},getRightDisplayedColumnGroups:function(e){return e.visibleCols.treeRight},resetColumnGroupState:function(e){var t;null===(t=e.colGroupSvc)||void 0===t||t.resetColumnGroupState("api")},setColumnGroupOpened:function(e,t,i){var n;null===(n=e.colGroupSvc)||void 0===n||n.setColumnGroupOpened(t,i,"api")},setColumnGroupState:function(e,t){var i;null===(i=e.colGroupSvc)||void 0===i||i.setColumnGroupState(t,"api")}}},ow={tag:"div",cls:"ag-skeleton-container"},sw={moduleName:"CheckboxCellRenderer",version:Pc,userComponents:{agCheckboxCellRenderer:class extends Uh{constructor(){super(wv,[bv]),this.eCheckbox=Wh,this.registerCSS(".ag-checkbox-cell{height:100%}")}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,n=t.getInputElement();n.setAttribute("tabindex","-1"),fd(n,"polite"),this.addManagedListeners(n,{click:e=>{if(Iu(e),t.isDisabled())return;const i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{Iu(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===gg&&!t.isDisabled()){e.eGridCell===iu(i)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t;let i,n=!0;const{value:o,column:s,node:r}=e;if(r.group&&s)if("boolean"===typeof o)i=o;else{const e=s.getColId();e.startsWith(lh)?i=null==o||""===o?void 0:"true"===o:r.aggData&&void 0!==r.aggData[e]?i=null!==o&&void 0!==o?o:void 0:n=!1}else i=null!==o&&void 0!==o?o:void 0;const{eCheckbox:a}=this;if(!n)return void a.setDisplayed(!1);a.setValue(i);const l=null!==(t=e.disabled)&&void 0!==t?t:!(null!==s&&void 0!==s&&s.isCellEditable(r));a.setDisabled(l);const d=this.getLocaleTextFunc(),c=Fd(d,i),u=l?c:"".concat(d("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(c,")");a.setInputAriaLabel(u)}onCheckboxChanged(e){var t,i,n;const{params:o}=this,{column:s,node:r,value:a}=o;null===(t=this.beans)||void 0===t||null===(t=t.editSvc)||void 0===t||t.setEditingCells([{column:s,colId:s.getColId(),rowIndex:r.rowIndex,rowPinned:r.rowPinned,state:"changed",oldValue:a,newValue:a}],{update:!0});const l=r.setDataValue(s,e,"renderer");null===(i=this.beans.editSvc)||void 0===i||i.stopEditing({rowNode:r,column:s},{source:null!==(n=this.beans.editSvc)&&void 0!==n&&n.isBatchEditing()?"ui":"api"}),l||this.updateCheckbox(o)}}}},rw={moduleName:"SkeletonCellRenderer",version:Pc,userComponents:{agSkeletonCellRenderer:class extends Uh{constructor(){super(ow)}init(e){const t="ag-cell-skeleton-renderer-".concat(this.getCompId());this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>md(e.eParentOfValue))),md(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");gd(this.getGui(),t)}setupLoading(e){const t=gc({tag:"div",cls:"ag-skeleton-effect"}),i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width="".concat(e,"%")}this.getGui().appendChild(t);const n=this.getLocaleTextFunc(),o=e.deferRender?n("ariaDeferSkeletonCellLoading","Cell is loading"):n("ariaSkeletonCellLoading","Row data is loading");gd(this.getGui(),o)}refresh(e){return!1}}}};function aw(e,t){if(!e)return;const i=e,n={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||Ql.has(e))return;const o=i[e],s="object"===typeof o&&null!==o&&o.constructor===Object;n[e]=s?aw(o):o})),n}var lw=["dateTimeString","dateString","text","number","boolean","date"];function dw(e,t){const i=u(u({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...vh(e.columnTypes),...vh(t.columnTypes)]),i}function cw(e,t,i){return t?t.baseDataType===e.baseDataType||(_c(46),!1):(_c(45,{parentCellDataType:i}),!1)}function uw(e,t){if(e.valueFormatter)return i=>{var n;if(null!==(n=i.node)&&void 0!==n&&n.group){var o;const t=(null!==(o=i.colDef.pivotValueColumn)&&void 0!==o?o:i.column).getAggFunc();if(t){if("first"===t||"last"===t)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==t){if("number"===typeof i.value)return e.valueFormatter(i);if("object"===typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter(u(u({},i),{},{value:i.value.toNumber()}));if("value"in i.value)return e.valueFormatter(u(u({},i),{},{value:i.value.value}))}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()){var s;if("string"===typeof i.value&&(null===(s=e.dataTypeMatcher)||void 0===s||!s.call(e,i.value)))return}return e.valueFormatter(i)}}function hw(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((i=>{let[n,o]=i;return function(e,t,i,n){if(!t[i])return!1;const o=e[i];return null===o?(t[i]=!1,!1):void 0===n?!!o:o===n}(e,t,n,o)}))}function pw(e,t){const i=_h(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}var gw={moduleName:"DataType",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number:()=>({cellEditor:"agNumberCellEditor"}),boolean:()=>({cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===gg}),date(e){let{formatValue:t}=e;return{cellEditor:"agDateCellEditor",keyCreator:t}},dateString(e){let{formatValue:t}=e;return{cellEditor:"agDateStringCellEditor",keyCreator:t}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object(e){let{formatValue:t,colModel:i,colId:n}=e;return{cellEditorParams:{useFormatter:!0},comparator:(e,o)=>{const s=i.getColDefCol(n),r=null===s||void 0===s?void 0:s.getColDef();if(!s||!r)return 0;const a=null==e?"":t({column:s,node:null,value:e}),l=null==o?"":t({column:s,node:null,value:o});return a===l?0:a>l?1:-1},keyCreator:t}},text:()=>({})}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)}))}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes(),i={},n={},o=e=>t=>{const{column:i,node:n,value:o}=t;let s=i.getColDef().valueFormatter;return s===e.groupSafeValueFormatter&&(s=e.valueFormatter),this.beans.valueSvc.formatValue(i,n,o,s)};for(const h of Object.keys(t)){const e=t[h],s=u(u({},e),{},{groupSafeValueFormatter:uw(e,this.gos)});i[h]=s,n[h]=o(s)}const s=null!==(e=this.gos.get("dataTypeDefinitions"))&&void 0!==e?e:{},r={};for(const u of Object.keys(s)){const e=s[u],a=this.processDataTypeDefinition(e,s,[u],t);a&&(i[u]=a,e.dataTypeMatcher&&(r[u]=e.dataTypeMatcher),n[u]=o(a))}const{valueParser:a,valueFormatter:l}=t.object,{valueParser:d,valueFormatter:c}=i.object;this.hasObjectValueParser=d!==a,this.hasObjectValueFormatter=c!==l,this.formatValueFuncs=n,this.dataTypeDefinitions=i,this.dataTypeMatchers=this.sortKeysInMatchers(r,t)}sortKeysInMatchers(e,t){const i=u({},e);for(const o of lw){var n;delete i[o],i[o]=null!==(n=e[o])&&void 0!==n?n:t[o].dataTypeMatcher}return i}processDataTypeDefinition(e,t,i,n){let o;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=n[s];const r=t[s];if(i&&r&&(i=r),!cw(e,i,s))return;o=dw(i,e)}else{if(i.includes(s))return void _c(44);const r=t[s];if(!cw(e,r,s))return;const a=this.processDataTypeDefinition(r,t,[...i,s],n);if(!a)return;o=dw(a,e)}return u(u({},o),{},{groupSafeValueFormatter:uw(o,this.gos)})}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:o}=t;if(void 0===n&&(n=e.cellDataType),null!=n&&!0!==n||(n=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(o,i)),!n)return void(e.cellDataType=!1);const s=this.dataTypeDefinitions[n];if(s)return e.cellDataType=n,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,s,i),s.columnTypes;_c(47,{cellDataType:n})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.__removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){const{gos:i}=this;if(!Gc(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(hw(t,n))return!1;const o=null===t.type?e.type:t.type;if(o){var s;const e=null!==(s=i.get("columnTypes"))&&void 0!==s?s:{};if(vh(o).some((t=>{const i=e[t.trim()];return i&&hw(i,n)})))return!1}return!hw(e,n)}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=Xl(n,e,t)}else this.initWaitForRowData(t);if(null==i)return;const o=Object.keys(this.dataTypeMatchers).find((e=>this.dataTypeMatchers[e](i)));return null!==o&&void 0!==o?o:"object"}getInitialData(){const e=this.gos.get("rowData");if(null!==e&&void 0!==e&&e.length)return e[0];if(this.initialData)return this.initialData;{var t;const e=null===(t=this.beans.rowModel.rootNode)||void 0===t?void 0:t.allLeafChildren;if(null!==e&&void 0!==e&&e.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[o]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(null===o||void 0===o||o(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&(null===i||void 0===i||i.processResizeOperations()),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},o={};for(const s of Object.keys(this.columnStateUpdatesPendingInference)){const e=this.columnStateUpdatesPendingInference[s],r=this.colModel.getCol(s);if(!r)return;const a=r.getColDef();if(!this.resetColDefIntoCol(r,"cellDataTypeInferred"))return;const l=r.getColDef();if(t&&l.type&&l.type!==a.type){const t=pw(r,e);t.rowGroup&&null==t.rowGroupIndex&&(n[s]=t),t.pivot&&null==t.pivotIndex&&(o[s]=t),i.push(t)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,o)),i.length&&Ah(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:o}=this.beans;return null===n||void 0===n||n.restoreColumnOrder(i,e),null===o||void 0===o||o.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=kh(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}getDateStringTypeDefinition(e){var t;const{dateString:i}=this.dataTypeDefinitions;return e&&null!==(t=this.getDataTypeDefinition(e))&&void 0!==t?t:i}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return"dateTime"===e||"dateTimeString"===e}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null===(t=this.getDataTypeDefinition(e))||void 0===t?void 0:t.baseDataType}checkType(e,t){var i;if(null==t)return!0;const n=null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.dataTypeMatcher;return!n||n(t)}validateColDef(e){const t=e=>_c(48,{property:e});if("object"===e.cellDataType){const{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var t;const i=e.cellDataType;if(!i||"string"!==typeof i)return;const{dataTypeDefinitions:n,beans:o,formatValueFuncs:s}=this,r=n[i];null===(t=o.colFilter)||void 0===t||t.setColDefPropsForDataType(e,r,s[i])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,n){const o=this.formatValueFuncs[t],s=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:n,formatValue:o});Object.assign(e,s)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:e=>Am(e.newValue&&String(e.newValue)),valueFormatter:e=>{var n;return null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?null!==(n=Dm(e.value,i))&&void 0!==n?n:"":t("invalidDate","Invalid Date")},dataTypeMatcher:e=>e instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:e=>{var t;return null!==(t=Am(e))&&void 0!==t?t:void 0},dateFormatter:e=>{var i;return null!==(i=Dm(null!==e&&void 0!==e?e:null,t))&&void 0!==i?i:void 0},valueParser:e=>jm(String(e.newValue))?e.newValue:null,valueFormatter:e=>jm(String(e.value))?String(e.value):"",dataTypeMatcher:e=>"string"===typeof e&&jm(e)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,i;return""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:Number(e.newValue)},valueFormatter:t=>null==t.value?"":"number"!==typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:ql(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,i;return null==e.newValue?e.newValue:""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:u(u({},this.getDateStringTypeDef("dateTimeString")),{},{dataTypeMatcher:e=>"string"===typeof e&&function(e){return jm(e,!0)}(e)}),object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var t;return null!==(t=ql(e.value))&&void 0!==t?t:""}}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}],dependsOn:[sw]},mw={moduleName:"ColumnFlex",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=null!==(e=t.source)&&void 0!==e?e:"flex";null!=t.viewportWidth&&(this.flexViewportWidth=t.viewportWidth);const n=this.flexViewportWidth;if(!n)return[];const{visibleCols:o}=this.beans,s=o.centerCols;let r=-1;if(t.resizingCols){const e=new Set(t.resizingCols);for(let t=s.length-1;t>=0;t--)if(e.has(s[t])){r=t;break}}let a=!1;const l=s.map(((e,t)=>{const i=e.getFlex(),n=null!=i&&i>0&&t>r;return a||(a=n),{col:e,isFlex:n,flex:Math.max(0,null!==i&&void 0!==i?i:0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}}));if(!a)return[];let d=l.length,c=l.reduce(((e,t)=>e+t.flex),0),u=n;const h=(e,t)=>{e.frozenSize=t,e.col.setActualWidth(t,i),u-=t,c-=e.flex,d-=1},p=e=>null!=e.frozenSize;for(const m of l)m.isFlex||h(m,m.initialSize);for(;d>0;){const e=Math.round(c<1?u*c:u);let t,i=0,n=0;for(const r of l){if(p(r))continue;t=r,n+=e*(r.flex/c);const o=n-i,s=Math.round(o);r.targetSize=s,i+=s}t&&(t.targetSize+=e-i);let o=0;for(const r of l){if(p(r))continue;const e=r.targetSize,t=Math.min(Math.max(e,r.min),r.max);o+=t-e,r.violationType=t===e?void 0:t<e?"max":"min",r.targetSize=t}const s=0===o?"all":o>0?"min":"max";for(const r of l)p(r)||"all"!==s&&r.violationType!==s||h(r,r.targetSize)}t.skipSetLeft||o.setLeftValues(i),t.updateBodyWidths&&o.updateBodyWidths();const g=l.filter((e=>e.isFlex&&!e.violationType)).map((e=>e.col));if(t.fireResizedEvent){const e=l.filter((e=>e.initialSize!==e.frozenSize)).map((e=>e.col)),t=l.filter((e=>e.flex)).map((e=>e.col));jh(this.eventSvc,e,!0,i,t)}return g}initCol(e){const{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=null!==t&&void 0!==t?t:null,e.dispatchStateUpdatedEvent("flex")}}]},fw={moduleName:"ColumnApi",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,n){var o,s;const r=e.slice();t?r.sort(((e,t)=>i.indexOf(e)-i.indexOf(t))):i&&r.sort(((e,t)=>n.indexOf(e)-n.indexOf(t)));const a=null===(o=this.rowGroupColsSvc)||void 0===o?void 0:o.columns,l=null===(s=this.pivotColsSvc)||void 0===s?void 0:s.columns;return this.buildColumnDefs(r,a,l)}buildColumnDefs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=[],o={};return e.forEach((e=>{let s=!0,r=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=o[a.getGroupId()];if(t){t.children.push(r),s=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[r],o[e.groupId]=e,r=e,a=a.getOriginalParent()),null!=a&&l===a){s=!1;break}l=a}s&&n.push(r)})),n}createDefFromGroup(e){const t=aw(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=aw(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=!e.isVisible()||void 0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,n}}],apiFunctions:{getColumnDef:function(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null},getDisplayNameForColumn:function(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""},getColumn:function(e,t){return e.colModel.getColDefCol(t)},getColumns:function(e){return e.colModel.getColDefCols()},applyColumnState:function(e,t){return Ah(e,t,"api")},getColumnState:function(e){return Lh(e)},resetColumnState:function(e){!function(e,t){var i,n,o,s;const{colModel:r,autoColSvc:a,selectionColSvc:l,eventSvc:d,gos:c}=e,u=r.getColDefCols();if(null===u||void 0===u||!u.length)return;const h=uh(r.getColDefColTree()),p=[];let g=1e3,m=1e3;const f=e=>{const t=_h(e);Ul(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=g++),Ul(t.pivotIndex)&&t.pivot&&(t.pivotIndex=m++),p.push(t)};null===a||void 0===a||null===(i=a.getColumns())||void 0===i||i.forEach(f),null===l||void 0===l||null===(n=l.getColumns())||void 0===n||n.forEach(f),null===h||void 0===h||h.forEach(f),Ah(e,{state:p},t);const v=null!==(o=null===a||void 0===a?void 0:a.getColumns())&&void 0!==o?o:[];Ah(e,{state:[...null!==(s=null===l||void 0===l?void 0:l.getColumns())&&void 0!==s?s:[],...v,...u].map((e=>({colId:e.colId}))),applyOrder:!0},t),d.dispatchEvent(Fu(c,{type:"columnsReset",source:t}))}(e,"api")},isPinning:function(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()},isPinningLeft:function(e){return e.visibleCols.isPinningLeft()},isPinningRight:function(e){return e.visibleCols.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleCols.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleCols.getColBefore(t)},setColumnsVisible:function(e,t,i){e.colModel.setColsVisible(t,i,"api")},setColumnsPinned:function(e,t,i){var n;null===(n=e.pinnedCols)||void 0===n||n.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.colModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleCols.leftCols},getDisplayedCenterColumns:function(e){return e.visibleCols.centerCols},getDisplayedRightColumns:function(e){return e.visibleCols.rightCols},getAllDisplayedColumns:function(e){return e.visibleCols.allCols},getAllDisplayedVirtualColumns:function(e){return e.colViewport.getViewportColumns()},getColumnDefs:function(e){return e.colModel.getColumnDefs()}}};var vw,bw,ww={moduleName:"CellRendererFunction",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;return class{refresh(){return!1}getGui(){return this.eGui}init(e){const i=t(e),n=typeof i;this.eGui="string"!==n&&"number"!==n&&"boolean"!==n?null!=i?i:gc({tag:"span"}):Zd("<span>"+i+"</span>")}}}}]},yw="object"!==typeof window||!(null!==(Ol=window)&&void 0!==Ol&&null!==(Ol=Ol.document)&&void 0!==Ol&&null!==(Ol=Ol.fonts)&&void 0!==Ol&&Ol.forEach),xw=(e,t,i,n,o,s)=>{if(yw)return;if(oy)return;n&&(e="@layer ".concat(CSS.escape(n)," { ").concat(e," }"));let r=Sw.map.get(t);if(r||(r=[],Sw.map.set(t,r)),r.find((t=>t.css===e)))return;const a=document.createElement("style");s&&a.setAttribute("nonce",s),a.dataset.agGlobalCss=i,a.textContent=e;const l={css:e,el:a,priority:o};let d;for(const c of r){if(c.priority>o)break;d=c}if(d){d.el.insertAdjacentElement("afterend",a);const e=r.indexOf(d);r.splice(e+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},Cw=(e,t,i)=>{xw(':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',e,"core",t,0,i),Array.from(new Set(yp)).sort(((e,t)=>e.moduleName.localeCompare(t.moduleName))).forEach((n=>{var o;return null===(o=n.css)||void 0===o?void 0:o.forEach((o=>xw(o,e,"module-".concat(n.moduleName),t,0,i)))}))},Sw=null!==(Bl=(vw="object"===typeof window?window:{}).agStyleInjectionState)&&void 0!==Bl?Bl:vw.agStyleInjectionState={map:new WeakMap,grids:new Set},Rw=e=>new Ew(e),kw="$default",Pw=0,Ew=class{constructor(e){var t;let{feature:i,params:n,modeParams:o={},css:s,cssImports:r}=e;this.feature=i,this.css=s,this.cssImports=r,this.modeParams=u({[kw]:u(u({},null!==(t=o[kw])&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{})},o)}use(e,t,i){let n=this._inject;if(null==n){let{css:e}=this;if(e){var o;const t="ag-theme-".concat(null!==(o=this.feature)&&void 0!==o?o:"part","-").concat(++Pw);"function"===typeof e&&(e=e()),e=":where(.".concat(t,") {\n").concat(e,"\n}\n");for(const i of null!==(s=this.cssImports)&&void 0!==s?s:[]){var s;e="@import url(".concat(JSON.stringify(i),");\n").concat(e)}n={css:e,class:t}}else n=!1;this._inject=n}return n&&e&&xw(n.css,e,n.class,t,1,i),!!n&&n.class}},Fw=e=>"--ag-".concat(e.replace(/[A-Z]/g,(e=>"-".concat(e))).toLowerCase()),Dw=e=>"var(".concat(Fw(e),")"),Nw=e=>({ref:"accentColor",mix:e}),Mw=e=>({ref:"foregroundColor",mix:e}),Tw=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),jw={ref:"backgroundColor"},Aw={ref:"foregroundColor"},Iw={ref:"accentColor"},Lw={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Mw(.15),chromeBackgroundColor:Tw(.02),browserColorScheme:"light"},_w=u(u({},Lw),{},{textColor:Aw,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:jw,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Iw,rangeSelectionBackgroundColor:Nw(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Nw(.5),rangeHeaderHighlightColor:(bw=.08,{ref:"foregroundColor",mix:bw,onto:"headerBackgroundColor"}),rowNumbersSelectedColor:Nw(.5),rowHoverColor:Nw(.08),columnHoverColor:Nw(.05),selectedRowBackgroundColor:Nw(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:jw,borderWidth:1,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:jw,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:Mw(.7),focusShadow:{spread:3,color:Nw(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Mw(.1),iconButtonActiveColor:Iw,iconButtonActiveBackgroundColor:Nw(.28),iconButtonActiveIndicatorColor:Iw,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Iw,toggleButtonOffBackgroundColor:Tw(.3),toggleButtonSwitchBackgroundColor:jw,toggleButtonSwitchInset:2,menuBorder:{color:Mw(.2)},menuBackgroundColor:Tw(.03),menuTextColor:Tw(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Mw(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Iw},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:Mw(.2)},panelBackgroundColor:jw,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},columnDropCellBackgroundColor:Mw(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Mw(.13)},selectCellBackgroundColor:Mw(.07),selectCellBorder:{color:Mw(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:jw,filterPanelApplyButtonBackgroundColor:Iw,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Aw,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Aw,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Mw(.15),statusBarLabelColor:Aw,statusBarLabelFontWeight:500,statusBarValueColor:Aw,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"backgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"backgroundColor"},pinnedRowTextColor:{ref:"textColor"}}),Ow={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},Bw=u(u({},Ow),{},{cellBatchEditTextColor:"#f3d0b3"}),zw=(()=>Rw({feature:"batchEditStyle",params:Ow,css:".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}"}))(),Vw=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",Hw={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},Gw=(()=>Rw({feature:"buttonStyle",params:u(u({},Hw),{},{buttonBackgroundColor:jw,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Iw}}),css:Vw}))(),Ww=(()=>Rw({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"}))(),Uw=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],qw=(e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}})((e=>{var t;return e=e.toLowerCase(),null!==(t=Uw.find((t=>e.endsWith(t.toLowerCase()))))&&void 0!==t?t:"length"})),Kw=e=>"object"===typeof e&&null!==e&&void 0!==e&&e.ref?Dw(e.ref):"string"===typeof e?e:"number"===typeof e&&String(e),Yw=e=>{if("string"===typeof e)return e;if(e&&"ref"in e){const t=Dw(e.ref);if(null==e.mix)return t;const i=e.onto?Dw(e.onto):"transparent";return"color-mix(in srgb, ".concat(i,", ").concat(t," ").concat(((e,t,i)=>Math.max(t,Math.min(i,e)))(100*e.mix,0,100),"%)")}return!1},Qw=e=>{if("string"===typeof e)return e;if("number"===typeof e)return"".concat(e,"px");if(e&&"calc"in e){const t=e.calc.replace(/ ?[*/+] ?/g," $& ");return"calc(".concat(t.replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,(e=>"-"===e[0]?e:" ".concat(Dw(e)," "))),")")}return!(!e||!("ref"in e))&&Dw(e.ref)},$w=(e,t)=>{var i,n,o;return"string"===typeof e?e:!0===e?$w({},t):!1===e?"columnBorder"===t?$w({color:"transparent"},t):"none":e&&"ref"in e?Dw(e.ref):Xw(null!==(i=e.style)&&void 0!==i?i:"solid")+" "+Qw(null!==(n=e.width)&&void 0!==n?n:{ref:"borderWidth"})+" "+Yw(null!==(o=e.color)&&void 0!==o?o:{ref:"borderColor"})},Xw=Kw,Jw=e=>"string"===typeof e?e.includes(",")?e:Zw(e):e&&"googleFont"in e?Jw(e.googleFont):e&&"ref"in e?Dw(e.ref):!!Array.isArray(e)&&e.map((e=>("object"===typeof e&&"googleFont"in e&&(e=e.googleFont),Zw(e)))).join(", "),Zw=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),ey=Kw,ty=e=>"string"===typeof e?e:e&&"url"in e?"url(".concat(JSON.stringify(e.url),")"):e&&"svg"in e?ty({url:"data:image/svg+xml,".concat(encodeURIComponent(e.svg))}):!(!e||!("ref"in e))&&Dw(e.ref),iy={color:Yw,colorScheme:Kw,length:Qw,scale:Kw,border:$w,borderStyle:Xw,shadow:e=>{var t,i,n,o,s;return"string"===typeof e?e:!1===e?"none":e&&"ref"in e?Dw(e.ref):[Qw(null!==(t=e.offsetX)&&void 0!==t?t:0),Qw(null!==(i=e.offsetY)&&void 0!==i?i:0),Qw(null!==(n=e.radius)&&void 0!==n?n:0),Qw(null!==(o=e.spread)&&void 0!==o?o:0),Yw(null!==(s=e.color)&&void 0!==s?s:{ref:"foregroundColor"})].join(" ")},image:ty,fontFamily:Jw,fontWeight:ey,duration:(e,t)=>"string"===typeof e?e:"number"===typeof e?(e>=10&&Oc(104,{value:e,param:t}),"".concat(e,"s")):!(!e||!("ref"in e))&&Dw(e.ref)},ny=(e,t)=>{const i=qw(e);return iy[i](t,e)},oy=!1,sy=()=>(new ry).withPart(Gw).withPart(Ww).withPart(zw),ry=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.parts=e}withPart(t){return"function"===typeof t&&(t=t()),t instanceof Ew?new e([...this.parts,t]):(Bc(259,{part:t},"Invalid part"),this)}withoutPart(e){return this.withPart(Rw({feature:e}))}withParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kw;return this.withPart(Rw({modeParams:{[t]:e}}))}_startUse(e){let{styleContainer:t,cssLayer:i,nonce:n,loadThemeGoogleFonts:o}=e;if(yw)return;if(oy)return;cy(),Cw(t,i,n);const s=ly(this);if(s.length>0)for(const r of s)o&&hy(r,n);for(const r of this.parts)r.use(t,i,n)}_getCssClass(){var e;return oy?"ag-theme-quartz":null!==(e=this._cssClassCache)&&void 0!==e?e:this._cssClassCache=ay(this.parts).map((e=>e.use(void 0,void 0,void 0))).filter(Boolean).join(" ")}_getModeParams(){let e=this._paramsCache;if(!e){const i={[kw]:u({},_w)};for(const e of ay(this.parts))for(const n of Object.keys(e.modeParams)){const o=e.modeParams[n];if(o){var t;const e=null!==(t=i[n])&&void 0!==t?t:i[n]={},s=new Set;for(const t of Object.keys(o)){const i=o[t];void 0!==i&&(e[t]=i,s.add(t))}if(n===kw)for(const t of Object.keys(i)){const e=i[t];if(t!==kw)for(const t of s)delete e[t]}}}this._paramsCache=e=i}return e}_getPerGridCss(e){const t="##SELECTOR##";let i=this._paramsCssCache;if(!i){let e="",n="";const o=this._getModeParams();for(const t of Object.keys(o)){const i=o[t];if(t!==kw){const i="object"===typeof CSS?CSS.escape(t):t,o=':where([data-ag-theme-mode="'.concat(i,'"]) & {\n');e+=o,n+=o}for(const t of Object.keys(i).sort()){const o=i[t],s=ny(t,o);if(!1===s)Oc(107,{key:t,value:o});else{const i=Fw(t),o=i.replace("--ag-","--ag-inherited-");e+="\t".concat(i,": var(").concat(o,", ").concat(s,");\n"),n+="\t".concat(o,": var(").concat(i,");\n")}}t!==kw&&(e+="}\n",n+="}\n")}let s="".concat(t," {\n").concat(e,"}\n");s+=":has(> ".concat(t,"):not(").concat(t,") {\n").concat(n,"}\n"),this._paramsCssCache=i=s}return i.replaceAll(t,":where(.".concat(e,")"))}},ay=e=>{const t=new Map;for(const n of e)t.set(n.feature,n);const i=[];for(const n of e)n.feature&&t.get(n.feature)!==n||i.push(n);return i},ly=e=>{const t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{const i=null===e||void 0===e?void 0:e.googleFont;"string"===typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap((e=>Object.values(e))).forEach(i),Array.from(t).sort()},dy=!1,cy=()=>{if(!dy){dy=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},uy=new Set,hy=async(e,t)=>{uy.add(e);const i="@import url('https://".concat(py,"/css2?family=").concat(encodeURIComponent(e),":wght@100;200;300;400;500;600;700;800;900&display=swap');\n");xw(i,document.head,"googleFont:".concat(e),void 0,0,t)},py="fonts.googleapis.com",gy=(()=>Rw({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:jw,checkboxUncheckedBorderColor:Tw(.3),checkboxCheckedBackgroundColor:Iw,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:jw,checkboxIndeterminateBackgroundColor:Tw(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:jw,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:'.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'}))(),my=()=>u(u(u({},Lw),Bw),{},{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Tw(.05),rowHoverColor:Nw(.15),selectedRowBackgroundColor:Nw(.2),menuBackgroundColor:Tw(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Aw,findMatchColor:jw,findActiveMatchColor:jw,checkboxUncheckedBorderColor:Tw(.4),toggleButtonOffBackgroundColor:Tw(.4),rowBatchEditBackgroundColor:Tw(.1)}),fy=()=>u(u({},my()),{},{backgroundColor:"#1f2836"}),vy=(()=>Rw({feature:"colorScheme",params:Lw,modeParams:{light:Lw,dark:my(),"dark-blue":fy()}}))(),by={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},wy={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},yy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;const i=wy[e];if(i)return i;const n=by[e];if(!n)throw new Error("Missing icon data for ".concat(e));return'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="'.concat(t,'" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>')+n+"</svg>"},xy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Rw({feature:"iconSet",css:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(const i of[...Object.keys(by),...Object.keys(wy)]){const n=yy(i,e.strokeWidth);t+=".ag-icon-".concat(i,"::before { mask-image: url('data:image/svg+xml,").concat(encodeURIComponent(n),"'); }\n")}return t}(e)})},Cy=xy(),Sy=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',Ry={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},ky=(()=>Rw({feature:"inputStyle",params:u(u({},Ry),{},{inputBackgroundColor:jw,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Iw},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Tw(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>Sy+".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}"}))(),Py='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',Ey={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},Fy=(()=>Rw({feature:"tabStyle",params:u(u({},Ey),{},{tabBarBorder:!0,tabBarBackgroundColor:Mw(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:jw}),css:Py}))(),Dy=(()=>sy().withPart(gy).withPart(vy).withPart(Cy).withPart(Fy).withPart(ky).withPart(Ww).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}))(),Ny={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},My={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},Ty={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},jy={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},Ay={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Iy={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Ly={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},_y={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0},Oy=0,By=15538;function zy(e,t,i){const n=e.visibleCols.headerGroupRowCount;if(i>=n)return{column:t,headerRowIndex:i};let o=t.getParent();for(;o&&o.getProvidedColumnGroup().getLevel()>i;)o=o.getParent();const s=t.isSpanHeaderHeight();return!o||s&&o.isPadding()?{column:t,headerRowIndex:n}:{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel()}}var Vy=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Hy=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],Gy=Hy.reduce(((e,t)=>{var i;return e[t]=!(i=t)||i.length<2?i:"on"+i[0].toUpperCase()+i.substring(1),e}),{}),Wy=(e,t)=>({tag:"span",ref:"eSort".concat(e),cls:"ag-sort-indicator-icon ag-sort-".concat(t," ag-hidden"),attrs:{"aria-hidden":"true"}}),Uy={tag:"span",cls:"ag-sort-indicator-container",children:[Wy("Order","order"),Wy("Asc","ascending-icon"),Wy("Desc","descending-icon"),Wy("Mixed","mixed-icon"),Wy("None","none-icon")]},qy=class extends Uh{constructor(e){super(),this.eSortOrder=Wh,this.eSortAsc=Wh,this.eSortDesc=Wh,this.eSortMixed=Wh,this.eSortNone=Wh,e||this.setTemplate(Uy)}attachCustomElements(e,t,i,n,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=o}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const n=hv(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:n,gos:o,beans:s}=this,r=s.sortSvc.getDisplaySortForColumn(n);if(e){Od(e,"asc"===r,{skipAriaHidden:!0})}if(t){Od(t,"desc"===r,{skipAriaHidden:!0})}if(i){Od(i,!(!n.getColDef().unSortIcon&&!o.get("unSortIcon"))&&(null===r||void 0===r),{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const n=t.getColDef().showRowGroup;lu(i)&&n&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){Od(e,"mixed"===t.sortSvc.getDisplaySortForColumn(i),{skipAriaHidden:!0})}}updateSortOrder(){var e;const{eSortOrder:t,column:i,beans:{sortSvc:n}}=this;if(!t)return;const o=n.getColumnsWithSortingOrdered(),s=null!==(e=n.getDisplaySortIndexForColumn(i))&&void 0!==e?e:-1,r=o.some((e=>{var t;return null!==(t=n.getDisplaySortIndexForColumn(e))&&void 0!==t&&t}));Od(t,s>=0&&r,{skipAriaHidden:!0}),s>=0?t.textContent=(s+1).toString():Qd(t)}},Ky={selector:"AG-SORT-INDICATOR",component:qy},Yy=["asc","desc",null],Qy={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},$y={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:e=>{let{cellEditor:t,editable:i}=e;return i?"string"===typeof t&&null!==(n=Qy[t])&&void 0!==n?n:"CustomEditor":null;var n},cellRenderer:e=>{let{cellRenderer:t}=e;return"string"!==typeof t?null:Qy[t]},cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:e=>{let{editable:t,cellEditor:i}=e;return t&&!i?"TextEditor":null},enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:e=>{let{filter:t}=e;return t&&"string"!==typeof t&&"boolean"!==typeof t?"CustomFilter":"string"===typeof t&&null!==(i=Qy[t])&&void 0!==i?i:"ColumnFilter";var i},floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var t;const i=["columnsMenuTab","generalMenuTab"];return null!==(t=e.menuTabs)&&void 0!==t&&t.some((e=>i.includes(e)))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",spanRows:"CellSpan"},Xy={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0},Jy=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],Zy=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers"],ex=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],tx=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],ix=["theme","rowSelection"],nx=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],ox=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows"],sx=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"];function rx(e,t,i){return"number"===typeof t||null==t?null==t||t>=i?null:"".concat(e,": value should be greater than or equal to ").concat(i):"".concat(e,": value should be a number")}var ax={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"SharedRowGrouping",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},lx=()=>{const e={autoSizePadding:{validate(e){let{autoSizePadding:t}=e;return rx("autoSizePadding",t,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate(e){let{cacheBlockSize:t}=e;return rx("cacheBlockSize",t,1)}},cacheOverflowSize:{validate(e){let{cacheOverflowSize:t}=e;return rx("cacheOverflowSize",t,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:e=>{const t=e.domLayout,i=["autoHeight","normal","print"];return t&&!i.includes(t)?"domLayout must be one of [".concat(i.join(),"], currently it's ").concat(t):null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate(e){let{enableRowPinning:t,pinnedTopRowData:i,pinnedBottomRowData:n}=e;return t&&(i||n)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate(e){let{enableRowPinning:t,isRowPinnable:i,pinnedTopRowData:n,pinnedBottomRowData:o}=e;return i&&(n||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!t&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate(e){let{enableRowPinning:t,isRowPinned:i,pinnedTopRowData:n,pinnedBottomRowData:o}=e;return i&&(n||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!t&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:e=>{let{icons:t}=e;if(t){if(t.smallDown)return Vc(262);if(t.smallLeft)return Vc(263);if(t.smallRight)return Vc(264)}return null}},infiniteInitialRowCount:{validate(e){let{infiniteInitialRowCount:t}=e;return rx("infiniteInitialRowCount",t,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},keepDetailRowsCount:{validate(e){let{keepDetailRowsCount:t}=e;return rx("keepDetailRowsCount",t,1)}},paginationPageSize:{validate(e){let{paginationPageSize:t}=e;return rx("paginationPageSize",t,1)}},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"===typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate(e){let{rowBuffer:t}=e;return rx("rowBuffer",t,0)}},rowClass:{validate:e=>"function"===typeof e.rowClass?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate(e){let{rowSelection:t}=e;return t&&"string"===typeof t?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':t&&"object"!==typeof t?"Expected `RowSelectionOptions` object for the `rowSelection` property.":t&&"multiRow"!==t.mode&&"singleRow"!==t.mode?'Selection mode "'.concat(t.mode,"\" is invalid. Use one of 'singleRow' or 'multiRow'."):null}},rowStyle:{validate:e=>{const t=e.rowStyle;return t&&"function"===typeof t?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate(e){let{serverSideInitialRowCount:t}=e;return rx("serverSideInitialRowCount",t,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>!Yy.includes(e)));if(e.length>0)return"sortingOrder must be an array with elements from [".concat(Yy.map(jc).join(),"], currently it includes [").concat(e.map(jc).join(),"]")}else if(!Array.isArray(t)||t.length<=0)return"sortingOrder must be an array with at least one element, currently it's ".concat(t);return null}},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:e=>{var t;const i=null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:t,treeDataParentIdField:i,getDataPath:n,getRowId:o}=e;if(!t&&!i&&!n)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(t){if(n)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(i)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(i){if(!o)return"getRowId callback not provided, tree data with parent id cannot be built.";if(n)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const t="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(i," row model.");return e.isServerSideGroup&&e.getServerSideGroupKey?null:t}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate(e){let{viewportRowModelBufferSize:t}=e;return rx("viewportRowModelBufferSize",t,0)}},viewportRowModelPageSize:{validate(e){let{viewportRowModelPageSize:t}=e;return rx("viewportRowModelPageSize",t,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate(e){let{autoGroupColumnDef:t,showOpenedGroup:i}=e;return null!==t&&void 0!==t&&t.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":null!==t&&void 0!==t&&t.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:e=>{const t=e.renderingMode,i=["default","legacy"];return t&&!i.includes(t)?"renderingMode must be one of [".concat(i.join(),"], currently it's ").concat(t):null}}},t={};return ox.forEach((e=>{t[e]={expectedType:"boolean"}})),tx.forEach((e=>{t[e]={expectedType:"number"}})),$l(t,e),t},dx=0,cx=0;function ux(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var hx=ux(!0),px=ux(!1),gx={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},mx={moduleName:"ColumnHeaderComp",version:Pc,userComponents:{agColumnHeader:class extends Uh{constructor(){super(...arguments),this.eFilter=Wh,this.eFilterButton=Wh,this.eSortIndicator=Wh,this.eMenu=Wh,this.eLabel=Wh,this.eText=Wh,this.eSortOrder=Wh,this.eSortAsc=Wh,this.eSortDesc=Wh,this.eSortMixed=Wh,this.eSortNone=Wh,this.isLoadingInnerComponent=!1}refresh(e){var t;const i=this.params;if(this.params=e,this.workOutTemplate(e,!(null===(t=this.beans)||void 0===t||!t.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||null!=this.currentSuppressMenuHide&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||i.enableFilterButton!=e.enableFilterButton||i.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){var n,o;const t=u({},e);$l(t,e.innerHeaderComponentParams),null===(n=(o=this.innerHeaderComponent).refresh)||void 0===n||n.call(o,t)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const i=e.template;return i?null!==i&&void 0!==i&&i.trim?i.trim():i:t?hx:px}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:n,userCompFactory:o}=this.beans,s=null===t||void 0===t?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!s),this.setTemplate(this.currentTemplate,s?[s]:void 0),null===i||void 0===i||i.setupForHeader(this),this.setMenu(),this.setupSort(),null===n||void 0===n||n.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(o,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,Jh,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then((e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText&&this.eText.appendChild(e.getGui())):this.destroyBean(e))})))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent||(this.eText.textContent=Wu(t))}addInIcon(e,t,i){const n=hv(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){var e;return this.params.enableMenu&&!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return $d(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:i}=this,n=Eu(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const o=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=o,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(o)}toggleMenuAlwaysShow(e){var t;null===(t=this.eMenu)||void 0===t||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,(()=>{t||this.toggleMenuAlwaysShow(!1)}))}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:o,eFilterButton:s}=this,r=t.column,a=Eu(i);var l,d;if(e&&!a){if(null!==(l=n.menuSvc)&&void 0!==l&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(null!==(d=null!==s&&void 0!==s?s:o)&&void 0!==d?d:this.getGui()),!0}else if(t.enableMenu){var c;return this.showColumnMenu(null!==(c=null!==o&&void 0!==o?o:s)&&void 0!==c?c:this.getGui()),!0}return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:i,eSortAsc:n,eSortDesc:o,eSortMixed:s,eSortNone:r}=this;t.attachCustomElements(i,n,o,s,r)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterIcon,e,(()=>{const i=t.column.isFilterActive();Od(e,i,{skipAriaHidden:!0})}),"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,n){if(!e)return $d(t),!1;const o=this.params.column;return this.addInIcon(n,t,o),this.addManagedListeners(o,{filterChanged:i}),i(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t;const{eFilterButton:i,eMenu:n}=this;var o;return e?null!==(o=null!==i&&void 0!==i?i:n)&&void 0!==o?o:this.getGui():null!==(t=null!==n&&void 0!==n?n:i)&&void 0!==t?t:this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}}},icons:{menu:"menu",menuAlt:"menu-alt"}},fx={moduleName:"ColumnGroupHeaderComp",version:Pc,userComponents:{agColumnGroupHeader:class extends Uh{constructor(){super(gx),this.agOpened=Wh,this.agClosed=Wh,this.agLabel=Wh,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),null===i||void 0===i||i.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&_c(89)}workOutInnerHeaderGroupComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,Zh,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then((e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))})))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const o=e=>{if(Lu(e))return;const t=!i.isExpanded();n.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,o),this.addTouchAndClickListeners(n,e,o);const s=e=>{Iu(e)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:o}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,i){var n;null===(n=e.touchSvc)||void 0===n||n.setupForHeaderGroupElement(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();Od(e,n),Od(t,!n)}else Od(e,!1),Od(t,!1)}addInIcon(e,t){const i=hv(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;return Od(e,!1),void Od(t,!1)}}setupLabel(e){var t;const{displayName:i,columnGroup:n}=e,o=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Wl(i)&&!o&&(this.agLabel.textContent=Wu(i)),this.toggleCss("ag-sticky-label",!(null!==(t=n.getColGroupDef())&&void 0!==t&&t.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},vx={moduleName:"AnimationFrame",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,0===e&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){!1===this.active&&_c(92)}createTask(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.verify();let s=i;n&&this.batchFrameworkComps&&(s="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:o};this.addTaskToList(this[s],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.deferred!==i.deferred?e.deferred?-1:1:e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:i,f1:n,destroyTasks:o,beans:s}=this,{ctrlsSvc:r,frameworkOverrides:a}=s,l=t.list,d=i.list,c=n.list,u=Date.now();let h=0;const p=e<=0,g=r.getScrollFeature();for(;p||h<e;){if(!g.scrollGridIfNeeded()){let s;if(l.length)this.sortTaskList(t),s=l.pop().task;else if(d.length)this.sortTaskList(i),s=d.pop().task;else if(c.length)a.wrapOutgoing((()=>{for(;p||h<e;){if(g.scrollGridIfNeeded())break;if(!c.length)break;this.sortTaskList(n),s=c.pop().task,s(),h=Date.now()-u}})),s=()=>{};else{if(!o.length)break;s=o.pop()}s()}h=Date.now()-u}l.length||d.length||c.length||o.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);cc(this.beans,e)}isQueueEmpty(){return!this.ticking}}]},bx={moduleName:"Touch",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Td())return;this.mockContextMenu(e,e.element,((t,i,n)=>{var o,s;const{rowCtrl:r,cellCtrl:a}=e.getControlsForEventTarget(null!==(o=null===n||void 0===n?void 0:n.target)&&void 0!==o?o:null);null!==a&&void 0!==a&&a.column&&a.dispatchCellContextMenuEvent(null!==n&&void 0!==n?n:null),null===(s=this.beans.contextMenuSvc)||void 0===s||s.handleContextMenuMouseEvent(void 0,n,r,a)}))}handleCellDoubleClick(e,t){return!!(()=>{if(!Td()||_u("dblclick"))return!1;const t=Date.now(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:i,menuSvc:n}=this.beans;if(t.get("suppressTouch"))return;const{params:o,eMenu:s,eFilterButton:r}=e,a=new rb(e.getGui(),!0),l=e.shouldSuppressMenuHide(),d=l&&Wl(s)&&o.enableMenu,c=d?new rb(s,!0):a;if(o.enableMenu||null!==n&&void 0!==n&&n.isHeaderContextMenuEnabled(o.column)){const t=d?"tap":"longTap",i=e=>o.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(c,{[t]:i})}if(o.enableSorting){const t=e=>{const t=e.touchStart.target;l&&(null!==s&&void 0!==s&&s.contains(t)||null!==r&&void 0!==r&&r.contains(t))||null===i||void 0===i||i.progressSort(o.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:t})}if(o.enableFilterButton&&r){const t=new rb(r,!0);e.addManagedListeners(t,{tap:()=>o.showFilter(r)}),e.addDestroyFunc((()=>t.destroy()))}e.addDestroyFunc((()=>a.destroy())),d&&e.addDestroyFunc((()=>c.destroy()))}setupForHeaderGroup(e){var t;const i=e.params;if(null!==(t=this.beans.menuSvc)&&void 0!==t&&t.isHeaderContextMenuEnabled(i.columnGroup.getProvidedColumnGroup())){const t=new rb(i.eGridHeader,!0),n=e=>i.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(t,{longTap:n}),e.addDestroyFunc((()=>t.destroy()))}}setupForHeaderGroupElement(e,t,i){const n=new rb(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc((()=>n.destroy()))}mockContextMenu(e,t,i){if(!Td())return;const n=new rb(t);e.addManagedListeners(n,{longTap:e=>{em(this.gos,e.touchEvent)&&i(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc((()=>n.destroy()))}}]};function wx(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var yx={moduleName:"KeyboardNavigation",version:Pc,beans:[class extends Vu{constructor(){super(),this.beanName="navigation",this.onPageDown=Rc(this.onPageDown,100),this.onPageUp=Rc(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,n=e.altKey,o=e.ctrlKey||e.metaKey,s=!!this.beans.rangeSvc&&e.shiftKey,r=function(e,t){var i,n;return null!==(i=null===(n=Qg(e,t.target))||void 0===n?void 0:n.getFocusedCellPosition())&&void 0!==i?i:null}(this.gos,e);let a=!1;switch(i){case Sg:case Rg:o||n||(this.onHomeOrEndKey(i),a=!0);break;case mg:case vg:case fg:case bg:if(!r)return!1;!o||n||s||(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case Cg:case xg:o||n||(a=this.handlePageUpDown(i,r,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===xg?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){let{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:o,focusColumn:s,isAsync:r,rowPinned:a}=e;const{scrollFeature:l}=this.gridBodyCon;Wl(n)&&!n.isPinned()&&l.ensureColumnVisible(n),Wl(t)&&l.ensureIndexVisible(t,i),r||l.ensureIndexVisible(o);const{focusSvc:d,rangeSvc:c}=this.beans;d.setFocusedCell({rowIndex:o,column:s,rowPinned:a,forceBrowserFocus:!0}),null===c||void 0===c||c.setRangeToCell({rowIndex:o,rowPinned:a,column:s})}onPageDown(e){const t=this.beans,i=wx(t),n=this.getViewportHeight(),{pageBounds:o,rowModel:s,rowAutoHeight:r}=t,a=o.getPixelOffset(),l=i.top+n,d=s.getRowIndexAtPixel(l+a);null!==r&&void 0!==r&&r.active?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)}onPageUp(e){const t=this.beans,i=wx(t),{pageBounds:n,rowModel:o,rowAutoHeight:s}=t,r=n.getPixelOffset(),a=i.top,l=o.getRowIndexAtPixel(a+r);null!==s&&void 0!==s&&s.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pageBounds:n,rowModel:o}=this.beans,s=this.getViewportHeight(),r=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),d=o.getRow(e.rowIndex),c=i?(null===d||void 0===d?void 0:d.rowHeight)-s-l:s-l,u=(null===d||void 0===d?void 0:d.rowTop)+c;let h,p=o.getRowIndexAtPixel(u+l);if(p===e.rowIndex){const n=i?-1:1;t=p=e.rowIndex+n}i?(h="bottom",p<r&&(p=r),t<r&&(t=r)):(h="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(o.getRow(p))&&(t=p,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),{pageBounds:n,rowModel:o}=this.beans,s=n.getLastRow();let r=0,a=e.rowIndex;for(;a>=0&&a<=s;){const e=o.getRow(a);if(e){var l;const t=null!==(l=e.rowHeight)&&void 0!==l?l:0;if(r+t>i)break;r+=t}a+=t}return Math.max(0,Math.min(a,s))}getViewportHeight(){const e=this.beans,t=wx(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"===typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:n,rowPinned:o}=i,s=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s,rowPinned:o})}onHomeOrEndKey(e){const t=e===Sg,{visibleCols:i,pageBounds:n,rowModel:o}=this.beans,s=i.allCols,r=t?n.getFirstRow():n.getLastRow(),a=o.getRow(r);if(!a)return;const l=(t?s:[...s].reverse()).find((e=>!e.isSuppressNavigable(a)));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),o=this.beans,{ctrlsSvc:s,pageBounds:r,focusSvc:a,gos:l}=o;if(!1===n)if(i){const{rowIndex:i,rowPinned:n}=e.getRowPosition();(n?0===i:i===r.getFirstRow())&&(0===l.get("headerHeight")||zg(o)?Hg(o,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Xg&&e.focusCell(!0),(!i&&a.focusOverlay(!1)||Hg(o,i))&&t.preventDefault();else n?t.preventDefault():null===n&&s.get("gridCtrl").allowFocusForNextCoreContainer(i)}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:o}=i,s=n.getFocusedCell();if(!s)return!1;let r=_p(i,s);return!!(r||(r=o.getRowByPosition(s),r&&r.isFullWidth()))&&!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,i){var n;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";const{editSvc:s,focusSvc:r}=this.beans;let a;const l=e instanceof Xg?e:null===(n=e.getAllCellCtrls())||void 0===n?void 0:n[0];return a=null!==s&&void 0!==s&&s.isEditing()?null===s||void 0===s?void 0:s.moveToNextCell(l,t,i,o):this.moveToNextCellNotEditing(e,t,i),null===a?a:a||!!r.focusedHeader}moveToNextCellNotEditing(e,t,i){const n=this.beans.visibleCols.allCols;let o;if(e instanceof lf){if(o=u(u({},e.getRowPosition()),{},{column:t?n[0]:nh(n)}),this.gos.get("embedFullWidthRows")&&i){const t=e.findFullWidthInfoForEvent(i);t&&(o.column=t.column)}}else o=e.getFocusedCellPosition();const s=this.findNextCellToFocusOn(o,{backwards:t,startEditing:!1});if(!1===s)return null;if(s instanceof Xg)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s,t);return Wl(s)}findNextCellToFocusOn(e,t){let{backwards:i,startEditing:n,skipToNextEditableCell:o}=t,s=e;const r=this.beans,{cellNavigation:a,gos:l,focusSvc:d,rowRenderer:c,rangeSvc:h}=r;for(;;){e!==s&&(e=s),i||(s=this.getLastCellOfColSpan(s)),s=a.getNextTabbedCell(s,i);const t=l.getCallback("tabToNextCell");if(Wl(t)){const o=t({backwards:i,editing:n,previousCellPosition:e,nextCellPosition:s||null});if(!0===o)s=e;else{if(!1===o)return!1;s={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const e=Hf(r);return d.focusHeaderPosition({headerPosition:{headerRowIndex:e+s.rowIndex,column:s.column},fromCell:!0}),null}const g="fullRow"===l.get("editType");if(n&&(!g||o)){if(!this.isCellEditable(s))continue}this.ensureCellVisible(s);const m=_p(r,s);if(!m){var p;const e=c.getRowByPosition(s);if(!e||!e.isFullWidth()||n)continue;return u(u({},e.getRowPosition()),{},{column:null===(p=s)||void 0===p?void 0:p.column})}if(!a.isSuppressNavigable(m.column,m.rowNode))return m.setFocusedCellPosition(s),null===h||void 0===h||h.setRangeToCell(s),m}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell(e){let{rowIndex:t,rowPinned:i}=e;const{pinnedRowModel:n,rowModel:o}=this.beans;return"top"===i?null===n||void 0===n?void 0:n.getPinnedTopRow(t):"bottom"===i?null===n||void 0===n?void 0:n.getPinnedBottomRow(t):o.getRow(t)}navigateToNextCell(e,t,i,n){let o=i,s=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:d}=r;for(;o&&(o===i||!this.isValidNavigateCell(o));)d.get("enableRtl")?t===mg&&(o=this.getLastCellOfColSpan(o)):t===vg&&(o=this.getLastCellOfColSpan(o)),o=a.getNextCellToFocus(t,o),s=Ul(o);if(s&&e&&e.key===fg&&(o={rowIndex:-1,rowPinned:null,column:i.column}),n){const n=d.getCallback("navigateToNextCell");if(Wl(n)){const s=n({key:t,previousCellPosition:i,nextCellPosition:o||null,event:e});o=Wl(s)?{rowPinned:s.rowPinned,rowIndex:s.rowIndex,column:s.column}:null}}if(!o)return;if(o.rowIndex<0){const t=Hf(r);return void l.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const c=this.getNormalisedPosition(o);c?this.focusPosition(c):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){var t;if(!(null===(t=this.beans.spannedRowRenderer)||void 0===t||!t.getCellByPosition(e)))return e;this.ensureCellVisible(e);const i=_p(this.beans,e);return i?(e=i.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:o,eventSvc:s}=this.beans,r=i.allCols,a=n.getRowByPosition(e);if(!a||!a.isFullWidth())return!1;const l=o.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?nh(r):r[0])};this.focusPosition(d);const c=null==t?null!=l&&function(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(Wl(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}(d,l):t;return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:c}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null===i||void 0===i||i.setRangeToCell(e)}isValidNavigateCell(e){return!!Lp(this.beans,e)}getLastCellOfColSpan(e){const t=_p(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:nh(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=au(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&(null===i||void 0===i?void 0:i.sticky),{scrollFeature:o}=this.gridBodyCon;!n&&Ul(e.rowPinned)&&o.ensureIndexVisible(e.rowIndex),e.column.isPinned()||o.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}},class extends Vu{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===fg,n=e===bg,o=e===mg;let s,r;const{pageBounds:a,gos:l,visibleCols:d,pinnedRowModel:c}=this.beans,{rowPinned:u}=t;if(i||n)r=u&&c?i?0:"top"===u?c.getPinnedTopRowCount()-1:c.getPinnedBottomRowCount()-1:i?a.getFirstRow():a.getLastRow(),s=t.column;else{const e=l.get("enableRtl");r=t.rowIndex;s=(o!==e?d.allCols:[...d.allCols].reverse()).find((e=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:e})))}return s?{rowIndex:r,rowPinned:u,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case fg:i=this.getCellAbove(i);break;case bg:i=this.getCellBelow(i);break;case vg:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case mg:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,_c(8,{key:e})}n=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:o}=this.beans;switch(e.rowPinned){case"top":i=null===n||void 0===n?void 0:n.getPinnedTopRow(e.rowIndex);break;case"bottom":i=null===n||void 0===n?void 0:n.getPinnedBottomRow(e.rowIndex);break;default:i=o.getRow(e.rowIndex)}if(!i)return!1;return!this.isSuppressNavigable(t,i)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var t,i;if(!e)return null;const n=null!==(t=null===(i=this.rowSpanSvc)||void 0===i?void 0:i.getCellEnd(e))&&void 0!==t?t:e,o=Bp(this.beans,n);return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null}getCellAbove(e){var t,i;if(!e)return null;const n=null!==(t=null===(i=this.rowSpanSvc)||void 0===i?void 0:i.getCellStart(e))&&void 0!==t?t:e,o=Op(this.beans,{rowIndex:n.rowIndex,rowPinned:n.rowPinned});return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let o=e.rowIndex,s=e.rowPinned,r=t.getColAfter(e.column);if(!r){var a;r=n[0];const t=Bp(this.beans,e);if(Ul(t))return null;if(!t.rowPinned&&null!==(a=null===i||void 0===i?void 0:i.isRowInPage(t.rowIndex))&&void 0!==a&&!a)return null;o=t?t.rowIndex:null,s=t?t.rowPinned:null}return{rowIndex:o,column:r,rowPinned:s}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:i,pagination:n}=t,o=i.allCols;let s=e.rowIndex,r=e.rowPinned,a=i.getColBefore(e.column);if(!a){var l;a=nh(o);const i=Op(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Ul(i))return null;if(!i.rowPinned&&null!==(l=null===n||void 0===n?void 0:n.isRowInPage(i.rowIndex))&&void 0!==l&&!l)return null;s=i?i.rowIndex:null,r=i?i.rowPinned:null}return{rowIndex:s,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if("boolean"===typeof i)return i;if("function"===typeof i){return i(e.createColumnFunctionCallbackParams(t))}return!1}},class extends Vu{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}));const t=Zc(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:o,ctrlsSvc:s}=this.beans;var r;"string"===typeof e?(i=n.getCol(e),i||(i=null!==(r=null===o||void 0===o?void 0:o.getColumnGroup(e))&&void 0!==r?r:null)):i=e;if(!i)return null;const a=s.getHeaderRowContainerCtrl(),l="filter"===nh((null===a||void 0===a?void 0:a.getAllCtrls())||[]).type,d=Hf(this.beans)-1;let c=-1,u=i;for(;u;)c++,u=u.getParent();let h=c;return t&&l&&h===d-1&&h++,-1===h?null:{headerRowIndex:h,column:i}}navigateVertically(e,t){const{focusSvc:i,visibleCols:n}=this.beans,{focusedHeader:o}=i;if(!o)return!1;const{headerRowIndex:s}=o,r=o.column,a=Hf(this.beans),l=this.getHeaderRowType(s),d=n.headerGroupRowCount;let{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:h}="UP"===e?function(e,t,i){const n=i-1;if("filter"!==e){const e=t instanceof $u&&t.isSpanHeaderHeight();let i=t.getParent();for(;i&&(i.getProvidedColumnGroup().getLevel()>n||e&&i.isPadding());)i=i.getParent();if(i)return e?{column:i,headerRowIndex:i.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:n}:{column:i,headerRowIndex:n,headerRowIndexWithoutSpan:n}}return{column:t,headerRowIndex:n,headerRowIndexWithoutSpan:n}}(l,r,s):function(e,t,i){const n=t+1,o={column:e,headerRowIndex:n,headerRowIndexWithoutSpan:n};if(e instanceof sm){if(n>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:n};let t=e.getDisplayedChildren()[0];if(t instanceof sm&&t.isPadding()){const e=t.getDisplayedLeafColumns()[0];e.isSpanHeaderHeight()&&(t=e)}o.column=t;t instanceof $u&&t.isSpanHeaderHeight()&&(o.headerRowIndex=i,o.headerRowIndexWithoutSpan=n)}return o}(r,s,d),p=!1;return c<0&&(c=0,u=r,p=!0),c>=a?(c=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==h&&(this.currentHeaderRowWithoutSpan=h),!(!p&&!u)&&i.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:t})}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const{focusSvc:n,gos:o}=this.beans,s=u({},n.focusedHeader);let r,a;-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,"LEFT"===e!==o.get("enableRtl")?(a="Before",r=this.findHeader(s,a)):(a="After",r=this.findHeader(s,a));const l=o.getCallback("tabToNextHeader");if(t&&l){const e=n.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(e){const{headerRowIndex:e}=n.focusedHeader||{};null!=e&&e!=s.headerRowIndex&&(this.currentHeaderRowWithoutSpan=e)}return e}return r||!t?n.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const n=this.beans,o=e.headerRowIndex;let s,r=null;const a=Hf(n),l=this.beans.visibleCols.allCols;if("Before"===t){if(o<=0)return!1;r=nh(l),s=o-1,this.currentHeaderRowWithoutSpan-=1}else r=l[0],s=o+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:d,headerRowIndex:c}=zy(this.beans,r,s);return c>=a&&(c=-1),n.focusSvc.focusHeaderPosition({headerPosition:{column:d,headerRowIndex:c},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(om(e)){const n=e.getDisplayedLeafColumns();t="Before"===i?nh(n):n[0]}else t=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(t)}}findHeader(e,t){const{colGroupSvc:i,visibleCols:n}=this.beans;let o=e.column;if(o instanceof sm){const e=o.getDisplayedLeafColumns();o="Before"===t?e[0]:e[e.length-1]}const s="Before"===t?n.getColBefore(o):n.getColAfter(o);if(!s)return;const r=n.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:s};const a=null===i||void 0===i?void 0:i.getColGroupAtLevel(s,e.headerRowIndex);if(!a){return{headerRowIndex:s instanceof $u&&s.isSpanHeaderHeight()?n.headerGroupRowCount:e.headerRowIndex,column:s}}return a.isPadding()&&s.isSpanHeaderHeight()?{headerRowIndex:n.headerGroupRowCount,column:s}:{headerRowIndex:e.headerRowIndex,column:null!==a&&void 0!==a?a:s}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}}],apiFunctions:{getFocusedCell:function(e){return e.focusSvc.getFocusedCell()},clearFocusedCell:function(e){return e.focusSvc.clearFocusedCell()},setFocusedCell:function(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=null===(i=e.headerNavigation)||void 0===i?void 0:i.getHeaderPositionForColumn(t,n);o&&e.focusSvc.focusHeaderPosition({headerPosition:o})},tabToNextCell:function(e,t){var i,n;return null!==(i=null===(n=e.navigation)||void 0===n?void 0:n.tabToNextCell(!1,t))&&void 0!==i&&i},tabToPreviousCell:function(e,t){var i,n;return null!==(i=null===(n=e.navigation)||void 0===n?void 0:n.tabToNextCell(!0,t))&&void 0!==i&&i}}},xx=class extends Vu{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({["".concat(this.isLeft?"left":"right","PinnedWidthChanged")]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&(Od(i,t),oc(i,e))}},Cx={moduleName:"PinnedColumn",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}));const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=Uc(e,"print"),o=n?0:t.getColsLeftWidth(),s=n?0:t.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,i.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=Gd(this.gridBodyCtrl.eBodyViewport);if(e<=50)return;const t=this.getPinnedColumnsOverflowingViewport(e-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:n,hasLockedPinned:o}=t;let s=n;if(s.length||o){if(i){s=i({columns:s,viewportWidth:e})}s&&s.length&&(s=s.filter((e=>!fh(e))),this.setColsPinned(s,null,"viewportSizeFeature"))}}createPinnedWidthFeature(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return new xx(e,i)}setColsPinned(e,t,i){const{colModel:n,colAnimation:o,visibleCols:s,gos:r}=this.beans;if(!n.cols)return;if(null===e||void 0===e||!e.length)return;if(Uc(r,"print"))return void _c(37);let a;null===o||void 0===o||o.start(),a=!0===t||"left"===t?"left":"right"===t?"right":null;const l=[];e.forEach((e=>{if(!e)return;const t=n.getCol(e);t&&t.getPinned()!==a&&(this.setColPinned(t,a),l.push(t))})),l.length&&(s.refresh(i),Mh(this.eventSvc,l,i)),null===o||void 0===o||o.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const i="left"===e.pinned,n="right"===e.pinned;e.hidden=!0;const o=()=>{const o=i?this.leftWidth:this.rightWidth;if(null==o)return;const s=0==o,r=e.hidden!==s,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(a&&i||!a&&n)?o+l:o;e.comp.setPinnedContainerWidth("".concat(d,"px")),e.comp.setDisplayed(!s),r&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:o,rightPinnedWidthChanged:o,scrollVisibilityChanged:o,scrollbarWidthChanged:o})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:i}=this,n=Gd(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>n){if(!(n>t+i))return 0;e=n-t-i}}return e}getPinnedColumnsOverflowingViewport(e){var t,i;const n=(null!==(t=this.rightWidth)&&void 0!==t?t:0)+(null!==(i=this.leftWidth)&&void 0!==i?i:0);let o=!1;if(n<e)return{columns:[],hasLockedPinned:o};const{visibleCols:s}=this.beans,r=[...s.leftCols],a=[...s.rightCols];let l=0,d=0;const c=[];let u=n-0-e;for(;(d<r.length||l<a.length)&&u>0;){if(l<a.length){const e=a[l++];if(e.colDef.lockPinned){o=!0;continue}u-=e.getActualWidth(),c.push(e)}if(d<r.length&&u>0){const e=r[d++];if(e.colDef.lockPinned){o=!0;continue}u-=e.getActualWidth(),c.push(e)}}return{columns:c,hasLockedPinned:o}}}],css:[".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"]},Sx={moduleName:"Aria",version:Pc,beans:[class extends Vu{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Sc(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Zc(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),fd(i,"polite"),dd(i,"relevant","additions text"),function(e,t){dd(e,"atomic",t)}(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout((()=>{this.handleAnnouncementUpdate(e)}),50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;null!=t&&""!=t.replace(/[ .]/g,"")?(this.lastAnnouncement===t&&(t="".concat(t,"\u200b")),this.lastAnnouncement=t,this.descriptionContainer.textContent=t):this.lastAnnouncement=""}destroy(){super.destroy();const{descriptionContainer:e}=this;var t;e&&(Qd(e),null===(t=e.parentElement)||void 0===t||t.removeChild(e));this.descriptionContainer=null,this.pendingAnnouncements.clear()}}]};var Rx={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},kx=class extends Uh{constructor(){super(Rx),this.eOverlayWrapper=Wh,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}")}handleKeyDown(e){if(e.key!==ug||e.defaultPrevented||Lu(e))return;const t=this.beans;if(Og(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;i=e.shiftKey?t.focusSvc.focusGridView({column:nh(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):Hg(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:o,PRINT:s}=Qm;i.toggle(n,t.autoHeight),i.toggle(o,t.normal),i.toggle(s,t.print)}postConstruct(){this.createManagedBean(new $m(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const e=iu(this.beans);e&&!su(this.beans)&&(this.elToFocusAfter=e)}e.then((t=>{if(this.activePromise===e){if(this.activePromise=null,t){if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,n)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,(t=>{var i;let{currentValue:n}=t;null===(i=e.refresh)||void 0===i||i.call(e,Fu(this.gos,u({},null!==n&&void 0!==n?n:{})))}))}i&&this.isGridFocused()&&_g(this.eOverlayWrapper)}}else this.activeOverlay!==t&&(this.destroyBean(t),t=null)}))}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top","".concat(e,"px"))}destroyActiveOverlay(){var e,t;this.activePromise=null;const i=this.activeOverlay;if(!i)return;let n=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,n&&!this.isGridFocused()&&(n=null);const o=this.updateListenerDestroyFunc;o&&(o(),this.updateListenerDestroyFunc=null),this.destroyBean(i),Qd(this.eOverlayWrapper),null===(e=n)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=iu(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},Px={selector:"AG-OVERLAY-WRAPPER",component:kx},Ex={moduleName:"Overlay",version:Pc,userComponents:{agLoadingOverlay:class extends dv{init(){var e;const t=Gl(null===(e=this.gos.get("overlayLoadingTemplate"))||void 0===e?void 0:e.trim());if(this.setTemplate(null!==t&&void 0!==t?t:cv),!t){const e=this.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}},agNoRowsOverlay:class extends dv{init(){var e;const t=Gl(null===(e=this.gos.get("overlayNoRowsTemplate"))||void 0===e?void 0:e.trim());if(this.setTemplate(null!==t&&void 0!==t?t:uv),!t){const e=this.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}}},apiFunctions:{showLoadingOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showLoadingOverlay()},showNoRowsOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showNoRowsOverlay()},hideOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.hideOverlay()}},beans:[class extends Vu{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=Gc(this.gos),this.isServerSide=!this.isClientSide&&Wc(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.eWrapper}isExclusive(){return 1===this.state&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");(t||void 0===t&&!e.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?_c(99):this.doHideOverlay()}getOverlayWrapperSelector(){return Px}getOverlayWrapperCompClass(){return kx}updateOverlayVisibility(){if(!this.eWrapper)return void(this.state=0);const{state:e,isClientSide:t,isServerSide:i,beans:{gos:n,colModel:o,rowModel:s}}=this;let r=this.gos.get("loading");void 0!==r&&(this.showInitialOverlay=!1),this.showInitialOverlay&&void 0===r&&!n.get("suppressLoadingOverlay")&&(r=!n.get("columnDefs")||!o.ready||!n.get("rowData")&&t),r?1!==e&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&s.isEmpty()&&!n.get("suppressNoRowsOverlay")?2!==e&&this.doShowNoRowsOverlay():(1===e||!i&&0!==e)&&this.doHideOverlay())}doShowLoadingOverlay(){var e,t;this.eWrapper&&(this.state=1,this.showOverlay((e=this.beans.userCompFactory,t=Fu(this.gos,{}),e.getCompDetailsFromGridOptions(op,"agLoadingOverlay",t,!0)),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){var e,t;this.eWrapper&&(this.state=2,this.showOverlay((e=this.beans.userCompFactory,t=Fu(this.gos,{}),e.getCompDetailsFromGridOptions(sp,"agNoRowsOverlay",t,!0)),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n,o;const s=null!==(n=null===e||void 0===e?void 0:e.newAgStackInstance())&&void 0!==n?n:null;null===(o=this.eWrapper)||void 0===o||o.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(2===this.state){const e=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(null===e||void 0===e?void 0:e.headerHeight)||0}else 0!==this.wrapperPadding&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}}]},Fx=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.rowNode!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],rh(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],rh(this.entriesList,e)}getEntries(){return this.entriesList}};function Dx(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}function Nx(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}var Mx={moduleName:"Sort",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,n){"asc"!==t&&"desc"!==t&&(t=null);const{gos:o,showRowGroupCols:s}=this.beans;let r=[e];if(lu(o)&&e.getColDef().showRowGroup){var a;const t=null===s||void 0===s||null===(a=s.getSourceColumnsForGroupColumn)||void 0===a?void 0:a.call(s,e),i=null===t||void 0===t?void 0:t.filter((e=>e.isSortable()));i&&(r=[e,...i])}r.forEach((e=>this.setColSort(e,t,n)));const l=[];if(!((i||o.get("alwaysMultiSort"))&&!o.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(r,n);l.push(...e)}this.updateSortIndex(e),l.push(...r),this.dispatchSortChangedEvents(n,l)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,o=lu(t),s=null===n||void 0===n?void 0:n.getShowRowGroupCol(e.getId()),r=o&&s||e,a=this.getColumnsWithSortingOrdered();i.forAllCols((e=>this.setColSortIndex(e,null)));const l=a.filter((e=>(!o||!e.getColDef().showRowGroup)&&e!==r));(r.getSort()?[...l,r]:l).forEach(((e,t)=>this.setColSortIndex(e,t)))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols((t=>{t.getSort()&&(e=!0)})),e}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.forAllCols((n=>{e.includes(n)||(n.getSort()&&i.push(n),this.setColSort(n,void 0,t))})),i}getNextSortDirection(e){var t,i;const n=null!==(t=null!==(i=e.getColDef().sortingOrder)&&void 0!==i?i:this.gos.get("sortingOrder"))&&void 0!==t?t:Yy,o=n.indexOf(e.getSort()),s=o<0,r=o==n.length-1;return s||r?n[0]:n[o+1]}getIndexedSortMap(){var e;const{gos:t,colModel:i,showRowGroupCols:n,rowGroupColsSvc:o}=this.beans;let s=[];if(i.forAllCols((e=>{e.getSort()&&s.push(e)})),i.isPivotMode()){const e=lu(t);s=s.filter((t=>{const i=!!t.getAggFunc(),o=!t.isPrimary(),s=e?null===n||void 0===n?void 0:n.getShowRowGroupCol(t.getId()):t.getColDef().showRowGroup;return i||o||s}))}const r=null!==(e=null===o||void 0===o?void 0:o.columns.filter((e=>!!e.getSort())))&&void 0!==e?e:[],a={};s.forEach(((e,t)=>a[e.getId()]=t)),s.sort(((e,t)=>{const i=e.getSortIndex(),n=t.getSortIndex();if(null!=i&&null!=n)return i-n;if(null==i&&null==n){return a[e.getId()]>a[t.getId()]?1:-1}return null==n?-1:1}));const l=lu(t)&&!!r.length;l&&(s=[...new Set(s.map((e=>{var t;return null!==(t=null===n||void 0===n?void 0:n.getShowRowGroupCol(e.getId()))&&void 0!==t?t:e})))]);const d=new Map;return s.forEach(((e,t)=>d.set(e,t))),l&&r.forEach((e=>{const t=n.getShowRowGroupCol(e.getId());d.set(e,d.get(t))})),d}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(((e,t)=>{let[,i]=e,[,n]=t;return i-n})).map((e=>{let[t]=e;return t}))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=lu(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){var t;const i=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||null===i||void 0===i||!i.length)return e.getSort();const n=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...i]:i,o=n[0].getSort();return n.every((e=>e.getSort()==o))?o:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=Date.now()}}),i&&e.addManagedElementListeners(i,{click:e=>{const i=t.isMoving(),o=Date.now();i||o-n<50||this.progressSortFromEvent(t,e)}});const o=()=>{const i=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc","asc"===i),e.toggleCss("ag-header-cell-sorted-desc","desc"===i),e.toggleCss("ag-header-cell-sorted-none",!i),t.getColDef().showRowGroup){var n;const i=null===(n=this.beans.showRowGroupCols)||void 0===n?void 0:n.getSourceColumnsForGroupColumn(t),o=!(null===i||void 0===i?void 0:i.every((e=>t.getSort()==e.getSort())));e.toggleCss("ag-header-cell-sorted-mixed",o)}};e.addManagedEventListeners({sortChanged:o,columnRowGroupChanged:o})}initCol(e){const{sort:t,initialSort:i,sortIndex:n,initialSortIndex:o}=e.colDef;void 0!==t?"asc"!==t&&"desc"!==t||(e.sort=t):"asc"!==i&&"desc"!==i||(e.sort=i),void 0!==n?null!==n&&(e.sortIndex=n):null!==o&&(e.sortIndex=o)}updateColSort(e,t,i){void 0!==t&&("desc"===t||"asc"===t?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new qy(e)}getSortIndicatorSelector(){return Ky}},class extends Vu{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=lu(e),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=lu(e)))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const n=t.rowNode,o=i.rowNode;for(let s=0,r=e.length;s<r;s++){const t=e[s],i="desc"===t.sort,r=this.getValue(n,t.column),a=this.getValue(o,t.column);let l;const d=this.getComparator(t,n);l=d?d(r,a,n,o,i):Yl(r,a,this.isAccentedSort);if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(null!=n)return n;if(!i.getColDef().showRowGroup)return;const o=!t.group&&i.getColDef().field;if(!o)return;const s=this.beans.colModel.getColDefCol(o);return s?s.getColDef().comparator:void 0}getValue(e,t){const{valueSvc:i,colModel:n,showRowGroupCols:o,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){var r;if(uu(s,n.isPivotActive())){var a;const n=null===(a=e.allLeafChildren)||void 0===a?void 0:a[0];return n?i.getValue(t,n,!1):void 0}const l=null===o||void 0===o?void 0:o.getShowRowGroupCol(t.getId());if(!l)return;return null===(r=e.groupData)||void 0===r?void 0:r[l.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:i.getValue(t,e,!1)}}],apiFunctions:{onSortChanged:function(e){var t;null===(t=e.sortSvc)||void 0===t||t.onSortChanged("api")}},userComponents:{agSortIndicator:qy},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}};var Tx={moduleName:"ValueCache",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}}],apiFunctions:{expireValueCache:function(e){var t;null===(t=e.valueCache)||void 0===t||t.expire()}}},jx={moduleName:"Expression",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);Oc(15,{expression:e})}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return Oc(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}}]},Ax={moduleName:"ChangeDetection",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;Gc(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const n=e.node,o=[n],s=this.clientSideRowModel,r=null===s||void 0===s?void 0:s.rootNode;if(r&&!n.isRowPinned()){const i=t.get("aggregateOnlyChangedColumns"),a=new Eb(i,r);a.addParentNode(n.parent,[e.column]),s.doAggregate(a),a.forEachChangedNodeDepthFirst((e=>{o.push(e),e.sibling&&o.push(e.sibling)}))}i.refreshCells({rowNodes:o})}}]},Ix={moduleName:"CellApi",version:Pc,apiFunctions:{getCellValue:function(e,t){var i;const{colKey:n,rowNode:o,useFormatter:s}=t,r=null!==(i=e.colModel.getColDefCol(n))&&void 0!==i?i:e.colModel.getCol(n);if(Ul(r))return null;const a=e.valueSvc.getValueForDisplay(r,o,s);var l;return s?null!==(l=a.valueFormatted)&&void 0!==l?l:Wu(a.value):a.value}}},Lx={checkSiblings:!0},_x={moduleName:"CommunityCore",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var e,t;if(this.destroyCalled)return;const{stateSvc:i,ctrlsSvc:n,context:o}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:null!==(e=null===i||void 0===i?void 0:i.getState())&&void 0!==e?e:{}}),this.destroyCalled=!0,null===(t=n.get("gridCtrl"))||void 0===t||t.destroyGridUi(),o.destroy(),super.destroy()}},class extends Vu{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new bb,this.fns=u(u({},fb),{},{dispatchEvent:vb}),this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(mb))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;var o,s;i!==fb&&(i[e]=null!==(o=null===n||void 0===n||null===(s=n.validation)||void 0===s?void 0:s.validateApiFunction(e,t))&&void 0!==o?o:t)}makeApi(e){var t=this;return{[e]:function(){const{beans:i,fns:{[e]:n}}=t;for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return n?n(i,...s):t.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(t){const t=mb[e];i.assertModuleRegistered(t,"api.".concat(e))&&_c(27,{fnName:e,module:t})}else _c(26,{fnName:e,preDestroyLink:n})}destroy(){super.destroy(),this.fns=fb,this.beans=null}},class extends Vu{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(null!=e)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:o}=e;if(i){const e=(e,t,i,n)=>{this.agGridDefaults[e]=t,(i||n)&&(this.agGridDefaultOverrides[e]={params:i,processParams:n})};for(const t of Object.keys(i)){let n=i[t];if("object"===typeof(s=n)&&s.getComp&&(n=n.getComp(this.beans)),"object"===typeof n){const{classImp:i,params:o,processParams:s}=n;e(t,i,o,s)}else e(t,n)}}var s;if(n){var r;null!==(r=this.dynamicBeans)&&void 0!==r||(this.dynamicBeans={});for(const e of Object.keys(n))this.dynamicBeans[e]=n[e]}if(null===o||void 0===o||o.forEach((e=>{this.selectors[e.selector]=e})),t)for(const a of Object.keys(t))this.icons[a]=t[a]}getUserComponent(e,t){var i;const n=(e,t,i,n)=>({componentFromFramework:t,component:e,params:i,processParams:n}),{frameworkOverrides:o}=this.beans,s=o.frameworkComponent(t,this.gos.get("components"));if(null!=s)return n(s,!0);const r=this.jsComps[t];if(r){return n(r,o.isFrameworkComponent(r))}const a=this.agGridDefaults[t];if(a){const e=this.agGridDefaultOverrides[t];return n(a,!1,null===e||void 0===e?void 0:e.params,null===e||void 0===e?void 0:e.processParams)}return null===(i=this.beans.validation)||void 0===i||i.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}createDynamicBean(e,t){if(!this.dynamicBeans)throw new Error(Vc(279,{name:e}));const i=this.dynamicBeans[e];if(null!=i){for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];return new i(...o)}var r,a;if(t)throw new Error(null!==(r=null===(a=this.beans.validation)||void 0===a?void 0:a.missingDynamicBean(e))&&void 0!==r?r:Vc(256))}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},class extends Vu{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n){var o;let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{name:r,cellRenderer:a}=t;let l,d,{compName:c,jsComp:h,fwComp:p,paramsFromSelector:g,popupFromSelector:m,popupPositionFromSelector:f}=Yh(this.beans.frameworkOverrides,e,t,n);const v=e=>{const t=this.registry.getUserComponent(r,e);t&&(h=t.componentFromFramework?void 0:t.component,p=t.componentFromFramework?t.component:void 0,l=t.params,d=t.processParams)};var b,w;(null!=c&&v(c),null==h&&null==p&&null!=i&&v(i),!h||!a||(w=h)&&w.prototype&&"getGui"in w.prototype)||(h=null===(b=this.agCompUtils)||void 0===b?void 0:b.adaptFunction(t,h));if(!h&&!p){const{validation:e}=this.beans;return void(!s||c===i&&i?i&&!e&&Oc(146,{comp:i}):c?null!==e&&void 0!==e&&e.isProvidedUserComp(c)||Oc(50,{compName:c}):i?e||Oc(260,u(u({},this.gos.getModuleErrorParams()),{},{propName:r,compName:i})):Oc(216,{name:r}))}const y=this.mergeParams(e,t,n,g,l,d),x=null==h,C=null!==(o=h)&&void 0!==o?o:p;return{componentFromFramework:x,componentClass:C,params:y,type:t,popupFromSelector:m,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(C,x,y,t)}}newAgStackInstance(e,t,i,n){var o,s;let r;r=!t?new e:this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(r);const a=null===(o=(s=r).init)||void 0===o?void 0:o.call(s,i);return null==a?Kh.resolve(r):a.then((()=>r))}mergeParams(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;const r=u(u({},i),o),a=e&&e[t.name+"Params"];if("function"===typeof a){$l(r,a(i))}else"object"===typeof a&&$l(r,a);return $l(r,n),s?s(r):r}},class extends Vu{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==ad)return ad;if(!document.body)return-1;let e=1e6;const t=Nd()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=2*e;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),ad=e,e}(),vc(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;vc(this.gos,"RowContainerHeightService - Div Stretch Offset = ".concat(t," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},class extends Vu{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{colFlex:i,colModel:n,colGroupSvc:o,colViewport:s,selectionColSvc:r}=this.beans;t||this.buildTrees(n,o),null===o||void 0===o||o.updateOpenClosedVisibility(),this.leftCols=iw(this.treeLeft),this.centerCols=iw(this.treeCenter),this.rightCols=iw(this.treeRight),null===r||void 0===r||r.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(n),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter((e=>e.isAutoHeight())),null===i||void 0===i||i.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(n,this.leftCols,this.rightCols,e),s.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){const t=i.getProvidedColumnGroup().getLevel()+1;t>e&&(e=t);break}i=i.getParent()}}return e}updateBodyWidths(){const e=hh(this.centerCols),t=hh(this.leftCols),i=hh(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let o,s;this.gos.get("enableRtl")?(o=t?t[0]:null,s=i?nh(i):null):(o=t?nh(t):null,s=i?i[0]:null),e.getCols().forEach((e=>{e.setLastLeftPinned(e===o,n),e.setFirstRightPinned(e===s,n)}))}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter((e=>"left"==e.getPinned())),o=i.filter((e=>"right"==e.getPinned())),s=i.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),r=new Bh,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:n,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:o,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:s,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],o=[];for(const s of t){const e=s.getPinned();e?!0===e||"left"===e?i.push(s):o.push(s):n.push(s)}this.ariaOrderColumns=i.concat(n).concat(o)}getAriaColIndex(e){let t;return t=om(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{if(om(e)){e.checkLeft()}}))}))}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach((t=>{if(n){let i=hh(t);t.forEach((t=>{i-=t.getActualWidth(),t.setLeft(i,e)}))}else{let i=0;t.forEach((t=>{t.setLeft(i,e),i+=t.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}(i,t)})),i.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const o=[];let s=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,d=Math.min(a.getColSpan(e),l),c=[a];if(d>1){const e=d-1;for(let i=1;i<=e;i++)c.push(t[r+i]);r+=e}let u;if(i?(u=!1,c.forEach((e=>{i(e)&&(u=!0)}))):u=!0,u){if(0===o.length&&s){!!n&&n(a)&&o.push(s)}o.push(a)}s=a}return o}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};tw(this.treeCenter,!1,e),tw(this.treeLeft,!1,e),tw(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?nh(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return hh(this.leftCols)}getDisplayedColumnsRightWidth(){return hh(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n="first"===t;let o;if(om(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;o=n?t[0]:nh(t)}else o=e;return(n?i[0]:nh(i))===o}},class extends Vu{constructor(){super(...arguments),this.beanName="eventSvc",this.globalSvc=new zl}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSvc.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalSvc.dispatchEvent(Fu(this.gos,e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(Fu(this.gos,e))}},class extends Vu{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=cx++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new zl,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=Vy.has(t);if(n&&!e||!n&&e)return;if(!function(e){return!!Gy[e]}(t))return;const o=(e,t)=>{const i=Gy[e],n=this.gridOptions[i];"function"===typeof n&&this.beans.frameworkOverrides.wrapOutgoing((()=>n(t)))};if(this.gridReadyFired)o(t,i);else if("gridReady"===t){o(t,i),this.gridReadyFired=!0;for(const e of this.queueEvents)o(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){var t;return null!==(t=this.gridOptions[e])&&void 0!==t?t:ld[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Wl(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>e(this.addGridCommonParams(t))}return e}updateGridOptions(e){let{options:t,force:i,source:n="api"}=e;const o={id:dx++,properties:[]},s=[],{gridOptions:r,validation:a}=this;for(const l of Object.keys(t)){const e=t[l];null===a||void 0===a||a.warnOnInitialPropertyUpdate(n,l);const d=i||"object"===typeof e&&"api"===n,c=r[l];if(d||c!==e){r[l]=e;const t={type:l,currentValue:e,previousValue:c,changeSet:o,source:n};s.push(t)}}this.validateGridOptions(this.gridOptions),o.properties=s.map((e=>e.type)),s.forEach((e=>{vc(this,"Updated property ".concat(e.type," from"),e.previousValue," to ",e.currentValue),this.propEventSvc.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const i of Object.keys(e)){const n=e[i];if(null==n||!1===n)continue;let o=t[i];"function"===typeof o&&(o=o(e,this.gridOptions,this.beans)),o&&this.assertModuleRegistered(o,i)}}validateGridOptions(e){var t;this.validateOptions(e,ax),null===(t=this.validation)||void 0===t||t.processGridOptions(e)}validateColDef(e,t,i){var n,o;!i&&null!==(n=this.beans.dataTypeSvc)&&void 0!==n&&n.isColPendingInference(t)||(this.validateOptions(e,$y),null===(o=this.validation)||void 0===o||o.validateColDef(e))}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some((e=>this.isModuleRegistered(e))):this.isModuleRegistered(e);return i||Oc(200,u(u({},this.getModuleErrorParams()),{},{moduleName:e,reasonOrId:t})),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:Dp(),rowModelType:this.get("rowModelType"),isUmd:kp}}isModuleRegistered(e){return Fp(e,this.gridId,this.get("rowModelType"))}},class extends Vu{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],(e=>this.refreshAll(bh(e.source)))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),bh(e.source))))}createColsFromColDefs(e){var t,i,n;const{beans:o}=this,{valueCache:s,colAutosize:r,rowGroupColsSvc:a,pivotColsSvc:l,valueColsSvc:d,visibleCols:c,eventSvc:u}=o,h=this.colDefs?Ih(o,e):void 0;null===s||void 0===s||s.expire();const p=null===(t=this.colDefCols)||void 0===t?void 0:t.list,g=null===(i=this.colDefCols)||void 0===i?void 0:i.tree,m=function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const r=new th,{existingCols:a,existingGroups:l,existingColKeys:d}=yh(o);r.addExistingKeys(d);const c=xh(e,i,0,n,a,r,l,s),{colGroupSvc:u}=e,h=null!==(t=null===u||void 0===u?void 0:u.findMaxDepth(c,0))&&void 0!==t?t:0,p=u?u.balanceColumnTree(c,0,h,r):c;return Eh(null,p,((e,t)=>{Xu(e)&&e.setupExpandable(),e.originalParent=t})),{columnTree:p,treeDepth:h}}(o,this.colDefs,!0,g,e);ph(o,null===(n=this.colDefCols)||void 0===n?void 0:n.tree,m.columnTree);const f=m.columnTree,v=m.treeDepth,b=uh(f),w={};b.forEach((e=>w[e.getId()]=e)),this.colDefCols={tree:f,treeDepth:v,list:b,map:w},null===a||void 0===a||a.extractCols(e,p),null===l||void 0===l||l.extractCols(e,p),null===d||void 0===d||d.extractCols(e,p),this.ready=!0,this.refreshCols(!0),c.refresh(e),u.dispatchEvent({type:"columnEverythingChanged",source:e}),h&&(this.changeEventsDispatching=!0,h(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&(null===r||void 0===r||r.applyAutosizeStrategy())}refreshCols(e){var t;if(!this.colDefCols)return;const i=null===(t=this.cols)||void 0===t?void 0:t.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:o,rowNumbersSvc:s,quickFilter:r,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:d,visibleCols:c,colViewport:u,eventSvc:h}=this.beans,p=this.selectCols(a,this.colDefCols);this.createColumnsForService([n,o,s],p);const g=(m=this.gos,this.showingPivotResult?!m.get("enableStrictPivotColumnOrder"):m.get("maintainColumnOrder"));var m;e&&!g||this.restoreColOrder(p),this.positionLockedCols(p),null===l||void 0===l||l.refresh(),null===r||void 0===r||r.refreshCols(),this.setColSpanActive(),null===d||void 0===d||d.setAutoHeightActive(p),c.clear(),u.clear();!oh(i,this.cols.tree)&&h.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const i of e)i&&(i.createColumns(t,(e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)})),i.addColumns(t))}selectCols(e,t){var i;const n=null!==(i=null===e||void 0===e?void 0:e.getPivotResultCols())&&void 0!==i?i:null;this.showingPivotResult=null!=n;const{map:o,list:s,tree:r,treeDepth:a}=null!==n&&void 0!==n?n:t;if(this.cols={list:s.slice(),map:u({},o),tree:r.slice(),treeDepth:a},n){n.list.some((e=>{var t;return void 0!==(null===(t=this.cols)||void 0===t?void 0:t.map[e.getColId()])}))||(this.lastPivotOrder=null)}return this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:i}=this.beans,n=this.isPivotMode()&&!this.showingPivotResult,o=null===t||void 0===t?void 0:t.isSelectionColumnEnabled(),s=i.get("rowNumbers"),r=null===e||void 0===e?void 0:e.columns;return this.cols.list.filter((e=>{const t=gh(e);if(n){const i=null===r||void 0===r?void 0:r.includes(e);return t||i||o&&mh(e)||s&&fh(e)}return t||e.isVisible()}))}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;Ah(this.beans,{state:e.map((e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t})))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=t.filter((t=>null!=e.map[t.getId()]));if(0===i.length)return;if(i.length===e.list.length)return void(e.list=i);const n=e=>{const t=e.getOriginalParent();if(!t)return!1;return t.getChildren().length>1||n(t)};if(!i.some((e=>n(e)))){const t=new Set(i);for(const n of e.list)t.has(n)||i.push(n);return void(e.list=i)}const o=new Map;for(let u=0;u<i.length;u++){const e=i[u];o.set(e,u)}const s=e.list.filter((e=>!o.has(e)));if(0===s.length)return void(e.list=i);const r=(e,t)=>{const i=t?t.getOriginalParent():e.getOriginalParent();if(!i)return null;let n=null,s=null;for(const r of i.getChildren())if(r!==t&&r!==e)if(r instanceof $u){const e=o.get(r);if(null==e)continue;(null==n||n<e)&&(n=e,s=r)}else r.forEachLeafColumn((e=>{const t=o.get(e);null!=t&&(null==n||n<t)&&(n=t,s=e)}));return null==s?r(e,i):s},a=[],l=new Map;for(const u of s){const e=r(u,null);if(null==e){a.push(u);continue}const t=l.get(e);void 0===t?l.set(e,u):Array.isArray(t)?t.push(u):l.set(e,[t,u])}const d=new Array(e.list.length);let c=d.length-1;for(let u=a.length-1;u>=0;u--)d[c--]=a[u];for(let u=i.length-1;u>=0;u--){const e=i[u],t=l.get(e);if(t)if(Array.isArray(t))for(let i=t.length-1;i>=0;i--){const e=t[i];d[c--]=e}else d[c--]=t;d[c--]=e}e.list=d}positionLockedCols(e){e.list=Fh(e.list,this.gos)}saveColOrder(){var e,t,i,n;this.showingPivotResult?this.lastPivotOrder=null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:null:this.lastOrder=null!==(i=null===(n=this.cols)||void 0===n?void 0:n.list)&&void 0!==i?i:null}getColumnDefs(){var e,t,i;return this.colDefCols?null===(e=this.beans.colDefFactory)||void 0===e?void 0:e.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,null!==(t=null===(i=this.cols)||void 0===i?void 0:i.list)&&void 0!==t?t:[]):void 0}setColSpanActive(){var e;this.colSpanActive=!(null===(e=this.cols)||void 0===e||!e.list.some((e=>null!=e.getColDef().colSpan)))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var e;const t=null===(e=this.beans.pivotColsSvc)||void 0===e?void 0:e.columns;return this.pivotMode&&!(null===t||void 0===t||!t.length)}recreateColumnDefs(e){var t;if(!this.cols)return;null===(t=this.beans.autoColSvc)||void 0===t||t.updateColumns(e);const i=bh(e.source);this.createColsFromColDefs(i)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;ph(this.beans,null===(e=this.colDefCols)||void 0===e?void 0:e.tree),super.destroy()}getColTree(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefColTree(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefCols(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.list)&&void 0!==e?e:null}getCols(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:[]}forAllCols(e){var t,i,n,o;const{pivotResultCols:s,autoColSvc:r,selectionColSvc:a}=this.beans;sh(null===(t=this.colDefCols)||void 0===t?void 0:t.list,e),sh(null===r||void 0===r||null===(i=r.columns)||void 0===i?void 0:i.list,e),sh(null===a||void 0===a||null===(n=a.columns)||void 0===n?void 0:n.list,e),sh(null===s||void 0===s||null===(o=s.getPivotResultCols())||void 0===o?void 0:o.list,e)}getColsForKeys(e){return e?e.map((e=>this.getCol(e))).filter((e=>null!=e)):[]}getColDefCol(e){var t;return null!==(t=this.colDefCols)&&void 0!==t&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColById(e){var t,i;return null!==(t=null===(i=this.cols)||void 0===i?void 0:i.map[e])&&void 0!==t?t:null}getColFromCollection(e,t){var i,n,o,s;if(null==t)return null;const{map:r,list:a}=t;if("string"==typeof e&&r[e])return r[e];for(let l=0;l<a.length;l++)if(wh(a[l],e))return a[l];return null!==(i=null!==(n=null===(o=this.beans.autoColSvc)||void 0===o?void 0:o.getColumn(e))&&void 0!==n?n:null===(s=this.beans.selectionColSvc)||void 0===s?void 0:s.getColumn(e))&&void 0!==i?i:null}},class extends Vu{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e,t;return null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getLastRow(){var e,t;return null!==(e=null===(t=this.bottomRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){var e;const{topRowBounds:t,bottomRowBounds:i}=this;return{pageFirstPixel:null!==(e=null===t||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0,pageLastPixel:i?i.rowTop+i.rowHeight:0}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const o=i.getRowBounds(t);o&&(o.rowIndex=t),this.bottomRowBounds=o,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var e,t;const i=null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0;this.pixelOffset!==i&&(this.pixelOffset=i,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},class extends Vu{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){var t,i,n,o,s;this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:null!==(t=null===e||void 0===e?void 0:e.animate)&&void 0!==t&&t,newData:null!==(i=null===e||void 0===e?void 0:e.newData)&&void 0!==i&&i,newPage:null!==(n=null===e||void 0===e?void 0:e.newPage)&&void 0!==n&&n,newPageSize:null!==(o=null===e||void 0===e?void 0:e.newPageSize)&&void 0!==o&&o,keepRenderedRows:null!==(s=null===e||void 0===e?void 0:e.keepRenderedRows)&&void 0!==s&&s})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},class extends Vu{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onCellSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},n=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>n())),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{bu(this.gos)?i():n()}));bu(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListener("suppressCellFocus",(e=>this.onSuppressCellFocusChanged(e.currentValue))),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],(()=>this.redrawRows())),this.addManagedPropertyListener("cellSelection",(e=>{let{currentValue:t,previousValue:i}=e;(!i&&t||i&&!t)&&this.redrawRows()}));const{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",(()=>{const e=i.getShowRowGroupCols();e.length&&this.refreshCells({columns:e,force:!0})})),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Uc(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new Fx(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyTopRowCtrls)&&void 0!==e?e:[]}getStickyBottomRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyBottomRowCtrls)&&void 0!==e?e:[]}updateAllRowCtrls(){var e,t;const i=Object.values(this.rowCtrlsByRowIndex),n=Object.values(this.zombieRowCtrls),o=null!==(e=null===(t=this.cachedRowCtrls)||void 0===t?void 0:t.getEntries())&&void 0!==e?e:[];n.length>0||o.length>0?this.allRowCtrls=[...i,...n,...o]:this.allRowCtrls=i}isCellBeingRendered(e,t){var i;const n=this.rowCtrlsByRowIndex[e];if(!t||!n)return!!n;if(n.isFullWidth())return!0;return!!(null===(i=this.beans.spannedRowRenderer)||void 0===i?void 0:i.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}onCellFocusChanged(e){if(e&&null!=e.rowIndex&&!e.rowPinned){var t;const i=null!==(t=this.beans.colModel.getCol(e.column))&&void 0!==t?t:void 0;this.isCellBeingRendered(e.rowIndex,i)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onSuppressCellFocusChanged(e))),this.getFullWidthRowCtrls().forEach((t=>t.onSuppressCellFocusChanged(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach((i=>t.onFlashCells(i,e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.colModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.column===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},n=()=>{t((e=>e.onWidthChanged()))},o=()=>{t((e=>e.onFirstRightPinnedChanged()))},s=()=>{t((e=>e.onLastLeftPinnedChanged()))},r=()=>{t((e=>e.onColDefChanged()))};e.__addEventListener("leftChanged",i),e.__addEventListener("widthChanged",n),e.__addEventListener("firstRightPinnedChanged",o),e.__addEventListener("lastLeftPinnedChanged",s),e.__addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push((()=>{e.__removeEventListener("leftChanged",i),e.__removeEventListener("widthChanged",n),e.__removeEventListener("firstRightPinnedChanged",o),e.__removeEventListener("lastLeftPinnedChanged",s),e.__removeEventListener("colDefChanged",r)}))}))}onDomLayoutChanged(){const e=Uc(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{var n;const o=null===(n=i.getCellCtrl(e,!0))||void 0===n?void 0:n.eGui;o&&t.push(o)})),t}refreshFloatingRowComps(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){var n;const{pinnedRowModel:o,beans:s,printLayout:r}=this,a=Object.fromEntries(e.map((e=>[e.rowNode.id,e])));null===o||void 0===o||o.forEachPinnedRow(t,((n,l)=>{const d=e[l];d&&void 0===o.getPinnedRowById(d.rowNode.id,t)&&(d.destroyFirstPass(),d.destroySecondPass()),n.id in a&&i?(e[l]=a[n.id],delete a[n.id]):e[l]=new lf(n,s,!1,!1,r)}));const l=null!==(n="top"===t?null===o||void 0===o?void 0:o.getPinnedTopRowCount():null===o||void 0===o?void 0:o.getPinnedBottomRowCount())&&void 0!==n?n:0;e.length=l}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky){var n;null===(n=this.stickyRowFeature)||void 0===n||n.refreshStickyNode(e)}else{if(null!==(t=this.cachedRowCtrls)&&void 0!==t&&t.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}i||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;null!==t&&void 0!==t&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"}));if(null!=e)return null===e||void 0===e||e.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}redrawAfterModelUpdate(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const i=null===(e=this.beans.focusSvc)||void 0===e?void 0:e.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(t);const n=!t.domLayoutChanged&&!!t.recycleRows,o=t.animate&&ru(this.gos),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:r,gos:a}=this;if(r){r.checkStickyRows();const e=r.extraTopHeight+r.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(s,o),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),null!=i&&this.restoreFocusedCell(i),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");var n;t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),null===(n=this.stickyRowFeature)||void 0===n||n.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(Vc(252));this.refreshInProgress=!0,null===(e=(t=this.beans.frameworkOverrides).getLockOnRefresh)||void 0===e||e.call(t)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,null===(e=(t=this.beans.frameworkOverrides).releaseLockOnRefresh)||void 0===e||e.call(t)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,i=this.findPositionToFocus(e);i?e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned?t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Fu(this.gos,u(u({},i),{},{forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))):t.setFocusedCell(u(u({},i),{},{preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0})):t.focusHeaderPosition({headerPosition:{headerRowIndex:Hf(this.beans)-1,column:e.column}})}findPositionToFocus(e){const{pagination:t,pageBounds:i}=this.beans;let n=e;for(null==n.rowPinned&&t&&i&&!t.isRowInPage(n.rowIndex)&&(n={rowPinned:null,rowIndex:i.getFirstRow()});n;){if(null==n.rowPinned&&i)if(n.rowIndex<i.getFirstRow()){if(n=Op(this.beans,{rowPinned:null,rowIndex:0}),!n)return null}else n.rowIndex>i.getLastRow()&&(n={rowPinned:null,rowIndex:i.getLastRow()});const t=this.getRowByPosition(n);if(null!==t&&void 0!==t&&t.isAlive())return u(u({},t.getRowPosition()),{},{column:e.column});n=Op(this.beans,n)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const i=t[n].getAllCellCtrls(),o=i.length;for(let t=0;t<o;t++)e.push(i[t])}return e}getAllRowCtrls(){var e,t,i;const{spannedRowRenderer:n}=this.beans,o=this.getStickyTopRowCtrls(),s=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...o,...s,...null!==(e=null===n||void 0===n?void 0:n.getCtrls("top"))&&void 0!==e?e:[],...null!==(t=null===n||void 0===n?void 0:n.getCtrls("bottom"))&&void 0!==t?t:[],...null!==(i=null===n||void 0===n?void 0:n.getCtrls("center"))&&void 0!==i?i:[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells(){let{rowNodes:e,columns:t,force:i,suppressFlash:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o={force:i,newData:!1,suppressFlash:n};for(const s of this.getCellCtrls(e,t))s.refreshOrDestroyCell(o);this.refreshFullWidth(e)}refreshRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getRowCtrls(e.rowNodes).forEach((t=>t.refreshRow(e))),this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=Dx(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>Nx(e.rowNode,t))):i}getCellCtrls(e,t){let i;Wl(t)&&(i={},t.forEach((e=>{const t=this.colModel.getCol(e);Wl(t)&&(i[t.getId()]=!0)})));const n=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.column.getId();i&&!i[t]||n.push(e)}))})),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i,t),null===(e=this.stickyRowFeature)||void 0===e||e.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const i of Object.keys(this.rowCtrlsByRowIndex)){null==this.rowCtrlsByRowIndex[i].rowNode.id&&e.push(i)}this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){t[i.rowNode.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{focusSvc:t,animationFrameSvc:i}=this.beans,{afterScroll:n}=e;let o;const s=this.stickyRowFeature;s&&(o=(null===t||void 0===t?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(s){l=s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}const d=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if((!n||l||d)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n&&!l),null!=o)){const e=null===t||void 0===t?void 0:t.getFocusCellToUseAfterRefresh();null!=o&&null==e&&(null===i||void 0===i||i.flushAllFrames(),this.restoreFocusedCell(o))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const n=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){var t;const i=[];for(let a=this.firstRenderedRow;a<=this.lastRenderedRow;a++)i.push(a);const n=this.beans.pagination,o=null===(t=this.beans.focusSvc)||void 0===t||null===(t=t.getFocusedCell())||void 0===t?void 0:t.rowIndex;null!=o&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&(!n||n.isRowInPage(o))&&o<this.rowModel.getRowCount()&&i.push(o);const s=e=>{const t=e.rowNode.rowIndex;null!=t&&t!==o&&(t<this.firstRenderedRow||t>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&i.push(t)};for(const a of Object.values(this.rowCtrlsByRowIndex))s(a);if(e)for(const a of Object.values(e))s(a);i.sort(((e,t)=>e-t));const r=[];for(let a=0;a<i.length;a++){const e=i[a],t=this.rowModel.getRow(e);t&&!t.sticky&&r.push(e)}return r}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);const o=[];if(n.forEach((n=>{const s=this.createOrUpdateRowCtrl(n,e,t,i);Wl(s)&&o.push(s)})),e){const{animationFrameSvc:n}=this.beans;(null===n||void 0===n?void 0:n.active)&&i&&!this.printLayout?n.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.rowNode.rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Dx(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.rowNode;return!(null!=t&&!Nx(i,t))}))}createOrUpdateRowCtrl(e,t,i,n){let o,s=this.rowCtrlsByRowIndex[e];s||(o=this.rowModel.getRow(e),Wl(o)&&Wl(t)&&t[o.id]&&o.alreadyRendered&&(s=t[o.id],t[o.id]=null));if(!s){if(o||(o=this.rowModel.getRow(e)),!Wl(o))return;s=this.createRowCon(o,i,n)}return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){const i=[];if(e)for(const n of Object.values(e))if(n)if(this.cachedRowCtrls&&n.isCacheable())this.cachedRowCtrls.addRow(n);else if(n.destroyFirstPass(!t),t){const e=n.instanceId;this.zombieRowCtrls[e]=n,i.push((()=>{n.destroySecondPass(),delete this.zombieRowCtrls[e]}))}else n.destroySecondPass();t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),window.setTimeout((()=>i.forEach((e=>e()))),400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*Qc(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;let n,o;if(e.updateOffset(),i.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),o=t.getLastRow();else{const s=this.getRowBufferInPixels(),r=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,d,c=!1;do{const i=t.getPixelOffset(),{pageFirstPixel:n,pageLastPixel:o}=t.getCurrentPagePixelRange(),u=e.divStretchOffset,h=r.getVScrollPosition(),p=h.top,g=h.bottom;a?(l=n+u,d=o+u):(l=Math.max(p+i-s,n)+u,d=Math.min(g+i+s,o)+u),this.firstVisibleVPixel=Math.max(p+i,n)+u,this.lastVisibleVPixel=Math.min(g+i,o)+u,c=this.ensureAllRowsInRangeHaveHeightsCalculated(l,d)}while(c);let u=i.getRowIndexAtPixel(l),h=i.getRowIndexAtPixel(d);const p=t.getFirstRow(),g=t.getLastRow();u<p&&(u=p),h>g&&(h=g),n=u,o=h}else n=0,o=-1;const s=Uc(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);s&&!r&&o-n>a&&(o=n+a);const l=n!==this.firstRenderedRow,d=o!==this.lastRenderedRow;(l||d)&&(this.firstRenderedRow=n,this.lastRenderedRow=o,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:o}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,cc(this.beans,(()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})})))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var i,n;const o=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.ensureRowHeightsValid(),s=null===(n=this.stickyRowFeature)||void 0===n?void 0:n.ensureRowHeightsValid(),{pageBounds:r,rowModel:a}=this,l=a.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(l||s)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(s||l||o)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){var t;const i=!1,n=e.rowNode,o=this.focusSvc.isRowFocused(n.rowIndex,n.rowPinned),s=null===(t=this.editSvc)||void 0===t?void 0:t.isEditing(e),r=n.detail;if(!(o||s||r))return i;return!!this.isRowPresent(n)||i}isRowPresent(e){var t,i;return!!this.rowModel.isRowPresent(e)&&(null===(t=null===(i=this.beans.pagination)||void 0===i?void 0:i.isRowInPage(e.rowIndex))||void 0===t||t)}createRowCon(e,t,i){var n,o,s;const r=null!==(n=null===(o=this.cachedRowCtrls)||void 0===o?void 0:o.getRow(e))&&void 0!==n?n:null;if(r)return r;const a=i&&!this.printLayout&&!(null===(s=this.beans.animationFrameSvc)||void 0===s||!s.active);return new lf(e,this.beans,t,a,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map((e=>e.rowNode));return[...this.getStickyTopRowCtrls().map((e=>e.rowNode)),...e,...this.getStickyBottomRowCtrls().map((e=>e.rowNode))]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.rowNode.rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.rowNode.rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},class extends Vu{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEdit=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEdit=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Wc(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc((()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValueForDisplay(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ui";const{showRowGroupColValueSvc:s}=this.beans,r=!e&&t.group,a=null===e||void 0===e?void 0:e.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(s&&l&&(r||a)){const o=s.getGroupValue(t,e);if(null==o)return{value:null,valueFormatted:null};if(!i)return{value:o.value,valueFormatted:null};const r=s.formatAndPrefixGroupColValue(o,e,n);return{value:o.value,valueFormatted:r}}if(!e)return{value:t.key,valueFormatted:null};const d=t.leafGroup&&this.colModel.isPivotMode(),c=t.group&&t.expanded&&!t.footer&&!d,u=this.gos.get("groupSuppressBlankHeader")||!t.sibling,h=c&&!u,p=this.getValue(e,t,h,o);return{value:p,valueFormatted:i&&!(n&&!1===e.colDef.useValueFormatterForExport)?this.formatValue(e,t,p):null}}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";if(this.initialised||this.init(),!t)return;const o=e.getColDef(),s=o.field,r=e.getColId();let a,l=t.data;if(this.hasEdit&&"ui"===n){const i=this.editSvc;if(i.isRowEditing(t,Lx)&&(l=i.getRowDataValue(t,Lx)),i.isEditing()){const n=i.getCellDataValue({rowNode:t,column:e},!0);if(void 0!==n)return n}}const d=o.showRowGroup;if("string"===typeof d){var c,u;if((null!==(c=null===(u=this.beans.rowGroupColsSvc)||void 0===u?void 0:u.getColumnIndex(d))&&void 0!==c?c:-1)>t.level)return null}const h="string"!==typeof d||!t.group,p=t.groupData&&r in t.groupData,g=!i&&t.aggData&&void 0!==t.aggData[r],m=this.isSsrm&&i&&!!o.aggFunc,f=this.isSsrm&&t.footer&&t.field&&(!0===o.showRowGroup||o.showRowGroup===t.field);if(this.isTreeData&&g)a=t.aggData[r];else if(this.isTreeData&&o.valueGetter)a=this.executeValueGetter(o.valueGetter,l,e,t);else if(this.isTreeData&&s&&l)a=Xl(l,s,e.isFieldContainsDots());else if(p)a=t.groupData[r];else if(g)a=t.aggData[r];else if(o.valueGetter&&!m){if(!h)return a;a=this.executeValueGetter(o.valueGetter,l,e,t)}else if(f)a=Xl(l,t.field,e.isFieldContainsDots());else if(s&&l&&!m){if(!h)return a;a=Xl(l,s,e.isFieldContainsDots())}if(this.cellExpressions&&"string"===typeof a&&0===a.indexOf("=")){const i=a.substring(1);a=this.executeValueGetter(i,l,e,t)}return a}parseValue(e,t,i,n){const o=e.getColDef(),s=o.valueParser;if(Wl(s)){var r;const a=Fu(this.gos,{node:t,data:null===t||void 0===t?void 0:t.data,oldValue:n,newValue:i,colDef:o,column:e});return"function"===typeof s?s(a):null===(r=this.expressionSvc)||void 0===r?void 0:r.evaluate(s,a)}return i}getDeleteValue(e,t){var i;return Wl(e.getColDef().valueParser)&&null!==(i=this.parseValue(e,t,"",this.getValueForDisplay(e,t).value))&&void 0!==i?i:null}formatValue(e,t,i,n){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const{expressionSvc:s}=this.beans;let r,a=null;const l=e.getColDef();if(n?r=n:o&&(r=l.valueFormatter),r){let n=t?t.data:null;if(t){const e={rowNode:t};if(this.hasEdit){const i=this.editSvc;i.isEditing(e,Lx)&&(n=i.getRowDataValue(t,Lx))}}const o=Fu(this.gos,{value:i,node:t,data:n,colDef:l,column:e});a="function"===typeof r?r(o):s?s.evaluate(r,o):null}else if(l.refData)return l.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a}setValue(e,t,i,n){var o;const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;Ul(e.data)&&(e.data={});const{field:r,valueSetter:a}=s.getColDef();if(Ul(r)&&Ul(a))return _c(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,i))return _c(135),!1;const l=Fu(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e,void 0,n),newValue:i,colDef:s.getColDef(),column:s});let d;var c;(l.newValue=i,Wl(a))?d="function"===typeof a?a(l):null===(c=this.expressionSvc)||void 0===c?void 0:c.evaluate(a,l):d=this.setValueUsingField(e.data,r,i,s.isFieldContainsDots());if(void 0===d&&(d=!0),!d)return!1;e.resetQuickFilterAggregateText(),null===(o=this.valueCache)||void 0===o||o.onDataChanged();const u=this.getValue(s,e);return this.dispatchCellValueChangedEvent(e,l,u,n),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,l,u,n),!0}dispatchCellValueChangedEvent(e,t,i,n){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:n})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.beans.frameworkOverrides.wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,n){if(!t)return!1;let o=!1;if(n){const n=t.split(".");let s=e;for(;n.length>0&&s;){const e=n.shift();0===n.length?(o=s[e]===i,o||(s[e]=i)):s=s[e]}}else o=e[t]===i,o||(e[t]=i);return!o}executeValueGetterWithValueCache(e,t,i,n){const o=i.getColId(),s=this.valueCache.getValue(n,o);if(void 0!==s)return s;const r=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,o,r),r}executeValueGetterWithoutValueCache(e,t,i,n){const o=Fu(this.gos,{data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let s;var r;"function"===typeof e?s=e(o):s=null===(r=this.expressionSvc)||void 0===r?void 0:r.evaluate(e,o);return s}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let o=i;if(n){o=n(Fu(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof o||null==o||(o=String(o),"[object Object]"===o&&_c(121)),o}},class extends Vu{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(Ig(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,null!=this.focusFallbackTimeout&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,null!=this.focusFallbackTimeout&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t?null:this.doesRowOrCellHaveBrowserFocus()?t:null}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader?null:this.isDomDataPresentInHierarchy(iu(this.beans),Jf)?this.focusedHeader:null}doesRowOrCellHaveBrowserFocus(){const e=iu(this.beans);return!!this.isDomDataPresentInHierarchy(e,Yg)||this.isDomDataPresentInHierarchy(e,af)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(Xc(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,o={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return s&&(o.isFullWidthCell=s.isFullWidth()),o}clearFocusedCell(){if(null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(u({type:"cellFocusCleared"},e))}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:s=!1,sourceEvent:r}=e,a=this.colModel.getCol(t);if(!a)return void(this.focusedCell=null);this.focusedCell={rowIndex:i,rowPinned:Gl(n),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent(u(u(u({type:"cellFocused"},l),this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams}),{},{forceBrowserFocus:o,preventScrollOnBrowserFocus:s,sourceEvent:r})),this.previousCellFocusParams=l}isCellFocused(e){return null!=this.focusedCell&&Ip(e,this.focusedCell)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:o,headerRowIndex:s}=this.focusedHeader;return t===o&&i===s&&n==o.getPinned()}focusHeaderPosition(e){var t;if(this.setFocusRecovered(),zg(this.beans))return!1;const{direction:i,fromTab:n,allowUserOverride:o,event:s,fromCell:r,rowWithoutSpanValue:a}=e;let{headerPosition:l}=e;if(r&&null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(o){const e=this.focusedHeader,t=Hf(this.beans);if(n){const n=this.gos.getCallback("tabToNextHeader");n&&(l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:i,currentPosition:e,headerPosition:l,headerRowCount:t}))}else{const i=this.gos.getCallback("navigateToNextHeader");if(i&&s){l=i({key:s.key,previousHeaderPosition:e,nextHeaderPosition:l,headerRowCount:t,event:s})}}}return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:i,event:s,fromCell:r,rowWithoutSpanValue:a})}focusHeaderPositionFromUserFunc(e){if(zg(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:o}=e,s=this.focusedHeader,r=Hf(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:s,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:o})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:o,headerRowCount:s}=e,r=t({backwards:"Before"===i,previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:s});return!0===r?n:!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:o,event:s}=e,{column:r,headerRowIndex:a}=t,{filterManager:l,ctrlsSvc:d,headerNavigation:c}=this.beans;if(-1===a)return null!==l&&void 0!==l&&l.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:r,event:s});null===c||void 0===c||c.scrollToColumn(r,i);const u=d.getHeaderRowContainerCtrl(r.getPinned()),h=(null===u||void 0===u?void 0:u.focusHeader(t.headerRowIndex,r,s))||!1;return c&&h&&(null!=o||n)&&(c.currentHeaderRowWithoutSpan=null!==o&&void 0!==o?o:-1),h}focusFirstHeader(){var e;if(null!==(e=this.overlays)&&void 0!==e&&e.isExclusive()&&this.focusOverlay())return!0;const t=this.visibleCols.allCols[0];if(!t)return!1;const i=zy(this.beans,t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(e){var t;if(null!==(t=this.overlays)&&void 0!==t&&t.isExclusive()&&this.focusOverlay(!0))return!0;const i=Hf(this.beans)-1,n=nh(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&(this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Gl(t))}focusOverlay(e){var t,i;const n=(null===(t=this.overlays)||void 0===t?void 0:t.isVisible())&&(null===(i=this.overlays.eWrapper)||void 0===i?void 0:i.getGui());return!!n&&_g(n,e)}focusGridView(e){var t;const{backwards:i=!1,canFocusOverlay:n=!0,event:o}=e;if(null!==(t=this.overlays)&&void 0!==t&&t.isExclusive())return n&&this.focusOverlay(i);if(Vg(this.beans))return i&&!zg(this.beans)?this.focusLastHeader():!(!n||!this.focusOverlay(i))||!i&&Hg(this.beans,i);const s=i?function(e){let t,i=null;const{pinnedRowModel:n,pageBounds:o}=e,s=null===n||void 0===n?void 0:n.getPinnedBottomRowCount(),r=null===n||void 0===n?void 0:n.getPinnedTopRowCount();return s?(i="bottom",t=s-1):e.rowModel.getRowCount()?(i=null,t=o.getLastRow()):r&&(i="top",t=r-1),void 0===t?null:{rowIndex:t,rowPinned:i}}(this.beans):function(e){let t,i=0;const{pinnedRowModel:n,rowModel:o,pageBounds:s}=e;return null!==n&&void 0!==n&&n.getPinnedTopRowCount()?t="top":o.getRowCount()?(t=null,i=s.getFirstRow()):null!==n&&void 0!==n&&n.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}}(this.beans);if(s){var r,a,l,d;const t=null!==(r=e.column)&&void 0!==r?r:null===(a=this.focusedHeader)||void 0===a?void 0:a.column,{rowIndex:n,rowPinned:h}=s,p=Lp(this.beans,s);if(!t||!p||null==n)return!1;if(t.isSuppressNavigable(p)){var c;const e=this.gos.get("enableRtl");let i;return i=o&&o.key!==ug?o.key:e?mg:vg,null===(c=this.beans.navigation)||void 0===c||c.navigateToNextCell(null,i,{rowIndex:n,column:t,rowPinned:h||null},!0),!0}if(null===(l=this.navigation)||void 0===l||l.ensureCellVisible({rowIndex:n,column:t,rowPinned:h}),i){var u;const e=this.rowRenderer.getRowByPosition(s);if(null!==e&&void 0!==e&&e.isFullWidth()&&null!==(u=this.navigation)&&void 0!==u&&u.tryToFocusFullWidthRow(s,i))return!0}return this.setFocusedCell({rowIndex:n,column:t,rowPinned:Gl(h),forceBrowserFocus:!0}),null===(d=this.beans.rangeSvc)||void 0===d||d.setRangeToCell({rowIndex:n,rowPinned:h,column:t}),!0}return!(!n||!this.focusOverlay(i))||!(!i||!this.focusLastHeader())}focusAdvancedFilter(e){var t,i;return this.advFilterFocusColumn=null===e||void 0===e?void 0:e.column,null!==(t=null===(i=this.beans.advancedFilter)||void 0===i?void 0:i.getCtrl().focusHeaderComp())&&void 0!==t&&t}focusNextFromAdvancedFilter(e,t){var i,n;const o=null!==(i=t?void 0:this.advFilterFocusColumn)&&void 0!==i?i:null===(n=this.visibleCols.allCols)||void 0===n?void 0:n[0];return e?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:Hf(this.beans)-1}}):this.focusGridView({column:o})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},class extends Vu{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass="ag-theme-params-".concat(++Oy),this.globalCSS=[]}wireBeans(e){var t;const{eGridDiv:i,gridOptions:n}=e;this.eGridDiv=i,this.eStyleContainer=null!==(t=n.themeStyleContainer)&&void 0!==t?t:i.getRootNode()===document?document.head:i,this.cssLayer=n.themeCssLayer,this.styleNonce=n.styleNonce}postConstruct(){this.addManagedPropertyListener("theme",(()=>this.handleThemeGridOptionChange())),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.getSizeEl(jy),this.getSizeEl(Ay),this.getSizeEl(Iy),this.getSizeEl(Ly),this.getSizeEl(_y),this.refreshRowBorderWidthVariable(),this.addDestroyFunc((()=>(e=>{if(Sw.grids.delete(e),0===Sw.grids.size){Sw.map=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}})(this))),this.mutationObserver=new MutationObserver((()=>{this.fireGridStylesChangedEvent("themeChanged")})),this.addDestroyFunc((()=>this.mutationObserver.disconnect()))}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(_y)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Ly)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(jy)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(Ay)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(Ny)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(My);return e-1+this.getCSSVariablePixelValue(Ty)*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Iy)}applyThemeClasses(e){const{gridTheme:t}=this;let i="";if(t)i="".concat(this.paramsClass," ").concat(t._getCssClass());else{this.mutationObserver.disconnect();let e=this.eGridDiv;for(;e;){let t=!1;for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&(t=!0,i=i?"".concat(i," ").concat(n):n);t&&this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class"]}),e=e.parentElement}}for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(i){const t=e.className;e.className=t+(t?" ":"")+i}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const n="".concat(i,"px");return t!=n?(e.style.setProperty("--ag-line-height",n),i):""!=t?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?xw(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===By?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=gc({tag:"div",cls:"ag-measurement-container"}),this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=gc({tag:"div"});const{border:n,noWarn:o}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border","var(".concat(e.cssName,", solid ").concat(By,"px)"))):t.style.width="var(".concat(e.cssName,", ").concat(By,"px)"),i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"!==s||o||_c(9,{variable:e});const r=dc(this.beans,t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>r())),t}fireGridStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(Ly);this.eGridDiv.style.setProperty("--ag-internal-row-border-width","".concat(e,"px"))}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:i,gridTheme:n}=this,o=e.get("theme");let s;if("legacy"===o)s=void 0;else{const e=null!==o&&void 0!==o?o:Dy;e instanceof ry?s=e:Oc(240,{theme:e})}if(s!==n){var r;if(s){l=this,Sw.grids.add(l),Cw(this.eStyleContainer,this.cssLayer,this.styleNonce);for(const[e,t]of i)xw(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce);i.length=0}this.gridTheme=s,null===(r=s)||void 0===r||r._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let n=this.eParamsStyle;if(!n){n=this.eParamsStyle=gc({tag:"style"});const e=this.gos.get("styleNonce");e&&n.setAttribute("nonce",e),t.appendChild(n)}var a;if(!yw)n.textContent=(null===(a=s)||void 0===a?void 0:a._getPerGridCss(this.paramsClass))||"";this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}var l;s&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Oc(o?106:239)}},class extends Vu{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;null!==e&&void 0!==e&&e.isActive()?e.executeLaterVMTurn((()=>{e.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))})):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var e;const t=this.ctrlsSvc.get("center");if(!t||null!==(e=this.colAnimation)&&void 0!==e&&e.isActive())return;const i={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(i),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"===typeof e&&e>=0?e:(null==rd&&Ad(),rd);null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},class extends Vu{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t,i;this.addEventListener("ready",(()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach((e=>e(this.params))),this.readyCallbacks.length=0)}),null!==(e=null===(t=(i=this.beans.frameworkOverrides).runWhenReadyAsync)||void 0===t?void 0:t.call(i))&&void 0!==e&&e)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isAlive())&&void 0!==t&&t}))}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc((()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)}))}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc((()=>{this.updateReady()}))}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},class extends Vu{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.beans.ctrlsSvc.whenReady(this,(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(null!==e&&void 0!==e?e:[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),vc(t,"initialised successfully, enterprise = ".concat(t.isModuleRegistered("EnterpriseCore")))}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,bh(e.source))}},class extends Vu{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:o}=this.beans;return i&&o?o.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=null===t||void 0===t?void 0:t.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,o){const s=e.headerValueGetter;if(s){const l=Fu(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:o});return"function"===typeof s?s(l):"string"===typeof s?null!==(r=null===(a=this.beans.expressionSvc)||void 0===a?void 0:a.evaluate(s,l))&&void 0!==r?r:null:"";var r,a}return null!=e.headerName?e.headerName:e.field?(l=e.field)&&null!=l?l.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" "):null:"";var l}},class extends Vu{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{visibleCols:n}=this,o=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!o)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const i=n.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){var i;let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t]}return null!==(i=n)&&void 0!==i?i:[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,o=this.viewportRight+200;return!(t<n&&i<n)&&!(t>o&&i>o)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,t,(e=>{const t=e.getLeft();return Wl(t)&&t>this.viewportLeft}))}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const i=e=>{const t=new Set,i={};for(const o of e){let e=o.getParent();const s=o.isSpanHeaderHeight();for(;e;){var n;if(t.has(e))break;if(s&&e.isPadding()){e=e.getParent();continue}const o=e.getProvidedColumnGroup().getLevel();null!==(n=i[o])&&void 0!==n||(i[o]=[]),i[o].push(e),t.add(e),e=e.getParent()}}return i};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>"".concat(e.getId(),"-").concat(e.getPinned()||"normal"))).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}}],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:wb,destroy:function(e){e.gridDestroySvc.destroy()},isDestroyed:function(e){return e.gridDestroySvc.destroyCalled},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){yb(e,{[t]:i})},updateGridOptions:yb,isModuleRegistered:function(e,t){const i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}},dependsOn:[gw,Qb,Zb,Mx,mx,nw,fx,Ex,Ax,vx,yx,Cx,Sx,bx,ww,mw,jx,rw]};function Ox(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:o}=e;let s=(null!==i&&void 0!==i?i:[]).map(((e,i)=>({value:e,relevance:Bx(t,e),idx:i})));if(s.sort(((e,t)=>e.relevance-t.relevance)),n&&(s=s.filter((e=>e.relevance<Math.max(e.value.length,t.length)))),s.length>0&&o&&o>0){const e=s[0].relevance*o;s=s.filter((t=>e-t.relevance<0))}const r=[],a=[];for(const l of s)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function Bx(e,t){e.length<t.length&&([e,t]=[t,e]);let i=[],n=[];const o=e.length,s=t.length;for(let a=0;a<=s;a++)i[a]=a;let r=0;for(let a=1;a<=o;a++){n[0]=a;for(let l=1;l<=s;l++){const s=e[a-1],d=t[l-1];if(s.toLocaleLowerCase()===d.toLocaleLowerCase())++r,s===d&&++r,a>1&&l>1&&e[a-2].toLocaleLowerCase()===t[l-2].toLocaleLowerCase()&&(++r,e[a-2]===t[l-2]&&++r),a<o/2-10&&++r,n[l]=i[l-1];else{const e=n[l-1],t=i[l],o=i[l-1];n[l]=1+Math.min(e,t,o)}}[i,n]=[n,i]}return i[s]/(r+1)}var zx={AdvancedFilter:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},Vx=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],Hx={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:Vx,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...Vx,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...Vx,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},Gx={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function Wx(e){return"".concat(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&("IntegratedCharts"===e||"Sparklines"===e)?"Module.with(AgChartsEnterpriseModule)":"Module")}function Ux(e){let{moduleName:t,rowModelType:i}=e;return"To use the ".concat(t,"Module you must set the gridOption \"rowModelType='").concat(i,"'\"")}var qx=e=>{let{reasonOrId:t,moduleName:i,gridScoped:n,gridId:o,rowModelType:s,additionalText:r,isUmd:a}=e;const l=function(e,t){const i=[];return(Array.isArray(e)?e:[e]).forEach((e=>{const n=Hx[e];n?n.forEach((e=>{const n=Gx[e];n&&n!==t||i.push(e)})):i.push(e)})),i}(i,s),d="string"===typeof t?t:Qx[t];if(a)return function(e,t){const i=t.filter((e=>"IntegratedCharts"===e||"Sparklines"===e));let n="";return!(null===globalThis||void 0===globalThis?void 0:globalThis.agCharts)&&i.length>0?n="Unable to use ".concat(e," as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.\n"):t.some((e=>zx[e]))&&(n+="Unable to use ".concat(e," as that requires the ag-grid-enterprise script to be included.\n")),n}(d,l);const c=l.filter((e=>"IntegratedCharts"===e||"Sparklines"===e)),u=c.length>0?"".concat(c.map((e=>Wx(e))).join()," must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'."):"",h="Unable to use ".concat(d," as ").concat(l.length>1?"one of "+l.map((e=>Wx(e))).join(", "):Wx(l[0])," is not registered").concat(n?" for gridId: "+o:"",". ").concat(u," Check if you have registered the module:\n");return"".concat(h,"\n").concat((e=>{const t=e.map((e=>"import { ".concat(Wx(e)," } from '").concat(zx[e]?"ag-grid-enterprise":"ag-grid-community","';")));if(e.some((e=>"IntegratedCharts"===e||"Sparklines"===e))){const e="import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';";t.push(e)}return"import { ModuleRegistry } from 'ag-grid-community'; \n".concat(t.join(" \n")," \n\nModuleRegistry.registerModules([ ").concat(e.map((e=>Wx(e,!0))).join(", ")," ]); \n\nFor more info see: ").concat(Dc,"/modules/")})(l))+(r?" \n\n".concat(r):"")},Kx=e=>"".concat(e," must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.\n\nimport { AgChartsEnterpriseModule } from 'ag-charts-enterprise';\nimport { ModuleRegistry } from 'ag-grid-community';\nimport { ").concat(e," } from 'ag-grid-enterprise';\n    \nModuleRegistry.registerModules([").concat(e,".with(AgChartsEnterpriseModule)]);\n    "),Yx={1:()=>"`rowData` must be an array",2:e=>{let{nodeId:t}=e;return"Duplicate node id '".concat(t,"' detected from getRowId callback, this could cause issues in your grid.")},3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:e=>{let{id:t}=e;return"Could not find row id=".concat(t,", data item was not found for this id")},5:e=>{let{data:t}=e;return["Could not find data item as object was not found.",t," Consider using getRowId to help the Grid find matching row data"]},6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:e=>{let{key:t}=e;return"Unknown key for navigation ".concat(t)},9:e=>{let{variable:t}=e;return"No value for ".concat(null===t||void 0===t?void 0:t.cssName,". This usually means that the grid has been initialised before styles have been loaded. The default value of ").concat(null===t||void 0===t?void 0:t.defaultValue," will be used and updated when styles load.")},10:e=>{let{eventType:t}=e;return"As of v33, the '".concat(t,"' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.")},11:()=>"No gridOptions provided to createGrid",12:e=>{let{colKey:t}=e;return["column ",t," not found"]},13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:e=>{let{groupPrefix:t}=e;return"Row IDs cannot start with ".concat(t,", this is a reserved prefix for AG Grid's row grouping feature.")},15:e=>{let{expression:t}=e;return["value should be either a string or a function",t]},16:e=>{let{expression:t,params:i,e:n}=e;return["Processing of the expression failed","Expression = ",t,"Params = ",i,"Exception = ",n]},17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>'You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"',21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:e=>{let{key:t}=e;return"".concat(t," is an initial property and cannot be updated.")},23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:e=>{let{id:t}=e;return["The getRowId callback must return a string. The ID ",t," is being cast to a string."]},26:e=>{let{fnName:t,preDestroyLink:i}=e;return"Grid API function ".concat(t,"() cannot be called as the grid has been destroyed.\n Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ").concat(i)},27:e=>{let{fnName:t,module:i}=e;return"API function '".concat(t,"' not registered to module '").concat(i,"'")},28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:e=>{let{toIndex:t}=e;return["tried to insert columns in invalid location, toIndex = ",t,"remember that you should not count the moving columns when calculating the new index"]},31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:e=>{let{key:t}=e;return"the column type '".concat(t,"' is a default column type and cannot be overridden.")},35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:e=>{let{t:t}=e;return"colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes"},37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:e=>{let{iconName:t}=e;return"provided icon '".concat(t,"' needs to be a string or a function")},39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:e=>{let{e:t,method:i}=e;return"".concat(t,"\n").concat((e=>"AG Grid: Unable to use the Clipboard API (navigator.clipboard.".concat(e,"()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API."))(i))},41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:e=>{let{iconName:t}=e;return"As of v33, icon '".concat(t,"' is deprecated. Use the icon CSS name instead.")},44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:e=>{let{parentCellDataType:t}=e;return"The data type definition ".concat(t," does not exist.")},46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:e=>{let{cellDataType:t}=e;return'Missing data type definition - "'.concat(t,'"')},48:e=>{let{property:t}=e;return'Cell data type is "object" but no Value '.concat(t," has been provided. Please either provide an object data type definition with a Value ").concat(t,', or set "colDef.value').concat(t,'"')},49:e=>{let{methodName:t}=e;return"Framework component is missing the method ".concat(t,"()")},50:e=>{let{compName:t}=e;return"Could not find component ".concat(t,", did you forget to configure this component?")},51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:e=>{let{colId:t}=e;return"setFilterModel() - no column found for colId: ".concat(t)},63:e=>{let{colId:t}=e;return"setFilterModel() - unable to fully apply model, filtering disabled for colId: ".concat(t)},64:e=>{let{colId:t}=e;return"setFilterModel() - unable to fully apply model, unable to create filter for colId: ".concat(t)},65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:e=>{let{guiFromFilter:t}=e;return"getGui method from filter returned ".concat(t,"; it should be a DOM element.")},70:e=>{let{newFilter:t}=e;return"Grid option quickFilterText only supports string inputs, received: ".concat(typeof t)},71:()=>"debounceMs is ignored when apply button is present",72:e=>{let{keys:t}=e;return["ignoring FilterOptionDef as it doesn't contain one of ",t]},73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:e=>{let{filterModelType:t}=e;return['Unexpected type of filter "',t,'", it looks like the filter was configured with incorrect Filter Options']},77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:e=>{let{param:t}=e;return"DateFilter ".concat(t," is not a number")},83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:e=>{let{index:t}=e;return"Invalid row index for ensureIndexVisible: ".concat(t)},89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:e=>{let{paginationPageSizeOption:t,pageSizeSet:i,pageSizesSet:n,pageSizeOptions:o}=e;return"'paginationPageSize=".concat(t,"'").concat(i?"":" (default value)",", but ").concat(t," is not included in").concat(n?"":" the default"," paginationPageSizeSelector=[").concat(null===o||void 0===o?void 0:o.join(", "),"].")},95:e=>{let{paginationPageSizeOption:t,paginationPageSizeSelector:i}=e;return"Either set '".concat(i,"' to an array that includes ").concat(t," or to 'false' to disable the page size selector.")},96:e=>{let{id:t,data:i}=e;return["Duplicate ID",t,"found for pinned row with data",i,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."]},97:e=>{let{colId:t}=e;return"cellEditor for column ".concat(t," is missing getGui() method")},98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:e=>{let{propertyName:t,componentName:i,agGridDefaults:n,jsComps:o}=e;const s=[],r=Ox({inputValue:i,allSuggestions:[...Object.keys(null!==n&&void 0!==n?n:[]).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(null!==o&&void 0!==o?o:[]).filter((e=>!!o[e]))],hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push("Could not find '".concat(i,"' component. It was configured as \"").concat(t,": '").concat(i,"'\" but it wasn't found in the list of registered components.\n")),r.length>0&&s.push("         Did you mean: [".concat(r.slice(0,3),"]?\n")),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:e=>{let{value:t,param:i}=e;return"Numeric value ".concat(t," passed to ").concat(i," param will be interpreted as ").concat(t,' seconds. If this is intentional use "').concat(t,'s" to silence this warning.')},105:e=>{let{e:t}=e;return["chart rendering failed",t]},106:()=>"Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ".concat(Dc,"/theming-migration/"),107:e=>{let{key:t,value:i}=e;return"Invalid value for theme param ".concat(t," - ").concat(i)},108:e=>{let{e:t}=e;return["chart update failed",t]},109:e=>{let{inputValue:t,allSuggestions:i}=e;const n=Ox({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return["Could not find '".concat(t,"' aggregate function. It was configured as \"aggFunc: '").concat(t,"'\" but it wasn't found in the list of registered aggregations."),n.length>0?"         Did you mean: [".concat(n.slice(0,3),"]?"):"","If using a custom aggregation function check it has been registered correctly."].join("\n")},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:e=>{let{component:t}=e;return"Could not find component with name of ".concat(t,". Is it in Vue.components?")},116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:e=>{let{chartId:t}=e;return"Unable to update chart. No active chart found with ID: ".concat(t,".")},126:()=>"unable to restore chart as no chart model is provided",127:e=>{let{allRange:t}=e;return"unable to create chart as ".concat(t?"there are no columns in the grid":"no range is selected",".")},128:e=>{let{feature:t}=e;return"".concat(t," is only available if using 'multiRow' selection mode.")},129:e=>{let{feature:t,rowModel:i}=e;return"".concat(t," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(i,".")},130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:e=>{let{iconName:t}=e;return"icon '".concat(t,"' function should return back a string or a dom object")},134:e=>{let{iconName:t}=e;return"Did not find icon '".concat(t,"'")},135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:e=>{let{type:t,currentChartType:i}=e;return"Unable to update chart as a '".concat(t,"' update type is not permitted on a ").concat(i,".")},138:e=>{let{chartType:t}=e;return"invalid chart type supplied: ".concat(t)},139:e=>{let{customThemeName:t}=e;return"a custom chart theme with the name ".concat(t," has been supplied but not added to the 'chartThemes' list")},140:e=>{let{name:t}=e;return"no stock theme exists with the name '".concat(t,"' and no custom chart theme with that name was supplied to 'customChartThemes'")},141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:e=>{let{panel:t}=e;return"'".concat(t,"' is not a valid Chart Tool Panel name")},144:e=>{let{type:t}=e;return"Invalid charts data panel group name supplied: '".concat(t,"'")},145:e=>{let{group:t}=e;return"As of v32, only one charts customize panel group can be expanded at a time. '".concat(t,"' will not be expanded.")},146:e=>{let{comp:t}=e;return"Unable to instantiate component '".concat(t,"' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.")},147:e=>{let{group:t}=e;return"Invalid charts customize panel group name supplied: '".concat(t,"'")},148:e=>{let{group:t}=e;return"invalid chartGroupsDef config '".concat(t,"'")},149:e=>{let{group:t,chartType:i}=e;return"invalid chartGroupsDef config '".concat(t,".").concat(i,"'")},150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:e=>{let{chartType:t}=e;return"invalid chartType '".concat(t,"' supplied in 'seriesChartTypes', converting to 'line' instead.")},152:e=>{let{colId:t}=e;return"no 'seriesChartType' found for colId = '".concat(t,"', defaulting to 'line'.")},153:e=>{let{chartDataType:t}=e;return"unexpected chartDataType value '".concat(t,"' supplied, instead use 'category', 'series' or 'excluded'")},154:e=>{let{colId:t}=e;return"cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ".concat(t)},155:e=>{let{option:t}=e;return"'".concat(t,"' is not a valid Chart Toolbar Option")},156:e=>{let{panel:t}=e;return"Invalid panel in chartToolPanelsDef.panels: '".concat(t,"'")},157:e=>{let{unrecognisedGroupIds:t}=e;return["unable to find group(s) for supplied groupIds:",t]},158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:e=>{let{id:t,dataType:i}=e;return"Unrecognized data type for excel export [".concat(t,".dataType=").concat(i,"]")},163:e=>{let{featureName:t}=e;return"Excel table export does not work with ".concat(t,". The exported Excel file will not contain any Excel tables.\n Please turn off ").concat(t," to enable Excel table exports.")},164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:e=>{let{unrecognisedGroupIds:t}=e;return["unable to find groups for these supplied groupIds:",t]},167:e=>{let{unrecognisedColIds:t}=e;return["unable to find columns for these supplied colIds:",t]},168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:e=>{let{providedStrategy:t}=e;return"invalid cellRendererParams.refreshStrategy = ".concat(t," supplied, defaulting to refreshStrategy = 'rows'.")},171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:e=>{let{group:t}=e;return"invalid chartGroupsDef config '".concat(t,"'")},174:e=>{let{group:t,chartType:i}=e;return"invalid chartGroupsDef config '".concat(t,".").concat(i,"'")},175:e=>{let{menuTabName:t,itemsToConsider:i}=e;return["Trying to render an invalid menu item '".concat(t,"'. Check that your 'menuTabs' contains one of "),i]},176:e=>{let{key:t}=e;return"unknown menu item type ".concat(t)},177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:e=>{let{colId:t}=e;return"column ".concat(t," is not visible")},179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:e=>{let{parentGroupData:t,childNodeData:i}=e;return["duplicate group keys for row data, keys should be unique",[t,i]]},185:e=>{let{data:t}=e;return["getDataPath() should not return an empty path",[t]]},186:e=>{let{rowId:t,rowData:i,duplicateRowsData:n}=e;return["duplicate group keys for row data, keys should be unique",t,i,...null!==n&&void 0!==n?n:[]]},187:e=>{let{rowId:t,firstData:i,secondData:n}=e;return["Duplicate node id ".concat(t,". Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),"first instance",i,"second instance",n]},188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:e=>{let{startRow:t}=e;return"invalid value ".concat(t," for startRow, the value should be >= 0")},190:e=>{let{rowGroupId:t,data:i}=e;return["null and undefined values are not allowed for server side row model keys",t?"column = ".concat(t):"","data is ",i]},194:e=>{let{method:t}=e;return"calling gridApi.".concat(t,"() is only possible when using rowModelType=`clientSide`.")},195:e=>{let{justCurrentPage:t}=e;return"selecting just ".concat(t?"current page":"filtered"," only works when gridOptions.rowModelType='clientSide'")},196:e=>{let{key:t}=e;return"Provided ids must be of string type. Invalid id provided: ".concat(t)},197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:qx,201:e=>{let{rowModelType:t}=e;return"Could not find row model for rowModelType = ".concat(t)},202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:e=>{let{duplicateIdText:t}=e;return"Unable to display rows as duplicate row ids (".concat(t,") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.")},206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>"Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ".concat(Dc,"/filter-set-filter-list/#filter-value-types"),210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:e=>{let{key:t}=e;return"unable to lookup Tool Panel as invalid key supplied: ".concat(t)},215:e=>{let{key:t,defaultByKey:i}=e;return"the key ".concat(t," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(null!==i&&void 0!==i?i:{}).join(","))},216:e=>{let{name:t}=e;return"Missing component for '".concat(t,"'")},217:e=>{let{invalidColIds:t}=e;return["unable to find grid columns for the supplied colDef(s):",t]},218:e=>{let{property:t,defaultOffset:i}=e;return"".concat(t," must be a number, the value you provided is not a valid number. Using the default of ").concat(i,"px.")},219:e=>{let{property:t}=e;return"Property ".concat(t," does not exist on the target object.")},220:e=>{let{lineDash:t}=e;return"'".concat(t,"' is not a valid 'lineDash' option.")},221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:e=>{let{menuItemOrString:t}=e;return"unrecognised menu item ".concat(t)},229:e=>{let{index:t}=e;return["invalid row index for ensureIndexVisible: ",t]},230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:e=>{let{methodName:t}=e;return"Framework component is missing the method ".concat(t,"()")},234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:e=>{let{theme:t}=e;return'theme grid option must be a Theming API theme object or the string "legacy", received: '.concat(t)},243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>"Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. \nPlease rebuild the selection state and reapply it.",248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:e=>{let{chartType:t}=e;return"AG Grid: Unable to create chart as an invalid chartType = '".concat(t,"' was supplied.")},252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:e=>{let{version:t}=e;return["Illegal version string: ",t]},254:()=>"Cannot create chart: no chart themes available.",255:e=>{let{point:t}=e;return"Lone surrogate U+".concat(null===t||void 0===t?void 0:t.toString(16).toUpperCase()," is not a scalar value")},256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>Kx("IntegratedChartsModule"),258:()=>Kx("SparklinesModule"),259:e=>{let{part:t}=e;return"the argument to theme.withPart must be a Theming API part object, received: ".concat(t)},260:e=>{let{propName:t,compName:i,gridScoped:n,gridId:o,rowModelType:s}=e;return qx({reasonOrId:"AG Grid '".concat(t,"' component: ").concat(i),moduleName:Qy[i],gridId:o,gridScoped:n,rowModelType:s})},261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:e=>{let{colId:t}=e;return"Unable to infer chart data type for column '".concat(t,'\' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ').concat(Dc,"/integrated-charts-range-chart#coldefchartdatatype .")},266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:e=>{let{id:t,parentId:i}=e;return"Cycle detected for row with id='".concat(t,"' and parent id='").concat(i,"'. Resetting the parent for row with id='").concat(t,"' and showing it as a root-level node.")},271:e=>{let{id:t,parentId:i}=e;return"Parent row not found for row with id='".concat(t,"' and parent id='").concat(i,"'. Showing row with id='").concat(t,"' as a root-level node.")},272:()=>"No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    ",273:e=>{let{providedId:t,usedId:i}=e;return"Provided column id '".concat(t,"' was already in use, ensure all column and group ids are unique. Using '").concat(i,"' instead.")},274:e=>{let{prop:t}=e,i="Since v33, ".concat(t," has been deprecated.");switch(t){case"maxComponentCreationTimeMs":i+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":i+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":i+=" For multiple versions AgGridReact does not support children."}return i},275:Ux,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:e=>{let{colId:t}=e;return"'enableFilterHandlers' is set to true, but column '".concat(t,"' does not have 'filter.doesFilterPass' or 'filter.handler' set.")},278:e=>{let{colId:t}=e;return"Unable to create filter handler for column '".concat(t,"'")},279:e=>{},280:e=>{let{colId:t}=e;return"'name' must be provided for custom filter components for column '".concat(t)},281:e=>{let{colId:t}=e;return"Filter for column '".concat(t,"' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.")},282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:e=>{let{rowModelType:t}=e;return"Row Model '".concat(t,"' is not supported with Batch Editing")},290:e=>{let{rowIndex:t,rowPinned:i}=e;return"Row with index '".concat(t,"' and pinned state '").concat(i,"' not found")}};var Qx={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},$x=new WeakMap,Xx=new WeakMap;var Jx=1,Zx=class{create(e,t,i,n,o,s){var r;const a=ed.applyGlobalGridOptions(t),l=null!==(r=a.gridId)&&void 0!==r?r:String(Jx++),d=this.getRegisteredModules(o,l,a.rowModelType),c=this.createBeansList(a.rowModelType,d,l),u=this.createProvidedBeans(e,a,o);if(!c)return;const h=new Tp({providedBeanInstances:u,beanClasses:c,gridId:l,beanInitComparator:ub,beanDestroyComparator:hb,derivedBeans:[db],destroyCallback:()=>{Xx.delete(p),$x.delete(e),null===s||void 0===s||s()}});this.registerModuleFeatures(h,d),i(h),h.getBean("syncSvc").start(),null===n||void 0===n||n(h);const p=h.getBean("gridApi");return $x.set(e,p),Xx.set(p,e),p}getRegisteredModules(e,t,i){var n;return Ep(_x,void 0,!0),null===e||void 0===e||null===(n=e.modules)||void 0===n||n.forEach((e=>Ep(e,t))),function(e,t){var i,n,o,s,r;const a=null!==(i=Cp[e])&&void 0!==i?i:{};return[...Object.values(null!==(n=xp.all)&&void 0!==n?n:{}),...Object.values(null!==(o=a.all)&&void 0!==o?o:{}),...Object.values(null!==(s=xp[t])&&void 0!==s?s:{}),...Object.values(null!==(r=a[t])&&void 0!==r?r:{})]}(t,eC(i))}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");t.forEach((e=>{i.registerModule(e);const t=e.apiFunctions;if(t){Object.keys(t).forEach((e=>{null===n||void 0===n||n.addFunction(e,t[e])}))}}))}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;Ul(n)&&(n=new lb);const o={gridOptions:t,eGridDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},o=eC(e),s=n[o];if(!s)return void Bc(201,{rowModelType:o},"Unknown rowModelType ".concat(o,"."));if(!Sp)return void Bc(272,void 0,"No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    ");if(!e){const e=Object.entries(n).filter((e=>{let[t,n]=e;return Fp(n,i,t)}));if(1==e.length){const[t,i]=e[0];if(t!==o){const e={moduleName:i,rowModelType:t};return void Bc(275,e,Ux(e))}}}if(!Fp(s,i,o))return void Bc(200,{reasonOrId:"rowModelType = '".concat(o,"'"),moduleName:s,gridScoped:Dp(),gridId:i,rowModelType:o},"Missing module ".concat(s,"Module for rowModelType ").concat(o,"."));const r=new Set;return t.forEach((e=>{var t;return null===(t=e.beans)||void 0===t?void 0:t.forEach((e=>r.add(e)))})),Array.from(r)}};function eC(e){return null!==e&&void 0!==e?e:"clientSide"}function tC(e){const t=e.rowModel;return"clientSide"===t.getType()?t:void 0}function iC(e){const t=e.rowModel;return"infinite"===t.getType()?t:void 0}function nC(e){const t=e.rowModel;return"serverSide"===t.getType()?t:void 0}function oC(e){const t=[];return e.forEach((e=>{let{groupId:i,open:n}=e;n&&t.push(i)})),t.length?{openColumnGroupIds:t}:void 0}var sC,rC=class{wrap(e,t,i,n){const o=this.createWrapper(e,n);return null===t||void 0===t||t.forEach((e=>{this.createMethod(o,e,!0)})),null===i||void 0===i||i.forEach((e=>{this.createMethod(o,e,!1)})),o}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&_c(49,{methodName:t}),null)}}},aC={tag:"div",cls:"ag-tooltip"},lC=!1,dC=class extends Vu{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,i,n,o,s,r;return"show"===e?null!==(o=null===(s=(r=this.tooltipCtrl).getTooltipShowDelayOverride)||void 0===s?void 0:s.call(r))&&void 0!==o?o:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(t=null===(i=(n=this.tooltipCtrl).getTooltipHideDelayOverride)||void 0===i?void 0:i.call(n))&&void 0!==t?t:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),Td()||(lC?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(e)}),100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const i=e.relatedTarget,n=this.tooltipCtrl.getGui(),o=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&null!==o&&void 0!==o&&o.contains(i)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(0!=this.state||lC)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-sC<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var e,t,i,n,o,s,r,a,l;const d=this.getTooltipValue(),c=this.tooltipCtrl;if(!Wl(d)||c.shouldDisplayTooltip&&!c.shouldDisplayTooltip())return void this.setToDoNothing();const h=null===(e=c.getRowNode)||void 0===e?void 0:e.call(c),p=Fu(this.gos,u({location:null!==(t=null===(i=c.getLocation)||void 0===i?void 0:i.call(c))&&void 0!==t?t:"UNKNOWN",colDef:null===(n=c.getColDef)||void 0===n?void 0:n.call(c),column:null===(o=c.getColumn)||void 0===o?void 0:o.call(c),rowIndex:null===(s=c.getRowIndex)||void 0===s?void 0:s.call(c),node:h,data:null===h||void 0===h?void 0:h.data,value:d,valueFormatted:null===(r=c.getValueFormatted)||void 0===r?void 0:r.call(c),hideTooltipCallback:()=>this.hideTooltip(!0)},null!==(a=null===(l=c.getAdditionalParams)||void 0===l?void 0:l.call(c))&&void 0!==a?a:{}));this.state=2,this.tooltipInstanceCount++;const g=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),m=function(e,t){return e.getCompDetails(t.colDef,rp,"agTooltipComponent",t,!0)}(this.userCompFactory,p);null===m||void 0===m||m.newAgStackInstance().then(g)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),sC=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var i;if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const o=this.getLocaleTextFunc(),s=null===(i=this.popupSvc)||void 0===i?void 0:i.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Zc(this.beans),{keydown:e=>{n.contains(null===e||void 0===e?void 0:e.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var e;const t=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui(),i=iu(this.beans);return!!t&&t.contains(i)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};var t,i;this.lastMouseEvent?null===(t=this.popupSvc)||void 0===t||t.positionPopupUnderMouseEvent(u(u({},e),{},{mouseEvent:this.lastMouseEvent})):null===(i=this.popupSvc)||void 0===i||i.positionPopupByComponent(u(u({},e),{},{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){lC=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){lC=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function cC(e){return"whenTruncated"===e.get("tooltipShowMode")}var uC=class extends Vu{getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?"".concat(e,".").concat(t):e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return"export.".concat(this.getDefaultFileExtension())}},hC=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:o,gos:s,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=o,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=d}prepare(e){}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return null!==t&&void 0!==t?t:""}extractRowCellValue(e,t,i,n,o){var s,r;const a=0===t&&hu(this.gos,o,this.colModel.isPivotMode());var l,d;if(this.processRowGroupCallback&&(this.gos.get("treeData")||o.group)&&(e.isRowGroupDisplayed(null!==(s=null===(r=o.rowGroupColumn)||void 0===r?void 0:r.getColId())&&void 0!==s?s:"")||a))return{value:null!==(l=this.processRowGroupCallback(Fu(this.gos,{column:e,node:o})))&&void 0!==l?l:""};if(this.processCellCallback)return{value:null!==(d=this.processCellCallback(Fu(this.gos,{accumulatedRowIndex:i,column:e,node:o,value:this.valueSvc.getValueForDisplay(e,o,void 0,void 0).value,type:n,parseValue:t=>this.valueSvc.parseValue(e,o,t,this.valueSvc.getValue(e,o,void 0)),formatValue:t=>{var i;return null!==(i=this.valueSvc.formatValue(e,o,t))&&void 0!==i?i:t}})))&&void 0!==d?d:""};const c=this.gos.get("treeData"),u=this.valueSvc,h=-1===o.level&&o.footer,p=!0===e.colDef.showRowGroup&&(o.group||c);if(!h&&(a||p)){let t="",i=o;for(;i&&-1!==i.level;){var g;const{value:n,valueFormatted:o}=u.getValueForDisplay(a?void 0:e,i,!0,!0);t=" -> ".concat(null!==(g=null!==o&&void 0!==o?o:n)&&void 0!==g?g:"").concat(t),i=i.parent}return{value:t,valueFormatted:t}}const{value:m,valueFormatted:f}=u.getValueForDisplay(e,o,!0,!0);return{value:null!==m&&void 0!==m?m:"",valueFormatted:f}}getHeaderName(e,t){return e?e(Fu(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};var pC={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},gC="clientSide",mC="serverSide",fC="infinite",vC={onGroupExpandedOrCollapsed:[gC],refreshClientSideRowModel:[gC],isRowDataEmpty:[gC],forEachLeafNode:[gC],forEachNodeAfterFilter:[gC],forEachNodeAfterFilterAndSort:[gC],resetRowHeights:[gC],applyTransaction:[gC],applyTransactionAsync:[gC],flushAsyncTransactions:[gC],getBestCostNodeSelection:[gC],getServerSideSelectionState:[mC],setServerSideSelectionState:[mC],applyServerSideTransaction:[mC],applyServerSideTransactionAsync:[mC],applyServerSideRowData:[mC],retryServerSideLoads:[mC],flushServerSideAsyncTransactions:[mC],refreshServerSide:[mC],getServerSideGroupLevelState:[mC],refreshInfiniteCache:[fC],purgeInfiniteCache:[fC],getInfiniteRowCount:[fC],isLastRowIndexKnown:[fC,mC],expandAll:[gC,mC],collapseAll:[gC,mC],onRowHeightChanged:[gC,mC],setRowCount:[fC,mC],getCacheBlockState:[fC,mC]},bC={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};var wC={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},yC={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},xC={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},CC=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]);var SC=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),RC={moduleName:"Validation",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,Fc=this}warnOnInitialPropertyUpdate(e,t){"api"===e&&pC[t]&&_c(22,{key:t})}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...ex,...Zy,...Jy,...tx,...sx,...ox,...nx,...ix,...Object.values(Gy)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}},validations:lx()})}validateApiFunction(e,t){return function(e,t,i){const n=bC[e];if(n){const{version:i,new:o,old:s,message:r}=n,a=null!==s&&void 0!==s?s:e;return function(){const e=o?"Please use ".concat(o," instead. "):"";bc("Since ".concat(i," api.").concat(a," is deprecated. ").concat(e).concat(null!==r&&void 0!==r?r:""));for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return t.apply(t,s)}}const o=vC[e];return o?function(){const n=i.rowModel.getType();if(o.includes(n)){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return t.apply(t,r)}wc("api.".concat(e," can only be called when gridOptions.rowModelType is ").concat(o.join(" or ")))}:t}(e,t,this.beans)}missingUserComponent(e,t,i,n){const o=Qy[t];o?this.gos.assertModuleRegistered(o,"AG Grid '".concat(e,"' component: ").concat(t)):_c(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})}missingDynamicBean(e){const t=wC[e];return t?Vc(200,u(u({},this.gos.getModuleErrorParams()),{},{moduleName:t,reasonOrId:e})):void 0}checkRowEvents(e){SC.has(e)&&_c(10,{eventType:e})}validateIcon(e){if(CC.has(e)&&_c(43,{iconName:e}),yC[e])return;const t=xC[e];t?Oc(200,{reasonOrId:"icon '".concat(e,"'"),moduleName:t,gridScoped:Dp(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."}):_c(134,{iconName:e})}isProvidedUserComp(e){return!!Qy[e]}validateColDef(e){this.processOptions(e,{objectName:"colDef",allProperties:Object.keys(Xy),docsUrl:"column-properties/",deprecations:{checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:{autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{paginationAutoPageSize:i}=t;return i?"colDef.autoHeight is not supported with paginationAutoPageSize.":null}},cellRendererParams:{validate:e=>null==e.rowGroup&&null==e.rowGroupIndex&&"agGroupCellRenderer"!==e.cellRenderer||!("checkbox"in e.cellRendererParams)?null:'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.'},flex:{validate:(e,t)=>t.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerValueGetter:{validate:e=>{const t=e.headerValueGetter;return"function"===typeof t||"string"===typeof t?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:e=>{let{icons:t}=e;if(t){if(t.smallDown)return Vc(262);if(t.smallLeft)return Vc(263);if(t.smallRight)return Vc(264)}return null}},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>!Yy.includes(e)));if(e.length>0)return"sortingOrder must be an array with elements from [".concat(Yy.map(jc).join(),"], currently it includes [").concat(e.map(jc).join(),"]")}else if(!Array.isArray(t)||t.length<=0)return"sortingOrder must be an array with at least one element, currently it's ".concat(t);return null}},type:{validate:e=>{const t=e.type;return t instanceof Array?t.some((e=>"string"!==typeof e))?"if colDef.type is supplied an array it should be of type 'string[]'":null:"string"===typeof t?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,t)=>{let{suppressRowTransform:i}=t;return i?null:"colDef.rowSpan requires suppressRowTransform to be enabled."}},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(e,t)=>{let{rowSelection:i,cellSelection:n,suppressRowTransform:o,enableCellSpan:s,rowDragEntireRow:r,enableCellTextSelection:a}=t;return"object"===typeof i&&"singleRow"===(null===i||void 0===i?void 0:i.mode)&&null!==i&&void 0!==i&&i.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":n?"colDef.spanRows is not supported with cellSelection.":o?"colDef.spanRows is not supported with suppressRowTransform.":s?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}}})}processOptions(e,t){const{validations:i,deprecations:n,allProperties:o,propertyExceptions:s,objectName:r,docsUrl:a}=t;o&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...null!==s&&void 0!==s?s:[],...Object.keys(n)],o,r,a);const l=new Set;Object.keys(e).forEach((t=>{const o=n[t];if(o){const{message:e,version:i}=o;l.add("As of v".concat(i,", ").concat(String(t)," is deprecated. ").concat(null!==e&&void 0!==e?e:""))}const s=e[t];if(null==s||!1===s)return;const r=i[t];if(!r)return;const{dependencies:a,validate:d,supportedRowModels:c,expectedType:u}=r;if(u){const e=typeof s;if(e!==u)return void l.add("".concat(String(t)," should be of type '").concat(u,"' but received '").concat(e,"' (").concat(s,")."))}if(c){var h;const e=null!==(h=this.gridOptions.rowModelType)&&void 0!==h?h:"clientSide";if(!c.includes(e))return void l.add("".concat(String(t)," is not supported with the '").concat(e,"' row model. It is only valid with: ").concat(c.join(", "),"."))}if(a){const i=this.checkForRequiredDependencies(t,a,e);if(i)return void l.add(i)}if(d){const t=d(e,this.gridOptions,this.beans);if(t)return void l.add(t)}})),l.size>0&&l.forEach((e=>{bc(e)}))}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).filter((e=>{let[t,n]=e;const o=i[t];return!n.required.includes(o)}));return 0===n.length?null:n.map((t=>{var i;let[n,o]=t;return"'".concat(String(e),"' requires '").concat(n,"' to be one of [").concat(o.required.map((e=>null===e?"null":void 0===e?"undefined":e)).join(", "),"]. ").concat(null!==(i=o.reason)&&void 0!==i?i:"")})).join("\n           ")}checkProperties(e,t,i,n,o){const s=function(e,t,i){const n={},o=e.filter((e=>!t.some((t=>t===e))));o.length>0&&o.forEach((e=>n[e]=Ox({inputValue:e,allSuggestions:i}).values));return n}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i),r=Object.keys(s);for(const a of r){const e=s[a];let t="invalid ".concat(n," property '").concat(a,"' did you mean any of these: ").concat(e.slice(0,8).join(", "),".");i.includes("context")&&(t+="\nIf you are trying to annotate ".concat(n," with application data, use the '").concat(n,".context' property instead.")),bc(t)}if(r.length>0&&o){const e=this.beans.frameworkOverrides.getDocLink(o);bc("to see all the valid ".concat(n," properties please check: ").concat(e))}}getConsoleMessage(e,t){return function(e,t){const i=Yx[e];if(!i)return["Missing error text for error id ".concat(e,"!")];const n=i(t),o=Ic(e,t),s="\nSee ".concat(o);return Array.isArray(n)?n.concat(s):[n,s]}(e,t)}}]};function kC(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var PC={moduleName:"SharedMenu",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=null!==e&&void 0!==e?e:t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(rv(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){var n;null===(n=this.activeMenuFactory)||void 0===n||n.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){var e,t;null===(e=this.beans.contextMenuSvc)||void 0===e||e.hideActiveMenu(),null===(t=this.activeMenuFactory)||void 0===t||t.hideActiveMenu()}hideFilterMenu(){var e;null===(e=rv(this.beans))||void 0===e||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var t;const{suppressHeaderMenuButton:i}=e.getColDef();return!i&&!(null===(t=this.activeMenuFactory)||void 0===t||!t.isMenuEnabled(e))&&(Eu(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&Qu(e)?e.getColDef():null===e||void 0===e?void 0:e.getColGroupDef();return!(null!==t&&void 0!==t&&t.suppressHeaderContextMenu)&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Td()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Eu(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))&&!Eu(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Eu(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,n){const{positionBy:o,onClosedCallback:s}=t,r=t.column;if("button"===o){const{buttonElement:o}=t;null===e||void 0===e||e.showMenuAfterButtonClick(r,o,i,s,n)}else if("mouse"===o){const{mouseEvent:o}=t;null===e||void 0===e||e.showMenuAfterMouseEvent(r,o,i,s,n)}else if(r){const t=this.beans,o=t.ctrlsSvc;o.getScrollFeature().ensureColumnVisible(r,"auto"),cc(t,(()=>{var t;const a=null===(t=o.getHeaderRowContainerCtrl(r.getPinned()))||void 0===t?void 0:t.getHeaderCtrlForColumn(r);a&&(null===e||void 0===e||e.showMenuAfterButtonClick(r,a.getAnchorElementForMenu(n),i,s,n))}))}}}],apiFunctions:{showColumnMenu:function(e,t){var i;const n=e.colModel.getCol(t);n?null===(i=e.menuSvc)||void 0===i||i.showColumnMenu({column:n,positionBy:"auto"}):Oc(12,{colKey:t})},hidePopupMenu:function(e){var t;null===(t=e.menuSvc)||void 0===t||t.hidePopupMenu()}}},EC=0,FC={moduleName:"Popup",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i,column:n,node:o,event:s}=e,r=t.getBoundingClientRect(),a=this.getParentRect();this.setAlignedTo(t,i);let l=!1;this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:()=>{const e=this.keepXYWithinBounds(i,r.top-a.top,0),t=i.clientWidth>0?i.clientWidth:200;l||(i.style.minWidth="".concat(t,"px"),l=!0);const n=a.right-a.left-t;let o;return this.gos.get("enableRtl")?(o=d(),o<0&&(o=s(),this.setAlignedStyles(i,"left")),o>n&&(o=0,this.setAlignedStyles(i,"right"))):(o=s(),o>n&&(o=d(),this.setAlignedStyles(i,"right")),o<0&&(o=0,this.setAlignedStyles(i,"left"))),{x:o,y:e};function s(){return r.right-a.left-2}function d(){return r.left-a.left-t}},postProcessCallback:()=>this.callPostProcessPopup("subMenu",i,t,s instanceof MouseEvent?s:void 0,n,o)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,eventSource:s,alignSide:r="left",position:a="over",column:l,rowNode:d,type:c}=e,u=s.getBoundingClientRect(),h=this.getParentRect();this.setAlignedTo(s,t);this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:o,updatePosition:()=>{let i,o=u.left-h.left;if("right"===r&&(o-=t.offsetWidth-u.width),"over"===a)i=u.top-h.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,u,h,e.nudgeY||0)?u.top-h.top+u.height:u.top-t.offsetHeight-2*(n||0)-h.top}return{x:o,y:i}},postProcessCallback:()=>this.callPostProcessPopup(c,t,s,null,l,d)})}shouldRenderUnderOrAbove(e,t,i,n){const o=i.bottom-t.bottom,s=t.top-i.top,r=e.offsetHeight+n;return o>r?"under":s>r||s>o?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i],{alignedToElement:o}=n;if(!o)return;["right","left","over","above","under"].forEach((t=>{o.classList.remove("ag-has-popup-positioned-".concat(t)),e.classList.remove("ag-popup-positioned-".concat(t))})),t&&(o.classList.add("ag-has-popup-positioned-".concat(t)),e.classList.add("ag-popup-positioned-".concat(t)))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(-1!==i){this.popupList[i].alignedToElement=e}}callPostProcessPopup(e,t,i,n,o,s){const r=this.gos.getCallback("postProcessPopup");if(r){r({column:o,rowNode:s,ePopup:t,type:e,eventSource:i,mouseEvent:n})}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:n,nudgeX:o,nudgeY:s,skipObserver:r,updatePosition:a}=e,l={width:0,height:0},d=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:d,y:c}=a();r&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,o&&(d+=o),s&&(c+=s),n&&(d=t.keepXYWithinBounds(i,d,1),c=t.keepXYWithinBounds(i,c,0)),i.style.left="".concat(d,"px"),i.style.top="".concat(c,"px"),e.postProcessCallback&&e.postProcessCallback())};if(d(),!r){const e=dc(this.beans,i,(()=>d(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getParentRect(){const e=Zc(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),qd(t)}keepXYWithinBounds(e,t,i){const n=0===i,o=n?"clientHeight":"clientWidth",s=n?"top":"left",r=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=Zc(this.beans),d=l.documentElement,c=this.getPopupParent(),u=e.getBoundingClientRect(),h=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=c===l.body,m=Math.ceil(u[r]);let f=g?(n?Wd:Ud)(d)+d[a]:c[o];g&&(f-=Math.abs(p[s]-h[s]));const v=f-m;return Math.min(Math.max(t,0),Math.abs(v))}addPopup(e){const t=Zc(this.beans),{eChild:i,ariaLabel:n,ariaOwns:o,alwaysOnTop:s,positionCallback:r,anchorToElement:a}=e;if(!t)return _c(122),{hideFunc:()=>{}};const l=this.getPopupIndex(i);if(-1!==l){return{hideFunc:this.popupList[l].hideFunc}}this.initialisePopupPosition(i);const d=this.createPopupWrapper(i,!!s,n,o),c=this.addEventListenersToPopup(u(u({},e),{},{wrapperEl:d}));return r&&r(),this.addPopupToPopupList(i,d,c,a),{hideFunc:c}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();Wl(e.style.top)||(e.style.top="".concat(-1*t.top,"px")),Wl(e.style.left)||(e.style.left="".concat(-1*t.left,"px"))}createPopupWrapper(e,t,i,n){const o=this.getPopupParent(),{environment:s,gos:r}=this.beans,a=gc({tag:"div"});return s.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||pd(e,"dialog"),i?gd(e,i):n&&(e.id||(e.id="popup-component-".concat(EC)),Ed(n,e.id)),a.appendChild(e),o.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}handleThemeChange(e){if(e.themeChanged){const e=this.beans.environment;for(const t of this.popupList)e.applyThemeClasses(t.wrapper)}}addEventListenersToPopup(e){var t=this;const i=this.beans,n=Zc(i),o=this.getPopupParent(),{wrapperEl:s,eChild:r,closedCallback:a,afterGuiAttached:l,closeOnEsc:d,modal:c,ariaOwns:u}=e;let h=!1;const p=e=>{if(!s.contains(iu(i)))return;e.key!==pg||Lu(e)||f({keyboardEvent:e})},g=e=>f({mouseEvent:e}),m=e=>f({touchEvent:e}),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:i,touchEvent:l,keyboardEvent:d,forceHide:c}=e;(c||!t.isEventFromCurrentPopup({mouseEvent:i,touchEvent:l},r)&&!h)&&(h=!0,o.removeChild(s),n.removeEventListener("keydown",p),n.removeEventListener("mousedown",g),n.removeEventListener("touchstart",m),n.removeEventListener("contextmenu",g),t.eventSvc.removeEventListener("dragStarted",g),a&&a(i||l||d),t.removePopupFromPopupList(r,u))};return l&&l({hidePopup:f}),window.setTimeout((()=>{d&&n.addEventListener("keydown",p),c&&(n.addEventListener("mousedown",g),this.eventSvc.addEventListener("dragStarted",g),n.addEventListener("touchstart",m),n.addEventListener("contextmenu",g))}),0),f}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:EC,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n),EC+=1}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then((e=>e&&e())),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=o,n.isAnchored=!0,o}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&Ed(t,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:o}=e,s=n.getBoundingClientRect(),r=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const n=i[e]-s[e],a=r(o.style[e]);return{initialDiff:n,lastDiff:n,initial:a,last:a,direction:t}},l=a("top",0),d=a("left",1),c=this.beans.frameworkOverrides;return new Kh((i=>{c.wrapIncoming((()=>{c.setInterval((()=>{const i=t.getBoundingClientRect(),s=n.getBoundingClientRect();if(0==s.top&&0==s.left&&0==s.height&&0==s.width)return void e.hidePopup();const a=(e,t)=>{const n=r(o.style[t]);e.last!==n&&(e.initial=n,e.last=n);const a=i[t]-s[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(o,e.initial+e.initialDiff-a,e.direction);o.style[t]="".concat(i,"px"),e.last=i}e.lastDiff=a};a(l,"top"),a(d,"left")}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,o=i||n;if(!o)return!1;const s=this.getPopupIndex(t);if(-1===s)return!1;for(let r=s;r<this.popupList.length;r++){if(Bu(this.popupList[r].element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=Zc(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,o=this.getWrapper(e);if(!o||n<=1||!t.contains(e))return;const s=[],r=[];for(const c of i)c!==o&&(c.classList.contains("ag-always-on-top")?r.push(c):s.push(c));const a=[],l=r.length,d=o.classList.contains("ag-always-on-top")||!l?[...s,...r,o]:[...s,o,...r];for(let c=0;c<=n;c++){const e=d[c];if(i[c]===d[c]||e===o)continue;e.querySelectorAll("div").forEach((e=>{0!==e.scrollTop&&a.push([e,e.scrollTop])})),0===c?t.insertAdjacentElement("afterbegin",e):d[c-1].insertAdjacentElement("afterend",e)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}}]};var DC={filterHandler:()=>({doesFilterPass:()=>!0})};var NC={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},MC=class{constructor(){this.customFilterOptions={}}init(e,t){var i;this.filterOptions=null!==(i=e.filterOptions)&&void 0!==i?i:t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){var i;const n=null!==(i=e.filterOptions)&&void 0!==i?i:t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach((t=>{if("string"===typeof t)return;[["displayKey"],["displayName"],["predicate","test"]].every((e=>!!e.some((e=>null!=t[e]))||(_c(72,{keys:e}),!1)))?this.customFilterOptions[t.displayKey]=t:this.filterOptions=e.filter((e=>e===t))||[]}))}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const e=t[0];if("string"===typeof e)return e;if(e.displayKey)return e.displayKey;_c(73)}else _c(74)}getCustomOption(e){return this.customFilterOptions[e]}};function TC(e,t,i){return null==i?e.splice(t):e.splice(t,i)}function jC(e){return null==e||"string"===typeof e&&0===e.trim().length}function AC(e,t){const i=t.getCustomOption(e);if(i){const{numberOfInputs:e}=i;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}var IC=class extends Ym{constructor(e,t,i){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=i,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new MC;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){var t;this.setNumConditions(e),this.defaultJoinOperator="AND"===(t=e.defaultJoinOperator)||"OR"===t?t:"AND",this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const i=this.getGui();this.isReadOnly()?i.setAttribute("tabindex","-1"):i.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{const n=0===i?e:this.optionsFactory.defaultOption;t.setValue(n,!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return 0===e.length?t:!0===e[0].getValue()?"OR":"AND"}areNonNullModelsEqual(e,t){const i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let o;if(i){const i=e,n=t;o=this.areSimpleModelsEqual(i,n)}else{const i=e,n=t;o=i.operator===n.operator&&oh(i.conditions,n.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return o}setModelIntoUi(e,t){if(null==e)return this.resetUiToDefaults(t),Kh.resolve();if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],_c(77));const n=function(e,t){let i=e.length;return i>t&&(e.splice(t),_c(78),i=t),i}(i,this.maxNumConditions),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let e=o;e<n;e++)this.createJoinOperatorPanel(),this.createOption();const s="OR"===t.operator;this.eJoinAnds.forEach((e=>e.setValue(!s,!0))),this.eJoinOrs.forEach((e=>e.setValue(s,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Kh.resolve()}setNumConditions(e){var t,i;let n=null!==(t=e.maxNumConditions)&&void 0!==t?t:2;n<1&&(_c(79),n=1),this.maxNumConditions=n;let o=null!==(i=e.numAlwaysVisibleConditions)&&void 0!==i?i:1;o<1&&(_c(80),o=1),o>n&&(_c(81),o=n),this.numAlwaysVisibleConditions=o}createOption(){const e=this.getGui(),t=this.createManagedBean(new Jv);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const i=this.createEValue();this.eConditionBodies.push(i),e.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const n=this.getNumConditions()-1;this.forEachPositionInput(n,(e=>this.resetInput(e))),this.addChangedListeners(t,n)}createJoinOperatorPanel(){const e=gc({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),i=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const n=this.eJoinPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,o),this.resetJoinOperatorOr(i,n,o),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new Hv);e.push(n);const o="ag-filter-condition-operator";return n.addCss(o),n.addCss("".concat(o,"-").concat(i)),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map((e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach((t=>{e.addOption(t)})),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{var i;const t=null!==(i=this.lastUiCompletePosition)&&void 0!==i?i:this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,n=t-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const n=this.isConditionDisabled(i,e);t.setDisabled(n||this.filterListOptions.length<=1),1===i&&(Bd(this.eJoinPanels[0],n),this.eJoinAnds[0].setDisabled(n),this.eJoinOrs[0].setDisabled(n))})),this.eConditionBodies.forEach(((e,t)=>{Od(e,this.isConditionBodyVisible(t))}));const i="OR"===(null!==t&&void 0!==t?t:this.getJoinOperator());this.eJoinAnds.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOrs.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,n,o)=>{this.setElementDisplayed(t,i<o),this.setElementDisabled(t,this.isConditionDisabled(n,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:n,eJoinPanels:o,eJoinAnds:s,eJoinOrs:r}=this;this.removeComponents(i,e,t),this.removeElements(n,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(o,a,t),this.removeComponents(s,a,t),this.removeComponents(r,a,t)}removeElements(e,t,i){TC(e,t,i).forEach((e=>$d(e)))}removeComponents(e,t,i){TC(e,t,i).forEach((e=>{$d(e.getGui()),this.destroyBean(e)}))}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),null===e||void 0===e||!e.suppressFocus){var t;let e;if(!this.isReadOnly()){const t=this.getInputs(0)[0];var i;if(t instanceof fv&&this.isConditionBodyVisible(0))e=t.getInputElement();else e=null===(i=this.eTypes[0])||void 0===i?void 0:i.getFocusableElement()}(null!==(t=e)&&void 0!==t?t:this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){var e;super.afterGuiDetached();const t=this.params;if(null!==(e=this.beans.colFilter)&&void 0!==e&&e.shouldKeepStateOnDetach(t.column))return;t.onStateChange({model:t.model});let i=-1,n=-1,o=!1;const s=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))-1===i&&(i=a,n=a);else{const e=a<i;(a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1)||e)&&(this.removeConditionsAndOperators(a,1),o=!0,e&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,s),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){var t,i,n;return null!==(t=null===(i=this.params.getHandler())||void 0===i||null===(n=i.getModelAsString)||void 0===n?void 0:n.call(i,e))&&void 0!==t?t:""}getPlaceholderText(e,t){let i=this.translate(e);if("function"===typeof this.filterPlaceholder){const e=this.eTypes[t].getValue(),n=this.translate(e);i=this.filterPlaceholder({filterOptionKey:e,filterOption:n,placeholder:i})}else"string"===typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput(((t,i,n,o)=>{if(!(t instanceof fv))return;const s=0===i&&o>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",r=0===i&&o>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(s,n)),t.setInputAriaLabel(r)}))}setElementValue(e,t,i){e instanceof fv&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Uh&&Od(e.getGui(),t)}setElementDisabled(e,t){e instanceof Uh&&Bd(e.getGui(),t)}attachElementOnChange(e,t){e instanceof fv&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=AC(t,this.optionsFactory),o=this.getInputs(e);for(let s=0;s<o.length;s++){const t=o[s];null!=t&&i(t,s,e,n)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){return AC(this.getConditionType(e),this.optionsFactory)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinAnds.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOrs.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const t=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,"AND"===this.defaultJoinOperator,this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,"OR"===this.defaultJoinOperator,this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,o){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(o)).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput(((e,n,o)=>{o===t&&this.setElementValue(e,null!=i[n]?i[n]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,n)=>{this.setElementValue(t,0===i&&0===n?e:null,!0)}))}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},LC=class{constructor(e,t,i,n,o,s){this.alive=!0,this.context=e,this.eParent=o;const r=function(e,t,i){return e.getCompDetails(t,Qh,"agDateInput",i,!0)}(t,i,n);r&&r.newAgStackInstance().then((t=>{var i;if(!this.alive)return void e.destroyBean(t);if(this.dateComp=t,!t)return;o.appendChild(t.getGui()),null===t||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t);const{tempValue:n,disabled:r}=this;var a;(n&&t.setDate(n),null!=r)&&(null===(a=t.setDisabled)||void 0===a||a.call(t,r));null===s||void 0===s||s(this)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;var i;t?null===(i=t.setDisabled)||void 0===i||i.call(t,e):this.disabled=e}setDisplayed(e){Od(this.eParent,e)}setInputPlaceholder(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.setInputPlaceholder)||void 0===i||i.call(t,e)}setInputAriaLabel(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.setInputAriaLabel)||void 0===i||i.call(t,e)}afterGuiAttached(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e)}updateParams(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.refresh)||void 0===i||i.call(t,e)}},_C=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function OC(e,t){const{dateFrom:i,dateTo:n,type:o}=e||{};return[i&&Am(i)||null,n&&Am(n)||null].slice(0,AC(o,t))}var BC=1/0,zC=class extends Vu{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,i=new MC;this.optionsFactory=i,i.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if("colDef"===e.source){const t=e.filterParams,i=this.optionsFactory;i.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(null==t)return!0;const{operator:i}=t,n=[];if(i){var o;const e=t;n.push(...null!==(o=e.conditions)&&void 0!==o?o:[])}else n.push(t);const s=i&&"OR"===i?"some":"every",r=this.params.getValue(e.node);return n[s]((t=>this.individualConditionPasses(e,t,r)))}getModelAsString(e,t){var i;return null!==(i=this.filterModelFormatter.getModelAsString(e,t))&&void 0!==i?i:""}validateModel(e){var t;const{model:i,filterParams:{filterOptions:n,maxNumConditions:o}}=e;if(null==i)return;const s=function(e){return!!e.operator}(i);let r=s?i.conditions:[i];const a=null!==(t=null===n||void 0===n?void 0:n.map((e=>"string"===typeof e?e:e.displayKey)))&&void 0!==t?t:this.defaultOptions;if(!(!r||r.every((e=>void 0!==a.find((t=>t===e.type))))))return this.params=u(u({},e),{},{model:null}),void e.onModelChange(null);let l=!1;const d=this.filterType;if((r&&!r.every((e=>e.filterType===d))||i.filterType!==d)&&(r=r.map((e=>u(u({},e),{},{filterType:d}))),l=!0),"number"===typeof o&&r&&r.length>o&&(r=r.slice(0,o),l=!0),l){const t=r.length>1?u(u({},i),{},{filterType:d,conditions:r}):u(u({},r[0]),{},{filterType:d});return this.params=u(u({},e),{},{model:t}),void e.onModelChange(t)}}individualConditionPasses(e,t,i){const n=this.optionsFactory,o=this.mapValuesFromModel(t,n),s=function(e,t,i){if(null==e)return;const{predicate:n}=e;return null==n||t.some((e=>null==e))?void 0:n(t,i)}(n.getCustomOption(t.type),o,i);return null!=s?s:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(o,i,t,e)}},VC=class extends zC{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:n,includeBlanksInLessThan:o,includeBlanksInRange:s}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(o)return!0;break;case"inRange":if(s)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const n=i.type;if(!this.isValid(t))return"notEqual"===n||"notBlank"===n;const o=this.comparator(),s=null!=e[0]?o(e[0],t):0;switch(n){case"equals":return 0===s;case"notEqual":return 0!==s;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{const i=o(e[1],t);return this.params.filterParams.inRangeInclusive?s>=0&&i<=0:s>0&&i<0}case"blank":return jC(t);case"notBlank":return!jC(t);default:return _c(76,{filterModelType:n}),!0}}},HC={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},GC={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},WC=class extends Vu{constructor(e,t,i){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=i}getModelAsString(e,t){const i=this.getLocaleTextFunc(),n="filterToolPanel"===t;if(!e)return n?xm(this,"filterSummaryInactive"):null;if(null!=e.operator){var o;const i=e,n=(null!==(o=i.conditions)&&void 0!==o?o:[]).map((e=>this.getModelAsString(e,t))),s="AND"===i.operator?"andCondition":"orCondition";return n.join(" ".concat(xm(this,s)," "))}if("blank"===e.type||"notBlank"===e.type)return n?xm(this,"blank"===e.type?"filterSummaryBlank":"filterSummaryNotBlank"):i(e.type,e.type);{const t=e,o=this.optionsFactory.getCustomOption(t.type),{displayKey:s,displayName:r,numberOfInputs:a}=o||{};return s&&r&&0===a?i(s,r):this.conditionToString(t,n,"inRange"===t.type||2===a,s,r)}}updateParams(e){const{optionsFactory:t,filterParams:i}=e;this.optionsFactory=t,this.filterParams=i}conditionForToolPanel(e,t,i,n,o,s){let r;const a=this.getTypeKey(e);return a&&(r=xm(this,a)),o&&s&&(r=this.getLocaleTextFunc()(o,s)),null!=r?t?"".concat(r," ").concat(xm(this,"filterSummaryInRangeValues",[i(),n()])):"".concat(r," ").concat(i()):null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?"filterSummary".concat(t):null}formatValue(e){var t;const i=this.valueFormatter;return i?null!==(t=i(null!==e&&void 0!==e?e:null))&&void 0!==t?t:"":String(e)}},UC=class extends WC{constructor(e,t){super(e,t,(e=>{const{dataTypeSvc:i,valueSvc:n}=this.beans,o=t.column,s=null===i||void 0===i?void 0:i.getDateFormatterFunction(o),r=null===s||void 0===s?void 0:s(null!==e&&void 0!==e?e:void 0);return n.formatValue(o,null,r)})),this.filterTypeKeys=HC}conditionToString(e,t,i,n,o){const{type:s}=e,r=Am(e.dateFrom),a=Am(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,d=t?this.formatValue.bind(this):e=>Tm(e,l),c=()=>null!==r?d(r):"null",u=()=>null!==a?d(a):"null";if(t){const e=this.conditionForToolPanel(s,i,c,u,n,o);if(null!=e)return e}return i?"".concat(c(),"-").concat(u()):null!=r?d(r):"".concat(s)}};function qC(e,t){return t<e?-1:t>e?1:0}var KC=class extends Uh{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.defaultOption);let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const t=e;this.onModelUpdated(t.model)}}setParams(e){const t=new MC;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.optionsFactory.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;const n=this.isTypeEditable(i);this.setEditable(n)}refresh(e){this.params=e;const t=e,i=this.reactive;if(i&&"colDef"!==t.source||this.updateParams(e),i){const{source:e,model:i}=t;if("dataChanged"===e||"ui"===e)return;this.onModelUpdated(i)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){null!==t&&void 0!==t&&t.afterFloatingFilter||null!==t&&void 0!==t&&t.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){var t;const i=null===(t=this.optionsFactory.getCustomOption(e))||void 0===t?void 0:t.numberOfInputs;return null==i||1==i}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);return"".concat(t," ").concat(this.getLocaleTextFunc()("ariaFilterInput","Filter Input"))}},YC={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},QC={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},$C=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function XC(e){const{allowedCharPattern:t}=null!==e&&void 0!==e?e:{};return null!==t&&void 0!==t?t:null}function JC(e){return null==e||isNaN(e)?null:e}function ZC(e,t){const{filter:i,filterTo:n,type:o}=e||{};return[JC(i),JC(n)].slice(0,AC(o,t))}var eS=class extends WC{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=HC}conditionToString(e,t,i,n,o){const{filter:s,filterTo:r,type:a}=e,l=this.formatValue.bind(this);if(t){const e=this.conditionForToolPanel(a,i,(()=>l(s)),(()=>l(r)),n,o);if(null!=e)return e}return i?"".concat(l(s),"-").concat(l(r)):null!=s?l(s):"".concat(a)}},tS=class extends Vu{constructor(e){super(),this.params=e,this.eInput=Wh,this.onValueChanged=()=>{}}setupGui(e){var t;this.eInput=this.createManagedBean(new Gv(null===(t=this.params)||void 0===t?void 0:t.config));const i=this.eInput.getGui();e.appendChild(i);const n=e=>this.onValueChanged(e);this.addManagedListeners(i,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams(e){let{ariaLabel:t,autoComplete:i}=e;const{eInput:n}=this;n.setInputAriaLabel(t),void 0!==i&&n.setAutoComplete(i)}};function iS(e){const t=null===e||void 0===e?void 0:e.trim();return""===t?e:t}function nS(e,t){const{filter:i,filterTo:n,type:o}=e||{};return[i||null,n||null].slice(0,AC(o,t))}var oS={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},sS=class extends KC{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Wh,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(oS)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;const i=null!==(t=e.browserAutoComplete)&&void 0!==t&&t,{inputSvc:n,defaultDebounceMs:o,readOnly:s}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=Sm(e.filterParams),!s){const t=Cm(e.filterParams,o),i=Sc(this,this.syncUpWithParentFilter.bind(this),t);n.setValueChangedListener(i)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();Qd(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===hg,i=this.reactive;if(i){this.params.onUiChange()}if(this.applyActive&&!t)return;const{inputSvc:n,params:o,lastType:s}=this;let r=n.getValue();if(o.filterParams.trimInput&&(r=iS(r),n.setValue(r,!0)),i){const e=o,t=e.model,i=this.convertValue(r),n=null==i?null:u(u({},null!==t&&void 0!==t?t:{filterType:this.filterType,type:null!==s&&void 0!==s?s:this.optionsFactory.defaultOption}),{},{filter:i});e.onModelChange(n,{afterFloatingFilter:!0})}else o.parentFilterInstance((e=>{null===e||void 0===e||e.onFloatingFilterChanged(s||null,r||null)}))}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},rS=class extends Vu{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new qv),this.eTextInput=this.createManagedBean(new Gv),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.onValueChanged(e))),this.setupListeners(i,(e=>this.onValueChanged(e)))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},aS=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],lS=class extends WC{constructor(){super(...arguments),this.filterTypeKeys=GC}conditionToString(e,t,i,n,o){const{filter:s,filterTo:r,type:a}=e;if(t){const e=e=>()=>xm(this,"filterSummaryTextQuote",[e]),t=this.conditionForToolPanel(a,i,e(s),e(r),n,o);if(null!=t)return t}return i?"".concat(s,"-").concat(r):"".concat(null!=s?s:a)}},dS=e=>{let{filterOption:t,value:i,filterText:n}=e;if(null==n)return!1;switch(t){case"contains":return i.indexOf(n)>=0;case"notContains":return i.indexOf(n)<0;case"equals":return i===n;case"notEqual":return i!=n;case"startsWith":return 0===i.indexOf(n);case"endsWith":{const e=i.lastIndexOf(n);return e>=0&&e===i.length-n.length}default:return!1}},cS=e=>e,uS=e=>null==e?null:e.toString().toLowerCase();var hS={moduleName:"ClientSideRowModelFilter",version:Pc,rowModels:["clientSide"],beans:[class extends Vu{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var t;const i=!(null===(t=this.filterManager)||void 0===t||!t.isChildFilterPresent());this.filterNodes(i,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,kC(t)};if(this.doingTreeDataFiltering()){const e=(t,n)=>{if(t.childrenAfterGroup)for(let o=0;o<t.childrenAfterGroup.length;o++){const s=t.childrenAfterGroup[o],r=n||this.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?e(t.childrenAfterGroup[o],r):i(s,r)}i(t,n)},n=t=>e(t,!1);t.executeFromRootNode(n)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}}]},pS={moduleName:"FilterCore",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onAdvFilterEnabledChanged(t)},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",(()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})}))}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterState(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";this.isAdvFilterEnabled()||null===(i=this.colFilter)||void 0===i||i.setState(e,t,n)}setFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",n=arguments.length>2?arguments[2]:void 0;this.isAdvFilterEnabled()?n||this.warnAdvFilters():null===(t=this.colFilter)||void 0===t||t.setModel(e,i)}getFilterModel(){var e,t;return null!==(e=null===(t=this.colFilter)||void 0===t?void 0:t.getModel())&&void 0!==e?e:{}}getFilterState(){var e;return null===(e=this.colFilter)||void 0===e?void 0:e.getState()}isColumnFilterPresent(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isFilterPresent())}isAggregateFilterPresent(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isAggFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,i;e?null!==(t=this.colFilter)&&void 0!==t&&t.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):null!==(i=this.advancedFilter)&&void 0!==i&&i.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!(null===(e=this.advancedFilter)||void 0===e||!e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){du(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Kh.resolve()).then((()=>{var e;const o={source:t,type:"filterChanged",columns:n};i&&$l(o,i),this.eventSvc.dispatchEvent(o),null===(e=this.colFilter)||void 0===e||e.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!(null===(e=this.quickFilter)||void 0===e||!e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!du(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){var t;const{rowNode:i}=e;return!(null===(t=this.alwaysPassFilter)||void 0===t||!t.call(this,i))||!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(i))&&!(this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(i,e.colIdToSkip,!0))}doesRowPassFilter(e){var t;const{rowNode:i}=e;return!(null===(t=this.alwaysPassFilter)||void 0===t||!t.call(this,i))||!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(i))&&(!(this.externalFilterPresent&&!this.doesExternalFilterPass(i))&&(!(this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(i,e.colIdToSkip))&&!(this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(i))))}isFilterAllowed(e){var t;return!this.isAdvFilterEnabled()&&!(null===(t=this.colFilter)||void 0===t||!t.isFilterAllowed(e))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.isAdvFilterEnabled()&&(null!==(t=this.beans.dataTypeSvc)&&void 0!==t&&t.isPendingInference?this.advFilterModelUpdateQueue.push(e):(this.advancedFilter.setModel(null!==e&&void 0!==e?e:null),this.onFilterChanged({source:i})))}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return!this.isAdvFilterEnabled()&&!(null===(e=this.colFilter)||void 0===e||!e.hasFloatingFilters())}getColumnFilterInstance(e){var t,i;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):null!==(t=null===(i=this.colFilter)||void 0===i?void 0:i.getFilterInstance(e))&&void 0!==t?t:Promise.resolve(void 0)}warnAdvFilters(){_c(68)}setupAdvFilterHeaderComp(e){var t;null===(t=this.advancedFilter)||void 0===t||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach((e=>this.setAdvFilterModel(e))),this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){var i,n;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):null!==(i=null===(n=this.colFilter)||void 0===n?void 0:n.setModelForColumn(e,t))&&void 0!==i?i:Promise.resolve()}}],apiFunctions:{isAnyFilterPresent:function(e){var t;return!(null===(t=e.filterManager)||void 0===t||!t.isAnyFilterPresent())},onFilterChanged:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";null===(t=e.filterManager)||void 0===t||t.onFilterChanged({source:i})}},css:[".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}"],dependsOn:[hS]},gS={moduleName:"FilterValue",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,i){var n;if(!t)return;const o=e.getColDef(),{selectableFilter:s,valueSvc:r}=this.beans,a=null!==(n=null!==i&&void 0!==i?i:null===s||void 0===s?void 0:s.getFilterValueGetter(e.getColId()))&&void 0!==n?n:o.filterValueGetter;return a?this.executeFilterValueGetter(a,t.data,e,t,o):r.getValue(e,t)}executeFilterValueGetter(e,t,i,n,o){const{expressionSvc:s,valueSvc:r}=this.beans,a=Fu(this.gos,{data:t,node:n,column:i,colDef:o,getValue:r.getValueCallback.bind(r,n)});return"function"===typeof e?e(a):null===s||void 0===s?void 0:s.evaluate(e,a)}}]},mS={moduleName:"ColumnFilter",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap=u({},hm),this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const i=this.gos,n=u({},null!==(e=null===(t=i.get("initialState"))||void 0===t||null===(t=t.filter)||void 0===t?void 0:t.filterModel)&&void 0!==e?e:{});this.initialModel=n,this.model=u({},n),i.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const{colModel:i,dataTypeSvc:n,filterManager:o}=this.beans;if(null!==n&&void 0!==n&&n.isPendingInference)return void this.modelUpdates.push({model:e,source:t});const s=[],r=this.getModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((i,n)=>{const o=e[n];s.push(this.setModelOnFilterWrapper(i,o)),t.delete(n)})),t.forEach((t=>{const n=i.getColDefCol(t)||i.getCol(t);if(!n)return void _c(62,{colId:t});if(!n.isFilterAllowed())return void _c(63,{colId:t});const o=this.getOrCreateFilterWrapper(n,!0);o?s.push(this.setModelOnFilterWrapper(o,e[t],!0)):_c(64,{colId:t})}))}else this.model={},this.allColumnFilters.forEach((e=>{s.push(this.setModelOnFilterWrapper(e,null))}));Kh.all(s).then((()=>{const e=this.getModel(!0),i=[];this.allColumnFilters.forEach(((t,n)=>{Kl(r?r[n]:null,e?e[n]:null)||i.push(t.column)})),i.length>0&&(null===o||void 0===o||o.onFilterChanged({columns:i,source:t}))}))}getModel(e){const t={},{allColumnFilters:i,initialModel:n,beans:{colModel:o}}=this;if(i.forEach(((e,i)=>{const n=this.getModelFromFilterWrapper(e);Wl(n)&&(t[i]=n)})),!e)for(const r of Object.keys(n)){var s;const e=n[r];Wl(e)&&!i.has(r)&&null!==(s=o.getCol(r))&&void 0!==s&&s.isFilterAllowed()&&(t[r]=e)}return t}setState(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";if(this.state.clear(),t)for(const n of Object.keys(t)){const e=t[n];this.state.set(n,{model:bm(this.model,n),state:e})}this.setModel(e,i)}getState(){const e=this.state;if(!e.size)return;const t={};let i=!1;return e.forEach(((e,n)=>{const o=e.state;null!=o&&(i=!0,t[n]=o)})),i?t:void 0}getModelFromFilterWrapper(e){const t=e.column.getColId();if(e.isHandler)return bm(this.model,t);const i=e.filter;return i?"function"!==typeof i.getModel?(_c(66),null):i.getModel():bm(this.initialModel,t)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return!!e.size&&(e.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}updateActiveFilters(){const{colModel:e,gos:t}=this.beans,i=!!du(t),n=[],o=[],s=(t,s,r)=>{s&&((t=>{if(!t.isPrimary())return!0;const n=!e.isPivotActive();return!(!t.isValueActive()||!n)&&(!!e.isPivotMode()||i)})(t)?n.push(r):o.push(r))},r=[];return this.allColumnFilters.forEach((e=>{const t=e.column,i=t.getColId();if(e.isHandler)r.push(Kh.resolve().then((()=>{s(t,this.isHandlerActive(t),{colId:i,isHandler:!0,handler:e.handler,handlerParams:e.handlerParams})})));else{const n=gm(e);n&&r.push(n.then((e=>{s(t,(e=>!!e&&(e.isFilterActive?e.isFilterActive():(_c(67),!1)))(e),{colId:i,isHandler:!1,comp:e})})))}})),Kh.all(r).then((()=>{this.activeAggregateFilters=n,this.activeColumnFilters=o}))}updateFilterFlagInColumns(e,t){var i;const n=[];return this.allColumnFilters.forEach((i=>{const o=i.column;if(i.isHandler)n.push(Kh.resolve().then((()=>{this.setColFilterActive(o,this.isHandlerActive(o),e,t)})));else{const s=gm(i);s&&n.push(s.then((i=>{this.setColFilterActive(o,i.isFilterActive(),e,t)})))}})),null===(i=this.beans.groupFilter)||void 0===i||i.updateFilterFlags(e,t),Kh.all(n)}doFiltersPass(e,t,i){const{data:n,aggData:o}=e,s=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?o:n,a=this.model;for(let l=0;l<s.length;l++){const i=s[l],{colId:n,isHandler:o}=i;if(n!==t)if(o){const{handler:t,handlerParams:o}=i;if(!t.doesFilterPass({node:e,data:r,model:bm(a,n),handlerParams:o}))return!1}else{const t=i.comp;if("function"!==typeof t.doesFilterPass){Oc(91);continue}if(!t.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return null!==t&&void 0!==t&&t.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,n=()=>{this.isAlive()&&(null===i||void 0===i||i.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{column:t,additionalEventAttributes:i}=e,n=null===t||void 0===t?void 0:t.getColId();return this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{var t;const{column:i,isHandler:o}=e;if(n!==i.getColId()){var s,r;if(o)null===(s=(r=e.handler).onAnyFilterChanged)||void 0===s||s.call(r);null===(t=gm(e,o))||void 0===t||t.then((e=>{"function"===typeof(null===e||void 0===e?void 0:e.onAnyFilterChanged)&&e.onAnyFilterChanged()}))}})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null!==(e=this.gos.get("allowShowChangeAfterFilter"))&&void 0!==e&&e)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach((e=>{const i=e.isHandler;var n,o;i&&(null===(n=(o=e.handler).onNewRowsLoaded)||void 0===n||n.call(o));const s=gm(e,i);s&&t.push(s.then((e=>{var t;null===(t=e.onNewRowsLoaded)||void 0===t||t.call(e)})))})),Kh.all(t).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createGetValue(e,t){const{filterValueSvc:i,colModel:n}=this.beans;return(o,s)=>{const r=s?n.getCol(s):e;return r?i.getValue(r,o,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(null!==t&&void 0!==t&&t.isHandler)return this.isHandlerActive(e);const i=null===t||void 0===t?void 0:t.filter;return i?i.isFilterActive():null!=bm(this.initialModel,e.getColId())}isHandlerActive(e){const t=Wl(bm(this.model,e.getColId()));if(t)return t;const i=this.beans.groupFilter;return!(null===i||void 0===i||!i.isGroupFilter(e))&&i.isFilterActive(e)}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?gm(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const i=gm(t);return i?i.then((e=>({comp:e,params:t.filterUi.filterParams,isHandler:t.isHandler}))):null}getHandler(e,t){const i=this.getOrCreateFilterWrapper(e,t);return null!==i&&void 0!==i&&i.isHandler?i.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let i=this.cachedFilter(e);return!i&&t&&(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getDefaultFilterFromDataType((()=>{var t;return null===(t=this.beans.dataTypeSvc)||void 0===t?void 0:t.getBaseDataType(e)}),t)}getDefaultFilterFromDataType(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(i=this.gos).isModuleRegistered("SetFilter")&&!i.get("suppressSetFilterByDefault")?t?"agSetColumnFloatingFilter":"agSetColumnFilter":function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Hm:Vm)[null!==e&&void 0!==e?e:"text"]}(e(),t);var i}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,i,n,o,s){const r=()=>{const r=this.createFilterCompParams(e,o,s),a=n(r,o);return function(e,t,i,n){const o=t.filter;return qh(o)&&(t={filter:o.component,filterParams:t.filterParams}),e.getCompDetails(t,ap,n,i,!0)}(this.beans.userCompFactory,t,a,i)},a=r();if(!a)return null;return{compDetails:a,createFilterUi:e=>(e?r():a).newAgStackInstance()}}createFilterInstance(e,t,i,n){var o;const s=this.beans.selectableFilter;null!==s&&void 0!==s&&s.isSelectable(t)&&(t=s.getFilterDef(e,t));const{handler:r,handlerParams:a,handlerGenerator:l}=null!==(o=this.createHandler(e,t,i))&&void 0!==o?o:{},d=this.createFilterComp(e,t,i,n,!!r,"init");if(!d)return{compDetails:null,createFilterUi:null,handler:r,handlerGenerator:l,handlerParams:a};const{compDetails:c,createFilterUi:u}=d;if(this.isGlobalButtons){var h;!(null===(h=c.params)||void 0===h||null===(h=h.buttons)||void 0===h||!h.length)||_c(281,{colId:e.getColId()})}return{compDetails:c,handler:r,handlerGenerator:l,handlerParams:a,createFilterUi:u}}createBaseFilterParams(e,t){const{filterManager:i,rowModel:n}=this.beans;return Fu(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:t=>{var n;return null===(n=null===i||void 0===i?void 0:i.doesRowPassOtherFilters(e.getColId(),t))||void 0===n||n},rowModel:n})}createFilterCompParams(e,t,i,n){const o=this.filterChangedCallbackFactory(e),s=this.createBaseFilterParams(e,n);if(s.filterChangedCallback=o,s.filterModifiedCallback=n?()=>{}:t=>this.filterModified(e,t),t){var r;const t=s,n=e.getColId(),a=bm(this.model,n);t.model=a,t.state=null!==(r=this.state.get(n))&&void 0!==r?r:{model:a},t.onModelChange=(t,i)=>{this.updateStoredModel(n,t),this.refreshHandlerAndUi(e,t,"ui").then((()=>{o(u(u({},i),{},{source:"columnFilter"}))}))},t.onStateChange=t=>{this.updateState(e,t),this.updateOrRefreshFilterUi(e)},t.onAction=(t,i,n)=>{this.updateModel(e,t,i),this.dispatchLocalEvent({type:"filterAction",column:e,action:t,event:n})},t.getHandler=()=>this.getHandler(e,!0),t.onUiChange=t=>this.filterUiChanged(e,t),t.source=i}return s}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,i){const n=t(),o={created:!0,create:t,filterParams:e.params,compDetails:e,promise:n};return n.then(i),o}createFilterWrapper(e){const{compDetails:t,handler:i,handlerGenerator:n,handlerParams:o,createFilterUi:s}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),(e=>e)),r=e.getColId();var a;if(i)return delete this.initialModel[r],null===(a=i.init)||void 0===a||a.call(i,u(u({},o),{},{source:"init",model:bm(this.model,r)})),{column:e,isHandler:!0,handler:i,handlerGenerator:n,handlerParams:o,filterUi:this.createFilterUiForHandler(t,s)};if(s){const i={column:e,filterUi:null,isHandler:!1};return i.filterUi=this.createFilterUiLegacy(t,s,(e=>{i.filter=null!==e&&void 0!==e?e:void 0})),i}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t){var i;const{gos:n,frameworkOverrides:o,registry:s}=this.beans;let r;const a=n.get("enableFilterHandlers")?(e=>{const t=e.filter;if(qh(t)){const e=t.handler;return e||(r=t.doesFilterPass,r?()=>({doesFilterPass:r}):void 0)}return"string"===typeof t?t:void 0})(e):void 0,l=e=>()=>this.createBean(s.createDynamicBean(e,!0));let d,c;if("string"===typeof a){var u;const e=null===(u=n.get("filterHandlers"))||void 0===u?void 0:u[a];null!=e?d=e:pm.has(a)&&(d=l(a),c=a)}else d=a;if(!d){let i;const{compName:n,jsComp:s,fwComp:r}=fp(o,e);if(n)i=n;else{null==s&&null==r&&!0===e.filter&&(i=t)}c=this.handlerMap[i],c&&(d=l(c))}if(d)return{filterHandler:d,handlerNameOrCallback:null!==(i=r)&&void 0!==i?i:c}}createHandler(e,t,i){let n=this.createHandlerFunc(t,i);if(!n){const t=this.gos;if(!t.get("enableFilterHandlers"))return;Gc(t)&&_c(277,{colId:e.getColId()}),n=DC}const o=vp(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:s,filterHandler:r}=n,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,r,o);return{handler:a,handlerParams:l,handlerGenerator:null!==s&&void 0!==s?s:r}}createHandlerFromFunc(e,t,i){const n=e.getColDef();return{handler:t(Fu(this.gos,{column:e,colDef:n})),handlerParams:this.createHandlerParams(e,i)}}createHandlerParams(e,t){const i=e.getColDef(),n=e.getColId(),o=this.filterChangedCallbackFactory(e);return Fu(this.gos,{colDef:i,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:e=>{var t,i;return null===(t=null===(i=this.beans.filterManager)||void 0===i?void 0:i.doesRowPassOtherFilters(n,e))||void 0===t||t},onModelChange:(t,i)=>{this.updateStoredModel(n,t),this.refreshHandlerAndUi(e,t,"handler").then((()=>{o(u(u({},i),{},{source:"columnFilter"}))}))},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:i,groupFilter:n}=this.beans;this.allColumnFilters.forEach(((i,n)=>{let o;o=i.column.isPrimary()?t.getColDefCol(n):t.getCol(n),o&&o===i.column||(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(n))}));const o=n&&e.every((e=>n.isGroupFilter(e)));e.length>0&&!o&&(null===i||void 0===i||i.onFilterChanged({columns:e,source:"api"}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const t=this.beans.groupFilter;return null===t||void 0===t||!t.isGroupFilter(e)||t.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){var i;const{userCompFactory:n,frameworkOverrides:o,selectableFilter:s}=this.beans,r=e.getColDef(),a=null!==s&&void 0!==s&&s.isSelectable(r)?s.getFilterDef(e,r):r,l=null!==(i=function(e,t,i){if(null==t)return null;let n=null;const{compName:o,jsComp:s,fwComp:r}=fp(e,t);o?n={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[o]:null==s&&null==r&&!0===t.filter&&(n=i());return n}(o,a,(()=>this.getDefaultFloatingFilter(e))))&&void 0!==i?i:"agReadOnlyFloatingFilter",d=this.gos.get("enableFilterHandlers"),c=vp(n,a,this.createFilterCompParams(e,d,"init",!0)),h=Fu(this.gos,{column:e,filterParams:c,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:t=>{const i=this.getOrCreateFilterUi(e);null!=i&&i.then((e=>{t(bp(e))}))},showParentFilter:t});if(d){const t=h,i=e.getColId(),n=this.filterChangedCallbackFactory(e);t.onUiChange=t=>this.floatingFilterUiChanged(e,t),t.model=bm(this.model,i),t.onModelChange=(t,o)=>{this.updateStoredModel(i,t),this.refreshHandlerAndUi(e,t,"floating",!0).then((()=>{n(u(u({},o),{},{source:"columnFilter"}))}))},t.getHandler=()=>this.getHandler(e,!0),t.source="init"}return function(e,t,i,n){return e.getCompDetails(t,lp,n,i)}(n,r,h,l)}getCurrentFloatingFilterParentModel(e){var t;return this.getModelFromFilterWrapper(null!==(t=this.cachedFilter(e))&&void 0!==t?t:{column:e})}destroyFilterUi(e,t,i,n){if(e.isHandler){const o=t.getColId();delete this.initialModel[o],this.state.delete(o);const s=e.filterUi,r=this.createFilterUiForHandler(i,n);e.filterUi=r,null!==s&&void 0!==s&&s.created&&s.promise.then((t=>{this.destroyBean(t),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:"paramsUpdated",column:e.column})}))}else this.destroyFilter(t,"paramsUpdated")}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialModel[i],n&&this.disposeFilterWrapper(n,t).then((t=>{var i;t&&this.isAlive()&&(null===(i=this.beans.filterManager)||void 0===i||i.onFilterChanged({columns:[e],source:"api"}))}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let i=!1;const{column:n,isHandler:o,filterUi:s}=e,r=n.getColId();o&&(i=this.isHandlerActive(n),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const a=()=>{this.setColFilterActive(n,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:n})};if(s){if(s.created)return s.promise.then((e=>(i=o?i:!(null===e||void 0===e||!e.isFilterActive()),this.destroyBean(e),a(),i)));a()}return Kh.resolve(i)}filterChangedCallbackFactory(e){return t=>{var i;this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:null!==(i=null===t||void 0===t?void 0:t.source)&&void 0!==i?i:"columnFilter"})}}filterParamsChanged(e){var t,i,n,o,s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const a=this.allColumnFilters.get(e);if(!a)return;const l=this.beans,d=a.column,c=d.getColDef(),h=d.isFilterAllowed(),p=this.getDefaultFilter(d),g=l.selectableFilter,m=null!==g&&void 0!==g&&g.isSelectable(c)?g.getFilterDef(d,c):c,f=h?this.createHandlerFunc(m,this.getDefaultFilter(d)):void 0,v=!!f,b=a.isHandler;if(b!=v)return void this.destroyFilter(d,"paramsUpdated");const{compDetails:w,createFilterUi:y}=null!==(t=h?this.createFilterComp(d,m,p,(e=>e),v,"colDef"):null)&&void 0!==t?t:{compDetails:null,createFilterUi:null},x=null!==(i=null===w||void 0===w?void 0:w.params)&&void 0!==i?i:vp(l.userCompFactory,m,this.createFilterCompParams(d,v,"colDef"));if(b){var C;const t=null!==(C=null===f||void 0===f?void 0:f.handlerNameOrCallback)&&void 0!==C?C:null===f||void 0===f?void 0:f.filterHandler,i=bm(this.model,e);if(a.handlerGenerator!=t){var S;const n=a.handler,{handler:o,handlerParams:s}=this.createHandlerFromFunc(d,f.filterHandler,x);var R;if(a.handler=o,a.handlerParams=s,a.handlerGenerator=t,delete this.model[e],null===(S=o.init)||void 0===S||S.call(o,u(u({},s),{},{source:"init",model:null})),this.destroyBean(n),null!=i)null===(R=this.beans.filterManager)||void 0===R||R.onFilterChanged({columns:[d],source:r})}else{var k,P;const e=this.createHandlerParams(d,null===w||void 0===w?void 0:w.params);a.handlerParams=e,null===(k=(P=a.handler).refresh)||void 0===k||k.call(P,u(u({},e),{},{source:"colDef",model:i}))}}!this.areFilterCompsDifferent(null!==(n=null===(o=a.filterUi)||void 0===o?void 0:o.compDetails)&&void 0!==n?n:null,w)&&a.filterUi&&w?(a.filterUi.filterParams=x,null===(s=gm(a,b))||void 0===s||s.then((e=>{!1===(null===e||void 0===e||!e.refresh||e.refresh(x))?this.destroyFilterUi(a,d,w,y):this.dispatchLocalEvent({type:"filterParamsChanged",column:d,params:x})}))):this.destroyFilterUi(a,d,w,y)}refreshHandlerAndUi(e,t,i,n){var o;const s=this.cachedFilter(e);if(!s)return n&&this.getOrCreateFilterWrapper(e,!0),Kh.resolve();if(!s.isHandler)return Kh.resolve();const{filterUi:r,handler:a,handlerParams:l}=s;return function(e,t,i,n,o,s){var r;return null===(r=t.refresh)||void 0===r||r.call(t,u(u({},i),{},{model:n,source:s})),e().then((e=>{if(e){const{filter:t,filterParams:i}=e;mm(t,i,n,o,s)}}))}((()=>{if(r){const{created:e,filterParams:t}=r;if(e)return r.promise.then((e=>e?{filter:e,filterParams:t}:void 0));r.refreshed=!0}return Kh.resolve(void 0)}),a,l,t,null!==(o=this.state.get(e.getColId()))&&void 0!==o?o:{model:t},i)}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||(null===i||void 0===i?void 0:i.render)&&(null===n||void 0===n?void 0:n.render)&&i.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some((e=>e.getColDef().floatingFilter))}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const i=this.getOrCreateFilterUi(t);return i?new Promise((e=>{i.then((t=>{e(bp(t))}))})):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach((e=>{let{model:t,source:i}=e;return this.setModel(t,i)})),this.modelUpdates=[],this.columnModelUpdates.forEach((e=>{let{key:t,model:i,resolve:n}=e;this.setModelForColumn(t,i).then((()=>n()))})),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:t,model:n}=this,o=e.getColId(),s=t.get(o);var i;return s?null!==(i=s.model)&&void 0!==i?i:null:bm(n,o)}const n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){var i;if(null!==(i=this.beans.dataTypeSvc)&&void 0!==i&&i.isPendingInference){let i=()=>{};const n=new Promise((e=>{i=e}));return this.columnModelUpdates.push({key:e,model:t,resolve:i}),n}return new Promise((i=>{this.setModelForColumnLegacy(e,t).then((e=>i(e)))}))}getStateForColumn(e){var t;return null!==(t=this.state.get(e))&&void 0!==t?t:{model:bm(this.model,e)}}setModelForColumnLegacy(e,t){const i=this.beans.colModel.getColDefCol(e),n=i?this.getOrCreateFilterWrapper(i,!0):null;return n?this.setModelOnFilterWrapper(n,t):Kh.resolve()}setColDefPropsForDataType(e,t,i){const n=e.filter,o=!0===n?this.getDefaultFilterFromDataType((()=>t.baseDataType)):n;if("string"!==typeof o)return;let s,r;const a=this.beans,{filterParams:l,filterValueGetter:d}=e;var c,h;"agMultiColumnFilter"===o?({filterParams:s,filterValueGetter:r}=null!==(c=null===(h=a.multiFilter)||void 0===h?void 0:h.getParamsForDataType(l,d,t,i))&&void 0!==c?c:{}):({filterParams:s,filterValueGetter:r}=function(e,t,i,n,o,s,r){let a=t,l=i;const d="agSetColumnFilter"===e;l||"object"!==n.baseDataType||d||(l=e=>{let{column:t,node:i}=e;return o({column:t,node:i,value:s.valueSvc.getValue(t,i)})});const c=(0,(d?zm:Bm)[n.baseDataType])({dataTypeDefinition:n,formatValue:o,t:r});return a="object"===typeof t?u(u({},c),t):c,{filterParams:a,filterValueGetter:l}}(o,l,d,t,i,a,this.getLocaleTextFunc()));e.filterParams=s,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,i,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,n)}setModelOnFilterWrapper(e,t,i){return new Kh((n=>{if(e.isHandler){const o=e.column,s=o.getColId(),r=this.model[s];return this.updateStoredModel(s,t),i&&t===r?void n():void this.refreshHandlerAndUi(o,t,"api").then((()=>n()))}const o=gm(e);o?o.then((e=>{if("function"!==typeof(null===e||void 0===e?void 0:e.setModel))return _c(65),void n();(e.setModel(t)||Kh.resolve()).then((()=>n()))})):n()}))}updateStoredModel(e,t){Wl(t)?this.model[e]=t:delete this.model[e];const i=this.state.get(e),n={model:t,state:null===i||void 0===i?void 0:i.state};this.state.set(e,n)}filterModified(e,t){var i;null===(i=this.getOrCreateFilterUi(e))||void 0===i||i.then((i=>{this.eventSvc.dispatchEvent(u({type:"filterModified",column:e,filterInstance:i},t))}))}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(u({type:"filterUiChanged",column:e},t))}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(u({type:"floatingFilterUiChanged",column:e},t))}updateModel(e,t,i){const n=e.getColId(),o=()=>{var t;return null===(t=this.cachedFilter(e))||void 0===t?void 0:t.filterUi};vm(t,o,(()=>bm(this.model,n)),(()=>this.state.get(n)),(t=>this.updateState(e,t)),(e=>{var t;return null===(t=o())||void 0===t||null===(t=t.filterParams)||void 0===t?void 0:t.onModelChange(e,i)}))}updateAllModels(e,t){const i=[];this.allColumnFilters.forEach(((t,n)=>{const o=this.beans.colModel.getColDefCol(n);o&&vm(e,(()=>t.filterUi),(()=>bm(this.model,n)),(()=>this.state.get(n)),(e=>this.updateState(o,e)),(t=>{this.updateStoredModel(n,t),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),i.push(this.refreshHandlerAndUi(o,t,"ui"))}))})),i.length&&Kh.all(i).then((()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})}))}updateOrRefreshFilterUi(e){const t=e.getColId();fm((()=>{var t;return null===(t=this.cachedFilter(e))||void 0===t?void 0:t.filterUi}),(()=>bm(this.model,t)),(()=>this.state.get(t)))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:i}=this;for(const s of i)if("COLUMN_MENU"===s.source)return!1;let n=!1;for(const s of e.keys()){var o;const i=e.get(s);if(!1===i.valid)return!1;(null!==(o=i.model)&&void 0!==o?o:null)!==bm(t,s)&&(n=!0)}return n}hasUnappliedModel(e){var t,i;const{model:n,state:o}=this;return(null!==(t=null===(i=o.get(e))||void 0===i?void 0:i.model)&&void 0!==t?t:null)!==bm(n,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if("newFiltersToolPanel"===t)return!0;const i=this.beans.filterPanelSvc;return!(null===i||void 0===i||!i.isActive)&&!!i.getState(e.getColId())}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}},class extends Vu{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;null===(e=this.hidePopup)||void 0===e||e.call(this)}showMenuAfterMouseEvent(e,t,i,n){e&&!e.isColumn||this.showPopup(e,(n=>{var o;null===(o=this.popupSvc)||void 0===o||o.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})}),i,t.target,Eu(this.gos),n)}showMenuAfterButtonClick(e,t,i,n){if(e&&!e.isColumn)return;let o=-1,s="left";const r=Eu(this.gos);!r&&this.gos.get("enableRtl")&&(o=1,s="right");const a=r?void 0:4*o,l=r?void 0:4;this.showPopup(e,(n=>{var o;null===(o=this.popupSvc)||void 0===o||o.positionPopupByComponent({type:i,eventSource:t,ePopup:n,nudgeX:a,nudgeY:l,alignSide:s,keepWithinBounds:!0,position:"under",column:e})}),i,t,r,n)}showPopup(e,t,i,n,o,s){var r;const a=e?this.createBean(new Pm(e,"COLUMN_MENU")):void 0;if(this.activeMenu=a,null===a||void 0===a||!a.hasFilter()||!e)return void Oc(57);const l=gc({tag:"div",cls:"ag-menu".concat(o?"":" ag-filter-menu"),role:"presentation"});let d;[this.tabListener]=this.addManagedElementListeners(l,{keydown:e=>this.trapFocusWithin(e,l)}),l.appendChild(null===a||void 0===a?void 0:a.getGui());const c=Eu(this.gos)?void 0:null!==n&&void 0!==n?n:this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody;const u=this.getLocaleTextFunc(),h=o&&"columnFilter"!==i?u("ariaLabelColumnMenu","Column Menu"):u("ariaLabelColumnFilter","Column Filter"),p=null===(r=this.popupSvc)||void 0===r?void 0:r.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:t=>{sv(e,!1,"contextMenu");const o=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),o&&n&&Jd(n)){const e=Bg(n);null===e||void 0===e||e.focus({preventScroll:!0})}null===a||void 0===a||a.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),null===s||void 0===s||s()},positionCallback:()=>t(l),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=d=p.hideFunc),a.afterInit().then((()=>{t(l),a.afterGuiAttached({container:i,hidePopup:d})})),sv(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==ug||e.defaultPrevented||Og(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),_g(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:null!==i&&void 0!==i?i:null,columnGroup:null})}isMenuEnabled(e){var t;return e.isFilterAllowed()&&(null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}}],dynamicBeans:{headerFilterCellCtrl:class extends Zf{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,i,n,o){this.comp=e;const s=Vh(this,this.beans.context,o);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,s),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s);const r=()=>this.onColDefChanged(s);s.addManagedListeners(this.column,{colDefChanged:r}),s.addManagedEventListeners({filterSwitched:e=>{let{column:t}=e;t===this.column&&r()}}),s.addDestroyFunc((()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()}))}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return Fu(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=hv("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Km(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();gd(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if(iu(t)===this.eGui)return;const i=Og(t,this.eGui,null,e.shiftKey);var n;if(i)return null===(n=t.headerNavigation)||void 0===n||n.scrollToColumn(this.column),e.preventDefault(),void i.focus();const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case fg:case bg:case mg:case vg:if(t)return;Iu(e);case hg:t&&_g(this.eGui)&&e.preventDefault();break;case pg:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&zd(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==ug);if(e&&t){const t=e.shiftKey;_g(this.eGui,t)}}this.focusThis()}setupHover(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new $f(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!(null!==(e=this.beans.menuSvc)&&void 0!==e&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Eu(this.gos)}setupUserComp(){var e;if(!this.active)return;const t=null===(e=this.beans.colFilter)||void 0===e?void 0:e.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));t&&this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var e;const t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;null===(e=this.beans.menuSvc)||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:i,gos:n}=this,o=e=>{if("filterDestroyed"===(null===e||void 0===e?void 0:e.source)&&(!this.isAlive()||null===t||void 0===t||!t.isAlive()))return;const o=this.comp.getFloatingFilterComp();o&&o.then((o=>{if(o){var s;if(n.get("enableFilterHandlers")){const t=e;let i="filter";return null!==t&&void 0!==t&&t.afterFloatingFilter?i="ui":null!==t&&void 0!==t&&t.afterDataChange?i="dataChanged":"api"===(null===e||void 0===e?void 0:e.source)&&(i="api"),void this.updateFloatingFilterParams(this.userCompDetails,i)}const r=null===t||void 0===t?void 0:t.getCurrentFloatingFilterParentModel(i),a=e?u(u({},e),{},{columns:null!==(s=e.columns)&&void 0!==s?s:[],source:"api"===e.source?"api":"columnFilter"}):null;o.onParentModelChanged(r,a)}}))};[this.destroySyncListener]=e.addManagedListeners(i,{filterChanged:o}),null!==t&&void 0!==t&&t.isFilterActive(i)&&o(null)}setupWidth(e){const t=()=>{const e="".concat(this.column.getActualWidth(),"px");this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){var e;const t=!(null===(e=this.beans.filterManager)||void 0===e||!e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.beans.colFilter,o=this.active?null===n||void 0===n?void 0:n.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,s=this.comp.getFloatingFilterComp();s&&o?s.then((t=>{var s;!t||null!==n&&void 0!==n&&n.areFilterCompsDifferent(null!==(s=this.userCompDetails)&&void 0!==s?s:null,o)?this.updateCompDetails(e,o,i):this.updateFloatingFilterParams(o,"colDef")})):this.updateCompDetails(e,o,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){var i;if(!e)return;let n=e.params;null===(i=this.comp.getFloatingFilterComp())||void 0===i||i.then((e=>{if("function"===typeof(null===e||void 0===e?void 0:e.refresh)){var i,o;if(this.gos.get("enableFilterHandlers"))n=u(u({},n),{},{model:bm(null!==(i=null===(o=this.beans.colFilter)||void 0===o?void 0:o.model)&&void 0!==i?i:{},this.column.getColId()),source:t});e.refresh(n)}}))}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:function(e){const t=e.filterManager;return!(null===t||void 0===t||!t.isColumnFilterPresent())||!(null===t||void 0===t||!t.isAggregateFilterPresent())},getColumnFilterInstance:function(e,t){var i,n;return null!==(i=null===(n=e.filterManager)||void 0===n?void 0:n.getColumnFilterInstance(t))&&void 0!==i?i:Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.colModel.getColDefCol(t);var n;if(i)return null===(n=e.colFilter)||void 0===n?void 0:n.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.filterManager)||void 0===i?void 0:i.setFilterModel(t)}))},getFilterModel:function(e){var t,i;return null!==(t=null===(i=e.filterManager)||void 0===i?void 0:i.getFilterModel())&&void 0!==t?t:{}},getColumnFilterModel:function(e,t,i){var n;const{gos:o,colModel:s,colFilter:r}=e;i&&!o.get("enableFilterHandlers")&&(_c(288),i=!1);const a=s.getColDefCol(t);return a&&null!==(n=null===r||void 0===r?void 0:r.getModelForColumn(a,i))&&void 0!==n?n:null},setColumnFilterModel:function(e,t,i){var n,o;return null!==(n=null===(o=e.filterManager)||void 0===o?void 0:o.setColumnFilterModel(t,i))&&void 0!==n?n:Promise.resolve()},showColumnFilter:function(e,t){var i;const n=e.colModel.getCol(t);n?null===(i=e.menuSvc)||void 0===i||i.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"}):Oc(12,{colKey:t})},hideColumnFilter:function(e){var t;null===(t=e.menuSvc)||void 0===t||t.hideFilterMenu()},getColumnFilterHandler:function(e,t){var i;const n=e.colModel.getCol(t);if(n)return null===(i=e.colFilter)||void 0===i?void 0:i.getHandler(n,!0);Oc(12,{colKey:t})},doFilterAction:function(e,t){const{colModel:i,colFilter:n,gos:o}=e;if(!o.get("enableFilterHandlers"))return void _c(287);const{colId:s,action:r}=t;if(s){const e=i.getColById(s);e&&(null===n||void 0===n||n.updateModel(e,r))}else null===n||void 0===n||n.updateAllModels(r)}},dependsOn:[pS,FC,gS,PC]},fS={moduleName:"CustomFilter",version:Pc,userComponents:{agReadOnlyFloatingFilter:class extends Uh{constructor(){super(NC,[Wv]),this.eFloatingFilterText=Wh}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(t," ").concat(this.getLocaleTextFunc()("ariaFilterInput","Filter Input"))),this.gos.get("enableFilterHandlers")){const t=e,i=t.getHandler();if(i.getModelAsString){const e=i.getModelAsString(t.model);this.eFloatingFilterText.setValue(e)}}}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}refresh(e){this.init(e)}}},dependsOn:[mS]},vS={moduleName:"TextFilter",version:Pc,dependsOn:[mS],userComponents:{agTextColumnFilter:{classImp:class extends IC{constructor(){super("textFilter",nS,aS),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,n,o,s)=>{if(n<s){let n=Gl(e.getValue());var r;if(t&&this.params.trimInput)n=null!==(r=iS(n))&&void 0!==r?r:null,e.setValue(n,!0);i.push(n)}})),i}createEValue(){const e=gc({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:i}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,i,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new Gv);n.addCss("ag-filter-".concat(i)),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeEValues(e,t){const i=i=>this.removeComponents(i,e,t),{eValuesFrom:n,eValuesTo:o}=this;i(n),i(o)}},params:{useForm:!0}},agTextColumnFloatingFilter:class extends sS{constructor(){super(...arguments),this.FilterModelFormatterClass=lS,this.filterType="text",this.defaultOptions=aS}createFloatingFilterInputService(){return this.createManagedBean(new tS)}}},dynamicBeans:{agTextColumnFilterHandler:class extends zC{constructor(){super(nS,aS),this.filterType="text",this.FilterModelFormatterClass=lS}updateParams(e){var t,i;super.updateParams(e);const n=e.filterParams;this.matcher=null!==(t=n.textMatcher)&&void 0!==t?t:dS,this.formatter=null!==(i=n.textFormatter)&&void 0!==i?i:n.caseSensitive?cS:uS}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,n){const o=e.map((e=>this.formatter(e)))||[],s=this.formatter(t),{api:r,colDef:a,column:l,context:d,filterParams:{textFormatter:c}}=this.params;if("blank"===i.type)return jC(t);if("notBlank"===i.type)return!jC(t);const h={api:r,colDef:a,column:l,context:d,node:n.node,data:n.data,filterOption:i.type,value:s,textFormatter:c};return o.some((e=>this.matcher(u(u({},h),{},{filterText:e}))))}}}},bS={moduleName:"NumberFilter",version:Pc,dependsOn:[mS],userComponents:{agNumberColumnFilter:{classImp:class extends IC{constructor(){super("numberFilter",ZC,$C),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,i){const{numberFormatter:n}=this.params,o=!i&&n?n(null!==t&&void 0!==t?t:null):t;super.setElementValue(e,o)}createEValue(){const e=XC(this.params),t=gc({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const o=this.createManagedBean(n?new Gv({allowedCharPattern:n}):new qv);o.addCss("ag-filter-".concat(i)),o.addCss("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeEValues(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,n,o)=>{i<o&&t.push(JC(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if("number"===typeof e)return e;let t=Gl(e);null!=t&&""===t.trim()&&(t=null);const i=this.params.numberParser;return i?i(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}},params:{useForm:!0}},agNumberColumnFloatingFilter:class extends sS{constructor(){super(...arguments),this.FilterModelFormatterClass=eS,this.filterType="number",this.defaultOptions=$C}updateParams(e){XC(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=XC(e.filterParams),this.allowedCharPattern?this.createManagedBean(new tS({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new rS)}convertValue(e){return e?Number(e):null}}},dynamicBeans:{agNumberColumnFilterHandler:class extends VC{constructor(){super(ZC,$C),this.filterType="number",this.FilterModelFormatterClass=eS}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}}}},wS={moduleName:"DateFilter",version:Pc,dependsOn:[mS],userComponents:{agDateColumnFilter:{classImp:class extends IC{constructor(){super("dateFilter",OC,_C),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=BC,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(t,i)=>{const n=e[t];if(null!=n){if(!isNaN(n))return null==n?i:Number(n);_c(82,{param:t})}return i},i=t("minValidYear",1e3),n=t("maxValidYear",BC);this.minValidYear=i,this.maxValidYear=n,i>n&&_c(83);const{minValidDate:o,maxValidDate:s}=e,r=o instanceof Date?o:Am(o);this.minValidDate=r;const a=s instanceof Date?s:Am(s);this.maxValidDate=a,r&&a&&r>a&&_c(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:i,gos:n},params:o}=this,s=new LC(i,t,o.colDef,Fu(n,{onDateChanged:()=>this.onUiChanged(),filterParams:o,location:"filter"}),e);return this.addDestroyFunc((()=>s.destroy())),s}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=gc({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,n){const o=gc({tag:"div",cls:"ag-filter-".concat(n," ag-filter-date-").concat(n)});t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),TC(this.eConditionPanelsFrom,e,t),TC(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){TC(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:n,maxValidYear:o}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>o)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,n,o,s)=>{o!==e||!t||n>=s||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=Dm(n[0])),n.length>1&&(i.dateTo=Dm(n[1])),u({dateFrom:null,dateTo:null,filterType:this.filterType,type:t},i)}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,n,o)=>{i<o&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}},params:{useForm:!0}},agDateInput:class extends Uh{constructor(){super(QC,[Wv]),this.eDateInput=Wh,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled())return this.isApply?(this.applyOnFocusOut=!e,void(e&&this.params.onDateChanged())):void(e||this.params.onDateChanged())}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){var t,i;const n=this.eDateInput.getInputElement(),o=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=o&&Dd();const{minValidYear:s,maxValidYear:r,minValidDate:a,maxValidDate:l,buttons:d,includeTime:c,colDef:u}=e.filterParams||{},h=this.beans.dataTypeSvc,p=null!==(t=null!==c&&void 0!==c?c:null===h||void 0===h||null===(i=h.getDateIncludesTimeFlag)||void 0===i?void 0:i.call(h,u.cellDataType))&&void 0!==t&&t;if(o?p?(n.type="datetime-local",n.step="1"):n.type="date":n.type="text",a&&s&&_c(85),l&&r&&_c(86),a&&l){const[e,t]=[a,l].map((e=>e instanceof Date?e:Am(e)));e&&t&&e.getTime()>t.getTime()&&_c(87)}a?a instanceof Date?n.min=Tm(a):n.min=a:s&&(n.min="".concat(s,"-01-01")),l?l instanceof Date?n.max=Tm(l):n.max=l:r&&(n.max="".concat(r,"-12-31")),this.isApply="floatingFilter"===e.location&&!(null===d||void 0===d||!d.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return Am(this.eDateInput.getValue())}setDate(e){var t,i;const n=this.params.filterParams.colDef.cellDataType,o=null!==(t=null===(i=this.beans.dataTypeSvc)||void 0===i?void 0:i.getDateIncludesTimeFlag(n))&&void 0!==t&&t;this.eDateInput.setValue(Dm(e,o))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t,i;return null===(t=null===e||void 0===e||null===(i=e.filterParams)||void 0===i?void 0:i.browserDatePicker)||void 0===t||t}},agDateColumnFloatingFilter:class extends KC{constructor(){super(YC,[Wv]),this.eReadOnlyText=Wh,this.eDateWrapper=Wh,this.FilterModelFormatterClass=UC,this.filterType="date",this.defaultOptions=_C}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const t=e?Am(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Od(this.eDateWrapper,e),Od(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){var t;const i=this.params;i.onUiChange();const n=i.model,o=Dm(e),s=null==o?null:u(u({},null!==n&&void 0!==n?n:{filterType:this.filterType,type:null!==(t=this.lastType)&&void 0!==t?t:this.optionsFactory.defaultOption}),{},{dateFrom:o});i.onModelChange(s,{afterFloatingFilter:!0})}else this.params.parentFilterInstance((t=>{null===t||void 0===t||t.onFloatingFilterChanged(this.lastType||null,e)}))}getDateComponentParams(){const{filterParams:e}=this.params,t=Cm(e,this.defaultDebounceMs);return Fu(this.gos,{onDateChanged:Sc(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i,params:n}=this;this.dateComp=new LC(e,t,n.column.getColDef(),this.getDateComponentParams(),i,(e=>{e.setInputAriaLabel(this.getAriaLabel(n))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}}},dynamicBeans:{agDateColumnFilterHandler:class extends VC{constructor(){super(OC,_C),this.filterType="date",this.FilterModelFormatterClass=UC}comparator(){var e;return null!==(e=this.params.filterParams.comparator)&&void 0!==e?e:qC}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}}}},yS={moduleName:"QuickFilter",version:Pc,apiFunctions:{isQuickFilterPresent:function(e){var t;return!(null===(t=e.quickFilter)||void 0===t||!t.isFilterPresent())},getQuickFilter:function(e){var t;return null===(t=e.quickFilter)||void 0===t?void 0:t.getText()},resetQuickFilter:function(e){var t;null===(t=e.quickFilter)||void 0===t||t.resetCache()}},dependsOn:[{moduleName:"QuickFilterCore",version:Pc,rowModels:["clientSide"],beans:[class extends Vu{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onColumnConfigChanged())),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setParserAndMatcher()))}refreshCols(){var e,t;const{autoColSvc:i,colModel:n,gos:o,pivotResultCols:s}=this.beans,r=n.isPivotMode(),a=null===i||void 0===i?void 0:i.getColumns(),l=n.getColDefCols();let d=null!==(e=r&&!o.get("applyQuickFilterBeforePivotOrAgg")?null===s||void 0===s||null===(t=s.getPivotResultCols())||void 0===t?void 0:t.list:l)&&void 0!==e?e:[];a&&(d=d.concat(a)),this.colsToUse=o.get("includeHiddenColumnsInQuickFilter")?d:d.filter((e=>e.isVisible()||e.isRowGroupActive()))}isFilterPresent(){return null!==this.quickFilter}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i)))}resetCache(){this.beans.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseFilter(e){return Wl(e)?e.toUpperCase():null}setFilter(e){if(null!=e&&"string"!==typeof e)return void _c(70,{newFilter:e});const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some((i=>{const n=this.getTextForColumn(i,e);return Wl(n)&&n.indexOf(t)>=0}))}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:n,matcher:o}=this;return o(n,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const o=Fu(this.gos,{value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(o)}return Wl(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach((i=>{const n=this.getTextForColumn(i,e);Wl(n)&&t.push(n)})),t.join("\n")}}],dependsOn:[pS,gS]}]},xS={moduleName:"ExternalFilter",version:Pc,dependsOn:[pS]},CS=(e,t,i)=>{var n,o;const{editModelSvc:s}=e,r=null===s||void 0===s||null===(n=s.getCellValidationModel())||void 0===n||null===(n=n.getCellValidation(t))||void 0===n?void 0:n.errorMessages,a=null===s||void 0===s||null===(o=s.getRowValidationModel().getRowValidation(t))||void 0===o?void 0:o.errorMessages,l=r||a;return l&&l.length?l.join(i("tooltipValidationErrorSeparator",". ")):void 0},SS={moduleName:"Tooltip",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const o=cC(this.gos),{column:s,eGui:r}=t,a=s.getColDef();n||!o||a.headerComponent||(n=ec((()=>r.querySelector(".ag-header-cell-text"))));const l={getColumn:()=>s,getColDef:()=>s.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>{if(null!=i)return i;return s.getColDef().headerTooltip},shouldDisplayTooltip:n};let d=this.createTooltipFeature(l);return d&&(d=t.createBean(d),t.setRefreshFunction("tooltip",(()=>d.refreshTooltip()))),d}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const o=cC(this.gos),{column:s,eGui:r}=t,a=s.getColGroupDef();n||!o||null!==a&&void 0!==a&&a.headerGroupComponent||(n=ec((()=>r.querySelector(".ag-header-group-text"))));const l={getColumn:()=>s,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>null!==i&&void 0!==i?i:a&&a.headerTooltip,shouldDisplayTooltip:n};a&&(l.getColDef=()=>a);const d=this.createTooltipFeature(l);return d?t.createBean(d):d}enableCellTooltipFeature(e,t,i){const{beans:n}=this,{gos:o,editSvc:s}=n,{column:r,rowNode:a}=e;let l="cell";const d=cC(o);i||(i=d&&!e.isCellRenderer()?()=>{const t=!(null===s||void 0===s||!s.isEditing(e));if(!t&&CS(n,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const i=ec((()=>{const t=e.eGui;return 0===t.children.length?t:t.querySelector(".ag-cell-value")}));return!t&&i()}:()=>!(null!==s&&void 0!==s&&s.isEditing(e)));const c={getColumn:()=>r,getColDef:()=>r.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>a,getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:null!=t?()=>t:()=>{const t=!!(null===s||void 0===s||!s.isEditing(e))&&CS(n,e,this.getLocaleTextFunc());if(t)return l="cellEditor",t;l="cell";const i=r.getColDef(),d=a.data;if(i.tooltipField&&Wl(d))return Xl(d,i.tooltipField,r.isTooltipFieldContainsDots());const c=i.tooltipValueGetter;return c?c(Fu(o,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:i};return this.createTooltipFeature(c,n)}setupFullWidthRowTooltip(e,t,i,n){const o={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},s=this.beans,r=s.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(o,s);if(a)return t.createBean(a,r)}setupCellEditorTooltip(e,t){var i,n;const{beans:o}=this,{context:s}=o,r=(null===(i=t.getValidationElement)||void 0===i?void 0:i.call(t,!0))||!(null!==(n=t.isPopup)&&void 0!==n&&n.call(t))&&e.eGui;if(!r)return;const a={getGui:()=>r,getTooltipValue:()=>CS(o,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var e,t;const{editModelSvc:i}=o,n=null===i||void 0===i||null===(e=i.getRowValidationModel())||void 0===e?void 0:e.getRowValidationMap(),s=null===i||void 0===i||null===(t=i.getCellValidationModel())||void 0===t?void 0:t.getCellValidationMap(),r=!!n&&n.size>0,a=!!s&&s.size>0;return r||a}},l=this.createTooltipFeature(a,o);return l?e.createBean(l,s):void 0}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Wl(t.tooltipField)||Wl(t.tooltipValueGetter)||Wl(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}],dynamicBeans:{tooltipFeature:class extends Vu{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const i="title",n=this.ctrl.getGui();n&&(null==e||""==e&&!t?n.removeAttribute(i):n.setAttribute(i,e))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){null==this.tooltipManager&&(this.tooltipManager=this.createBean(new dC(this.ctrl,(()=>this.tooltip)),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}}},userComponents:{agTooltipComponent:class extends av{constructor(){super(aC)}init(e){const{value:t}=e,i=this.getGui();i.textContent=Wu(t);const n=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add("ag-".concat(n,"-tooltip"))}}},dependsOn:[FC],css:[".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"]},RS=class{constructor(e){this.cellValueChanges=e}},kS=class extends RS{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},PS=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},ES={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},FS=class extends lv{constructor(e){super(),this.cellEditorInput=e,this.eEditor=Wh}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:i}=this,{cellStartedEdit:n,eventKey:o,suppressPreventDefault:s}=e;let r;i.getInputElement().setAttribute("title",""),t.init(i,e);let a=!0;n?(this.focusAfterAttached=!0,o===cg||o===wg?r="":o&&1===o.length?s?a=!1:r=o:(r=t.getStartValue(),o!==yg&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),a&&null!=r&&i.setStartValue(r),this.addGuiEventListener("keydown",(e=>{const{key:t}=e;t!==xg&&t!==Cg||e.preventDefault()}))}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Dd()||t.getFocusableElement().focus();const i=t.getInputElement();var n,o;this.highlightAllOnFocus?i.select():null===(n=(o=this.cellEditorInput).setCaret)||void 0===n||n.call(o)}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},DS={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},NS=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return DS}getAgComponents(){return[Yv]}init(e,t){var i,n,o;this.eEditor=e,this.params=t;const{min:s,max:r,step:a,colDef:l}=t;null!=s&&e.setMin(s),null!=r&&e.setMax(r),null!=a&&e.setStep(a),this.includeTime=null!==(i=t.includeTime)&&void 0!==i?i:null===(n=this.getDataTypeService())||void 0===n||null===(o=n.getDateIncludesTimeFlag)||void 0===o?void 0:o.call(n,l.cellDataType),null!=this.includeTime&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const e=this.eEditor.getInputElement().valueAsDate,{params:t}=this,{min:i,max:n,getValidationErrors:o}=t;let s=[];const r=this.getLocaleTextFunc();if(e instanceof Date&&!isNaN(e.getTime())){if(i){const t=i instanceof Date?i:new Date(i);if(e<t){const e=t.toLocaleDateString();s.push(r("minDateValidation","Date must be after ".concat(e),[e]))}}if(n){const t=n instanceof Date?n:new Date(n);if(e>t){const e=t.toLocaleDateString();s.push(r("maxDateValidation","Date must be before ".concat(e),[e]))}}}return s.length||(s=null),o?o({value:e,cellEditorParams:t,internalErrors:s}):s}getValue(){const{eEditor:e,params:t}=this,i=e.getDate();return Wl(i)||Wl(t.value)?null!==i&&void 0!==i?i:null:t.value}getStartValue(){var e;const{value:t}=this.params;if(t instanceof Date)return Dm(t,null!==(e=this.includeTime)&&void 0!==e&&e)}},MS={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},TS=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return MS}getAgComponents(){return[Yv]}init(e,t){var i,n,o;this.eEditor=e,this.params=t;const{min:s,max:r,step:a,colDef:l}=t;null!=s&&e.setMin(s),null!=r&&e.setMax(r),null!=a&&e.setStep(a),this.includeTime=null!==(i=t.includeTime)&&void 0!==i?i:null===(n=this.getDataTypeService())||void 0===n||null===(o=n.getDateIncludesTimeFlag)||void 0===o?void 0:o.call(n,l.cellDataType),null!=this.includeTime&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,i=e.getInputElement().value,n=this.formatDate(this.parseDate(null!==i&&void 0!==i?i:void 0)),{min:o,max:s,getValidationErrors:r}=t;let a=[];if(n){const e=new Date(n),t=this.getLocaleTextFunc();if(o){const i=new Date(o);if(e<i){const e=i.toLocaleDateString();a.push(t("minDateValidation","Date must be after ".concat(e),[e]))}}if(s){const i=new Date(s);if(e>i){const e=i.toLocaleDateString();a.push(t("maxDateValidation","Date must be before ".concat(e),[e]))}}}return a.length||(a=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,i=this.formatDate(t.getDate());return Wl(i)||Wl(e.value)?e.parseValue(null!==i&&void 0!==i?i:""):e.value}getStartValue(){var e,t,i;return Dm(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,null!==(i=this.includeTime)&&void 0!==i&&i)}parseDate(e){var t;const i=this.getDataTypeService();return i?i.getDateParserFunction(this.params.column)(e):null!==(t=Am(e))&&void 0!==t?t:void 0}formatDate(e){var t,i;const n=this.getDataTypeService();return n?n.getDateFormatterFunction(this.params.column)(e):null!==(t=Dm(null!==e&&void 0!==e?e:null,null!==(i=this.includeTime)&&void 0!==i&&i))&&void 0!==t?t:void 0}},jS={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},AS={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},IS=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return AS}getAgComponents(){return[Kv]}init(e,t){this.eEditor=e,this.params=t;const{max:i,min:n,precision:o,step:s}=t;null!=i&&e.setMax(i),null!=n&&e.setMin(n),null!=o&&e.setPrecision(o),null!=s&&e.setStep(s);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:i,getValidationErrors:n}=e,o=this.eEditor.getInputElement().valueAsNumber,s=this.getLocaleTextFunc();let r=[];return"number"===typeof o&&(null!=t&&o<t&&r.push(s("minValueValidation","Must be greater than or equal to ".concat(t,"."),[String(t)])),null!=i&&o>i&&r.push(s("maxValueValidation","Must be less than or equal to ".concat(i,"."),[String(i)]))),r.length||(r=null),n?n({value:o,cellEditorParams:e,internalErrors:r}):r}preventStepping(e){e.key!==fg&&e.key!==bg||e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();if(!Wl(i)&&!Wl(t.value))return t.value;let n=t.parseValue(i);if(null==n)return n;if("string"===typeof n){if(""===n)return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){Dd()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},LS={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},_S={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},OS=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return _S}getAgComponents(){return[Wv]}init(e,t){this.eEditor=e,this.params=t;const i=t.maxLength;null!=i&&e.setMaxLength(i)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,n=this.getValue(),o=this.getLocaleTextFunc();let s=[];return null!=t&&"string"===typeof n&&n.length>t&&s.push(o("maxLengthValidation","Must be ".concat(t," characters or fewer."),[String(t)])),s.length||(s=null),i?i({value:n,cellEditorParams:e,internalErrors:s}):s}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();return Wl(i)||Wl(t.value)?t.parseValue(i):t.value}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eEditor,t=e.getValue(),i=Wl(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},BS=class extends FS{constructor(){super(new OS((()=>this.getLocaleTextFunc())))}};function zS(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")}function VS(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")}var HS={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},GS=class extends av{constructor(e){super(HS),this.params=e}postConstruct(){Jc(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{cf(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}},WS=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==e)return Kp(e)||t&&"editing"===e.state};function US(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return WS(null===(i=e.editModelSvc)||void 0===i?void 0:i.getEdit(t),n)}function qS(e,t){const{editModelSvc:i}=e,{column:n,rowNode:o}=t;if(e.gos.get("groupTotalRow")&&(null===o||void 0===o||!o.footer))return!1;for(const r of null!==(s=null===o||void 0===o?void 0:o.allLeafChildren)&&void 0!==s?s:[]){var s;if(WS(null===i||void 0===i?void 0:i.getEdit({rowNode:r,column:n}))||WS(null===i||void 0===i?void 0:i.getEdit({rowNode:r.pinnedSibling,column:n})))return!0}}function KS(e,t){var i;let{rowNode:n,column:o}=t;if(n=n.pinnedSibling,n)return WS(null===(i=e.editModelSvc)||void 0===i?void 0:i.getEdit({rowNode:n,column:o}))}var YS=class extends Vu{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){var e;const{cellCtrl:t,editSvc:i,beans:n}=this;if(null!==i&&void 0!==i&&i.isBatchEditing()&&i.isEditing()){const e=US(n,t)||qS(n,t)||KS(n,t);this.applyBatchingStyle(e)}else this.applyBatchingStyle(!1);const o=!(null===(e=this.editModelSvc)||void 0===e||!e.getCellValidationModel().hasCellValidation(this.cellCtrl));this.cellComp.toggleCss("ag-cell-editing-error",o)}applyBatchingStyle(e){var t,i;this.cellComp.toggleCss("ag-cell-editing",null!==e&&void 0!==e&&e),this.cellComp.toggleCss("ag-cell-batch-edit",null!==(t=e&&(null===(i=this.editSvc)||void 0===i?void 0:i.isBatchEditing()))&&void 0!==t&&t)}},QS=class extends Vu{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){var e;const{rowCtrl:t,editModelSvc:i,beans:n}=this;let o=t.rowNode,s=null===i||void 0===i?void 0:i.getEditRow(o);const r=null===(e=this.editModelSvc)||void 0===e?void 0:e.getRowValidationModel().hasRowValidation({rowNode:o});if(!s&&o.pinnedSibling&&(o=o.pinnedSibling,s=null===i||void 0===i?void 0:i.getEditRow(o)),s){const e=Array.from(s.keys()).some((e=>{const t={rowNode:o,column:e};return US(n,t,!0)||qS(n,t)||KS(n,t)}));this.applyStyle(r,e)}else this.applyStyle(r)}applyStyle(){var e,t,i;let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=null!==(e=null===(t=this.editSvc)||void 0===t?void 0:t.isBatchEditing())&&void 0!==e&&e,r="fullRow"===this.gos.get("editType");null===(i=this.rowCtrl)||void 0===i||i.forEachGui(void 0,(e=>{let{rowComp:t}=e;t.toggleCss("ag-row-editing",r&&o),t.toggleCss("ag-row-batch-edit",r&&o&&s),t.toggleCss("ag-row-inline-editing",o),t.toggleCss("ag-row-not-inline-editing",!o),t.toggleCss("ag-row-editing-invalid",r&&o&&n)}))}},$S=e=>()=>{const t=new Set(e.colModel.getCols()),i=e.editModelSvc.getEditMap(!0),n=new Set(i.keys());((e,t,i)=>{let{editModelSvc:n}=e;t.forEach((e=>{var t;return null===n||void 0===n||null===(t=n.getEditRow(e))||void 0===t?void 0:t.forEach(((t,o)=>!i.has(o)&&n.removeEdits({rowNode:e,column:o})))}))})(e,((e,t)=>{let{rowModel:i,pinnedRowModel:n,editModelSvc:o}=e;const s=new Set;return i.forEachNode((e=>t.has(e)&&s.add(e))),null===n||void 0===n||n.forEachPinnedRow("top",(e=>t.has(e)&&s.add(e))),null===n||void 0===n||n.forEachPinnedRow("bottom",(e=>t.has(e)&&s.add(e))),t.forEach((e=>{s.has(e)||o.removeEdits({rowNode:e})})),s})(e,n),t)},XS=new Set(["undo","redo","paste","bulk"]),JS={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},ZS=new Set(Object.keys(JS)),eR=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),tR={cancel:!0,source:"api"},iR={cancel:!1,source:"api"},nR={checkSiblings:!0},oR={force:!0,suppressFlash:!0},sR=class extends Vu{postConstruct(){var e,t;this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:null===(e=this.onCellFocusChanged)||void 0===e?void 0:e.bind(this),cellFocusCleared:null===(t=this.onCellFocusChanged)||void 0===t?void 0:t.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){var t;let i;const n=e.previousParams,{editSvc:o,beans:s}=this,r="cellFocused"===e.type?e.sourceEvent:null;n&&(i=Hp(s,n));const{gos:a,editModelSvc:l}=s,d="cellFocusCleared"===e.type;if(o.isEditing(void 0,{withOpenEditor:!0})){const{column:t,rowIndex:i,rowPinned:c}=e,u={column:t,rowNode:Lp(s,{rowIndex:i,rowPinned:c})},h="block"===a.get("invalidEditValueMode");if(h)return;const p=!h,g=!(null===l||void 0===l||!l.getCellValidationModel().hasCellValidation(u)),m=p&&g;!n&&!d||o.stopEditing(void 0,{cancel:m,source:d&&p?"api":void 0,event:r})||(o.isBatchEditing()?o.cleanupEditors():o.stopEditing(void 0,{source:"api"}))}null===(t=i)||void 0===t||t.refreshCell({suppressFlash:!0,force:!0})}isCellEditable(e){let{rowNode:t,column:i}=e;return i.isColumnFunc(t,i.getColDef().editable)}stop(e,t){const i=this.model.getEditPositions(),n={all:[],pass:[],fail:[]};if(i.forEach((e=>{var t,i;n.all.push(e);const o=this.model.getCellValidationModel().getCellValidation(e);(null!==(t=null===o||void 0===o||null===(i=o.errorMessages)||void 0===i?void 0:i.length)&&void 0!==t?t:0)>0?n.fail.push(e):n.pass.push(e)})),e)return i.forEach((e=>{ig(this.beans,e),this.model.stop(e)})),!0;const o=this.processValidationResults(n);return o.destroy.length>0&&o.destroy.forEach((e=>{ig(this.beans,e,{event:t}),this.model.stop(e)})),o.keep.length>0&&o.keep.forEach((e=>{var t;const i=Hp(this.beans,e);null!==(t=this.editSvc)&&void 0!==t&&t.cellEditingInvalidCommitBlocks()||i&&this.editSvc.revertSingleCellEdit(i)})),!0}cleanupEditors(){let{rowNode:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Zp(this.beans,!1);const i=this.model.getEditPositions(),n=[];e?i.forEach((t=>{e&&t.rowNode!==e&&n.push(t)})):i.forEach((e=>{n.push(e)})),tg(this.beans,n),Xp(this.beans,t)}setFocusOutOnEditor(e){var t,i;null===(t=e.comp)||void 0===t||null===(t=t.getCellEditor())||void 0===t||null===(i=t.focusOut)||void 0===i||i.call(t)}setFocusInOnEditor(e){const t=e.comp,i=null===t||void 0===t?void 0:t.getCellEditor();if(null!==i&&void 0!==i&&i.focusIn)i.focusIn();else{const i="fullRow"===this.beans.gos.get("editType");e.focusCell(i),e.onEditorAttachedFuncs.push((()=>{var e,i;return null===t||void 0===t||null===(e=t.getCellEditor())||void 0===e||null===(i=e.focusIn)||void 0===i?void 0:i.call(e)}))}}setupEditors(e){const{event:t,ignoreEventKey:i=!1,startedEdit:n,position:o,cells:s=this.model.getEditPositions()}=e,r=t instanceof KeyboardEvent&&!i&&t.key||void 0;!function(e,t,i,n,o,s){0===t.length&&null!==i&&void 0!==i&&i.rowNode&&null!==i&&void 0!==i&&i.column&&Yp(e,i,{key:n,event:o,cellStartedEdit:s});const{valueSvc:r,editSvc:a,editModelSvc:l}=e,{rowNode:d,column:c}=null!==i&&void 0!==i?i:{};for(const m of t){const{rowNode:t,column:f}=m,v=Hp(e,m);if(!v){if(t&&f){var u,h,p,g;const e=r.getValue(f,t,void 0,"api"),o=(null===i||void 0===i?void 0:i.rowNode)===t&&(null===i||void 0===i?void 0:i.column)===f&&n||void 0,s=null!==(u=null!==(h=null!==(p=null!==o&&void 0!==o?o:null===a||void 0===a?void 0:a.getCellDataValue(m,!1))&&void 0!==p?p:null===(g=r.getValueForDisplay(f,t))||void 0===g?void 0:g.value)&&void 0!==h?h:e)&&void 0!==u?u:Up;null===l||void 0===l||l.setEdit(m,{pendingValue:s,sourceValue:e,state:"editing"})}continue}const b=s&&d===v.rowNode&&v.column===c;Yp(e,{rowNode:d,column:v.column},{key:b?n:null,event:b?o:null,cellStartedEdit:b&&s})}}(this.beans,s,o,r,t,n)}dispatchCellEvent(e,t,i,n){const o=Hp(this.beans,e);o&&this.eventSvc.dispatchEvent(u(u({},o.createEvent(null!==t&&void 0!==t?t:null,i)),n))}dispatchRowEvent(e,t,i){if(i)return;const n=Vp(this.beans,e);n&&this.eventSvc.dispatchEvent(n.createRowEvent(t))}shouldStart(e,t,i){var n;let{column:o}=e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";if(t instanceof KeyboardEvent&&(t.key===ug||t.key===hg||t.key===yg||t.key===cg&&i))return!0;if((null===t||void 0===t?void 0:t.shiftKey)&&0!=(null===(n=this.beans.rangeSvc)||void 0===n?void 0:n.getCellRanges().length))return!1;const r=null===o||void 0===o?void 0:o.getColDef(),a=this.deriveClickCount(r),l=null===t||void 0===t?void 0:t.type;return"click"===l&&1===(null===t||void 0===t?void 0:t.detail)&&1===a||("dblclick"===l&&2===(null===t||void 0===t?void 0:t.detail)&&2===a||"api"===s&&(null!==i&&void 0!==i&&i))}shouldStop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const n=this.editSvc.isBatchEditing();return!(!n||"api"!==i)||(!n||"ui"!==i)&&("api"===i||(t instanceof KeyboardEvent&&!n?t.key===hg:null))}shouldCancel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const n=this.editSvc.isBatchEditing();if(t instanceof KeyboardEvent&&!n){if(t.key===pg)return!0}return!(!n||"api"!==i)||"api"===i}setEditMap(e,t){var i;null!==t&&void 0!==t&&t.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const n=[];if(e.forEach(((e,t)=>{e.forEach(((e,i)=>{"editing"===e.state&&n.push(u(u({},e),{},{rowNode:t,column:i}))}))})),null!==t&&void 0!==t&&t.update&&(e=new Map([...this.model.getEditMap(),...e])),null===(i=this.model)||void 0===i||i.setEditMap(e),n.length>0){const e=n.at(-1),t=e.pendingValue===Up?void 0:e.pendingValue;this.start({position:e,event:new KeyboardEvent("keydown",{key:t}),source:"api"});const i=Hp(this.beans,e);i&&this.setFocusInOnEditor(i)}}deriveClickCount(e){const{gos:t}=this.beans;return!0===t.get("suppressClickEdit")?0:!0===t.get("singleClickEdit")||null!==e&&void 0!==e&&e.singleClickEdit?1:2}destroy(){this.cleanupEditors(),super.destroy()}},rR={moduleName:"EditCore",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new jp,this.rowValidations=new Ap,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits(e){let{rowNode:t,column:i}=e;if(!this.hasEdits({rowNode:t})||!t)return;const n=this.getEditRow(t);i?n.delete(i):n.clear(),0===n.size&&this.edits.delete(t)}getEditRow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.suspendEdits)return;if(0===this.edits.size)return;const i=e&&this.edits.get(e);if(i)return i;if(t.checkSiblings){const t=e.pinnedSibling;if(t)return this.getEditRow(t)}}getEditRowDataValue(e){let{checkSiblings:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.edits.size)return e.data;const i=this.getEditRow(e),n=e.pinnedSibling,o=t&&n&&this.getEditRow(n);if(!i&&!o)return e.data;const s=Object.assign({},e.data),r=(e,t)=>e.forEach(((e,i)=>{let{pendingValue:n}=e;n!==Up&&(t[i.getColId()]=n)}));return i&&r(i,s),o&&r(o,s),s}getEdit(e,t){const i=this._getEdit(e);return t&&i?u({},i):i}_getEdit(e){var t;if(!this.suspendEdits&&0!==this.edits.size)return e.rowNode&&e.column&&(null===(t=this.getEditRow(e.rowNode))||void 0===t?void 0:t.get(e.column))}getEditMap(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.suspendEdits||0===this.edits.size)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach(((e,i)=>t.set(i,new Map(e)))),t}setEditMap(e){this.edits.clear(),e.forEach(((e,t)=>{const i=new Map;e.forEach(((e,t)=>i.set(t,u({},e)))),this.edits.set(t,i)}))}setEdit(e,t){(0===this.edits.size||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const i=u(u({},this._getEdit(e)),t);return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){const{rowNode:t,column:i}=e;if(t)if(i){const t=this._getEdit(e);t&&(t.editorValue=void 0,t.pendingValue=t.sourceValue,t.state="changed")}else{var n;null===(n=this.getEditRow(t))||void 0===n||n.forEach((e=>{e.editorValue=void 0,e.pendingValue=e.sourceValue,e.state="changed"}))}}getState(e){var t;if(!this.suspendEdits)return null===(t=this.getEdit(e))||void 0===t?void 0:t.state}getEditPositions(e){if(this.suspendEdits||0===(null!==e&&void 0!==e?e:this.edits).size)return[];const t=[];return(null!==e&&void 0!==e?e:this.edits).forEach(((e,i)=>{for(const n of e.keys())t.push(u({rowNode:i,column:n},e.get(n)))})),t}hasRowEdits(e,t){if(this.suspendEdits)return!1;if(0===this.edits.size)return!1;return!!this.getEditRow(e,t)}hasEdits(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.suspendEdits)return!1;if(0===this.edits.size)return!1;const{rowNode:i,column:n}=e,{withOpenEditor:o}=t;if(i){const a=this.getEditRow(i,t);return!!a&&(n?o?"editing"===(null===(r=this.getEdit(e))||void 0===r?void 0:r.state):null!==(s=a.has(n))&&void 0!==s&&s:0!==a.size&&(!o||Array.from(a.values()).some((e=>{let{state:t}=e;return"editing"===t}))));var s,r}return o?this.getEditPositions().some((e=>{let{state:t}=e;return"editing"===t})):this.edits.size>0}start(e){var t;const i=null!==(t=this.getEditRow(e.rowNode))&&void 0!==t?t:new Map,{rowNode:n,column:o}=e;o&&!i.has(o)&&i.set(o,{editorValue:void 0,pendingValue:Up,sourceValue:this.beans.valueSvc.getValue(o,n,!0,"api"),state:"editing"}),this.edits.set(n,i)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},class extends Vu{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",(e=>{let{currentValue:t}=e;this.stopEditing(void 0,tR),this.createStrategy(t)}));const t=$S(e),i=()=>{const t=this.model.getCellValidationModel().getCellValidationMap().size>0,i=this.model.getRowValidationModel().getRowValidationMap().size>0;return t||i?this.stopEditing(void 0,tR):this.isEditing()&&(this.isBatchEditing()?tg(e,this.model.getEditPositions()):this.stopEditing(void 0,iR)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowGroupOpened:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,tR)):(this.stopEditing(void 0,tR),this.batch=!1)}createStrategy(e){var t;const{beans:i,gos:n,strategy:o}=this,s=null!==(t=null!==e&&void 0!==e?e:n.get("editType"))&&void 0!==t?t:"singleCell";if(o){if(o.beanName===s)return o;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(i.registry.createDynamicBean(s,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,i){var n,o,s;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";return null!==(n=this.strategy)&&void 0!==n||(this.strategy=this.createStrategy()),null!==(o=null===(s=this.strategy)||void 0===s?void 0:s.shouldStart(e,t,i,r))&&void 0!==o?o:null}shouldStopEditing(e,t){var i,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";return null!==(i=null===(n=this.strategy)||void 0===n?void 0:n.shouldStop(e,t,o))&&void 0!==i?i:null}shouldCancelEditing(e,t){var i,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";return null!==(i=null===(n=this.strategy)||void 0===n?void 0:n.shouldCancel(e,t,o))&&void 0!==i?i:null}validateEdit(){return function(e){var t;ng(e);const i=null===(t=e.editModelSvc)||void 0===t?void 0:t.getCellValidationModel().getCellValidationMap();if(!i)return null;const n=[];return i.forEach(((e,t)=>{e.forEach(((e,i)=>{let{errorMessages:o}=e;n.push({column:i,rowIndex:t.rowIndex,rowPinned:t.rowPinned,messages:null!==o&&void 0!==o?o:null})}))})),n}(this.beans)}isEditing(e,t){return this.model.hasEdits(e,null!==t&&void 0!==t?t:nR)}isRowEditing(e,t){var i;return null!==(i=e&&this.model.hasRowEdits(e,t))&&void 0!==i&&i}startEditing(e,t){var i,n;const{startedEdit:o=!0,event:s=null,source:r="ui",ignoreEventKey:a=!1,silent:l}=t;if(null!==(i=this.strategy)&&void 0!==i||(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const d=Hp(this.beans,e);if(d&&!d.comp)return void d.onCompAttachedFuncs.push((()=>this.startEditing(e,t)));const c=null===(n=this.shouldStartEditing)||void 0===n?void 0:n.call(this,e,s,o,r);!1!==c||"api"===r?(!this.batch&&this.shouldStopEditing(e,void 0,r)&&this.stopEditing(void 0,{source:r}),c&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:s,source:r,ignoreEventKey:a,startedEdit:o,silent:l})):this.isEditing(e)&&this.stopEditing()}stopEditing(e,t){var i;const{event:n,cancel:o,source:s="ui",suppressNavigateAfterEdit:r}=t||{},{beans:a,model:l}=this;if(ZS.has(s)&&this.isBatchEditing())return this.bulkRefresh(e),!1;const d=this.committing?JS[s]:s;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&l.hasEdits(e,nR))||!this.strategy)return!1;const c=Hp(a,e);c&&(c.onEditorAttachedFuncs=[]);let u=l.getEditMap(!0),h=!1;const p=!o&&(!!this.shouldStopEditing(e,n,d)||this.committing&&!this.batch),g=o&&!!this.shouldCancelEditing(e,n,d);if(p||g){var m;Zp(a,!0);const e=l.getEditMap();this.processEdits(e,o,s),null===(m=this.strategy)||void 0===m||m.stop(o,n),this.bulkRefresh(void 0,u),u=e,h||(h=p)}else if(n instanceof KeyboardEvent&&this.batch&&null!==(i=this.strategy)&&void 0!==i&&i.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){const t=n.key,i=t===hg,o=t===pg,s=t===ug;if(i||s||o){var f;if(i||s?Zp(a,!0):o&&this.revertSingleCellEdit(c),this.isBatchEditing())null===(f=this.strategy)||void 0===f||f.cleanupEditors();else tg(a,l.getEditPositions(),{event:n});n.preventDefault(),this.bulkRefresh(e,u,{suppressFlash:!0}),u=l.getEditMap()}}else Zp(a,!0),u=l.getEditMap();return h&&e&&this.model.removeEdits(e),!r&&c&&this.navigateAfterEdit(n instanceof KeyboardEvent&&n.shiftKey,c.cellPosition),Xp(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),g&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(u.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),h&&p&&this.dispatchBatchEvent("batchEditingStopped",u)),h}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){var i;const n=e?fg:bg;null===(i=this.beans.navigation)||void 0===i||i.navigateToNextCell(null,n,t,!1)}}processEdits(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const n=Array.from(e.keys()),{beans:o}=this,s=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,r=[];for(const c of n){const n=e.get(c);for(const e of n.keys()){var a,l,d;const u=n.get(e),h={rowNode:c,column:e},p=Hp(o,h),g=Kp(u),m=null===p||void 0===p||null===(a=p.comp)||void 0===a||null===(a=a.getCellEditor())||void 0===a||null===(l=(d=a).isCancelAfterEnd)||void 0===l?void 0:l.call(d);if(!t&&!m&&g&&!s){this.setNodeDataValue(c,e,u.pendingValue,void 0,i)||r.push(h)}null===p||void 0===p||p.refreshCell(oR)}}r.forEach((e=>{this.model.clearEditValue(e)}))}setNodeDataValue(e,t,i,n,o){const{beans:s}=this,r=Hp(s,{rowNode:e,column:t});r&&(r.suppressRefreshCell=!0),this.commitNextEdit();const a=e.setDataValue(t,i,"ui"===o?"edit":o);return r&&(r.suppressRefreshCell=!1),n&&(null===r||void 0===r||r.refreshCell(oR)),a}setEditMap(e,t){var i,n;null!==(i=this.strategy)&&void 0!==i||(this.strategy=this.createStrategy()),null===(n=this.strategy)||void 0===n||n.setEditMap(e,t),this.bulkRefresh(),this.beans.rowRenderer.refreshCells(oR)}dispatchEditValuesChanged(e){let{rowNode:t,column:i}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!i||!n)return;const{pendingValue:o,sourceValue:s}=n,{rowIndex:r,rowPinned:a,data:l}=t;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:t,rowIndex:r,rowPinned:a,column:i,source:"api",data:l,newValue:o,oldValue:s,value:o,colDef:i.getColDef()})}bulkRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{beans:n,gos:o}=this,{editModelSvc:s,rowModel:r}=n;if(Gc(o))if(e.rowNode&&e.column)this.refCell(e,this.model.getEdit(e),i);else if(t){var a;null===s||void 0===s||null===(a=s.getEditMap(!1))||void 0===a||a.forEach(((e,t)=>{for(const n of e.keys())this.refCell({rowNode:t,column:n},e.get(n),i)}))}}refCell(e,t){let{rowNode:i,column:n}=e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{beans:s,gos:r}=this,a=new Set([i]),l=new Set,d=i.pinnedSibling;d&&a.add(d);const c=i.sibling;c&&l.add(c);let u=i.parent;for(;u;){var h;null!==(h=u.sibling)&&void 0!==h&&h.footer&&r.get("groupTotalRow")||!u.parent&&u.sibling&&r.get("grandTotalRow")?l.add(u.sibling):l.add(u),u=u.parent}a.forEach((e=>this.dispatchEditValuesChanged({rowNode:e,column:n},t))),a.forEach((e=>{var t;return null===(t=Hp(s,{rowNode:e,column:n}))||void 0===t?void 0:t.refreshCell(o)})),l.forEach((e=>{var t;return null===(t=Hp(s,{rowNode:e,column:n}))||void 0===t?void 0:t.refreshCell(o)}))}stopAllEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui";this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e){var t,i,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui";const{rowNode:s}=e;if(s.group)if(this.gos.get("treeData")){if(!s.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return null!==(t=this.strategy)&&void 0!==t||(this.strategy=this.createStrategy()),null!==(i=null===(n=this.strategy)||void 0===n?void 0:n.isCellEditable(e,o))&&void 0!==i&&i}cellEditingInvalidCommitBlocks(){return"block"===this.gos.get("invalidEditValueMode")}checkNavWithValidation(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.hasValidationErrors(e)){const r=Hp(this.beans,e);if(this.cellEditingInvalidCommitBlocks()){var n,o,s;if(null===t||void 0===t||null===(n=t.preventDefault)||void 0===n||n.call(t),i)(null===r||void 0===r||!r.hasBrowserFocus())&&(null===r||void 0===r||r.focusCell()),null===r||void 0===r||null===(o=r.comp)||void 0===o||null===(o=o.getCellEditor())||void 0===o||null===(s=o.focusIn)||void 0===s||s.call(o);return"block-stop"}return r&&this.revertSingleCellEdit(r),"revert-continue"}return"continue"}revertSingleCellEdit(e){var t,i,n,o;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=Hp(this.beans,e);null!==r&&void 0!==r&&null!==(t=r.comp)&&void 0!==t&&t.getCellEditor()&&(tg(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),Yp(this.beans,e,{silent:!0}),ng(this.beans),null===r||void 0===r||r.refreshCell(oR),null===(i=r.rowCtrl.rowEditStyleFeature)||void 0===i||i.applyRowStyles(),s&&(null===r||void 0===r||r.focusCell(),null===r||void 0===r||null===(n=r.comp)||void 0===n||null===(n=n.getCellEditor())||void 0===n||null===(o=n.focusIn)||void 0===o||o.call(n)))}hasValidationErrors(e){ng(this.beans);const t=Hp(this.beans,e);var i;t&&(t.refreshCell(oR),null===(i=t.rowCtrl.rowEditStyleFeature)||void 0===i||i.applyRowStyles());let n=!1;return null!==e&&void 0!==e&&e.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,i){let n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";const s=this.isEditing(),r=s&&"block-stop"===this.checkNavWithValidation(void 0,i);var a;e instanceof Xg&&s&&(n=null===(a=this.strategy)||void 0===a?void 0:a.moveToNextEditingCell(e,t,i,o,r));return null===n||(n=n||!!this.beans.focusSvc.focusedHeader,!1!==n||r||this.stopEditing()),n}getCellDataValue(e){var t,i,n,o;let{rowNode:s,column:r}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!s||!r)return;let l=this.model.getEdit({rowNode:s,column:r});const d=s.pinnedSibling;if(d){const e=this.model.getEdit({rowNode:d,column:r});e&&(l=e)}const c=a?null!==(t=null===(i=l)||void 0===i?void 0:i.editorValue)&&void 0!==t?t:null===(n=l)||void 0===n?void 0:n.pendingValue:null===(o=l)||void 0===o?void 0:o.pendingValue;return c!==Up&&l?c:this.valueSvc.getValue(r,s,!0,"api")}getRowDataValue(e,t){return this.model.getEditRowDataValue(e,t)}addStopEditingWhenGridLosesFocus(e){!function(e,t,i){const{gos:n,popupSvc:o}=t;if(!n.get("stopEditingWhenCellsLoseFocus"))return;const s=e=>{const s=e.relatedTarget;if(null===jd(s))return void Gp(t);let r=i.some((e=>e.contains(s)))&&tm(n,s);r||(r=!!o&&(o.getActivePopups().some((e=>e.contains(s)))||o.isElementWithinCustomPopup(s))),r||Gp(t)};i.forEach((t=>e.addManagedElementListeners(t,{focusout:s})))}(this,this.beans,e)}createPopupEditorWrapper(e){return new GS(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,i){try{var n;if((!this.isEditing()||this.committing)&&!eR.has(i))return;const{beans:s}=this;null!==(n=this.strategy)&&void 0!==n||(this.strategy=this.createStrategy());const r=this.isBatchEditing()?"ui":this.committing&&null!==i&&void 0!==i?i:"api";if(!i||XS.has(i))return eg(s,e,!0,t),this.setNodeDataValue(e.rowNode,e.column,t,!0,i);const a=this.model.getEdit(e);if(a){if(a.pendingValue===t)return!1;if(a.sourceValue!==t)return eg(s,e,!0,t),this.stopEditing(e,{source:r,suppressNavigateAfterEdit:!0}),!0;var o;if(a.sourceValue===t)return null===(o=s.editModelSvc)||void 0===o||o.removeEdits(e),this.dispatchEditValuesChanged(e,u(u({},a),{},{pendingValue:t})),!0}return eg(s,e,!0,t),this.stopEditing(e,{source:r,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){!function(e,t){var i;const n=null===(i=t.comp)||void 0===i?void 0:i.getCellEditor();if(null===n||void 0===n||!n.refresh)return;const{eventKey:o,cellStartedEdit:s}=t.editCompDetails.params,{column:r}=t,a=$p(e,t,o,s),l=r.getColDef(),d=mp(e.userCompFactory,l,a);n.refresh(Jp(d.params,o))}(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch)return;if(!this.model.hasRowEdits(e.rowNode,nR))return;const{rowNode:i,column:n}=e,{compDetails:o,valueToDisplay:s}=t;if(o){const{params:e}=o;return e.data=this.model.getEditRowDataValue(i,nR),{compDetails:o}}const r=this.model.getEditRow(e.rowNode,nR);return void 0!==s&&null!==r&&void 0!==r&&r.has(n)?{valueToDisplay:this.valueSvc.getValue(n,i)}:void 0}cleanupEditors(){var e;null===(e=this.strategy)||void 0===e||e.cleanupEditors()}dispatchCellEvent(e,t,i,n){var o;null===(o=this.strategy)||void 0===o||o.dispatchCellEvent(e,t,i,n)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Fu(this.gos,u({type:e},"batchEditingStopped"===e?{changes:this.toEventChangeList(t)}:{}))}toEventChangeList(e){return this.model.getEditPositions(e).map((e=>({rowIndex:e.rowNode.rowIndex,rowPinned:e.rowNode.rowPinned,columnId:e.column.getColId(),newValue:e.pendingValue,oldValue:e.sourceValue})))}applyBulkEdit(e,t){var i;let{rowNode:n,column:o}=e;if(!t||0===t.length)return;const{beans:s,rangeSvc:r,valueSvc:a}=this;Zp(s,!0);const l=this.model.getEditMap(!0),d=null===(i=l.get(n))||void 0===i||null===(i=i.get(o))||void 0===i?void 0:i.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),t.forEach((e=>{if(null===r||void 0===r||r.forEachRowInRange(e,(t=>{var i;const n=Lp(s,t);if(void 0===n)return;const o=null!==(i=l.get(n))&&void 0!==i?i:new Map;for(const s of e.columns)if(s&&this.isCellEditable({rowNode:n,column:s},"api")){const e=a.getValue(s,n,!0,"api");let t=a.parseValue(s,null!==n&&void 0!==n?n:null,d,e);Number.isNaN(t)&&(t=null),o.set(s,{editorValue:void 0,pendingValue:t,sourceValue:e,state:"changed"})}o.size>0&&l.set(n,o)})),this.setEditMap(l),this.batch)return this.cleanupEditors(),Xp(s),void this.bulkRefresh();this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(l)})})),this.bulkRefresh();const c=Hp(s,{rowNode:n,column:o});c&&c.focusCell(!0)}createCellStyleFeature(e,t){return new YS(e,t)}createRowStyleFeature(e,t){return new QS(e,t)}setEditingCells(e,t){const{beans:i}=this,{colModel:n,valueSvc:o}=i,s=new Map;e.forEach((e=>{let{colId:t,column:r,colKey:a,rowIndex:l,rowPinned:d,newValue:c,state:u}=e;const h=t?n.getCol(t):a?n.getCol(a):r;if(!h)return;const p=Lp(i,{rowIndex:l,rowPinned:d});if(!p)return;const g=o.getValue(h,p,!0,"api");if(!Kp({pendingValue:c,sourceValue:g})&&"editing"!==u)return;let m=s.get(p);m||(m=new Map,s.set(p,m)),void 0===c&&(c=Up),m.set(h,{editorValue:void 0,pendingValue:c,sourceValue:g,state:null!==u&&void 0!==u?u:"changed"})})),this.setEditMap(s,t)}onCellFocused(e){var t;const i=Hp(this.beans,e);if(!i||!this.isEditing(i,nR))return;const n=this.model.getEdit(i);if(!n||!Kp(n))return;const o=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");null===(t=this.beans.ariaAnnounce)||void 0===t||t.announceValue(o,"pendingChange")}allowedFocusTargetOnValidation(e){return Hp(this.beans,e)}}],apiFunctions:{getEditingCells:function(e){var t;const i=null===(t=e.editModelSvc)||void 0===t?void 0:t.getEditMap(),n=[];return null===i||void 0===i||i.forEach(((e,t)=>{const{rowIndex:i,rowPinned:o}=t;e.forEach(((e,t)=>{const{editorValue:s,pendingValue:r,sourceValue:a,state:l}=e,d=Kp(e);let c=null!==s&&void 0!==s?s:r;c===Up&&(c=void 0);const u={newValue:c,oldValue:a,state:l,column:t,colId:t.getColId(),colKey:t.getColId(),rowIndex:i,rowPinned:o};("editing"===l||"changed"===l&&d)&&n.push(u)}))})),n},getCellEditorInstances:function(e){return qp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).map((e=>e.editor))},startEditingCell:function(e,t){const{key:i,colKey:n,rowIndex:o,rowPinned:s}=t,{editSvc:r,colModel:a}=e,l=a.getCol(n);if(!l)return void _c(12,{colKey:n});const d=Lp(e,{rowIndex:o,rowPinned:s||null,column:l});if(!d)return void _c(290,{rowIndex:o,rowPinned:s});if(!l.isCellEditable(d))return;null==s&&VS(e,o),zS(e,n),null===r||void 0===r||r.startEditing({rowNode:d,column:l},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})},stopEditing:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{editSvc:i}=e;if(null!==i&&void 0!==i&&i.isBatchEditing()){var n;if(t)null===(n=e.editModelSvc)||void 0===n||n.getEditPositions().forEach((e=>{"editing"===e.state&&i.revertSingleCellEdit(e)}));else Zp(e,!0);tg(e)}else null===i||void 0===i||i.stopEditing(void 0,{cancel:t,source:"api"})},isEditing:function(e,t){var i,n;const o=Hp(e,t);return null!==(i=null===(n=e.editSvc)||void 0===n?void 0:n.isEditing(o))&&void 0!==i&&i},validateEdit:function(e){var t;return(null===(t=e.editSvc)||void 0===t?void 0:t.validateEdit())||null}},dynamicBeans:{singleCell:class extends sR{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const n=super.shouldStop(e,t,i);if(null!==n)return n;const{rowNode:o,column:s}=e||{};return this.rowNode&&this.column||!o||!s?this.rowNode!==o||this.column!==s:null}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:i,event:n,ignoreEventKey:o}=e;this.rowNode===t.rowNode&&this.column===t.column||super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:i,event:n,ignoreEventKey:o})}dispatchRowEvent(e,t,i){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:i}=this.beans,{rowIndex:n,column:o,rowPinned:s}=e,r=Lp(this.beans,{rowIndex:n,rowPinned:s}),a=Wp(o),l=t.getCol(a),d=e.previousParams;if(d){const e=Wp(d.column);if((null===d||void 0===d?void 0:d.rowIndex)===n&&e===a&&(null===d||void 0===d?void 0:d.rowPinned)===s)return}null!==i&&void 0!==i&&i.isEditing({rowNode:r,column:l},{withOpenEditor:!0})&&"cellFocused"===e.type||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,i){var n;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=e.cellPosition;let a;const l="fullRow"===this.beans.gos.get("editType");var d,c;(l&&this.model.suspend(!0),s)||(e.eGui.focus(),null===(d=this.editSvc)||void 0===d||d.stopEditing(e,{source:null!==(c=this.editSvc)&&void 0!==c&&c.isBatchEditing()?"ui":"api",event:i}));try{var u;a=null===(u=this.beans.navigation)||void 0===u?void 0:u.findNextCellToFocusOn(r,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(!1===a)return null;if(null==a)return!1;const h=a.cellPosition,p=e.isCellEditable(),g=a.isCellEditable(),m=h&&r.rowIndex===h.rowIndex&&r.rowPinned===h.rowPinned;p&&!s&&this.setFocusOutOnEditor(e);const f=this.gos.get("suppressStartEditOnTab");var v;(m||s||(super.cleanupEditors(a,!0),f?a.focusCell(!0,i):this.editSvc.startEditing(a,{startedEdit:!0,event:i,source:o,ignoreEventKey:!0})),g&&!s)?(a.focusCell(!1,i),f?a.focusCell(!0,i):null!==(v=a.comp)&&void 0!==v&&v.getCellEditor()||(Yp(this.beans,a,{event:i,cellStartedEdit:!0,silent:!0}),this.setFocusInOnEditor(a),this.cleanupEditors(a))):(g&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,i));return null===(n=e.rowCtrl)||void 0===n||n.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},fullRow:class extends sR{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}isCellEditable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui";const i=super.isCellEditable(e,t);if(!0===i||"ui"===t)return i;return this.beans.colModel.getCols().some((i=>super.isCellEditable({rowNode:e.rowNode,column:i},t)))}shouldStop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const{rowNode:n}=e||{};if(!Vp(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,i);return null!==o?o:!!this.rowNode&&n!==this.rowNode}midBatchInputsAllowed(e){let{rowNode:t}=e;return!!t&&this.model.hasEdits({rowNode:t})}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:i,startedEdit:n,event:o,ignoreEventKey:s}=e,{rowNode:r}=t;this.rowNode!==r&&super.cleanupEditors(t),this.dispatchRowEvent({rowNode:r},"rowEditingStarted",i),this.startedRows.push(r);const a=this.beans.visibleCols.allCols,l=[];a.forEach((e=>{if(!e.isCellEditable(r))return;const t={rowNode:r,column:e};l.push(t),this.model.hasEdits(t)||this.model.start(t)})),this.rowNode=r,this.setupEditors({cells:l,position:t,startedEdit:n,event:o,ignoreEventKey:s})}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){var i;const{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;const o=[];return e||this.model.getEditMap().forEach(((e,t)=>{if(e&&0!==e.size)for(const i of e.values())if(Kp(i)){o.push(t);break}})),ng(this.beans),!(!e&&"block-stop"===(null===(i=this.editSvc)||void 0===i?void 0:i.checkNavWithValidation({rowNode:n})))&&(super.stop(e,t),o.forEach((e=>this.dispatchRowEvent({rowNode:e},"rowValueChanged"))),this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0)}onCellFocusChanged(e){const{rowIndex:t}=e,i=e.previousParams;if((null===i||void 0===i?void 0:i.rowIndex)===t||e.sourceEvent instanceof KeyboardEvent)return;const n=Hp(this.beans,i);"block"===this.gos.get("invalidEditValueMode")&&n&&(this.model.getCellValidationModel().getCellValidation(n)||this.model.getRowValidationModel().getRowValidation(n))||super.onCellFocusChanged(e)}cleanupEditors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;super.cleanupEditors(e,t),this.startedRows.forEach((e=>this.dispatchRowEvent({rowNode:e},"rowEditingStopped"))),this.startedRows.length=0}moveToNextEditingCell(e,t,i){var n;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=e.cellPosition;let a;this.model.suspend(!0);try{var l;a=null===(l=this.beans.navigation)||void 0===l?void 0:l.findNextCellToFocusOn(r,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(!1===a)return null;if(null==a)return!1;const d=a.cellPosition,c=e.isCellEditable(),u=a.isCellEditable(),h=d&&r.rowIndex===d.rowIndex&&r.rowPinned===d.rowPinned;c&&this.setFocusOutOnEditor(e),this.restoreEditors();const p=this.gos.get("suppressStartEditOnTab");var g;u&&!s?p?a.focusCell(!0,i):(null!==(g=a.comp)&&void 0!==g&&g.getCellEditor()||Yp(this.beans,a,{event:i,cellStartedEdit:!0}),this.setFocusInOnEditor(a),a.focusCell(!1,i)):(u&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,i));return h||s||(this.cleanupEditors(a,!0),p?a.focusCell(!0,i):this.editSvc.startEditing(a,{startedEdit:!0,event:i,source:o,ignoreEventKey:!0})),null===(n=e.rowCtrl)||void 0===n||n.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach(((e,t)=>e.forEach(((e,i)=>{var n;let{state:o}=e;if("editing"!==o)return;const s=Hp(this.beans,{rowNode:t,column:i});!s||null!==(n=s.comp)&&void 0!==n&&n.getCellEditor()||Yp(this.beans,s,{silent:!0})}))))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}}},dependsOn:[FC,SS],css:[".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}"]},aR={moduleName:"UndoRedoEdit",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&Ip(this.activeCellEdit,t),n=null!==this.activeRowEdit&&(o=this.activeRowEdit,s=t,!o&&!s||!(o&&!s||!o&&s)&&o.rowIndex===s.rowIndex&&o.rowPinned==s.rowPinned);var o,s;if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:a,column:l,oldValue:d,value:c}=e,u={rowPinned:r,rowIndex:a,columnId:l.getColId(),newValue:c,oldValue:d};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new PS(i),this.redoStack=new PS(i),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){var e,t;return null!==(e=null===(t=this.undoStack)||void 0===t?void 0:t.getCurrentStackSize())&&void 0!==e?e:0}getCurrentRedoStackSize(){var e,t;return null!==(e=null===(t=this.redoStack)||void 0===t?void 0:t.getCurrentStackSize())&&void 0!==e?e:0}undo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const o=this.undoRedo(i,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:o})}redo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const o=this.undoRedo(n,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:o})}undoRedo(e,t,i,n,o){if(!e)return!1;const s=e.pop();return!(!s||!s.cellValueChanges)&&(this.processAction(s,(e=>e[n]),o),s instanceof kS?this.processRange(s.ranges||[s[i]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:n,rowPinned:o,columnId:s}=e,r={rowIndex:n,rowPinned:o},a=Lp(this.beans,r);a.displayed&&a.setDataValue(s,t(e),i)}))}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach(((n,o)=>{if(!n)return;const s=n.startRow,r=n.endRow;o===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:n.startColumn,columns:n.columns};i.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,o={rowIndex:i,rowPinned:n},s=Lp(this.beans,o),r={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:n}=e,{colModel:o,focusSvc:s,rangeSvc:r}=this.beans,a=o.getCol(i);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const d={rowIndex:t,column:a,rowPinned:n};s.setFocusedCell(u(u({},d),{},{forceBrowserFocus:!0})),null===r||void 0===r||r.setRangeToCell(d)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new RS(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new RS(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new RS(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new kS(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;e=t&&bu(i)?new kS(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new RS(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:e=>{let{changes:t}=e;return this.stopBigChange("batchEditing",t)},bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:e=>{let{changes:t}=e;return this.stopBigChange("bulkEditing",t)}})}startBigChange(e){this[e]=!0}stopBigChange(e,t){if(!this[e])return;if(this[e]=!1,0===(null===t||void 0===t?void 0:t.length))return;const i=new RS(null!==t&&void 0!==t?t:[]);this.pushActionsToUndoStack(i),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],apiFunctions:{undoCellEditing:function(e){var t;null===(t=e.undoRedo)||void 0===t||t.undo("api")},redoCellEditing:function(e){var t;null===(t=e.undoRedo)||void 0===t||t.redo("api")},getCurrentUndoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedo)||void 0===i?void 0:i.getCurrentUndoStackSize())&&void 0!==t?t:0},getCurrentRedoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedo)||void 0===i?void 0:i.getCurrentRedoStackSize())&&void 0!==t?t:0}},dependsOn:[rR]},lR={moduleName:"TextEditor",version:Pc,userComponents:{agCellEditor:BS,agTextCellEditor:BS},dependsOn:[rR]},dR={moduleName:"NumberEditor",version:Pc,userComponents:{agNumberCellEditor:{classImp:class extends FS{constructor(){super(new IS((()=>this.getLocaleTextFunc())))}}}},dependsOn:[rR]},cR={moduleName:"DateEditor",version:Pc,userComponents:{agDateCellEditor:class extends FS{constructor(){super(new NS((()=>this.beans.dataTypeSvc),(()=>this.getLocaleTextFunc())))}},agDateStringCellEditor:class extends FS{constructor(){super(new TS((()=>this.beans.dataTypeSvc),(()=>this.getLocaleTextFunc())))}}},dependsOn:[rR]},uR={moduleName:"CheckboxEditor",version:Pc,userComponents:{agCheckboxCellEditor:class extends lv{constructor(){super(ES,[bv]),this.eEditor=Wh}initialiseEditor(e){var t;const i=null!==(t=e.value)&&void 0!==t?t:void 0,n=this.eEditor;n.setValue(i);n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListeners(n,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=Fd(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel("".concat(n," (").concat(i,")"))}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,i=this.getValue();return t?t({value:i,internalErrors:null,cellEditorParams:e}):null}}},dependsOn:[rR]},hR={moduleName:"SelectEditor",version:Pc,userComponents:{agSelectCellEditor:class extends lv{constructor(){super(LS,[Zv]),this.eEditor=Wh,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:i,gos:n}=this,{values:o,value:s,eventKey:r}=e;if(Ul(o))return void _c(58);this.startedByEnter=null!=r&&r===hg;let a=!1;o.forEach((n=>{const o={value:n},r=i.formatValue(e.column,null,n),l=null!==r&&void 0!==r;o.text=l?r:n,t.addOption(o),a=a||s===n})),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:d,valueListMaxHeight:c}=e;null!=l&&t.setPickerGap(l),null!=c&&t.setPickerMaxHeight(c),null!=d&&t.setPickerMaxWidth(d),"fullRow"!==n.get("editType")&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eEditor.showPicker()}))}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:i}=e,n=this.getValue();let o=[];if(t&&!t.includes(n)){const e=this.getLocaleTextFunc();o.push(e("invalidSelectionValidation","Invalid selection."))}else o=null;return i?i({value:n,internalErrors:o,cellEditorParams:e}):o}}},dependsOn:[rR]},pR={moduleName:"LargeTextEditor",version:Pc,userComponents:{agLargeTextCellEditor:class extends lv{constructor(){super(jS,[Uv]),this.eEditor=Wh}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:i,eventKey:n,maxLength:o,cols:s,rows:r}=e;let a;this.focusAfterAttached=i,t.getInputElement().setAttribute("title",""),t.setMaxLength(o||200).setCols(s||60).setRows(r||10),i?(this.focusAfterAttached=!0,n===cg||n===wg?a="":n&&1===n.length?a=n:(a=this.getStartValue(e),n!==yg&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),null!=a&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){var t;const{value:i}=e;return null!==(t=null===i||void 0===i?void 0:i.toString())&&void 0!==t?t:i}onKeyDown(e){const t=e.key;(t===mg||t===fg||t===vg||t===bg||e.shiftKey&&t===hg)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:i}=this,n=this.getLocaleTextFunc();e.setInputAriaLabel(n("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),i&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:i}=t,n=e.getValue();return Wl(n)||Wl(i)?t.parseValue(n):i}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,n=this.getLocaleTextFunc(),o=this.getValue();let s=[];return"string"===typeof o&&null!=t&&o.length>t&&s.push(n("maxLengthValidation","Must be ".concat(t," characters or fewer."),[String(t)])),s.length||(s=null),i?i({value:o,internalErrors:s,cellEditorParams:e}):s}}},dependsOn:[rR]},gR={moduleName:"CustomEditor",version:Pc,dependsOn:[rR]};function mR(e){return lg(e)?e.pinnedSibling:e.footer?e.sibling:e}function fR(e,t){return(0!==e||0!==t)&&(e>0&&t>0?void 0:e>0)}var vR={moduleName:"SharedRowSelection",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",(e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,bh(e.source))})),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;null!=t&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),function(e){e.map={},e.list.forEach((t=>e.map[t.getId()]=t))}(e))}createColumns(e,t){var i,n,o,s,r,a;const l=e.treeDepth,d=(null!==(i=null===(n=this.columns)||void 0===n?void 0:n.treeDepth)&&void 0!==i?i:-1)==l,c=this.generateSelectionCols();var u,h;if((u=c,h=null!==(o=null===(s=this.columns)||void 0===s?void 0:s.list)&&void 0!==o?o:[],oh(u,h,((e,t)=>e.getColId()===t.getColId())))&&d)return;(()=>{var e;ph(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),this.columns=null})();const{colGroupSvc:p}=this.beans,g=null!==(r=null===p||void 0===p?void 0:p.findDepth(e.tree))&&void 0!==r?r:0,m=null!==(a=null===p||void 0===p?void 0:p.balanceTreeForAutoCols(c,g))&&void 0!==a?a:[];this.columns={list:c,tree:m,treeDepth:g,map:{}};t((e=>{if(!e)return null;const t=e.filter((e=>!mh(e)));return[...c,...t]}))}updateColumns(e){var t;const i=bh(e.source);null===(t=this.columns)||void 0===t||t.list.forEach((t=>{const n=this.createSelectionColDef(e.currentValue);t.setColDef(n,null,i),Ah(this.beans,{state:[u(u({},n),{},{colId:t.getColId()})]},i)}))}getColumn(e){var t,i;return null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list.find((t=>wh(t,e))))&&void 0!==t?t:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}isSelectionColumnEnabled(){var e,t;const{gos:i,beans:n}=this,o=i.get("rowSelection");if("object"!==typeof o||!qc(i))return!1;const s=(null!==(e=null===(t=n.autoColSvc)||void 0===t||null===(t=t.getColumns())||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0;if("autoGroupColumn"===o.checkboxLocation&&s)return!1;const r=!!gu(o),a=mu(o);return r||a}createSelectionColDef(e){const{gos:t}=this.beans,i=null!==e&&void 0!==e?e:t.get("selectionColumnDef"),n=t.get("enableRtl"),o=null!==i&&void 0!==i?i:{},{rowSpan:s,spanRows:a}=o,l=r(o,Ll);return u(u({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:n?"right":"left",comparator(e,t,i,n){const o=i.isSelected();return o===n.isSelected()?0:o?1:-1},editable:!1,suppressFillHandle:!0,pinned:null},l),{},{colId:dh,chartDataType:"excluded"})}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const i=new $u(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const n=(t&&"string"!==typeof t?gu(t):void 0)!==(e&&"string"!==typeof e?gu(e):void 0),o=(t&&"string"!==typeof t?mu(t):void 0)!==(e&&"string"!==typeof e?mu(e):void 0),s=fu(e),r=fu(t);(n||o||s!==r)&&this.beans.colModel.refreshAll(i)}destroy(){var e;ph(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),super.destroy()}refreshVisibility(e,t,i){var n,o;if(null===(n=this.columns)||void 0===n||!n.list.length)return;const s=e.length+t.length+i.length;if(0===s)return;const r=this.columns.list[0];if(!r.isVisible())return;((null===(o=this.beans.rowNumbersSvc)||void 0===o?void 0:o.getColumn(ch))?2:1)===s&&(()=>{let n;switch(r.pinned){case"left":case!0:n=e;break;case"right":n=i;break;default:n=t}n&&rh(n,r)})()}}],apiFunctions:{setNodesSelected:function(e,t){var i;if(!t.nodes.every((e=>e.rowPinned&&!lg(e)?(_c(59),!1):void 0!==e.id||(_c(60),!1))))return;const{nodes:n,source:o,newValue:s}=t;null===(i=e.selectionSvc)||void 0===i||i.setNodesSelected({nodes:n,source:null!==o&&void 0!==o?o:"api",newValue:s})},selectAll:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiSelectAll";null===(i=e.selectionSvc)||void 0===i||i.selectAllRowNodes({source:n,selectAll:t})},deselectAll:function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiSelectAll";null===(i=e.selectionSvc)||void 0===i||i.deselectAllRowNodes({source:n,selectAll:t})},selectAllFiltered:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";null===(t=e.selectionSvc)||void 0===t||t.selectAllRowNodes({source:i,selectAll:"filtered"})},deselectAllFiltered:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";null===(t=e.selectionSvc)||void 0===t||t.deselectAllRowNodes({source:i,selectAll:"filtered"})},selectAllOnCurrentPage:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";null===(t=e.selectionSvc)||void 0===t||t.selectAllRowNodes({source:i,selectAll:"currentPage"})},deselectAllOnCurrentPage:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";null===(t=e.selectionSvc)||void 0===t||t.deselectAllRowNodes({source:i,selectAll:"currentPage"})},getSelectedNodes:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectedNodes())&&void 0!==t?t:[]},getSelectedRows:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectedRows())&&void 0!==t?t:[]}}},bR={moduleName:"RowSelection",version:Pc,rowModels:["clientSide","infinite","viewport"],beans:[class extends Vv{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=xu(e),this.groupSelectsDescendants=ku(e),this.groupSelectsFiltered="filteredDescendants"===Su(e),this.masterSelectsDetail="detail"===Pu(e),this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],(()=>{const t=ku(e),i=xu(e),n="filteredDescendants"===Su(e);this.masterSelectsDetail="detail"===Pu(e),t===this.groupSelectsDescendants&&n===this.groupSelectsFiltered&&i===this.mode||(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=i)})),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);return null==n?0:(this.selectionCtx.selectAll=!1,"select"in n?(n.reset?this.resetNodes():this.selectRange(n.deselect,!1,i),this.selectRange(n.select,!0,i)):this.setNodesSelected({nodes:[n.node],newValue:n.newValue,clearSelection:n.clearSelection,keepDescendants:n.keepDescendants,event:e,source:i}))}setNodesSelected(e){let{newValue:t,clearSelection:i,suppressFinishActions:n,nodes:o,event:s,source:r,keepDescendants:a=!1}=e;if(!qc(this.gos)&&t)return _c(132),0;if(0===o.length)return 0;if(o.length>1&&!this.isMultiSelect())return _c(130),0;let l=0;for(let c=0;c<o.length;c++){var d;const e=mR(o[c]),i=this.groupSelectsFiltered&&e.group;if(!e.rowPinned||lg(e))if(void 0!==e.id){if(!i){this.selectRowNode(e,t,s,r)&&(this.detailSelection.delete(e.id),l++)}this.groupSelectsDescendants&&null!==(d=e.childrenAfterGroup)&&void 0!==d&&d.length&&(l+=this.selectChildren(e,t,r))}else _c(60);else _c(59)}if(!n){1===o.length&&"api"===r&&this.selectionCtx.setRoot(mR(o[0]));t&&(i||!this.isMultiSelect())&&(l+=this.clearOtherNodes(mR(o[0]),a,r)),l>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r))}return l}selectRange(e,t,i){let n=0;return e.forEach((e=>{const o=mR(e);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,i)&&n++})),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>t.data&&e.push(t.data))),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,n)=>{e(i)&&t.set(n,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:n}=this.beans;if(!Gc(i))return!1;const o=n.rootNode;if(!o)return!1;t||((t=new Eb(!0,o)).active=!1);let s=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==o){const i=this.calculateSelectedFromChildren(t);s=this.selectRowNode(t,null!==i&&i,void 0,e)||s}})),s}clearOtherNodes(e,t,i){const n=new Map;let o=0;return this.selectedNodes.forEach((s=>{const r=s.id==e.id,a=!t||!function(e,t){let i=t.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}(e,s);if(a&&!r){const e=this.selectedNodes.get(s.id);o+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsDescendants&&s.parent&&n.set(s.parent.id,s.parent)}})),n.forEach((e=>{const t=this.calculateSelectedFromChildren(e);this.selectRowNode(e,null!==t&&t,void 0,i)})),o}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new cm(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){if(t&&e.id!==t.id){this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach((e=>{this.selectRowNode(e,!1)})),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!Gc(e))return;const i=t.getTopLevelNodes();if(null===i)return;const n=[];return function e(t){for(let i=0,o=t.length;i<o;i++){const o=t[i];o.isSelected()?n.push(o):o.group&&o.childrenAfterGroup&&e(o.childrenAfterGroup)}}(i),n}isEmpty(){return 0===this.getSelectionCount()}deselectAllRowNodes(e){let{source:t,selectAll:i}=e;const n=Gc(this.gos);let o=!1;const s=e=>{const i=this.selectRowNode(mR(e),!1,void 0,t);o||(o=i)};if("currentPage"===i||"filtered"===i){if(!n)return void Oc(102);this.getNodesToSelect(i).forEach(s)}else this.selectedNodes.forEach(s),this.reset(t);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(t);o||(o=e)}o&&this.dispatchSelectionChanged(t)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach((e=>{this.groupSelectsDescendants&&e.group||(e.isSelected()?t++:e.selectable&&i++)})),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){var t;const{selectedCount:i,notSelectedCount:n}=this.getSelectedCounts(e);return null!==(t=fR(i,n))&&void 0!==t?t:null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter((e=>e.selectable)).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],i=e=>t.push(e);if("currentPage"===e)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded||e.footer)this.groupSelectsDescendants||i(e);else{const t=e=>{var n;i(e),null===(n=e.childrenAfterFilter)||void 0===n||n.forEach(t)};t(e)}else i(e)})),t;const n=this.beans.rowModel;return"filtered"===e?(n.forEachNodeAfterFilter(i),t):(n.forEachNode(i),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,n=t.getFirstRow(),o=t.getLastRow();for(let s=n;s<=o;s++){const t=i.getRow(s);t&&e(t)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!qc(t))return void _c(132);if(function(e){return"string"!==typeof e.get("rowSelection")}(t)&&!Cu(t))return void _c(130);if(!this.canSelectAll())return;const{source:n,selectAll:o}=e;let s=!1;if(this.getNodesToSelect(o).forEach((e=>{const t=this.selectRowNode(mR(e),!0,void 0,n);s||(s=t)})),i.selectAll=!0,Gc(t)&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(n);s||(s=e)}s&&this.dispatchSelectionChanged(n)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,i){if(e||(e=[]),!Array.isArray(e))return void Oc(103);const n=new Set(e),o=[];this.beans.rowModel.forEachNode((e=>{n.has(e.id)&&o.push(e)})),i&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:o,source:t})}canSelectAll(){const{gos:e}=this.beans;return!!Gc(e)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!qc(t))return;const n="selectableChanged",o=void 0!==e,s=Gc(t)&&this.groupSelectsDescendants,r=[],a=e=>{if(o&&!e.group)return;if(s&&e.group){var t,i;const n=null!==(t=null===(i=e.childrenAfterGroup)||void 0===i?void 0:i.some((e=>e.selectable)))&&void 0!==t&&t;return void this.setRowSelectable(e,n,!0)}!this.updateRowSelectable(e,!0)&&e.isSelected()&&r.push(e)};if(s){var l;if(void 0===e){const t=i.rootNode;e=t?new Eb(!1,t):void 0}null===(l=e)||void 0===l||l.forEachChangedNodeDepthFirst(a,!o,!o)}else i.forEachNode(a);var d;(r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:n}),!o&&s)&&(null===(d=this.updateGroupsFromChildrenSelections)||void 0===d||d.call(this,n))}updateSelectableAfterGrouping(e){if(this.updateSelectable(e),this.groupSelectsDescendants){var t;(null===(t=this.updateGroupsFromChildrenSelections)||void 0===t?void 0:t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}}refreshMasterNodeState(e,t){var i;if(!this.masterSelectsDetail)return;const n=null===(i=e.detailNode)||void 0===i||null===(i=i.detailGridInfo)||void 0===i?void 0:i.api;if(!n)return;const o=function(e){let t=0,i=0;return e.forEachNode((e=>{e.isSelected()?t++:e.selectable&&i++})),fR(t,i)}(n);if(e.isSelected()!==o){this.selectRowNode(e,o,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail")}if(!o){var s;const t=null!==(s=this.detailSelection.get(e.id))&&void 0!==s?s:new Set;for(const e of n.getSelectedNodes())t.add(e.id);this.detailSelection.set(e.id,t)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail)if(Cu(t))switch(e.isSelected()){case!0:i.selectAll();break;case!1:i.deselectAll();break;case void 0:{const t=this.detailSelection.get(e.id);if(t){const e=[];for(const n of t){const t=i.getRowNode(n);t&&e.push(t)}i.setNodesSelected({nodes:e,newValue:!0,source:"masterDetail"})}break}}else _c(269)}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}}],dependsOn:[vR]};var wR={moduleName:"CsrmSsrmSharedApi",version:Pc,apiFunctions:{expandAll:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.expandAll(!0)},collapseAll:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.expandAll(!1)},onRowHeightChanged:function(e){const t=tC(e),i=nC(e);t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}}},yR={moduleName:"SsrmInfiniteSharedApi",version:Pc,apiFunctions:{setRowCount:function(e,t,i){const n=nC(e);var o;if(n)return 0===(null===(o=e.rowGroupColsSvc)||void 0===o?void 0:o.columns.length)?t<0?void Oc(238):void n.setRowCount(t,i):void Oc(28);const s=iC(e);s&&s.setRowCount(t,i)},getCacheBlockState:function(e){var t,i;if(Wc(e.gos)){return e.rowModel.getBlockStates()}return null!==(t=null===(i=e.rowNodeBlockLoader)||void 0===i?void 0:i.getBlockState())&&void 0!==t?t:{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}},xR={moduleName:"AlignedGrids",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){var e;let t=null!==(e=this.gos.get("alignedGrids"))&&void 0!==e?e:[];const i="function"===typeof t;"function"===typeof t&&(t=t());return t.map((e=>{if(!e)return Oc(18),void(i||Oc(20));if(this.isGridApi(e))return e;const t=e;var n;return"current"in t?null===(n=t.current)||void 0===n?void 0:n.api:(t.api||Oc(19),t.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:e=>{let{event:t}=e;return this.onColumnEvent(t)},alignedGridScroll:e=>{let{event:t}=e;return this.onScrollEvent(t)}})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent((()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach((e=>{i.push(t(e))})):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,(e=>e))}getColumnIds(e){return this.extractDataFromEvent(e,(e=>e.getColId()))}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":_c(21)}}))}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach((e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;const n=this.beans,{colResize:o,ctrlsSvc:s,colModel:r}=n;if(t&&(i=r.getColDefCol(t.getColId())),t&&!i)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":Ah(n,{state:e.api.getColumnState().map((e=>({colId:e.colId}))),applyOrder:!0},"alignedGridChanged");break;case"columnVisible":Ah(n,{state:e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})))},"alignedGridChanged");break;case"columnPinned":Ah(n,{state:e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})))},"alignedGridChanged");break;case"columnResized":{var l;const t=e,i={};a.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),null===(l=t.flexColumns)||void 0===l||l.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),null===o||void 0===o||o.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const d=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",d)}))}}],dependsOn:[fw]},CR=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function SR(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),function(e){if(Ul(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const n=t[i],o=0===i,s=i===e.childrenAfterSort.length-1;n.setFirstChild(o),n.lastChild!==s&&(n.lastChild=s,n.dispatchRowEvent("lastChildChanged")),n.childIndex!==i&&(n.childIndex=i,n.dispatchRowEvent("childIndexChanged"))}}(e)}var RR={moduleName:"ClientSideRowModel",version:Pc,rowModels:["clientSide"],beans:[class extends Iv{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},class extends Vu{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=Sc(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter((e=>!!e));const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new cm(this.beans);const i=this.getNewNodeManager();this.nodeManager=i,i.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;return"treeNested"===Du(e)&&t.csrmChildrenTreeNodeSvc||t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap((e=>{let{refreshProps:t}=e;return[...t]}))];this.addManagedPropertyListeners(e,(e=>{var t;const i=null===(t=e.changeSet)||void 0===t?void 0:t.properties;i&&this.onPropChange(i)})),this.addManagedPropertyListener("rowData",(()=>this.onPropChange(["rowData"]))),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,n){let o,s=!1;do{o=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),d=Math.min(a,n);for(let e=l;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=Yc(this.beans,t);t.setRowHeight(e.height),o=!0,s=!0}}o&&this.setRowTopAndRowIndex()}while(o);return s}onPropChange(e){if(!this.rootNode)return;const t=this.gos,i=new Set(e),n={step:"nothing",changedProps:i},o=i.has("rowData"),s=this.nodeManager,r=this.getNewNodeManager(),a=s!==r||o&&i.has("treeData")&&t.get("treeData")||i.has("treeDataChildrenField")&&t.get("treeData");let l;if((a||o)&&(l=t.get("rowData"),null==l||Array.isArray(l)||(l=null,_c(1))),a){var d;if(!o)l=null!==(d=null===s||void 0===s?void 0:s.extractRowData())&&void 0!==d?d:l;s!==r&&(null===s||void 0===s||s.deactivate(),this.nodeManager=r),r.activate(this.rootNode)}if(l){if(!a&&!this.isEmpty()&&l.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate"))n.keepRenderedRows=!0,n.animate=!this.gos.get("suppressAnimationFrame"),n.changedRowNodes=new CR,r.setImmutableRowData(n,l);else{n.rowDataUpdated=!0,n.newData=!0;const{selectionSvc:e,pinnedRowModel:t}=this.beans;null===e||void 0===e||e.reset("rowDataChanged"),null!==t&&void 0!==t&&t.isManual()&&t.reset(),this.rowNodesCountReady=!0,r.setNewRowData(l)}}if(n.rowDataUpdated)n.step="group";else if("nothing"===n.step)for(const{refreshProps:c,step:u}of this.orderedStages)if(e.some((e=>c.has(e)))){n.step=u;break}"nothing"!==n.step&&this.refreshModel(n)}setRowTopAndRowIndex(){const{beans:e,rowsToDisplay:t}=this,i=e.environment.getDefaultRowHeight();let n=0;const o=new Set,s=Uc(this.gos,"normal");for(let r=0,a=t.length;r<a;++r){const a=t[r];if(null!=a.id&&o.add(a.id),null==a.rowHeight){const t=Yc(e,a,s,i);a.setRowHeight(t.height,t.estimated)}a.setRowTop(n),a.setRowIndex(r),n+=a.rowHeight}return o}clearRowTopAndRowIndex(e,t){const i=e.active,n=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},o=e=>{if(null!==e&&(n(e),n(e.detailNode),n(e.sibling),e.hasChildren()&&e.childrenAfterGroup)){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(o)}};o(this.rootNode)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e)return 0;if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const t=e.childrenAfterSort,i=e.sibling&&e.sibling.displayed?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;const{childrenAfterSort:n}=t,o=e=>{let t=n[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},{footerSvc:s}=this.beans;return s?s.getTopDisplayIndex(i,e,n,o):o(e)}getTopLevelIndexFromDisplayedIndex(e){var t;const{rootNode:i,rowsToDisplay:n}=this;if(!i||!n.length||n[0]===i)return e;let o=this.getRow(e);for(o.footer&&(o=o.sibling);o.parent&&o.parent!==i;)o=o.parent;const s=null===(t=i.childrenAfterSort)||void 0===t?void 0:t.findIndex((e=>e===o));return-1===s?e:null!==s&&void 0!==s?s:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=ru(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=ru(this.gos),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=ru(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new Eb(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:n}=e;return!(!t||i||!n)&&(!t.removals.size&&!t.adds.size)}refreshModel(e){var t,i;if(!this.rootNode)return;const n=this.beans;let o=!!e.rowDataUpdated;const s=null!==(t=e.changedPath)&&void 0!==t?t:e.changedPath=this.createChangePath(!e.newData&&o);if(this.started&&o&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.rowDataUpdatedPending||(this.rowDataUpdatedPending=o),!this.started||this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;var r;(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.rowDataUpdated=o=!0),this.isRefreshingModel=!0,null===(i=n.masterDetailSvc)||void 0===i||i.refreshModel(e),o&&"group"!==e.step)&&(null===(r=n.colFilter)||void 0===r||r.refreshModel());switch(e.step){case"group":var a;if(this.doRowGrouping(e)||o)null===(a=n.colFilter)||void 0===a||a.refreshModel();!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}));case"filter":this.doFilter(s);case"pivot":this.doPivot(s);case"aggregate":this.doAggregate(s);case"filter_aggregates":this.doFilterAggregates(s);case"sort":this.doSort(e.changedRowNodes,s);case"map":this.doRowsToDisplay()}const l=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(s,l),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t;return!(null!==(e=this.rootNode)&&void 0!==e&&null!==(e=e.allLeafChildren)&&void 0!==e&&e.length)||!(null!==(t=this.colModel)&&void 0!==t&&t.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const o=[],s=ku(this.gos);return this.forEachNodeAfterFilterAndSort((r=>{if(n)return;if(i&&(r===t||r===e)&&(n=!0,r.group&&s))return void o.push(...r.allLeafChildren);if(!i){if(r!==t&&r!==e)return;i=!0}(!r.group||!s)&&o.push(r)})),o}getTopLevelNodes(){var e,t;return null!==(e=null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterGroup)&&void 0!==e?e:null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||0===t.length)return-1;let i=0,n=t.length-1;if(e<=0)return 0;if(nh(t).rowTop<=e)return t.length-1;let o=-1,s=-1;for(;;){const r=Math.floor((i+n)/2),a=t[r];if(this.isRowInPixel(a,e))return r;a.rowTop<e?i=r+1:a.rowTop>e&&(n=r-1);if(o===i&&s===n)return r;o=i,s=n}}isRowInPixel(e,t){const i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){var t;null===(t=this.rootNode)||void 0===t||null===(t=t.allLeafChildren)||void 0===t||t.forEach(((t,i)=>e(t,i)))}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t,(e=>e.childrenAfterAggFilter))}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t,(e=>e.childrenAfterSort))}forEachPivotNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{colModel:n,rowGroupColsSvc:o}=this.beans;if(!n.isPivotMode())return;if(null===o||void 0===o||!o.columns.length)return void e(this.rootNode,0);const s=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,(e=>e.leafGroup?null:e[s]))}depthFirstSearchRowNodes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e.childrenAfterGroup,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rootNode,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!n)return o;const s=n===this.rootNode;s||e(n,o++);const{footerSvc:r}=this.beans;if(n.hasChildren()&&!n.footer){const d=i(n);if(d){var a,l;o=null!==(a=null===r||void 0===r?void 0:r.addTotalRows(o,n,e,t,s,"top"))&&void 0!==a?a:o;for(const n of d)o=this.depthFirstSearchRowNodes(e,t,i,n,o);return null!==(l=null===r||void 0===r?void 0:r.addTotalRows(o,n,e,t,s,"bottom"))&&void 0!==l?l:o}}return o}doAggregate(e){const t=this.rootNode;var i;t&&(null===(i=this.aggStage)||void 0===i||i.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst((e=>{e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),SR(e)}))}doRowGrouping(e){var t;const i=this.rootNode,n=null===(t=this.groupStage)||void 0===t?void 0:t.execute({rowNode:i,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,rowNodesOrderChanged:!!e.rowNodesOrderChanged,afterColumnsChanged:!!e.afterColumnsChanged});if(void 0!==n)return n;const o=i.sibling;return i.childrenAfterGroup=i.allLeafChildren,o&&(o.childrenAfterGroup=i.childrenAfterGroup),i.updateHasChildren(),!1}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst((e=>{e.childrenAfterFilter=e.childrenAfterGroup,kC(e)}),!0)}doPivot(e){var t;null===(t=this.pivotStage)||void 0===t||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){var t;const i=this.nodeManager.getRowNode(e);if("object"===typeof i)return i;return"string"==typeof e&&0===e.indexOf(rm)?null===(t=this.groupStage)||void 0===t?void 0:t.getNode(e):void 0}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.isAlive()&&this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var e,t;null===(e=this.valueCache)||void 0===e||e.onDataChanged();const i=[],n=[],o=new CR;let s=!1;null===(t=this.rowDataTransactionBatch)||void 0===t||t.forEach((e=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:t,rowsInserted:r}=this.nodeManager.updateRowData(e.rowDataTransaction,o);r&&(s=!0),n.push(t),e.callback&&i.push(e.callback.bind(null,t))})),this.commitTransactions(s,o),i.length>0&&window.setTimeout((()=>{i.forEach((e=>e()))}),0),n.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:n}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){var t;null===(t=this.valueCache)||void 0===t||t.onDataChanged(),this.rowNodesCountReady=!0;const i=new CR,{rowNodeTransaction:n,rowsInserted:o}=this.nodeManager.updateRowData(e,i);return this.commitTransactions(o,i),n}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let i;if(e)i=e.execute({rowNode:t});else{var n;i=null!==(n=null===t||void 0===t?void 0:t.childrenAfterSort)&&void 0!==n?n:[];for(const e of i)e.setUiLevel(0)}this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){var t;if(null!==(t=this.beans.rowAutoHeight)&&void 0!==t&&t.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=ih,this.rowsToDisplay=ih}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},class extends Vu{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,i=t.sortSvc.getSortOptions(),n=Wl(i)&&i.length>0,o=n&&!!e.changedRowNodes&&this.gos.get("deltaSort"),s=i.some((e=>{let{column:i}=e;return lu(t.gos)?i.isPrimary()&&i.isRowGroupActive():!!i.getColDef().showRowGroup}));this.sort(t,i,n,o,e.changedRowNodes,e.changedPath,s)}sort(e,t,i,n,o,s,r){const{gos:a,colModel:l,rowGroupColsSvc:d,rowNodeSorter:c,rowRenderer:u,showRowGroupCols:h}=e,p=a.get("groupMaintainOrder"),g=l.getCols().some((e=>e.isRowGroupActive())),m=l.isPivotMode(),f=a.getCallback("postSortRows");let v=!1;if(null===s||void 0===s||s.forEachChangedNodeDepthFirst((e=>{var a;const l=m&&e.leafGroup;let u;if(p&&g&&!e.leafGroup&&!r){var h;const t=null===d||void 0===d||null===(h=d.columns)||void 0===h?void 0:h[e.level+1],i=null===(null===t||void 0===t?void 0:t.getSort()),n=e.childrenAfterAggFilter.slice(0);if(e.childrenAfterSort&&!i){const t={};e.childrenAfterSort.forEach(((e,i)=>{t[e.id]=i})),n.sort(((e,i)=>{var n,o;return(null!==(n=t[e.id])&&void 0!==n?n:0)-(null!==(o=t[i.id])&&void 0!==o?o:0)}))}u=n}else u=!i||l?e.childrenAfterAggFilter.slice(0):n&&o?function(e,t,i,n,o){const s=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(s,o);const a=new Set,l=[],{updates:d,adds:c}=i;for(let h=0,p=s.length;h<p;++h){const e=s[h];d.has(e)||c.has(e)||n&&!n.canSkip(e)?l.push({currentPos:l.length,rowNode:e}):a.add(e.id)}const u=r.filter((e=>a.has(e.id))).map(((e,t)=>({currentPos:t,rowNode:e})));return l.sort(((t,i)=>e.compareRowNodes(o,t,i))),function(e,t,i,n){const o=[];let s=0,r=0;const a=i.length,l=n.length;for(;s<a&&r<l;){const a=i[s],l=n[r];let d;e.compareRowNodes(t,a,l)<0?(d=a,++s):(d=l,++r),o.push(d.rowNode)}for(;s<a;)o.push(i[s++].rowNode);for(;r<l;)o.push(n[r++].rowNode);return o}(e,o,l,u)}(c,e,o,s,t):c.doFullSort(e.childrenAfterAggFilter,t);if(v||(v=(null===(a=e.childrenAfterSort)||void 0===a?void 0:a[0])!==u[0]),e.childrenAfterSort=u,SR(e),f){const t={nodes:e.childrenAfterSort};f(t)}})),v&&this.gos.get("groupHideOpenParents")){const e=null===h||void 0===h?void 0:h.getShowRowGroupCols();null!==e&&void 0!==e&&e.length&&u.refreshCells({columns:e,force:!0})}}}],dependsOn:[Mx]},kR={moduleName:"ClientSideRowModelApi",version:Pc,apiFunctions:{onGroupExpandedOrCollapsed:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){const i=tC(e);i&&(t&&"everything"!==t||(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))},isRowDataEmpty:function(e){var t,i;return null===(t=null===(i=tC(e))||void 0===i?void 0:i.isEmpty())||void 0===t||t},forEachLeafNode:function(e,t){var i;null===(i=tC(e))||void 0===i||i.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){var i;null===(i=tC(e))||void 0===i||i.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){var i;null===(i=tC(e))||void 0===i||i.forEachNodeAfterFilterAndSort(t)},resetRowHeights:function(e){var t,i;null!==(t=e.rowAutoHeight)&&void 0!==t&&t.active?_c(3):null===(i=tC(e))||void 0===i||i.resetRowHeights()},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=tC(e))||void 0===i?void 0:i.updateRowData(t)}))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>{var n;return null===(n=tC(e))||void 0===n?void 0:n.batchUpdateRowData(t,i)}))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming((()=>{var t;return null===(t=tC(e))||void 0===t?void 0:t.flushAsyncTransactions()}))},getBestCostNodeSelection:function(e){var t;return null===(t=e.selectionSvc)||void 0===t?void 0:t.getBestCostNodeSelection()}},dependsOn:[wR]},PR={moduleName:"SharedExport",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:n,skipRowGroups:o,exportRowNumbers:s}=t,r=this.getColumnsToExport({allColumns:i,skipRowGroups:o,columnKeys:n,exportRowNumbers:s});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce(((e,t)=>t(e)),e).parse()}processRow(e,t,i,n){var o;const s=t.shouldRowBeSkipped||(()=>!1),r=null!=t.rowPositions||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,d=!!n.footer,c=1===n.allChildrenCount&&1===(null===(o=n.childrenAfterGroup)||void 0===o?void 0:o.length)&&function(e,t){const i=e.get("groupHideParentOfSingleChild");return!0===i||!("leafGroupsOnly"!==i||!t.leafGroup)||!!e.get("groupRemoveSingleChildren")||!(!e.get("groupRemoveLowestSingleChildren")||!t.leafGroup)}(this.gos,n);if(!l&&!d&&(t.skipRowGroups||c||a)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&"top"===n.rowPinned||t.skipPinnedBottom&&"bottom"===n.rowPinned||n.stub)return;if(-1===n.level&&!l&&!d)return;if(s(Fu(this.gos,{node:n})))return;const u=e.onNewBodyRow(n);if(i.forEach(((e,t)=>{u.onColumn(e,t,n)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(Fu(this.gos,{node:n}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new Bh,{colGroupSvc:o}=this.beans,s=o?o.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{var n;const o=this.processRow.bind(this,i,e,t);if(e.rowPositions)e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedTopRow(e.rowIndex)})).forEach(o);else if(null===(n=this.pinnedRowModel)||void 0===n||!n.isManual()){var s;null===(s=this.pinnedRowModel)||void 0===s||s.forEachPinnedRow("top",o)}return i}}processRows(e,t){return i=>{const n=this.rowModel,o=Gc(this.gos),s=Wc(this.gos),r=!o&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>n.getRow(e.rowIndex))).forEach(a),i;if(this.colModel.isPivotMode())return o?n.forEachPivotNode(a,!0,"filteredAndSorted"===l):s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a),i;if(e.onlySelectedAllPages||r){var d,c;const e=null!==(d=null===(c=this.beans.selectionSvc)||void 0===c?void 0:c.getSelectedNodes())&&void 0!==d?d:[];this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?n.forEachNode(a):o||s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),o=(e,t)=>{return null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?(null===(s=e.parent)||void 0===s?void 0:s.id)===(null===(r=t.parent)||void 0===r?void 0:r.id)?i.compareRowNodes(n,{rowNode:e,currentPos:null!==(a=e.rowIndex)&&void 0!==a?a:-1},{rowNode:t,currentPos:null!==(l=t.rowIndex)&&void 0!==l?l:-1}):o(e.parent,t.parent):e.level>t.level?o(e.parent,t):o(e,t.parent);var s,r,a,l};e.sort(o)}processPinnedBottomRows(e,t){return i=>{var n;const o=this.processRow.bind(this,i,e,t);if(e.rowPositions)e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomRow(e.rowIndex)})).forEach(o);else if(null===(n=this.pinnedRowModel)||void 0===n||!n.isManual()){var s;null===(s=this.pinnedRowModel)||void 0===s||s.forEachPinnedRow("bottom",o)}return i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:n=!1,columnKeys:o}=e,{colModel:s,gos:r,visibleCols:a}=this,l=s.isPivotMode(),d=e=>!mh(e)&&(!fh(e)||n);if(o&&o.length)return s.getColsForKeys(o).filter(d);const c=r.get("treeData");let u=[];return u=t&&!l?s.getCols():a.allCols,u=u.filter((e=>d(e)&&(!(i&&!c)||!gh(e)))),u}recursivelyAddHeaderGroups(e,t,i){const n=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>n.push(e)))})),e.length>0&&om(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let o=0;t.forEach((e=>{const t=e;let s;s=i?i(Fu(this.gos,{columnGroup:t})):this.beans.colNames.getDisplayNameForColumnGroup(t,"header");const r=t.getLeafColumns().reduce(((e,t,i,n)=>{let o=nh(e);return"open"===t.getColumnGroupShow()?o&&null==o[1]||(o=[i],e.push(o)):o&&null==o[1]&&(o[1]=i-1),i===n.length-1&&o&&null==o[1]&&(o[1]=i),e}),[]);n.onColumn(t,s||"",o++,t.getLeafColumns().length-1,r)}))}}]},ER=class extends hC{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var n;0!=t&&(this.result+=this.columnSeparator);const o=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(null!==(n=o.valueFormatted)&&void 0!==n?n:o.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(_c(53),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var FR={moduleName:"CsvExport",version:Pc,beans:[class extends uC{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void _c(51);const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\ufeff",i],{type:"text/plain"}),o="function"===typeof t.fileName?t.fileName(Fu(this.gos,{})):t.fileName;!function(e,t){const i=document.defaultView||window;if(!i)return void _c(52);const n=document.createElement("a"),o=i.URL.createObjectURL(t);n.setAttribute("href",o),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout((()=>{i.URL.revokeObjectURL(o)}),0)}(this.getFileName(o),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:o,gos:s}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d,suppressQuotes:c,columnSeparator:u}=e;return new ER({colModel:t,colNames:i,valueSvc:o,gos:s,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:d||void 0,suppressQuotes:c||!1,columnSeparator:u||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}}],apiFunctions:{getDataAsCsv:function(e,t){var i;return null===(i=e.csvCreator)||void 0===i?void 0:i.getDataAsCsv(t)},exportDataAsCsv:function(e,t){var i;null===(i=e.csvCreator)||void 0===i||i.exportDataAsCsv(t)}},dependsOn:[PR]},DR=class extends Vu{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"});this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:n,rowNodes:o}=this;for(let s=0;s<e;s++){const e=i+s,r=new cm(n);r.setRowHeight(t),r.uiLevel=0,r.setRowIndex(e),r.setRowTop(t*e),o.push(r)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:n}}}setDataAndId(e,t,i){Wl(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();Ul(this.params.datasource.getRows)?_c(90):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:n,filterModel:o},gos:s}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:n,filterModel:o,context:Fu(s,{}).context}}forEachNode(e,t,i){this.rowNodes.forEach(((n,o)=>{this.startRow+o<i&&e(n,t.value++)}))}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.value++);const t=e-this.startRow;return this.rowNodes[t]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach(((n,o)=>{const s=e.rowData?e.rowData[o]:void 0;!n.id&&n.alreadyRendered&&s&&(t[o]=new cm(i),t[o].setRowIndex(n.rowIndex),t[o].setRowTop(n.rowTop),t[o].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[o],s,this.startRow+o)}));const n=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}},NR=class extends Vu{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new DR(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(vc(this.gos,"InfiniteCache - onPageLoaded: page = ".concat(e.id,", lastRow = ").concat(t)),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.lastAccessed-e.lastAccessed));const i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.state&&t>=1||!!i&&t>=n){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const{startRow:i,endRow:n}=e;return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:t,overflowSize:i}=this.params,n=(e.id+1)*t+i;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,Wl(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){return Object.values(this.blocks).sort(((e,t)=>e.id-t.id))}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,o=!1;const s={value:0};let r=!1;this.getBlocksInOrder().forEach((a=>{r||(o&&n+1!==a.id?r=!0:(n=a.id,a.forEachNode((n=>{const s=n===e||n===t;(o||s)&&i.push(n),s&&(o=!o)}),s,this.rowCount)))}));return r||o?[]:i}};var MR={moduleName:"InfiniteRowModelCore",version:Pc,rowModels:["infinite"],beans:[class extends Vu{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=Qc(this.beans),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=Qc(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onColumnEverything(){let e;var t,i;this.cacheParams?e=!Kl(this.cacheParams.sortModel,null!==(t=null===(i=this.beans.sortSvc)||void 0===i?void 0:i.getSortModel())&&void 0!==t?t:[]):e=!0;e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){var i,n;return null!==(i=null===(n=this.infiniteCache)||void 0===n?void 0:n.getRowNodesInRange(e,t))&&void 0!==i?i:[]}reset(){if(!this.datasource)return;var e;null!=pu(this.gos)||(null===(e=this.beans.selectionSvc)||void 0===e||e.reset("rowDataChanged"));this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e,t;this.destroyCache();const i=this.beans,{filterManager:n,sortSvc:o,rowNodeBlockLoader:s,eventSvc:r,gos:a}=i;this.cacheParams={datasource:this.datasource,filterModel:null!==(e=null===n||void 0===n?void 0:n.getFilterModel())&&void 0!==e?e:{},sortModel:null!==(t=null===o||void 0===o?void 0:o.getSortModel())&&void 0!==t?t:[],rowNodeBlockLoader:s,initialRowCount:a.get("infiniteInitialRowCount"),maxBlocksInCache:a.get("maxBlocksInCache"),rowHeight:Qc(i),overflowSize:a.get("cacheOverflowSize"),blockSize:a.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new NR(this.cacheParams)),r.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)})),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){var t;null===(t=this.infiniteCache)||void 0===t||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;null===(e=this.infiniteCache)||void 0===e||e.refreshCache()}purgeCache(){var e;null===(e=this.infiniteCache)||void 0===e||e.purgeCache()}isLastRowIndexKnown(){var e,t;return null!==(e=null===(t=this.infiniteCache)||void 0===t?void 0:t.isLastRowIndexKnown())&&void 0!==e&&e}setRowCount(e,t){var i;null===(i=this.infiniteCache)||void 0===i||i.setRowCount(e,t)}},class extends Vu{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=function(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Sc(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){rh(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void vc(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");const e=null!=this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter((e=>"needsLoading"===e.state)).slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach((t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n})),e}printCacheStatus(){vc(this.gos,"RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,", blocks = ").concat(JSON.stringify(this.getBlockState())))}}]},TR={moduleName:"InfiniteRowModel",version:Pc,apiFunctions:{refreshInfiniteCache:function(e){var t;null===(t=iC(e))||void 0===t||t.refreshCache()},purgeInfiniteCache:function(e){var t;null===(t=iC(e))||void 0===t||t.purgeCache()},getInfiniteRowCount:function(e){var t;return null===(t=iC(e))||void 0===t?void 0:t.getRowCount()}},dependsOn:[MR,yR]},jR={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},AR={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]};var IR={moduleName:"HighlightChanges",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.beans.gos.get("cellFlashDuration"),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.beans.gos.get("cellFadeDuration");const o=this.animations[t];o.delete(e);const s=Date.now(),r=s+i,a={phase:"flash",flashEndTime:r,fadeEndTime:s+i+n};o.set(e,a);const l="ag-cell-".concat(t),d="".concat(l,"-animation"),{comp:c,eGui:{style:u}}=e;c.toggleCss(l,!0),c.toggleCss(d,!1),u.removeProperty("transition"),u.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming((()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)})),this.nextAnimationTime=r)}advanceAnimations(){var e;const t=Date.now();let i=null;for(const o of Object.keys(this.animations)){const s=this.animations[o],r="ag-cell-".concat(o),a="".concat(r,"-animation");for(const[o,l]of s){if(!o.isAlive()||!o.comp){s.delete(o);continue}const{phase:d,flashEndTime:c,fadeEndTime:u}=l,h="flash"===d?c:u;if(!(t+15>=h)){var n;i=Math.min(h,null!==(n=i)&&void 0!==n?n:1/0);continue}const{comp:p,eGui:{style:g}}=o;switch(d){case"flash":p.toggleCss(r,!1),p.toggleCss(a,!0),g.transition="background-color ".concat(u-c,"ms"),g.transitionDelay="".concat(c-t,"ms"),i=Math.min(u,null!==(e=i)&&void 0!==e?e:1/0),l.phase="fade";break;case"fade":p.toggleCss(r,!1),p.toggleCss(a,!1),g.removeProperty("transition"),g.removeProperty("transition-delay"),s.delete(o)}}}null==i?(this.nextAnimationTime=null,this.nextAnimationCycle=null):i&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i-t),this.nextAnimationTime=i)}onFlashCells(e,t){if(!e.comp)return;const i=function(e){const{rowIndex:t,rowPinned:i,column:n}=e;return"".concat(t,".").concat(null==i?"null":i,".").concat(n.getId())}(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",null===t||void 0===t?void 0:t.flashDuration,null===t||void 0===t?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations)){this.animations[e].clear()}}}],userComponents:{agAnimateShowChangeCellRenderer:class extends Uh{constructor(){super(jR),this.eValue=Wh,this.eDelta=Wh,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),o=Wl(n)?n:i,s=t>=0,r=this.eDelta;r.textContent=s?"\u2191"+o:"\u2193"+o,r.classList.toggle("ag-value-change-delta-up",s),r.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Qd(this.eDelta)}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{value:n,valueFormatted:o}=e,{eValue:s,lastValue:r,beans:a}=this;if(n===r)return!1;if(Wl(o)?s.textContent=o:Wl(n)?s.textContent=n:Qd(s),null!==(t=a.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;const l=n&&"object"===typeof n&&"toNumber"in n?n.toNumber():n,d=r&&"object"===typeof r&&"toNumber"in r?r.toNumber():r;if(l===d)return!1;if("number"===typeof l&&"number"===typeof d){const t=l-d;this.showDelta(e,t)}return r&&s.classList.add("ag-value-change-value-highlight"),i||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},agAnimateSlideCellRenderer:class extends Uh{constructor(){super(AR),this.eCurrent=Wh,this.refreshCount=0,this.registerCSS(".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:i}=this,n=gc({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=n,n.textContent=i.textContent,this.getGui().insertBefore(n,i),t.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value;if(Ul(n)&&(n=""),n===this.lastValue)return!1;if(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;i||this.addSlideAnimation(),this.lastValue=n;const o=this.eCurrent;return Wl(e.valueFormatted)?o.textContent=e.valueFormatted:Wl(e.value)?o.textContent=n:Qd(o),!0}}},apiFunctions:{flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming((()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach((e=>i.flashCell(e,t)))}))}}};function LR(e){if((e=u({},e)).version||(e.version="32.1.0"),"32.1.0"===e.version)e=function(e){return e.cellSelection=function(e,t){if(e&&"object"===typeof e)return e[t]}(e,"rangeSelection"),e}(e);return e.version=Pc,e}var _R={moduleName:"GridState",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Sc(this,(()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=Sc(this,(()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())}),0),this.onRowSelectedDebounced=Sc(this,(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}postConstruct(){var e;this.isClientSideRowModel=Gc(this.gos);const t=LR(null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{}),i=t.partialColumnState;delete t.partialColumnState,this.cachedState=t;const n=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,(()=>n((()=>this.setupStateOnGridReady(t)))));const[o,s,r]=this.addManagedEventListeners({newColumnsLoaded:e=>{let{source:s}=e;"gridInitializing"===s&&(o(),n((()=>this.setupStateOnColumnsInitialised(t,!!i))))},rowCountReady:()=>{null===s||void 0===s||s(),n((()=>this.setupStateOnRowCountReady(t)))},firstDataRendered:()=>{null===r||void 0===r||r(),n((()=>this.setupStateOnFirstDataRendered(t)))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const i=LR(e);delete i.partialColumnState,this.cachedState=i,this.startSuppressEvents();const n="api",o=t?new Set(t):void 0;this.setGridReadyState(i,n,o),this.setColumnsInitialisedState(i,n,!1,o),this.setRowCountState(i,n,o),setTimeout((()=>{this.isAlive()&&this.setFirstDataRenderedState(i,n,o),this.stopSuppressEvents(n)}))}setGridReadyState(e,t,i){var n;"api"!==t||null!==i&&void 0!==i&&i.has("sideBar")||(null===(n=this.beans.sideBar)||void 0===n||null===(n=n.comp)||void 0===n||n.setState(e.sideBar));this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,i,n){this.setColumnState(e,t,i,n),this.setColumnGroupState(e,t,n),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const i=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,i){const{filter:n,rowGroupExpansion:o,rowSelection:s,pagination:r}=e,a=(e,n)=>!(null!==i&&void 0!==i&&i.has(e))&&(n||"api"===t);a("filter",n)&&this.setFilterState(n),a("rowGroupExpansion",o)&&this.setRowGroupExpansionState(o,t),a("rowSelection",s)&&this.setRowSelectionState(s,t),a("pagination",r)&&this.setPaginationState(r,t);const l=this.updateCachedState.bind(this);l("filter",this.getFilterState()),l("rowGroupExpansion",this.getRowGroupExpansionState()),l("rowSelection",this.getRowSelectionState()),l("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>{this.updateRowGroupExpansionStateTimer=0,t("rowGroupExpansion",this.getRowGroupExpansionState())},n=()=>t("filter",this.getFilterState()),{gos:o,colFilter:s}=this.beans;this.addManagedEventListeners({filterChanged:n,rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{(0!==o.get("groupDefaultExpanded")||o.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&t("pagination",this.getPaginationState())}}),s&&this.addManagedListeners(s,{filterStateChanged:n})}setFirstDataRenderedState(e,t,i){const{scroll:n,cellSelection:o,focusedCell:s,columnOrder:r,rowPinning:a}=e,l=(e,n)=>!(null!==i&&void 0!==i&&i.has(e))&&(n||"api"===t);l("focusedCell",s)&&this.setFocusedCellState(s),l("cellSelection",o)&&this.setCellSelectionState(o),l("scroll",n)&&this.setScrollState(n),l("rowPinning",a)&&this.setRowPinningState(a),this.setColumnPivotState(!(null===r||void 0===r||!r.orderedColIds),t);const d=this.updateCachedState.bind(this);d("sideBar",this.getSideBarState()),d("focusedCell",this.getFocusedCellState());const c=this.getRangeSelectionState();d("rangeSelection",c),d("cellSelection",c),d("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this);this.addManagedEventListeners({cellFocused:()=>t("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();t("rangeSelection",e),t("cellSelection",e)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[],n=[],o=[],s=[],r=[],a=[],l=[],d=[],c=[];let u=0;for(let h=0;h<e.length;h++){const{colId:t,sort:p,sortIndex:g,rowGroup:m,rowGroupIndex:f,aggFunc:v,pivot:b,pivotIndex:w,pinned:y,hide:x,width:C,flex:S}=e[h];c.push(t),p&&(i[null!==g&&void 0!==g?g:u++]={colId:t,sort:p}),m&&(n[null!==f&&void 0!==f?f:0]=t),"string"===typeof v&&o.push({colId:t,aggFunc:v}),b&&(s[null!==w&&void 0!==w?w:0]=t),y&&("right"===y?a:r).push(t),x&&l.push(t),(null!=S||C)&&d.push({colId:t,flex:null!==S&&void 0!==S?S:void 0,width:C})}return{sort:i.length?{sortModel:i}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:o.length?{aggregationModel:o}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:s}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:d.length?{columnSizingModel:d}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}(Lh(e),e.colModel.isPivotMode())}setColumnState(e,t,i,n){const{sort:o,rowGroup:s,aggregation:r,pivot:a,columnPinning:l,columnVisibility:d,columnSizing:c,columnOrder:u}=e,h=(e,i)=>!(null!==n&&void 0!==n&&n.has(e))&&(i||"api"===t),p={},g=e=>{let t=p[e];return t||(t={colId:e},p[e]=t,t)},m={},f=h("sort",o);f&&(null===o||void 0===o||o.sortModel.forEach(((e,t)=>{let{colId:i,sort:n}=e;const o=g(i);o.sort=n,o.sortIndex=t}))),!f&&i||(m.sort=null,m.sortIndex=null);const v=h("rowGroup",s);v&&(null===s||void 0===s||s.groupColIds.forEach(((e,t)=>{const i=g(e);i.rowGroup=!0,i.rowGroupIndex=t}))),!v&&i||(m.rowGroup=null,m.rowGroupIndex=null);const b=h("aggregation",r);b&&(null===r||void 0===r||r.aggregationModel.forEach((e=>{let{colId:t,aggFunc:i}=e;g(t).aggFunc=i}))),!b&&i||(m.aggFunc=null);const w=h("pivot",a);w&&(null===a||void 0===a||a.pivotColIds.forEach(((e,t)=>{const i=g(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:!(null===a||void 0===a||!a.pivotMode)},source:t})),!w&&i||(m.pivot=null,m.pivotIndex=null);const y=h("columnPinning",l);y&&(null===l||void 0===l||l.leftColIds.forEach((e=>{g(e).pinned="left"})),null===l||void 0===l||l.rightColIds.forEach((e=>{g(e).pinned="right"}))),!y&&i||(m.pinned=null);const x=h("columnVisibility",d);x&&(null===d||void 0===d||d.hiddenColIds.forEach((e=>{g(e).hide=!0}))),!x&&i||(m.hide=null);const C=h("columnSizing",c);C&&(null===c||void 0===c||c.columnSizingModel.forEach((e=>{let{colId:t,flex:i,width:n}=e;const o=g(t);o.flex=null!==i&&void 0!==i?i:null,o.width=n}))),!C&&i||(m.flex=null);const S=null===u||void 0===u?void 0:u.orderedColIds,R=!(null===S||void 0===S||!S.length)&&!(null!==n&&void 0!==n&&n.has("columnOrder")),k=R?S.map((e=>g(e))):Object.values(p);k.length&&(this.columnStates=k,Ah(this.beans,{state:k,applyOrder:R,defaultState:m},t))}setColumnPivotState(e,t){const i=this.columnStates;this.columnStates=void 0;const n=this.columnGroupStates;this.columnGroupStates=void 0;const o=this.beans,{pivotResultCols:s,colGroupSvc:r}=o;if(null!==s&&void 0!==s&&s.isPivotResultColsPresent()){if(i){const n=[];for(const e of i)s.getPivotResultCol(e.colId)&&n.push(e);Ah(o,{state:n,applyOrder:e},t)}n&&(null===r||void 0===r||r.setColumnGroupState(n,t))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;return oC(e.getColumnGroupState())}setColumnGroupState(e,t,i){var n;const o=this.beans.colGroupSvc;if(!o||null!==i&&void 0!==i&&i.has("columnGroup")||"api"!==t&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const s=new Set(null===(n=e.columnGroup)||void 0===n?void 0:n.openColumnGroupIds),r=o.getColumnGroupState().map((e=>{let{groupId:t}=e;const i=s.has(t);return i&&s.delete(t),{groupId:t,open:i}}));s.forEach((e=>{r.push({groupId:e,open:!0})})),r.length&&(this.columnGroupStates=r),o.setColumnGroupState(r,t)}getFilterState(){var e;const t=this.beans.filterManager;let i=null===t||void 0===t?void 0:t.getFilterModel();i&&0===Object.keys(i).length&&(i=void 0);const n=null===t||void 0===t?void 0:t.getFilterState(),o=null!==(e=null===t||void 0===t?void 0:t.getAdvFilterModel())&&void 0!==e?e:void 0;return i||o||n?{filterModel:i,columnFilterState:n,advancedFilterModel:o}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,columnFilterState:n,advancedFilterModel:o}=null!==e&&void 0!==e?e:{filterModel:null,columnFilterState:null,advancedFilterModel:null};void 0===i&&void 0===n||null===t||void 0===t||t.setFilterState(null!==i&&void 0!==i?i:null,null!==n&&void 0!==n?n:null,"columnFilter"),void 0!==o&&(null===t||void 0===t||t.setAdvFilterModel(null!==o&&void 0!==o?o:null,"advancedFilter"))}getRangeSelectionState(){var e;const t=null===(e=this.beans.rangeSvc)||void 0===e?void 0:e.getCellRanges().map((e=>{const{id:t,type:i,startRow:n,endRow:o,columns:s,startColumn:r}=e;return{id:t,type:i,startRow:n,endRow:o,colIds:s.map((e=>e.getColId())),startColId:r.getColId()}}));return null!==t&&void 0!==t&&t.length?{cellRanges:t}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:n,visibleCols:o}=this.beans;if(!bu(t)||!i)return;const s=[];null===e||void 0===e||e.cellRanges.forEach((e=>{const t=[];if(e.colIds.forEach((e=>{const i=n.getCol(e);i&&t.push(i)})),!t.length)return;let i=n.getCol(e.startColId);if(!i){const e=o.allCols,n=new Set(t);i=e.find((e=>n.has(e)))}s.push(u(u({},e),{},{columns:t,startColumn:i}))})),i.setCellRanges(s)}getScrollState(){var e,t;if(!this.isClientSideRowModel)return;const i=this.beans.ctrlsSvc.getScrollFeature(),{left:n}=null!==(e=null===i||void 0===i?void 0:i.getHScrollPosition())&&void 0!==e?e:{left:0},{top:o}=null!==(t=null===i||void 0===i?void 0:i.getVScrollPosition())&&void 0!==t?t:{top:0};return o||n?{top:o,left:n}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=null!==e&&void 0!==e?e:{top:0,left:0},{frameworkOverrides:n,rowRenderer:o,animationFrameSvc:s,ctrlsSvc:r}=this.beans;n.wrapIncoming((()=>{var e;r.get("center").setCenterViewportScrollLeft(i),null===(e=r.getScrollFeature())||void 0===e||e.setVerticalScrollPosition(t),o.redraw({afterScroll:!0}),null===s||void 0===s||s.flushAllFrames()}))}getSideBarState(){var e;return null===(e=this.beans.sideBar)||void 0===e||null===(e=e.comp)||void 0===e?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:i}=this.beans;if(!e)return void t.clearFocusedCell();const{colId:n,rowIndex:o,rowPinned:s}=e;t.setFocusedCell({column:i.getCol(n),rowIndex:o,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();return i||n?{page:i,pageSize:n}:void 0}setPaginationState(e,t){const{pagination:i,gos:n}=this.beans;if(!i)return;const{pageSize:o,page:s}=null!==e&&void 0!==e?e:{page:0,pageSize:n.get("paginationPageSize")},r="gridInitializing"===t;o&&!n.get("paginationAutoPageSize")&&i.setPageSize(o,r?"initialState":"pageSizeSelector"),"number"===typeof s&&(r?i.setPage(s):i.goToPage(s))}getRowSelectionState(){var e;const t=this.beans.selectionSvc;if(!t)return;const i=t.getSelectionState();return!i||!Array.isArray(i)&&(!1===i.selectAll||!1===i.selectAllChildren)&&!(null!==i&&void 0!==i&&null!==(e=i.toggledNodes)&&void 0!==e&&e.length)?void 0:i}setRowSelectionState(e,t){var i;null===(i=this.beans.selectionSvc)||void 0===i||i.setSelectionState(e,t,"api"===t)}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const i=[];return t.forEachNode((e=>{let{expanded:t,id:n}=e;t&&n&&i.push(n)})),i.length?{expandedRowGroupIds:i}:void 0}getRowPinningState(){var e;return null===(e=this.beans.pinnedRowModel)||void 0===e?void 0:e.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?null===t||void 0===t||t.setPinnedState(e):null===t||void 0===t||t.reset()}setRowGroupExpansionState(e,t){var i;const n=this.beans.expansionSvc;if(!n)return;const o=null!==(i=null===e||void 0===e?void 0:e.expandedRowGroupIds)&&void 0!==i?i:[];let s;if("api"===t){var r;const e=null===(r=this.getRowGroupExpansionState())||void 0===r?void 0:r.expandedRowGroupIds;if(null!==e&&void 0!==e&&e.length){const t=new Set(e);for(const e of o)t.delete(e);s=Array.from(t)}}n.expandRows(o,s)}updateColumnState(e){const t=this.getColumnState();let i=!1;const n=this.cachedState;for(const o of Object.keys(t)){Kl(t[o],n[o])||(i=!0)}this.cachedState=u(u({},n),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),Kl(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=u(u({},this.cachedState),{},{[e]:t})}refreshStaleState(){const e=this.staleStateKeys;e.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){var e;this.suppressEvents=!0,null===(e=this.beans.colAnimation)||void 0===e||e.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout((()=>{var t;this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(null===(t=this.beans.colAnimation)||void 0===t||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))}))}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}}],apiFunctions:{getState:function(e){var t,i;return null!==(t=null===(i=e.stateSvc)||void 0===i?void 0:i.getState())&&void 0!==t?t:{}},setState:function(e,t,i){var n;return null===(n=e.stateSvc)||void 0===n?void 0:n.setState(t,i)}}};var OR="paginationPageSizeSelector",BR={tag:"span",cls:"ag-paging-page-size"},zR={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Uh{constructor(){super(BR),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(OR,(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||null===e||void 0===e||!e.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Qd(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(OR)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),n=!0!==this.gos.get(OR);_c(94,{pageSizeSet:i,pageSizesSet:n,pageSizeOptions:e,paginationPageSizeOption:t}),n||_c(95,{paginationPageSizeOption:t,paginationPageSizeSelector:OR}),e.unshift("")}const n=String(i?"":t);this.selectPageSizeComp?(oh(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map((e=>({value:String(e)})))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Jv).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(o).setLabel(n).onValueChange((()=>this.handlePageSizeItemSelected())),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(OR);return Array.isArray(t)&&null!==t&&void 0!==t&&t.length?[...t].sort(((e,t)=>e-t)):e}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},VR={selector:"AG-PAGINATION",component:class extends sb{constructor(){super(),this.btFirst=Wh,this.btPrevious=Wh,this.btNext=Wh,this.btLast=Wh,this.lbRecordCount=Wh,this.lbFirstRowOnPage=Wh,this.lbLastRowOnPage=Wh,this.lbCurrent=Wh,this.lbTotal=Wh,this.pageSizeComp=Wh,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}")}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[zR]);const{btFirst:t,btPrevious:i,btNext:n,btLast:o}=this;this.activateTabIndex([t,i,n,o]),t.insertAdjacentElement("afterbegin",hv(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",hv(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",hv(e?"previous":"next",this.beans)),o.insertAdjacentElement("afterbegin",hv(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):function(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}(this.beans,e),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){var e,t,i;this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==hg&&e.key!==gg||(e.preventDefault(),i())}})})),e=this.beans,t=this,i=this.getGui(),t.addManagedElementListeners(i,{keydown:t=>{if(!t.defaultPrevented&&t.key===ug){const n=t.shiftKey;Og(e,i,!1,n)||Hg(e,n)&&t.preventDefault()}}}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}return function(e,t){if("number"!==typeof e)return"";const i=t(),n=i("thousandSeparator",","),o=i("decimalSeparator",".");return e.toString().replace(".",o).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(n))}(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t="ag-".concat(this.getCompId());return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:"".concat(t)},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:"".concat(t,"-first-row")}},{tag:"span",attrs:{id:"".concat(t,"-to")},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:"".concat(t,"-last-row")}},{tag:"span",attrs:{id:"".concat(t,"-of")},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:"".concat(t,"-row-count")}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:"".concat(t,"-start-page")},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:"".concat(t,"-start-page-number")}},{tag:"span",attrs:{id:"".concat(t,"-of-page")},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:"".concat(t,"-of-page-number")}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),o=e===i-1;this.nextButtonDisabled=o||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){!function(e,t){dd(e,"disabled",t)}(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),n=e?i:null,o=this.pagination.getCurrentPage(),s=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=s*o+1,a=r+s-1,e&&a>n&&(a=n));const l=!e&&i<r+s-1,d=this.formatNumber(r);let c;this.lbFirstRowOnPage.textContent=d;const u=this.getLocaleTextFunc();c=l?u("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=c;const h=t>0?o+1:0,p=this.formatNumber(h);let g,m;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),m=this.formatNumber(n);else{const e=u("more","more");g=e,m=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=m,this.announceAriaStatus(d,c,m,p,g)}announceAriaStatus(e,t,i,n,o){const s=this.getLocaleTextFunc(),r=s("page","Page"),a=s("to","to"),l=s("of","of"),d="".concat(e," ").concat(a," ").concat(t," ").concat(l," ").concat(i),c="".concat(r," ").concat(n," ").concat(l," ").concat(o);var u,h;d!==this.ariaRowStatus&&(this.ariaRowStatus=d,null===(u=this.ariaAnnounce)||void 0===u||u.announceValue(d,"paginationRow"));c!==this.ariaPageStatus&&(this.ariaPageStatus=c,null===(h=this.ariaAnnounce)||void 0===h||h.announceValue(c,"paginationPage"))}}},HR={moduleName:"Pagination",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return VR}isPaginateChildRows(){const e=this.gos;return!!(e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren"))||e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||"number"!==typeof t)return;const{editSvc:i}=this.beans;null!==i&&void 0!==i&&i.isEditing()&&(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;var i,n,o;this.paginateChildRows||(t=null!==(i=null===(n=(o=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)||void 0===n?void 0:n.call(o,e))&&void 0!==i?i:e);this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return!this.active||e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Wl(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Wl(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Wl(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Wl(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0)return void this.setZeroRows();const i=this.pageSize,n=t-1;this.totalPages=Math.floor(n/i)+1,this.adjustCurrentPageIfInvalid();const o=this.currentPage,s=i*o;let r=i*(o+1)-1;if(r>n&&(r=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(s),r===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const t=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=t-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,0===e)return void this.setZeroRows();const{pageSize:t,currentPage:i}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},class extends Vu{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const i=Math.max(Qc(t),1),n=Math.floor(e/i);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?Sc(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getPageSize())&&void 0!==t?t:100},paginationGetCurrentPage:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getCurrentPage())&&void 0!==t?t:0},paginationGetTotalPages:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getTotalPages())&&void 0!==t?t:1},paginationGetRowCount:function(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToNextPage()},paginationGoToPreviousPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToPreviousPage()},paginationGoToFirstPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToFirstPage()},paginationGoToLastPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToLastPage()},paginationGoToPage:function(e,t){var i;null===(i=e.pagination)||void 0===i||i.goToPage(t)}},dependsOn:[FC]};var GR={moduleName:"RowApi",version:Pc,apiFunctions:{redrawRows:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},setRowNodeExpanded:function e(t,i,n,o,s){i&&(o&&i.parent&&-1!==i.parent.level&&e(t,i.parent,n,o,s),i.setExpanded(n,void 0,s))},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRowIndex:function(e){return e.rowRenderer.firstRenderedRow},getLastDisplayedRowIndex:function(e){return e.rowRenderer.lastRenderedRow},getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()}}},WR={moduleName:"ScrollApi",version:Pc,apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()},ensureColumnVisible:zS,ensureIndexVisible:VS,ensureNodeVisible:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}}};var UR={moduleName:"RenderApi",version:Pc,apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,o="aria-".concat(t);null===i?n.removeAttribute(o):n.setAttribute(o,i)},refreshCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},isAnimationFrameQueueEmpty:function(e){var t,i;return null===(t=null===(i=e.animationFrameSvc)||void 0===i?void 0:i.isQueueEmpty())||void 0===t||t},flushAllAnimationFrames:function(e){var t;null===(t=e.animationFrameSvc)||void 0===t||t.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:Qc(e),headerHeight:qf(e)}},getCellRendererInstances:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];if(e.rowRenderer.getCellCtrls(i.rowNodes,i.columns).forEach((e=>{const t=e.getCellRenderer();null!=t&&n.push(bp(t))})),null!==(t=i.columns)&&void 0!==t&&t.length)return n;const o=[],s=Dx(i.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach((e=>{if(s&&!Nx(e.rowNode,s))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let i=0;i<t.length;i++){const e=t[i];null!=e&&o.push(bp(e))}})),[...o,...n]}}};function qR(e,t,i){let{colAutosize:n,visibleCols:o}=e;var s;Array.isArray(t)?null===n||void 0===n||n.autoSizeCols({colKeys:t,skipHeader:i,source:"api"}):null===n||void 0===n||n.autoSizeCols({colKeys:null!==(s=t.colIds)&&void 0!==s?s:o.allCols,skipHeader:t.skipHeader,defaultMaxWidth:t.defaultMaxWidth,defaultMinWidth:t.defaultMinWidth,columnLimits:t.columnLimits,source:"api"})}function KR(e,t){var i,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=null!==(i=o.minWidth)&&void 0!==i?i:e.getMinWidth();t<s&&(t=s);const r=null!==(n=o.maxWidth)&&void 0!==n?n:e.getMaxWidth();return t>r&&(t=r),t}var YR={moduleName:"ColumnAutoSize",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:o,defaultMaxWidth:s,defaultMinWidth:r,columnLimits:a=[],source:l="api"}=e,{animationFrameSvc:d,renderStatus:c,colModel:u,autoWidthCalc:h,visibleCols:p}=this.beans;if(null===d||void 0===d||d.flushAllFrames(),this.timesDelayed<5&&c&&!c.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>{this.isAlive()&&this.autoSizeCols(e)}));this.timesDelayed=0;const g=[];let m=-1;const f=Object.fromEntries(a.map((e=>{let{colId:t,maxWidth:i,minWidth:n}=e;return[t,{maxWidth:i,minWidth:n}]}))),v=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),b=null!=n?n:v;for(;0!==m;){m=0;const e=[];t.forEach((t=>{if(!t||(mh(i=t)||fh(i)))return;var i;const n=u.getCol(t);if(!n)return;if(g.indexOf(n)>=0)return;const o=h.getPreferredWidthForColumn(n,v);if(o>0){var a,d,c;const e=null!==(a=f[n.colId])&&void 0!==a?a:{};null!==(d=e.minWidth)&&void 0!==d||(e.minWidth=r),null!==(c=e.maxWidth)&&void 0!==c||(e.maxWidth=s);const t=KR(n,o,e);n.setActualWidth(t,l),g.push(n),m++}e.push(n)})),e.length&&p.refresh(l)}b||this.autoSizeColumnGroupsByColumns(t,l,o),jh(this.eventSvc,g,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:n,ctrlsSvc:o}=this.beans,s=new Set;let r;n.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||s.add(t),t=t.getParent()}));for(const a of s){for(const e of o.getHeaderRowContainerCtrls())if(r=e.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.autoSizeAllColumns(e)));const t=this.beans.visibleCols.allCols;this.autoSizeCols(u({colKeys:t},e))}addColumnAutosize(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",n);const o=new rb(e);return o.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),o.removeEventListener("doubleTap",n),o.destroy()}}addColumnGroupResize(e,t,i){const n=this.gos.get("skipHeaderOnAutoSize"),o=()=>{const e=[];t.getDisplayedLeafColumns().forEach((t=>{t.getColDef().suppressAutoSize||e.push(t.getColId())})),e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",o),()=>e.removeEventListener("dblclick",o)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:i,scrollVisibleSvc:n}=this.beans,o=i.getGridBodyCtrl(),s=o.isVerticalScrollShowing()?n.getScrollbarWidth():0,r=Gd(o.eGridBody)-s;r>0?this.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFitGridBody(e,-1)}),500):_c(29)}sizeColumnsToFit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(this.shouldQueueResizeOperations)return void this.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,n)));const o={};var s;n&&(null===n||void 0===n||null===(s=n.columnLimits)||void 0===s||s.forEach((e=>{let{key:t}=e,i=r(e,_l);o["string"===typeof t?t:t.getColId()]=i})));const a=this.beans.visibleCols.allCols;if(e<=0||!a.length)return;if(e===hh(a)){if(a.every((e=>{var t,i;if(e.colDef.suppressSizeToFit)return!0;const s=null===o||void 0===o?void 0:o[e.getId()],r=null!==(t=null===s||void 0===s?void 0:s.minWidth)&&void 0!==t?t:null===n||void 0===n?void 0:n.defaultMinWidth,a=null!==(i=null===s||void 0===s?void 0:s.maxWidth)&&void 0!==i?i:null===n||void 0===n?void 0:n.defaultMaxWidth,l=e.getActualWidth();return(null==r||l>=r)&&(null==a||l<=a)})))return}const l=[],d=[];a.forEach((e=>{!0===e.getColDef().suppressSizeToFit?d.push(e):l.push(e)}));const c=l.slice(0);let u=!1;const h=e=>{rh(l,e),d.push(e)};for(l.forEach((e=>{var i,s;e.resetActualWidth(t);const r=null===o||void 0===o?void 0:o[e.getId()],a=null!==(i=null===r||void 0===r?void 0:r.minWidth)&&void 0!==i?i:null===n||void 0===n?void 0:n.defaultMinWidth,l=null!==(s=null===r||void 0===r?void 0:r.maxWidth)&&void 0!==s?s:null===n||void 0===n?void 0:n.defaultMaxWidth,d=e.getActualWidth();"number"===typeof a&&d<a?e.setActualWidth(a,t,!0):"number"===typeof l&&d>l&&e.setActualWidth(l,t,!0)}));!u;){u=!0;const i=e-hh(d);if(i<=0)l.forEach((e=>{var i,s;const r=null!==(i=null===o||void 0===o||null===(s=o[e.getId()])||void 0===s?void 0:s.minWidth)&&void 0!==i?i:null===n||void 0===n?void 0:n.defaultMinWidth;"number"!==typeof r?e.setActualWidth(e.minWidth,t):e.setActualWidth(r,t,!0)}));else{const e=i/hh(l);let s=i;for(let i=l.length-1;i>=0;i--){var p,g;const r=l[i],a=null===o||void 0===o?void 0:o[r.getId()],d=null!==(p=null===a||void 0===a?void 0:a.minWidth)&&void 0!==p?p:null===n||void 0===n?void 0:n.defaultMinWidth,c=null!==(g=null===a||void 0===a?void 0:a.maxWidth)&&void 0!==g?g:null===n||void 0===n?void 0:n.defaultMaxWidth,m=r.getMinWidth(),f=r.getMaxWidth(),v="number"===typeof d&&d>m?d:m,b="number"===typeof c&&c<f?c:f;let w=Math.round(r.getActualWidth()*e);w<v?(w=v,h(r),u=!1):w>b?(w=b,h(r),u=!1):0===i&&(w=s),r.setActualWidth(w,t,!0),s-=w}}}c.forEach((e=>{e.fireColumnWidthChangedEvent(t)}));const m=this.beans.visibleCols;m.setLeftValues(t),m.updateBodyWidths(),i||jh(this.eventSvc,c,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:n}=e,o=null===t||void 0===t?void 0:t.map((e=>{let{colId:t,minWidth:i,maxWidth:n}=e;return{key:t,minWidth:i,maxWidth:n}}));this.sizeColumnsToFitGridBody({defaultMinWidth:i,defaultMaxWidth:n,columnLimits:o})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==(null===e||void 0===e?void 0:e.type))return;const{colIds:t,skipHeader:i,defaultMaxWidth:n,defaultMinWidth:o,columnLimits:s}=e;setTimeout((()=>{const e={skipHeader:i,source:"autosizeColumns",defaultMaxWidth:n,defaultMinWidth:o,columnLimits:s};t?this.autoSizeCols(u({colKeys:t},e)):this.autoSizeAllColumns(e)}))}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}}],apiFunctions:{sizeColumnsToFit:function(e,t){var i,n;"number"===typeof t?null===(i=e.colAutosize)||void 0===i||i.sizeColumnsToFit(t,"api"):null===(n=e.colAutosize)||void 0===n||n.sizeColumnsToFitGridBody(t)},autoSizeColumns:qR,autoSizeAllColumns:function(e,t){var i;t&&"object"===typeof t?qR(e,t):null===(i=e.colAutosize)||void 0===i||i.autoSizeAllColumns({source:"api",skipHeader:t})}},dependsOn:[$b]};var QR={moduleName:"PinnedRow",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const t=e.get("enableRowPinning"),i=cu(e),n=!!t||("pinnedBottom"===i||"pinnedTop"===i),o=n?this.inner instanceof Dv:this.inner instanceof Rv;this.inner&&o&&this.destroyBean(this.inner),!o&&this.inner||(this.inner=this.createManagedBean(n?new Rv:new Dv))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,i){return this.inner.pinRow(e,t,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}}],css:[".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}"],apiFunctions:{getPinnedTopRowCount:function(e){var t,i;return null!==(t=null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRowCount())&&void 0!==t?t:0},getPinnedBottomRowCount:function(e){var t,i;return null!==(t=null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRowCount())&&void 0!==t?t:0},getPinnedTopRow:function(e,t){var i;return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){var i;return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRow(t)},forEachPinnedRow:function(e,t,i){var n;return null===(n=e.pinnedRowModel)||void 0===n?void 0:n.forEachPinnedRow(t,i)}},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},$R=class extends Xg{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,n,o,s,r){this.eWrapper=i,super.setComp(e,t,i,n,o,s,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){null!=this.rowNode.rowIndex&&yd(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){var e,t;e=this.eGui,t=this.cellSpan.spannedNodes.size,cd(e,"rowspan",t)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){var e;return null!==(e=this.focusedCellPosition)&&void 0!==e?e:this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(Vg(t))return void(this.focusedCellPosition=void 0);const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},XR=class extends lf{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach((e=>e.refreshAriaRowIndex()))}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var t;const i=null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.getCellSpan(e,this.rowNode);if(!i)return;return i.firstNode!==this.rowNode?void 0:new $R(i,this,this.beans)}isCorrectCtrlForSpan(e){var t;const i=null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.getCellSpan(e.column,this.rowNode);if(!i)return!1;return!(i.firstNode!==this.rowNode)&&e.getCellSpan()===i}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},JR=e=>null!==e&&void 0!==e?e:"center",ZR=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column===this.col&&(e.rowPinned==this.firstNode.rowPinned&&(this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex))}getLastNodeAutoHeight(){var e;const t=null===(e=this.firstNode.__autoHeights)||void 0===e?void 0:e[this.col.getColId()];if(null==t)return;let i=0;return this.spannedNodes.forEach((e=>{e!==this.lastNode&&(i+=e.rowHeight)})),t-i}},ek=class extends Vu{constructor(e){super(),this.column=e}buildCache(e){var t;const{column:i,beans:{gos:n,pinnedRowModel:o,rowModel:s,valueSvc:r,pagination:a}}=this,{colDef:l}=i,d=this["".concat(e,"ValueNodeMap")],c=new Map,u=n.getCallback("isFullWidthRow"),h=l.equals,p=l.spanRows,g="function"===typeof p;let m,f=null,v=null;const b=(e,t)=>{f=e,v=null,m=t},w=e=>{var t;const o=!e.isExpandable()&&!e.group&&!e.detail&&(!u||!u({rowNode:e}));if(null==e.rowIndex||!o)return void b(null,null);if(null==f||e.level!==f.level||e.footer||v&&e.rowIndex-1!==(null===(t=v)||void 0===t?void 0:t.getLastNode().rowIndex))return void b(e,r.getValue(i,e));const s=r.getValue(i,e);if(g){const t=Fu(n,{valueA:m,nodeA:f,valueB:s,nodeB:e,column:i,colDef:l});if(!p(t))return void b(e,s)}else if(h?!h(m,s):m!==s)return void b(e,s);if(!v){const e=null===d||void 0===d?void 0:d.get(f);(null===e||void 0===e?void 0:e.firstNode)===f?(e.reset(),v=e):v=new ZR(i,f),c.set(f,v)}v.addSpannedNode(e),c.set(e,v)};switch(e){case"center":null===(t=s.forEachDisplayedNode)||void 0===t||t.call(s,(e=>{(!a||a.isRowInPage(e.rowIndex))&&w(e)}));break;case"top":null===o||void 0===o||o.forEachPinnedRow("top",w);break;case"bottom":null===o||void 0===o||o.forEachPinnedRow("bottom",w)}this["".concat(e,"ValueNodeMap")]=c}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this["".concat(JR(e.rowPinned),"ValueNodeMap")].get(e)}},tk={moduleName:"CellSpan",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Sc(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Sc(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan"))return;if(this.spanningColumns.has(e))return;const i=this.createManagedBean(new ek(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated(e){let{node:t}=e;const{spannedRowRenderer:i}=this.beans;if(t.rowPinned){if(null!=this.pinnedTimeout)return;this.pinnedTimeout=window.setTimeout((()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),null===i||void 0===i||i.createCtrls("top"),null===i||void 0===i||i.createCtrls("bottom")}),0)}else null==this.modelTimeout&&(this.modelTimeout=window.setTimeout((()=>{this.modelTimeout=null,this.buildModelCaches(),null===i||void 0===i||i.createCtrls("center")}),0))}buildModelCaches(){null!=this.modelTimeout&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach((e=>e.buildCache("center"))),this.debounceModelEvent()}buildPinnedCaches(){null!=this.pinnedTimeout&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach((e=>{e.buildCache("top"),e.buildCache("bottom")})),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return!!i&&i.isCellSpanning(t)}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,n=e.column,o=e.rowIndex,s=this.spanningColumns.get(n);if(!s)return;let r;switch(e.rowPinned){case"top":r=null===t||void 0===t?void 0:t.getPinnedTopRow(o);break;case"bottom":r=null===t||void 0===t?void 0:t.getPinnedBottomRow(o);break;default:r=i.getRow(o)}return r?s.getCellSpan(r):void 0}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?u(u({},e),{},{rowIndex:t.firstNode.rowIndex}):e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?u(u({},e),{},{rowIndex:t.getLastNode().rowIndex}):e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,n]of this.spanningColumns)if(n.isCellSpanning(e)){t(i,n.getCellSpan(e))}}destroy(){super.destroy(),this.spanningColumns.clear()}},class extends Vu{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i="".concat(e,"Ctrls"),n=this[i],o=n.size,s=this.getAllRelevantRowControls(e),r=new Map;let a=!1;for(const d of s)d.isAlive()&&(null===t||void 0===t||t.forEachSpannedColumn(d.rowNode,((e,t)=>{if(r.has(t.firstNode))return;const i=n.get(t.firstNode);if(i)return r.set(t.firstNode,i),void n.delete(t.firstNode);a=!0;const o=new XR(t.firstNode,this.beans,!1,!1,!1);r.set(t.firstNode,o)})));this[i]=r;const l=r.size===o;if(a||!l){for(const e of n.values())e.destroyFirstPass(!0),e.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,i=null===t||void 0===t?void 0:t.getCellSpanByPosition(e);if(!i)return;const n=this["".concat(JR(e.rowPinned),"Ctrls")].get(i.firstNode);return n?n.getAllCellCtrls().find((t=>t.column===e.column)):void 0}getCtrls(e){return[...this["".concat(e,"Ctrls")].values()]}destroyRowCtrls(e){const t="".concat(e,"Ctrls");for(const i of this[t].values())i.destroyFirstPass(!0),i.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}}]},ik=class extends Vu{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,o=this.getCellClassParams(e,i);of(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,o,(e=>t.toggleCss(e,!0)),(e=>t.toggleCss(e,!1))),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;if("function"===typeof i){n=i(this.getCellClassParams(e,t))}else n=i;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);this.staticClasses.forEach((e=>t.toggleCss(e,!1)));const o=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=o,o.forEach((e=>t.toggleCss(e,!0)))}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return Fu(this.beans.gos,{value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}},nk={moduleName:"CellStyle",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){of(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;if("function"===typeof i){n=i(t)}else n=i;return"string"===typeof n&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new ik(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}}]},ok={moduleName:"RowStyle",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,n=t=>{"string"===typeof t?e.push(t):Array.isArray(t)&&t.forEach((t=>e.push(t)))},o=i.get("rowClass");o&&n(o);const s=i.getCallback("getRowClass");if(s){n(s({data:t.data,node:t,rowIndex:t.rowIndex}))}}preProcessRowClassRules(e,t){this.processRowClassRules(t,(t=>{e.push(t)}),(()=>{}))}processRowClassRules(e,t,i){const{gos:n,expressionSvc:o}=this.beans,s=Fu(n,{data:e.data,node:e,rowIndex:e.rowIndex});of(o,void 0,n.get("rowClassRules"),s,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),n=t.getCallback("getRowStyle");let o;if(n){o=n({data:e.data,node:e,rowIndex:e.rowIndex})}if(o||i)return Object.assign({},i,o)}}]};var sk=class extends Vu{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=e=>{const{beans:t,gos:i,element:n,columns:o}=this,s=t.colHover;(null!==e&&void 0!==e?e:!!i.get("columnHoverHighlight"))?this.destroyManagedListeners=this.addManagedElementListeners(n,{mouseover:s.setMouseOver.bind(s,o),mouseout:s.clearMouseOver.bind(s)}):(this.destroyManagedListeners.forEach((e=>e())),this.destroyManagedListeners=[])}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",(e=>{let{currentValue:t}=e;this.enableFeature(t)})),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},rk={moduleName:"ColumnHover",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",(e=>{let{currentValue:t}=e;t||this.clearMouseOver()}))}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const n=()=>{const e=this.isHovered(i);t.toggleCss("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;const i=this.isHovered(e);t.toggleCss("ag-column-hover",i)}addHeaderFilterColumnHoverListener(e,t,i,n){this.createHoverFeature(e,[i],n);const o=()=>{const e=this.isHovered(i);t.toggleCss("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:o}),o()}createHoverFeature(e,t,i){e.createManagedBean(new sk(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}}],apiFunctions:{isColumnHovered:function(e,t){var i;return!(null===(i=e.colHover)||void 0===i||!i.isHovered(t))}}};var ak={moduleName:"EventApi",version:Pc,apiFunctions:{addEventListener:function(e,t,i){var n;null===(n=e.apiEventSvc)||void 0===n||n.addEventListener(t,i)},addGlobalListener:function(e,t){var i;null===(i=e.apiEventSvc)||void 0===i||i.addGlobalListener(t)},removeEventListener:function(e,t,i){var n;null===(n=e.apiEventSvc)||void 0===n||n.removeEventListener(t,i)},removeGlobalListener:function(e,t){var i;null===(i=e.apiEventSvc)||void 0===i||i.removeGlobalListener(t)}},beans:[class extends Vu{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=null===(e=(t=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)||void 0===e?void 0:e.call(t)}addEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.wrapSvc)||void 0===n?void 0:n.wrap(e,t))&&void 0!==i?i:t,s=!Vy.has(e),r=s?this.asyncListeners:this.syncListeners;r.has(e)||r.set(e,new Set),r.get(e).add(o),this.eventSvc.addEventListener(e,o,s)}removeEventListener(e,t){var i,n;const o=null!==(i=null===(n=this.wrapSvc)||void 0===n?void 0:n.unwrap(e,t))&&void 0!==i?i:t,s=this.asyncListeners.get(e),r=!(null===s||void 0===s||!s.delete(o));var a;r||(null===(a=this.syncListeners.get(e))||void 0===a||a.delete(o));this.eventSvc.removeEventListener(e,o,r)}addGlobalListener(e){var t,i;const n=null!==(t=null===(i=this.wrapSvc)||void 0===i?void 0:i.wrapGlobal(e))&&void 0!==t?t:e,o=(e,t)=>{Vy.has(e)&&n(e,t)},s=(e,t)=>{Vy.has(e)||n(e,t)};this.globalListenerPairs.set(e,{syncListener:o,asyncListener:s});const r=this.eventSvc;r.addGlobalListener(o,!1),r.addGlobalListener(s,!0)}removeGlobalListener(e){var t;const{eventSvc:i,wrapSvc:n,globalListenerPairs:o}=this,s=null!==(t=null===n||void 0===n?void 0:n.unwrapGlobal(e))&&void 0!==t?t:e;if(o.has(s)){const{syncListener:t,asyncListener:n}=o.get(s);i.removeGlobalListener(t,!1),i.removeGlobalListener(n,!0),o.delete(e)}else this.syncGlobalListeners.delete(s),i.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventSvc.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventSvc.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach((e=>{let{syncListener:i,asyncListener:n}=e;t.removeGlobalListener(i,!1),t.removeGlobalListener(n,!0)})),e.clear()}}]},lk={moduleName:"Locale",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(e,i,n)=>t({key:e,defaultValue:i,variableValues:n});const i=e.get("localeText");return(e,t,n)=>{var o;let s=i&&i[e];if(s&&n&&n.length){let e=0;for(;!(e>=n.length);){if(-1===s.indexOf("${variable}"))break;s=s.replace("${variable}",n[e++])}}return null!==(o=s)&&void 0!==o?o:t}}}]},dk={moduleName:"AllCommunity",version:Pc,dependsOn:[RR,FR,TR,RC,lR,dR,cR,uR,hR,pR,gR,aR,vS,bS,wS,fS,yS,xS,_R,xR,HR,fw,GR,WR,UR,YR,Ob,QR,bR,Tx,nk,rk,ok,ak,Ix,IR,SS,lk,{moduleName:"RowAutoHeight",version:Pc,beans:[class extends Vu{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Sc(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var e,t,i;const{visibleCols:n,rowModel:o,rowSpanSvc:s,pinnedRowModel:r}=this.beans,a=n.autoHeightCols;let l=!1;const d=e=>{const t=e.__autoHeights;let i=Yc(this.beans,e).height;for(const o of a){let r=null===t||void 0===t?void 0:t[o.getColId()];const a=null===s||void 0===s?void 0:s.getCellSpan(o,e);if(a){var n;if(a.getLastNode()!==e)continue;if(r=null===s||void 0===s||null===(n=s.getCellSpan(o,e))||void 0===n?void 0:n.getLastNodeAutoHeight(),!r)return}if(null==r){if(this.colSpanSkipCell(o,e))continue;return}i=Math.max(r,i)}i!==e.rowHeight&&(e.setRowHeight(i),l=!0)};var c;(null===r||void 0===r||null===(e=r.forEachPinnedRow)||void 0===e||e.call(r,"top",d),null===r||void 0===r||null===(t=r.forEachPinnedRow)||void 0===t||t.call(r,"bottom",d),null===(i=o.forEachDisplayedNode)||void 0===i||i.call(o,d),l)&&(null===(c=o.onRowHeightChanged)||void 0===c||c.call(o))}setRowAutoHeight(e,t,i){var n;if(null!==(n=e.__autoHeights)&&void 0!==n||(e.__autoHeights={}),void 0==t)return void delete e.__autoHeights[i.getId()];const o=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,o!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:i,colViewport:n,visibleCols:o}=this.beans;if(!i.colSpanActive)return!1;let s=[];switch(e.getPinned()){case"left":s=o.getLeftColsForRow(t);break;case"right":s=o.getRightColsForRow(t);break;case null:s=n.getColsWithinViewport(t)}return!s.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const n=t.parentElement,{rowNode:o,column:s}=e,r=this.beans,a=l=>{var d;if(null!==(d=this.beans.editSvc)&&void 0!==d&&d.isEditing(e))return;if(!e.isAlive()||!i.isAlive())return;const{paddingTop:c,paddingBottom:u,borderBottomWidth:h,borderTopWidth:p}=Vd(n),g=c+u+h+p,m=t.offsetHeight+g;if(l<5){const e=Zc(r);if(!e||!e.contains(t)||0==m)return void window.setTimeout((()=>a(l+1)),0)}this.setRowAutoHeight(o,m,s)},l=()=>a(0);l();const d=dc(r,t,l);return i.addDestroyFunc((()=>{d(),this.setRowAutoHeight(o,void 0,s)})),!0}setAutoHeightActive(e){this.active=e.list.some((e=>e.isVisible()&&e.isAutoHeight()))}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:i}of e){if(!t||this.beans.colModel.colSpanActive){t=this.beans.colViewport.getColsWithinViewport(i).filter((e=>e.isAutoHeight()))}if(0!==t.length){if(!i.__autoHeights)return!1;for(const e of t){const t=i.__autoHeights[e.getColId()];if(!t||i.rowHeight<t)return!1}}}return!0}}]},Lb,kR,tk]};var ck=i(950);const uk=["key"];var hk,pk=o.createContext({}),gk=o.createContext("default"),mk=(e,t,i,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let s,r,a=!1;return o.then((e=>{a?t.destroyBean(e):(s=e,r=s.getGui(),i.appendChild(r),fk(n,s))})),()=>{var e;a=!0,s&&(null===(e=r)||void 0===e||null===(e=e.parentElement)||void 0===e||e.removeChild(r),t.destroyBean(s),n&&fk(n,void 0))}},fk=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},vk=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>null!=e&&""!==e)).join(" ")},bk=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new e;return n.classesMap=u({},this.classesMap),n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},wk=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),yk=null===(hk=o.version)||void 0===hk?void 0:hk.split(".")[0],xk="16"===yk||"17"===yk;var Ck=!1;var Sk=(e,t)=>{xk||!e||Ck?t():ck.flushSync(t)};function Rk(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const n=[],o=[],s=new Map,r=new Map;for(let a=0;a<t.length;a++){const e=t[a];r.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];s.set(t.instanceId,t),r.has(t.instanceId)&&n.push(t)}for(let a=0;a<t.length;a++){const e=t[a],i=e.instanceId;s.has(i)||o.push(e)}return n.length===e.length&&0===o.length?e:0===n.length&&o.length===t.length?t:0===n.length?o:0===o.length?n:[...n,...o]}var kk=(0,o.forwardRef)(((e,t)=>{var i;const{registry:n,context:s}=(0,o.useContext)(pk),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(null),h=(0,o.useRef)(),[p,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),[v,b]=(0,o.useState)(),[w,y]=(0,o.useState)((()=>new bk)),[x,C]=(0,o.useState)((()=>new bk("ag-hidden"))),[S,R]=(0,o.useState)((()=>new bk("ag-hidden"))),[k,P]=(0,o.useState)((()=>new bk("ag-invisible")));(0,o.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,o.useLayoutEffect)((()=>mk(p,s,a.current)),[p]);const E=(0,o.useCallback)((t=>{if(r.current=t,!t)return void(h.current=s.destroyBean(h.current));const i={setInnerRenderer:(e,t)=>{g(e),b(t)},setChildCount:e=>f(e),toggleCss:(e,t)=>y((i=>i.setClass(e,t))),setContractedDisplayed:e=>R((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>C((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>P((t=>t.setClass("ag-invisible",!e))),setCheckboxSpacing:e=>P((t=>t.setClass("ag-group-checkbox-spacing",e)))},o=n.createDynamicBean("groupCellRendererCtrl",!0);o&&(h.current=s.createBean(o),h.current.init(i,t,l.current,d.current,c.current,kk,e))}),[]),F=(0,o.useMemo)((()=>"ag-cell-wrapper ".concat(w.toString())),[w]),D=(0,o.useMemo)((()=>"ag-group-expanded ".concat(x.toString())),[x]),N=(0,o.useMemo)((()=>"ag-group-contracted ".concat(S.toString())),[S]),M=(0,o.useMemo)((()=>"ag-group-checkbox ".concat(k.toString())),[k]),T=null===p||void 0===p?void 0:p.componentFromFramework,j=T?p.componentClass:void 0,A=null==p&&null!=v,I=Wu(v);return o.createElement("span",u({className:F,ref:E},e.colDef?{}:{role:null===(i=h.current)||void 0===i?void 0:i.getCellAriaRole()}),o.createElement("span",{className:D,ref:d}),o.createElement("span",{className:N,ref:c}),o.createElement("span",{className:M,ref:l}),o.createElement("span",{className:"ag-group-value",ref:a},A?I:T?o.createElement(j,u({},p.params)):null),o.createElement("span",{className:"ag-group-child-count"},m))})),Pk=kk,Ek=(0,o.createContext)({setMethods:()=>{}}),Fk=(0,o.memo)((e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:n,setMethods:s}=e,[a,l]=(0,o.useState)(t),{key:d}=a,c=r(a,uk);return(0,o.useEffect)((()=>{i((e=>l(e)))}),[]),o.createElement(Ek.Provider,{value:{setMethods:s}},o.createElement(n,u({key:d},c)))})),Dk=0;function Nk(){return"agPortalKey_".concat(++Dk)}var Mk=class{constructor(e,t,i,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Nk(),this.portalKey=Nk(),this.instanceCreated=this.isStatelessComponent()?Kh.resolve(!1):new Kh((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout((()=>this.callMethod(e,t)));const n=i[e];return n?n.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Kh((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,u(u({},e),{},{key:this.key})),this.portal=(0,ck.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,o.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this["".concat(e,"Component")]}};function Tk(e,t,i){e.forEach((e=>{const n=t[e];n&&(i[e]=n)}))}var jk=class extends Mk{constructor(){super(...arguments),this.awaitUpdateCallback=new Kh((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=Fk}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new Kh((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Tk(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return u(u({},this.sourceParams),{},{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new Kh((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},Ak=class extends jk{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ik=class extends jk{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Lk=class extends jk{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:n}=this;return e.label=t,e.icon=i,e.shake=n,e}},_k=class extends jk{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Kh((e=>{this.resolveSetMethodsCallback=e}))}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;var i;t?null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e):this.awaitSetMethodsCallback.then((()=>{var t,i;return null===(t=this.providedMethods)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i?void 0:i.call(t,e)}))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t,i;!1===this.expectingNewMethods&&this.hasBeenActive&&(null===(t=this.providedMethods)||void 0===t?void 0:t.doesFilterPass)!==(null===e||void 0===e?void 0:e.doesFilterPass)&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),null===(i=this.resolveFilterPassCallback)||void 0===i||i.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var t;null===(t=this.resolveFilterPassCallback)||void 0===t||t.call(this);const i=new Kh((e=>{this.resolveFilterPassCallback=e}));this.setModel(e).then((()=>{i.then((()=>{this.sourceParams.filterChangedCallback()}))}))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Ok=class extends jk{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Kh((e=>{this.resolveSetMethodsCallback=e}))}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;var i;t?null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e):this.awaitSetMethodsCallback.then((()=>{var t,i;return null===(t=this.providedMethods)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i?void 0:i.call(t,e)}))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function Bk(e,t){e.parentFilterInstance((i=>{(i.setModel(t)||Kh.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var zk=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return u(u({},this.floatingFilterParams),{},{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Tk(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Bk(this.floatingFilterParams,e)}},Vk=class extends jk{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Bk(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Hk=class extends jk{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Gk=class extends jk{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Wk=class extends jk{refresh(e){this.sourceParams=e,this.refreshProps()}},Uk=class extends jk{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},qk=class extends jk{refresh(e){this.sourceParams=e,this.refreshProps()}},Kk=class extends jk{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Yk=class extends jk{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Qk(){_c(231)}var $k=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return Sk(!0,(()=>this.refresher())),void(e.rendered()&&t(e));window.setTimeout((()=>{this.waitForInstance(e,t,i)}))}}},Xk=(0,o.memo)((e=>{let{ctrl:t}=e;const i=t.isAlive(),{context:n}=(0,o.useContext)(pk),s=i?t.column.getColId():void 0,[r,a]=(0,o.useState)(),[l,d]=(0,o.useState)(),c=(0,o.useRef)(),h=(0,o.useRef)(null),p=(0,o.useRef)(null),g=(0,o.useRef)(null),m=(0,o.useRef)(),f=(0,o.useRef)();i&&!f.current&&(f.current=new Hh((()=>h.current)));const v=(0,o.useCallback)((e=>{if(h.current=e,c.current=e?n.createBean(new zh):n.destroyBean(c.current),!e||!t.isAlive())return;const i=()=>{const e=t.getSelectAllGui();var i;e&&(null===(i=p.current)||void 0===i||i.insertAdjacentElement("afterend",e),c.current.addDestroyFunc((()=>e.remove())))},o={setWidth:e=>{h.current&&(h.current.style.width=e)},toggleCss:(e,t)=>f.current.toggleCss(e,t),setUserStyles:e=>d(e),setAriaSort:e=>{h.current&&(e?Sd(h.current,e):Rd(h.current))},setUserCompDetails:e=>a(e),getUserCompInstance:()=>m.current||void 0,refreshSelectAllGui:i,removeSelectAllGui:()=>{var e;return null===(e=t.getSelectAllGui())||void 0===e?void 0:e.remove()}};t.setComp(o,e,p.current,g.current,c.current),i()}),[]);(0,o.useLayoutEffect)((()=>mk(r,n,g.current,m)),[r]),(0,o.useEffect)((()=>{t.setDragSource(h.current)}),[r]);const b=(0,o.useMemo)((()=>!!((null===r||void 0===r?void 0:r.componentFromFramework)&&wk(r.componentClass))),[r]),w=null===r||void 0===r?void 0:r.componentFromFramework,y=null===r||void 0===r?void 0:r.componentClass;return o.createElement("div",{ref:v,style:l,className:"ag-header-cell","col-id":s,role:"columnheader"},o.createElement("div",{ref:p,className:"ag-header-cell-resize",role:"presentation"}),o.createElement("div",{ref:g,className:"ag-header-cell-comp-wrapper",role:"presentation"},w?b?o.createElement(y,u({},r.params)):o.createElement(y,u(u({},r.params),{},{ref:m})):null))})),Jk=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Tk(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Zk=(0,o.memo)((e=>{let{ctrl:t}=e;const{context:i,gos:n}=(0,o.useContext)(pk),[s,r]=(0,o.useState)(),[a,l]=(0,o.useState)((()=>new bk("ag-header-cell","ag-floating-filter"))),[d,c]=(0,o.useState)((()=>new bk)),[h,p]=(0,o.useState)((()=>new bk("ag-floating-filter-button","ag-hidden"))),[g,m]=(0,o.useState)("false"),[f,v]=(0,o.useState)(),[,b]=(0,o.useState)(1),w=(0,o.useRef)(),y=(0,o.useRef)(null),x=(0,o.useRef)(null),C=(0,o.useRef)(null),S=(0,o.useRef)(null),R=(0,o.useRef)(),k=(0,o.useRef)(),P=e=>{null!=e&&R.current&&R.current(e)},E=(0,o.useCallback)((e=>{if(y.current=e,w.current=e?i.createBean(new zh):i.destroyBean(w.current),!e||!t.isAlive())return;k.current=new Kh((e=>{R.current=e}));const n={toggleCss:(e,t)=>l((i=>i.setClass(e,t))),setUserStyles:e=>r(e),addOrRemoveBodyCssClass:(e,t)=>c((i=>i.setClass(e,t))),setButtonWrapperDisplayed:e=>{p((t=>t.setClass("ag-hidden",!e))),m(e?"false":"true")},setWidth:e=>{y.current&&(y.current.style.width=e)},setCompDetails:e=>v(e),getFloatingFilterComp:()=>k.current?k.current:null,setMenuIcon:e=>{var t;return null===(t=S.current)||void 0===t?void 0:t.appendChild(e)}};t.setComp(n,e,S.current,x.current,w.current)}),[]);(0,o.useLayoutEffect)((()=>mk(f,i,x.current,P)),[f]);const F=(0,o.useMemo)((()=>a.toString()),[a]),D=(0,o.useMemo)((()=>d.toString()),[d]),N=(0,o.useMemo)((()=>h.toString()),[h]),M=(0,o.useMemo)((()=>!!(f&&f.componentFromFramework&&wk(f.componentClass))),[f]),T=(0,o.useMemo)((()=>n.get("reactiveCustomComponents")),[]),j=(0,o.useMemo)((()=>n.get("enableFilterHandlers")),[]),[A,I]=(0,o.useState)();(0,o.useEffect)((()=>{if(null!==f&&void 0!==f&&f.componentFromFramework)if(T){const e=new(j?Jk:zk)(f.params,(()=>b((e=>e+1))));P(e),I(e)}else Qk()}),[f]);const L=null===A||void 0===A?void 0:A.getProps(),_=null===f||void 0===f?void 0:f.componentFromFramework,O=null===f||void 0===f?void 0:f.componentClass;return o.createElement("div",{ref:E,style:s,className:F,role:"gridcell"},o.createElement("div",{ref:x,className:D,role:"presentation"},_?T?L&&o.createElement(Ek.Provider,{value:{setMethods:e=>A.setMethods(e)}},o.createElement(O,u({},L))):o.createElement(O,u(u({},f.params),{},{ref:M?()=>{}:P})):null),o.createElement("div",{ref:C,"aria-hidden":g,className:N,role:"presentation"},o.createElement("button",{ref:S,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),eP=(0,o.memo)((e=>{let{ctrl:t}=e;const{context:i}=(0,o.useContext)(pk),[n,s]=(0,o.useState)(),[r,a]=(0,o.useState)((()=>new bk)),[l,d]=(0,o.useState)((()=>new bk)),[c,h]=(0,o.useState)("false"),[p,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),v=(0,o.useMemo)((()=>t.column.getUniqueId()),[]),b=(0,o.useRef)(),w=(0,o.useRef)(null),y=(0,o.useRef)(null),x=(0,o.useRef)(null),C=(0,o.useRef)(),S=(0,o.useCallback)((e=>{if(w.current=e,b.current=e?i.createBean(new zh):i.destroyBean(b.current),!e||!t.isAlive())return;const n={setWidth:e=>{w.current&&(w.current.style.width=e)},toggleCss:(e,t)=>a((i=>i.setClass(e,t))),setUserStyles:e=>s(e),setHeaderWrapperHidden:e=>{const t=x.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=x.current;t&&(null!=e?t.style.setProperty("max-height","".concat(e,"px")):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>f(e),setResizableDisplayed:e=>{d((t=>t.setClass("ag-hidden",!e))),h(e?"false":"true")},setAriaExpanded:e=>g(e),getUserCompInstance:()=>C.current||void 0};t.setComp(n,e,y.current,x.current,b.current)}),[]);(0,o.useLayoutEffect)((()=>mk(m,i,x.current)),[m]),(0,o.useEffect)((()=>{w.current&&t.setDragSource(w.current)}),[m]);const R=(0,o.useMemo)((()=>!!((null===m||void 0===m?void 0:m.componentFromFramework)&&wk(m.componentClass))),[m]),k=(0,o.useMemo)((()=>"ag-header-group-cell "+r.toString()),[r]),P=(0,o.useMemo)((()=>"ag-header-cell-resize "+l.toString()),[l]),E=null===m||void 0===m?void 0:m.componentFromFramework,F=null===m||void 0===m?void 0:m.componentClass;return o.createElement("div",{ref:S,style:n,className:k,"col-id":v,role:"columnheader","aria-expanded":p},o.createElement("div",{ref:x,className:"ag-header-cell-comp-wrapper",role:"presentation"},E?R?o.createElement(F,u({},m.params)):o.createElement(F,u(u({},m.params),{},{ref:C})):null),o.createElement("div",{ref:y,"aria-hidden":c,className:P}))})),tP=(0,o.memo)((e=>{let{ctrl:t}=e;const{context:i}=(0,o.useContext)(pk),{topOffset:n,rowHeight:s}=(0,o.useMemo)((()=>t.getTopAndHeight()),[]),[r,a]=(0,o.useState)((()=>t.getAriaRowIndex())),l=t.headerRowClass,[d,c]=(0,o.useState)((()=>s+"px")),[u,h]=(0,o.useState)((()=>n+"px")),p=(0,o.useRef)(null),[g,m]=(0,o.useState)((()=>t.getUpdatedHeaderCtrls())),f=(0,o.useRef)(),v=(0,o.useRef)(null),b=(0,o.useCallback)((e=>{if(v.current=e,f.current=e?i.createBean(new zh):i.destroyBean(f.current),!e)return;const n={setHeight:e=>c(e),setTop:e=>h(e),setHeaderCtrls:(e,t,i)=>{const n=p.current,o=Rk(n,e,t);o!==n&&(p.current=o,Sk(i,(()=>m(o))))},setWidth:e=>{v.current&&(v.current.style.width=e)},setRowIndex:e=>{a(e)}};t.setComp(n,f.current,!1)}),[]),w=(0,o.useMemo)((()=>({height:d,top:u})),[d,u]),y=(0,o.useCallback)((e=>{switch(t.type){case"group":return o.createElement(eP,{ctrl:e,key:e.instanceId});case"filter":return o.createElement(Zk,{ctrl:e,key:e.instanceId});default:return o.createElement(Xk,{ctrl:e,key:e.instanceId})}}),[]);return o.createElement("div",{ref:b,className:l,role:"row",style:w,"aria-rowindex":r},g.map(y))})),iP=(0,o.memo)((e=>{let{pinned:t}=e;const[i,n]=(0,o.useState)(!0),[s,r]=(0,o.useState)([]),{context:a}=(0,o.useContext)(pk),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(),u="left"===t,h="right"===t,p=!u&&!h,g=(0,o.useCallback)((e=>{if(l.current=e,c.current=e?a.createBean(new ov(t)):a.destroyBean(c.current),!e)return;const i={setDisplayed:n,setCtrls:e=>r(e),setCenterWidth:e=>{d.current&&(d.current.style.width=e)},setViewportScrollLeft:e=>{l.current&&(l.current.scrollLeft=e)},setPinnedContainerWidth:e=>{l.current&&(l.current.style.width=e,l.current.style.minWidth=e,l.current.style.maxWidth=e)}};c.current.setComp(i,l.current)}),[]),m=i?"":"ag-hidden",f=()=>s.map((e=>o.createElement(tP,{ctrl:e,key:e.instanceId})));return u?o.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!i,role:"rowgroup"},f()):h?o.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!i,role:"rowgroup"},f()):p?o.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"presentation",tabIndex:-1},o.createElement("div",{ref:d,className:"ag-header-container",role:"rowgroup"},f())):null})),nP=(0,o.memo)((()=>{const[e,t]=(0,o.useState)((()=>new bk)),[i,n]=(0,o.useState)(),{context:s}=(0,o.useContext)(pk),r=(0,o.useRef)(null),a=(0,o.useRef)(),l=(0,o.useCallback)((e=>{if(r.current=e,a.current=e?s.createBean(new Qf):s.destroyBean(a.current),!e)return;const i={toggleCss:(e,i)=>t((t=>t.setClass(e,i))),setHeightAndMinHeight:e=>n(e)};a.current.setComp(i,e,e)}),[]),d=(0,o.useMemo)((()=>"ag-header "+e.toString()),[e]),c=(0,o.useMemo)((()=>({height:i,minHeight:i})),[i]);return o.createElement("div",{ref:l,className:d,style:c,role:"presentation"},o.createElement(iP,{pinned:"left"}),o.createElement(iP,{pinned:null}),o.createElement(iP,{pinned:"right"}))})),oP=(e,t)=>{(0,o.useEffect)((()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const n=document.createComment(e);return t.insertBefore(n,i),()=>{t.removeChild(n)}}}}),[e])},sP=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Kh((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return u(u({},this.cellEditorParams),{},{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Tk(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},rP=(0,o.memo)((e=>{const[t,i]=(0,o.useState)(),n=(0,o.useContext)(pk),{context:s,popupSvc:r,gos:a,editSvc:l}=n,{editDetails:d,cellCtrl:c,eParentCell:u}=e;return(e=>{const t=(0,o.useRef)(e),i=(0,o.useRef)(),n=(0,o.useRef)(!1),s=(0,o.useRef)(!1),[,r]=(0,o.useState)(0);n.current&&(s.current=!0),(0,o.useEffect)((()=>(n.current||(i.current=t.current(),n.current=!0),r((e=>e+1)),()=>{var e;s.current&&(null===(e=i.current)||void 0===e||e.call(i))})),[])})((()=>{var t,n;const{compDetails:o}=d,h=a.get("stopEditingWhenCellsLoseFocus"),p=s.createBean(l.createPopupEditorWrapper(o.params)),g=p.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&g.appendChild(t)}const{column:m,rowNode:f}=c,v={column:m,rowNode:f,type:"popupCellEditor",eventSource:u,ePopup:g,position:d.popupPosition,keepWithinBounds:!0},b=null===r||void 0===r?void 0:r.positionPopupByComponent.bind(r,v),w=null===r||void 0===r?void 0:r.addPopup({modal:h,eChild:g,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:u,positionCallback:b,ariaOwns:u}),y=w?w.hideFunc:void 0;return i(p),null===(t=e.jsChildComp)||void 0===t||null===(n=t.afterGuiAttached)||void 0===n||n.call(t),()=>{null===y||void 0===y||y(),s.destroyBean(p)}})),(0,o.useLayoutEffect)((()=>()=>{c.isCellFocused()&&null!==t&&void 0!==t&&t.getGui().contains(iu(n))&&u.focus({preventScroll:!0})}),[t]),t&&e.wrappedContent?(0,ck.createPortal)(e.wrappedContent,t.getGui()):null})),aP=(e,t,i)=>e.compProxy?((e,t,i)=>{const{compProxy:n}=e;i(n);const s=n.getProps(),r=wk(t);return o.createElement(Ek.Provider,{value:{setMethods:e=>n.setMethods(e)}},r?o.createElement(t,u({},s)):o.createElement(t,u(u({},s),{},{ref:e=>n.setRef(e)})))})(e,t,i):o.createElement(t,u(u({},e.compDetails.params),{},{ref:i})),lP=(e,t,i,n,s,r)=>{const{context:a}=(0,o.useContext)(pk),l=(0,o.useCallback)((()=>{const e=s.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),s.current=void 0}),[]);(0,o.useEffect)((()=>{const n=null!=e,o=(null===e||void 0===e?void 0:e.compDetails)&&!e.compDetails.componentFromFramework;if(!(n&&o&&!(t&&null==i)))return void l();const a=e.compDetails;if(s.current){const t=s.current,i=!!(null!=t.refresh&&0==e.force)&&t.refresh(a.params);if(!0===i||void 0===i)return;l()}a.newAgStackInstance().then((e=>{if(!e)return;const n=e.getGui();if(!n)return;(t?i:r.current).appendChild(n),s.current=e}))}),[e,t,n]),(0,o.useEffect)((()=>l),[])},dP=e=>{var t;let{cellCtrl:i,parent:n}=e;const s=(0,o.useRef)(),r=(0,o.useMemo)((()=>{const{loadingComp:e}=i.getDeferLoadingCellRenderer();return e?{value:void 0,compDetails:e,force:!1}:void 0}),[i]);if(lP(r,!1,void 0,1,s,n),null!==r&&void 0!==r&&null!==(t=r.compDetails)&&void 0!==t&&t.componentFromFramework){const e=r.compDetails.componentClass;return o.createElement(e,u({},r.compDetails.params))}return o.createElement(o.Fragment,null)},cP=(0,o.memo)((e=>{let{cellCtrl:t,printLayout:i,editingCell:n}=e;const s=(0,o.useContext)(pk),{context:r}=s,{column:{colIdSanitised:a},instanceId:l}=t,d=(0,o.useRef)(),[c,h]=(0,o.useState)((()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1})),[p,g]=(0,o.useState)(),[m,f]=(0,o.useState)(1),[v,b]=(0,o.useState)(),[w,y]=(0,o.useState)(!1),[x,C]=(0,o.useState)(!1),[S,R]=(0,o.useState)(!1),[k,P]=(0,o.useState)(),E=(0,o.useMemo)((()=>t.isForceWrapper()),[t]),F=(0,o.useMemo)((()=>t.getCellAriaRole()),[t]),D=(0,o.useRef)(null),N=(0,o.useRef)(null),M=(0,o.useRef)(null),T=(0,o.useRef)(),j=(0,o.useRef)(),A=(0,o.useRef)(),I=(0,o.useRef)([]),L=(0,o.useRef)(),[_,O]=(0,o.useState)(0),B=(0,o.useCallback)((e=>{L.current=e,O((e=>e+1))}),[]),z=null!=c&&(w||S||x)&&(null==p||!!p.popup),V=E||z,H=(0,o.useCallback)((e=>{if(j.current=e,e){const i=e.isCancelBeforeStart&&e.isCancelBeforeStart();setTimeout((()=>{i?(t.stopEditing(!0),t.focusCell(!0)):(t.cellEditorAttached(),t.enableEditorTooltipFeature(e))}))}}),[t]),G=(0,o.useRef)();G.current||(G.current=new Hh((()=>D.current))),lP(c,V,L.current,_,T,D);const W=(0,o.useRef)();(0,o.useLayoutEffect)((()=>{var e;const t=W.current,i=c;if(W.current=c,null==t||null==t.compDetails||null==i||null==i.compDetails)return;const n=t.compDetails,o=i.compDetails;if(n.componentClass!=o.componentClass)return;if(null==(null===(e=M.current)||void 0===e?void 0:e.refresh))return;1!=M.current.refresh(o.params)&&f((e=>e+1))}),[c]),(0,o.useLayoutEffect)((()=>{if(!(p&&!p.compDetails.componentFromFramework))return;const e=p.compDetails,i=!0===p.popup,n=e.newAgStackInstance();return n.then((e=>{if(!e)return;const t=e.getGui();if(H(e),!i){const i=(E?A:D).current;null===i||void 0===i||i.appendChild(t),e.afterGuiAttached&&e.afterGuiAttached()}P(e)})),()=>{n.then((e=>{var i;const n=e.getGui();t.disableEditorTooltipFeature(),r.destroyBean(e),H(void 0),P(void 0),null===n||void 0===n||null===(i=n.parentElement)||void 0===i||i.removeChild(n)}))}}),[p]);const U=(0,o.useCallback)((e=>{if(A.current=e,!e)return I.current.forEach((e=>e())),void(I.current=[]);const i=t=>{if(t){const i=t.getGui();e.insertAdjacentElement("afterbegin",i),I.current.push((()=>{r.destroyBean(t),$d(i)}))}return t};if(w){i(t.createSelectionCheckbox())}S&&i(t.createDndSource()),x&&i(t.createRowDragComp())}),[t,r,S,x,w]),q=(0,o.useCallback)((()=>{var e;const s=!t.isCellSpanning()||N.current,a=D.current;if(d.current=a?r.createBean(new zh):r.destroyBean(d.current),!a||!s||!t)return;const l={toggleCss:(e,t)=>G.current.toggleCss(e,t),setUserStyles:e=>b(e),getFocusableElement:()=>D.current,setIncludeSelection:e=>y(e),setIncludeRowDrag:e=>C(e),setIncludeDndSource:e=>R(e),getCellEditor:()=>j.current||null,getCellRenderer:()=>{var e;return null!==(e=M.current)&&void 0!==e?e:T.current},getParentOfValue:()=>{var e,t;return null!==(e=null!==(t=L.current)&&void 0!==t?t:A.current)&&void 0!==e?e:D.current},setRenderDetails:(e,i,n)=>{var s;const r=()=>{h((t=>(null===t||void 0===t?void 0:t.compDetails)!==e||(null===t||void 0===t?void 0:t.value)!==i||(null===t||void 0===t?void 0:t.force)!==n?{value:i,compDetails:e,force:n}:t))};if(null!==e&&void 0!==e&&null!==(s=e.params)&&void 0!==s&&s.deferRender&&!t.rowNode.group){const{loadingComp:e,onReady:i}=t.getDeferLoadingCellRenderer();if(e)return h({value:void 0,compDetails:e,force:!1}),void i.then((()=>{return e=r,void(xk?e():o.startTransition(e));var e}))}r()},setEditDetails:(e,i,n,o)=>{if(e){let t;e.componentFromFramework&&(o?t=new sP(e.params,(()=>f((e=>e+1)))):Qk()),g({compDetails:e,popup:i,popupPosition:n,compProxy:t}),i||h(void 0)}else{t.hasBrowserFocus()&&l.getFocusableElement().focus({preventScroll:!0}),g((e=>{null!==e&&void 0!==e&&e.compProxy&&(j.current=void 0)}))}},refreshEditStyles:(e,t)=>{if(!D.current)return;const{current:i}=G;i.toggleCss("ag-cell-value",!V),i.toggleCss("ag-cell-inline-editing",!!e&&!t),i.toggleCss("ag-cell-popup-editing",!!e&&!!t),i.toggleCss("ag-cell-not-inline-editing",!e||!!t)}},c=A.current||void 0;t.setComp(l,a,null!==(e=N.current)&&void 0!==e?e:void 0,c,i,n,d.current)}),[]),K=(0,o.useCallback)((e=>{D.current=e,q()}),[]),Y=(0,o.useCallback)((e=>{N.current=e,q()}),[]),Q=(0,o.useMemo)((()=>{var e;return!!((null===c||void 0===c||null===(e=c.compDetails)||void 0===e?void 0:e.componentFromFramework)&&wk(c.compDetails.componentClass))}),[c]);(0,o.useLayoutEffect)((()=>{if(!D.current)return;const{current:e}=G;e.toggleCss("ag-cell-value",!V),e.toggleCss("ag-cell-inline-editing",!!p&&!p.popup),e.toggleCss("ag-cell-popup-editing",!!p&&!!p.popup),e.toggleCss("ag-cell-not-inline-editing",!p||!!p.popup)}));const $=()=>{const{compDetails:e,value:i}=c;var n,s;if(!e)return null!==(n=null===i||void 0===i||null===(s=i.toString)||void 0===s?void 0:s.call(i))&&void 0!==n?n:i;if(e.componentFromFramework){const i=e.componentClass;return o.createElement(o.Suspense,{fallback:o.createElement(dP,{cellCtrl:t,parent:D})},Q?o.createElement(i,u(u({},e.params),{},{key:m})):o.createElement(i,u(u({},e.params),{},{key:m,ref:M})))}},X=()=>{const e=()=>null==c?null:V?o.createElement("span",{role:"presentation",id:"cell-".concat(l),className:"ag-cell-value",ref:B},$()):$(),i=e=>((e,t,i,n,s)=>{const r=e.compDetails,a=r.componentClass,l=r.componentFromFramework&&!e.popup,d=r.componentFromFramework&&e.popup,c=!r.componentFromFramework&&e.popup;return l?aP(e,a,t):d?o.createElement(rP,{editDetails:e,cellCtrl:n,eParentCell:i,wrappedContent:aP(e,a,t)}):c&&s?o.createElement(rP,{editDetails:e,cellCtrl:n,eParentCell:i,jsChildComp:s}):null})(e,H,D.current,t,k);return null!=p?p.popup?o.createElement(o.Fragment,null,e(),i(p)):i(p):e()},J=()=>o.createElement("div",{ref:K,style:v,role:F,"col-id":a},V?o.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:U},X()):X());return t.isCellSpanning()?o.createElement("div",{ref:Y,className:"ag-spanned-cell-wrapper",role:"presentation"},J()):J()})),uP=(0,o.memo)((e=>{let{rowCtrl:t,containerType:i}=e;const{context:n,gos:s,editSvc:r}=(0,o.useContext)(pk),a="default"===(0,o.useContext)(gk),l=(0,o.useRef)(),d=(0,o.useRef)(t.getDomOrder()),c=t.isFullWidth(),h=t.rowNode.displayed,[p,g]=(0,o.useState)((()=>h?t.rowNode.getRowIndexString():null)),[m,f]=(0,o.useState)((()=>t.rowId)),[v,b]=(0,o.useState)((()=>t.businessKey)),[w,y]=(0,o.useState)((()=>t.rowStyles)),x=(0,o.useRef)(null),[C,S]=(0,o.useState)((()=>null)),[R,k]=(0,o.useState)(),[P,E]=(0,o.useState)((()=>h?t.getInitialRowTop(i):void 0)),[F,D]=(0,o.useState)((()=>h?t.getInitialTransform(i):void 0)),N=(0,o.useRef)(null),M=(0,o.useRef)(),T=(0,o.useRef)(!1),[j,A]=(0,o.useState)(0);(0,o.useEffect)((()=>{var e;if(T.current||!R||j>10)return;const i=null===(e=N.current)||void 0===e?void 0:e.firstChild;i?(t.setupDetailRowAutoHeight(i),T.current=!0):A((e=>e+1))}),[R,j]);const I=(0,o.useRef)();I.current||(I.current=new Hh((()=>N.current)));const L=(0,o.useRef)((()=>{})),_=(0,o.useCallback)((e=>(L.current=e,()=>{L.current=()=>{}})),[]),O=(B=_,z=()=>x.current,V=[],o.useSyncExternalStore?o.useSyncExternalStore(B,z):V);var B,z,V;const H=a?O:C,G=(0,o.useCallback)((e=>{if(N.current=e,l.current=e?n.createBean(new zh):n.destroyBean(l.current),!e)return void t.unsetComp(i);if(!t.isAlive())return;const o={setTop:E,setTransform:D,toggleCss:(e,t)=>I.current.toggleCss(e,t),setDomOrder:e=>d.current=e,setRowIndex:g,setRowId:f,setRowBusinessKey:b,setUserStyles:y,setCellCtrls:(e,t)=>{const i=x.current,n=Rk(i,e,d.current);n!==i&&(x.current=n,a?L.current():Sk(t,(()=>S(n))))},showFullWidth:e=>k(e),getFullWidthCellRenderer:()=>M.current,refreshFullWidth:e=>Y.current?(k((t=>u(u({},t),{},{params:e()}))),!0):!(!M.current||!M.current.refresh)&&M.current.refresh(e())};t.setComp(o,e,i,l.current)}),[]);(0,o.useLayoutEffect)((()=>mk(R,n,N.current,M)),[R]);const W=(0,o.useMemo)((()=>{const e={top:P,transform:F};return Object.assign(e,w),e}),[P,F,w]),U=c&&(null===R||void 0===R?void 0:R.componentFromFramework),q=!c&&null!=H,K=(0,o.useMemo)((()=>!!((null===R||void 0===R?void 0:R.componentFromFramework)&&wk(R.componentClass))),[R]),Y=(0,o.useRef)(!1);(0,o.useEffect)((()=>{Y.current=K&&!!R&&!!s.get("reactiveCustomComponents")}),[K,R]);return o.createElement("div",{ref:G,role:"row",style:W,"row-index":p,"row-id":m,"row-business-key":v},q?null===H||void 0===H?void 0:H.map((e=>{var i;return o.createElement(cP,{cellCtrl:e,editingCell:null!==(i=null===r||void 0===r?void 0:r.isEditing(e,{withOpenEditor:!0}))&&void 0!==i&&i,printLayout:t.printLayout,key:e.instanceId})})):U?(()=>{const e=R.componentClass;return K?o.createElement(e,u({},R.params)):o.createElement(e,u(u({},R.params),{},{ref:M}))})():null)})),hP=(0,o.memo)((e=>{let{name:t}=e;const{context:i,gos:n}=(0,o.useContext)(pk),s=(0,o.useMemo)((()=>kf(t)),[t]),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)([]),c=(0,o.useRef)([]),[u,h]=(0,o.useState)((()=>[])),p=!!n.get("enableCellSpan")&&!!s.getSpannedRowCtrls,g=(0,o.useRef)([]),m=(0,o.useRef)([]),[f,v]=(0,o.useState)((()=>[])),b=(0,o.useRef)(!1),w=(0,o.useRef)(),y=(0,o.useMemo)((()=>vk("ag-viewport",Cf(t))),[t]),x=(0,o.useMemo)((()=>vk(Sf(t))),[t]),C=(0,o.useMemo)((()=>vk("ag-spanning-container",Rf(t))),[t]),S="center"===s.type||p;oP(" AG Row Container "+t+" ",S?r:a);const R=(0,o.useCallback)((()=>{const e=!S||null!=r.current,t=null!=a.current,i=!p||null!=l.current;return e&&t&&i}),[]),k=(0,o.useCallback)((()=>null==r.current&&null==a.current&&null==l.current),[]),P=(0,o.useCallback)((()=>{if(k()&&(w.current=i.destroyBean(w.current)),R()){var e;const n=e=>{const t=Rk(c.current,d.current,b.current);t!==c.current&&(c.current=t,Sk(e,(()=>h(t))))},o=e=>{const t=Rk(m.current,g.current,b.current);t!==m.current&&(m.current=t,Sk(e,(()=>v(t))))},s={setHorizontalScroll:e=>{r.current&&(r.current.scrollLeft=e)},setViewportHeight:e=>{r.current&&(r.current.style.height=e)},setRowCtrls:e=>{let{rowCtrls:t,useFlushSync:i}=e;const o=!!i&&d.current.length>0&&t.length>0;d.current=t,n(o)},setSpannedRowCtrls:(e,t)=>{const i=!!t&&g.current.length>0&&e.length>0;g.current=e,o(i)},setDomOrder:e=>{b.current!=e&&(b.current=e,n(!1))},setContainerWidth:e=>{a.current&&(a.current.style.width=e)},setOffsetTop:e=>{a.current&&(a.current.style.transform="translateY(".concat(e,")"))}};w.current=i.createBean(new Af(t)),w.current.setComp(s,a.current,null!==(e=l.current)&&void 0!==e?e:void 0,r.current)}}),[R,k]),E=(0,o.useCallback)((e=>{a.current=e,P()}),[P]),F=(0,o.useCallback)((e=>{l.current=e,P()}),[P]),D=(0,o.useCallback)((e=>{r.current=e,P()}),[P]),N=()=>o.createElement("div",{className:x,ref:E,role:"rowgroup"},u.map((e=>o.createElement(uP,{rowCtrl:e,containerType:s.type,key:e.instanceId}))));if(!S)return N();return o.createElement("div",{className:y,ref:D,role:"presentation"},N(),p?o.createElement("div",{className:C,ref:F,role:"rowgroup"},f.map((e=>o.createElement(uP,{rowCtrl:e,containerType:s.type,key:e.instanceId})))):null)})),pP=(0,o.memo)((()=>{const e=(0,o.useContext)(pk),{context:t,overlays:i}=e,[n,s]=(0,o.useState)(""),[r,a]=(0,o.useState)(0),[l,d]=(0,o.useState)(0),[c,u]=(0,o.useState)("0px"),[h,p]=(0,o.useState)("0px"),[g,m]=(0,o.useState)("100%"),[f,v]=(0,o.useState)("0px"),[b,w]=(0,o.useState)("0px"),[y,x]=(0,o.useState)("100%"),[C,S]=(0,o.useState)(!0),[R,k]=(0,o.useState)(!0),[P,E]=(0,o.useState)(null),[F,D]=(0,o.useState)(""),[N,M]=(0,o.useState)(null),[T,j]=(0,o.useState)("ag-layout-normal"),A=(0,o.useRef)();A.current||(A.current=new Hh((()=>I.current)));const I=(0,o.useRef)(null),L=(0,o.useRef)(null),_=(0,o.useRef)(null),O=(0,o.useRef)(null),B=(0,o.useRef)(null),z=(0,o.useRef)(null),V=(0,o.useRef)(null),H=(0,o.useRef)([]),G=(0,o.useRef)([]);oP(" AG Grid Body ",I),oP(" AG Pinned Top ",L),oP(" AG Sticky Top ",_),oP(" AG Middle ",z),oP(" AG Pinned Bottom ",V);const W=(0,o.useCallback)((n=>{if(I.current=n,!n)return H.current=t.destroyBeans(H.current),G.current.forEach((e=>e())),void(G.current=[]);if(!t)return;const o=(e,t)=>{e.appendChild(t),G.current.push((()=>e.removeChild(t)))},r=(e,i,n)=>{o(e,document.createComment(n)),o(e,(e=>{const i=t.createBean(new e);return H.current.push(i),i})(i).getGui())};r(n,Bf," AG Fake Horizontal Scroll ");const l=null===i||void 0===i?void 0:i.getOverlayWrapperCompClass();l&&r(n,l," AG Overlay Wrapper "),B.current&&r(B.current,Vf," AG Fake Vertical Scroll ");const c={setRowAnimationCssOnBodyViewport:s,setColumnCount:e=>{I.current&&xd(I.current,e)},setRowCount:e=>{I.current&&wd(I.current,e)},setTopHeight:a,setBottomHeight:d,setStickyTopHeight:u,setStickyTopTop:p,setStickyTopWidth:m,setTopInvisible:S,setBottomInvisible:k,setColumnMovingCss:(e,t)=>A.current.toggleCss(e,t),updateLayoutClasses:j,setAlwaysVerticalScrollClass:E,setPinnedTopBottomOverflowY:D,setCellSelectableCss:(e,t)=>M(t?e:null),setBodyViewportWidth:e=>{z.current&&(z.current.style.width=e)},registerBodyViewportResizeListener:t=>{if(z.current){const i=dc(e,z.current,t);G.current.push((()=>i()))}},setStickyBottomHeight:v,setStickyBottomBottom:w,setStickyBottomWidth:x,setGridRootRole:e=>n.setAttribute("role",e)},h=t.createBean(new Lf);H.current.push(h),h.setComp(c,n,z.current,L.current,V.current,_.current,O.current)}),[]),U=(0,o.useMemo)((()=>vk("ag-root","ag-unselectable",T)),[T]),q=(0,o.useMemo)((()=>vk("ag-body-viewport",n,T,P,N)),[n,T,P,N]),K=(0,o.useMemo)((()=>vk("ag-body",T)),[T]),Y=(0,o.useMemo)((()=>vk("ag-floating-top",C?"ag-invisible":null,N)),[N,C]),Q=(0,o.useMemo)((()=>vk("ag-sticky-top",N)),[N]),$=(0,o.useMemo)((()=>vk("ag-sticky-bottom","0px"===f?"ag-invisible":null,N)),[N,f]),X=(0,o.useMemo)((()=>vk("ag-floating-bottom",R?"ag-invisible":null,N)),[N,R]),J=(0,o.useMemo)((()=>({height:r,minHeight:r,overflowY:F})),[r,F]),Z=(0,o.useMemo)((()=>({height:c,top:h,width:g})),[c,h,g]),ee=(0,o.useMemo)((()=>({height:f,bottom:b,width:y})),[f,b,y]),te=(0,o.useMemo)((()=>({height:l,minHeight:l,overflowY:F})),[l,F]),ie=e=>o.createElement(hP,{name:e,key:"".concat(e,"-container")}),ne=e=>{let{section:t,children:i,className:n,style:s}=e;return o.createElement("div",{ref:t,className:n,role:"presentation",style:s},i.map(ie))};return o.createElement("div",{ref:W,className:U},o.createElement(nP,null),ne({section:L,className:Y,style:J,children:["topLeft","topCenter","topRight","topFullWidth"]}),o.createElement("div",{className:K,ref:B,role:"presentation"},ne({section:z,className:q,children:["left","center","right","fullWidth"]})),ne({section:_,className:Q,style:Z,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ne({section:O,className:$,style:ee,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ne({section:V,className:X,style:te,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))})),gP=(0,o.forwardRef)(((e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:s,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:l}=e,{context:d}=(0,o.useContext)(pk),c=(0,o.useRef)(null),u=(0,o.useRef)(null),h=(0,o.useRef)(),p=e=>{const t=null==e?void 0:parseInt(e,10).toString();[c,u].forEach((e=>{var i,n;void 0===t?null===(i=e.current)||void 0===i||i.removeAttribute("tabindex"):null===(n=e.current)||void 0===n||n.setAttribute("tabindex",t)}))};(0,o.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){var t;null===(t=h.current)||void 0===t||t.forceFocusOutOfContainer(e)}})));const g=(0,o.useCallback)((()=>{const e=c.current,t=u.current;if(e||t){if(e&&t){const i={setTabIndex:p};h.current=d.createBean(new nb({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:n,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>r.focusInnerElement(e),isEmpty:l}))}}else h.current=d.destroyBean(h.current)}),[]),m=(0,o.useCallback)((e=>{c.current=e,g()}),[g]),f=(0,o.useCallback)((e=>{u.current=e,g()}),[g]),v=e=>{const t="top"===e?tb:ib;return o.createElement("div",{className:"".concat(eb," ").concat(t),role:"presentation",ref:"top"===e?m:f})};return o.createElement(o.Fragment,null,v("top"),i,v("bottom"))})),mP=(0,o.memo)(gP),fP=(0,o.memo)((e=>{let{context:t}=e;const[i,n]=(0,o.useState)(""),[s,r]=(0,o.useState)(""),[a,l]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),[u,h]=(0,o.useState)(!1),[p,g]=(0,o.useState)(),m=(0,o.useRef)(),f=(0,o.useRef)(null),v=(0,o.useRef)(),[b,w]=(0,o.useState)(null),y=(0,o.useRef)((()=>{})),x=(0,o.useRef)(),C=(0,o.useRef)([]),S=(0,o.useCallback)((()=>{}),[]),R=(0,o.useMemo)((()=>t.isDestroyed()?null:t.getBeans()),[t]);oP(" AG Grid ",f);const k=(0,o.useCallback)((e=>{if(f.current=e,m.current=e?t.createBean(new pb):t.destroyBean(m.current),!e||t.isDestroyed())return;const i=m.current;y.current=i.focusInnerElement.bind(i);const o={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:e=>{var t,i;e||null===(t=x.current)||void 0===t||!t.isDisplayed()?null===(i=v.current)||void 0===i||i.forceFocusOutOfContainer(e):x.current.forceFocusOutOfContainer(e)},updateLayoutClasses:r,getFocusableContainers:()=>{var e;const t=[],i=null===(e=f.current)||void 0===e?void 0:e.querySelector(".ag-root");return i&&t.push({getGui:()=>i}),C.current.forEach((e=>{e.isDisplayed()&&t.push(e)})),t},setCursor:l,setUserSelect:c};i.setComp(o,e,e),h(!0)}),[]);(0,o.useEffect)((()=>{const e=m.current,i=f.current;if(!p||!R||!e||!b||!i||t.isDestroyed())return;const n=[],{watermarkSelector:o,paginationSelector:s,sideBarSelector:r,statusBarSelector:a,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),d=[];if(l){const e=t.createBean(new l.component),o=e.getGui();i.insertAdjacentElement("afterbegin",o),d.push(o),n.push(e)}if(r){const e=t.createBean(new r.component),i=e.getGui(),o=b.querySelector(".ag-tab-guard-bottom");o&&(o.insertAdjacentElement("beforebegin",i),d.push(i)),n.push(e),C.current.push(e)}const c=e=>{const o=t.createBean(new e),s=o.getGui();return i.insertAdjacentElement("beforeend",s),d.push(s),n.push(o),o};if(a&&c(a.component),s){const e=c(s.component);x.current=e,C.current.push(e)}return o&&c(o.component),()=>{t.destroyBeans(n),d.forEach((e=>{var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)}))}}),[p,b,R]);const P=(0,o.useMemo)((()=>vk("ag-root-wrapper",i,s)),[i,s]),E=(0,o.useMemo)((()=>vk("ag-root-wrapper-body","ag-focus-managed",s)),[s]),F=(0,o.useMemo)((()=>({userSelect:null!=d?d:"",WebkitUserSelect:null!=d?d:"",cursor:null!=a?a:""})),[d,a]),D=(0,o.useCallback)((e=>{v.current=e,g(null!==e)}),[]),N=(0,o.useCallback)((()=>{var e;return!(null!==(e=m.current)&&void 0!==e&&e.isFocusable())}),[]);return o.createElement("div",{ref:k,className:P,style:F,role:"presentation"},o.createElement("div",{className:E,ref:w,role:"presentation"},u&&b&&R&&o.createElement(pk.Provider,{value:R},o.createElement(mP,{ref:D,eFocusableElement:b,onTabKeyDown:S,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:N},o.createElement(pP,null)))))})),vP=class extends Vu{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},bP={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},wP=u({gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0},bP),yP=new Set(Object.keys(wP)),xP=new Set(Object.keys(bP)),CP=e=>{var t,i;const n=(0,o.useRef)(),s=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)([]),l=(0,o.useRef)([]),d=(0,o.useRef)(e),c=(0,o.useRef)(),h=(0,o.useRef)(),p=(0,o.useRef)(!1),[g,m]=(0,o.useState)(void 0),[,f]=(0,o.useState)(0),v=(0,o.useCallback)((t=>{var i;if(s.current=t,!t)return a.current.forEach((e=>e())),void(a.current.length=0);const o=e.modules||[];r.current||(r.current=new $k((()=>f((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),a.current.push((()=>{var e;null===(e=r.current)||void 0===e||e.destroy(),r.current=null})));const d=function(e,t,i){"object"!==typeof e&&(e={});const n=u({},e);return i.forEach((e=>{const i=t[e];"undefined"!==typeof i&&(n[e]=i)})),n}(e.gridOptions,e,Object.keys(e).filter((e=>!yP.has(e)))),g=new kP((()=>{if(p.current){const e=()=>{var e;return null!==(e=c.current)&&void 0!==e&&e.shouldQueueUpdates()?void 0:l.current.shift()};let t=e();for(;t;)t(),t=e()}}));c.current=g;const v=new vP,b={providedBeanInstances:{frameworkCompWrapper:new SP(r.current,d),renderStatus:v},modules:o,frameworkOverrides:g,setThemeOnGridDiv:!0},w=new Zx;null!==(i=d.gridId)&&void 0!==i||(d.gridId=h.current),n.current=w.create(t,d,(t=>{m(t),t.createBean(v),a.current.push((()=>{t.destroy()})),t.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},(()=>{if(t.isDestroyed())return;const i=n.current;var o;i&&(null===(o=e.passGridApi)||void 0===o||o.call(e,i))}))}),(e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{a.current.push(e)}},(()=>{l.current.forEach((e=>e())),l.current.length=0,p.current=!0}))}),b),a.current.push((()=>{n.current=void 0})),n.current&&(h.current=n.current.getGridId())}),[]),b=(0,o.useMemo)((()=>u({height:"100%"},e.containerStyle||{})),[e.containerStyle]),w=(0,o.useCallback)((e=>{var t;!p.current||null!==(t=c.current)&&void 0!==t&&t.shouldQueueUpdates()?l.current.push(e):e()}),[]);(0,o.useEffect)((()=>{const t=function(e,t){const i={};return Object.keys(t).forEach((n=>{if(yP.has(n))return void(xP.has(n)&&_c(274,{prop:n}));const o=t[n];e[n]!==o&&(i[n]=o)})),i}(d.current,e);d.current=e,w((()=>{n.current&&function(e,t){if(!e)return;const i={};let n=!1;if(Object.keys(e).forEach((t=>{i[t]=e[t],n=!0})),!n)return;const o={type:"gridOptionsChanged",options:i};t.dispatchEvent(o);const s=u({type:"componentStateChanged"},i);t.dispatchEvent(s)}(t,n.current)}))}),[e]);const y=o.useSyncExternalStore&&"legacy"!==Nu(e,"renderingMode")?"default":"legacy";return o.createElement("div",{style:b,className:e.className,ref:v},o.createElement(gk.Provider,{value:y},g&&!g.isDestroyed()?o.createElement(fP,{context:g}):null,null!==(t=null===(i=r.current)||void 0===i?void 0:i.getPortals())&&void 0!==t?t:null))};var SP=class extends rC{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const i=this.gridOptions;if(Nu(i,"reactiveCustomComponents")){const n=(e=>{switch(e){case"filter":return Nu(i,"enableFilterHandlers")?Ok:_k;case"floatingFilterComponent":return Nu(i,"enableFilterHandlers")?Hk:Vk;case"dateComponent":return Ik;case"dragAndDropImageComponent":return Lk;case"loadingOverlayComponent":return Wk;case"noRowsOverlayComponent":return qk;case"statusPanel":return Kk;case"toolPanel":return Yk;case"menuItem":return Uk;case"cellRenderer":return Ak;case"innerHeaderComponent":return Gk}})(t.name);if(n)return new n(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Qk()}const n=!t.cellRenderer&&"toolPanel"!==t.name;return new Mk(e,this.parent,t,n)}},RP=(0,o.forwardRef)(((e,t)=>{const i=(0,o.useContext)(pk),{registry:n,context:s,gos:r,rowModel:a}=i,[l,d]=(0,o.useState)((()=>new bk)),[c,h]=(0,o.useState)((()=>new bk)),[p,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),v=(0,o.useRef)(),b=(0,o.useRef)(null),w=(0,o.useRef)(),y=(0,o.useMemo)((()=>{var t;return function(e,t){var i,n,o;const s=null!==(i=Cp[e])&&void 0!==i?i:{};return[...Object.values(null!==(n=s.all)&&void 0!==n?n:{}),...Object.values(null!==(o=s[t])&&void 0!==o?o:{})]}(e.api.getGridId(),null!==(t=null===p||void 0===p?void 0:p.rowModelType)&&void 0!==t?t:"clientSide")}),[e]),x=(0,o.useMemo)((()=>l.toString()+" ag-details-row"),[l]),C=(0,o.useMemo)((()=>c.toString()+" ag-details-grid"),[c]);t&&(0,o.useImperativeHandle)(t,(()=>({refresh(){var e,t;return null!==(e=null===(t=v.current)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}}))),e.template&&_c(230);const S=(0,o.useCallback)((t=>{var o;if(b.current=t,!t)return v.current=s.destroyBean(v.current),void(null===(o=w.current)||void 0===o||o.call(w));const l={toggleCss:(e,t)=>d((i=>i.setClass(e,t))),toggleDetailGridCss:(e,t)=>h((i=>i.setClass(e,t))),setDetailGrid:e=>g(e),setRowData:e=>f(e),getGui:()=>b.current},c=n.createDynamicBean("detailCellRendererCtrl",!0);if(c&&(s.createBean(c),c.init(l,e),v.current=c,r.get("detailRowAutoHeight"))){const n=()=>{if(null==b.current)return;const t=b.current.clientHeight;if(null!=t&&t>0){setTimeout((()=>{e.node.setRowHeight(t),(Gc(r)||Wc(r))&&a.onRowHeightChanged()}),0)}};w.current=dc(i,t,n),n()}}),[]),R=(0,o.useCallback)((e=>{var t;null===(t=v.current)||void 0===t||t.registerDetailWithMaster(e)}),[]);return o.createElement("div",{className:x,ref:S},p&&o.createElement(CP,u(u({className:C},p),{},{modules:y,rowData:m,passGridApi:R})))})),kP=class extends lb{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Pk,agGroupRowRenderer:Pk,agDetailCellRenderer:RP},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,Ck||setTimeout((()=>Ck=!1),0),Ck=!0,i()):e();var i}}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===yk}},PP=class extends o.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return o.createElement(CP,u(u({},this.props),{},{passGridApi:this.setGridApi}))}};Np.registerModules([dk]);const EP=e=>{let{data:t=[],columns:i=[],height:n="400px",pagination:s=!0,paginationPageSize:r=20,sortable:a=!0,filterable:l=!0,resizable:d=!0,className:c="",onRowClicked:u=null,rowSelection:h="single",suppressRowClickSelection:p=!1}=e;const g=(0,o.useMemo)((()=>({sortable:a,filter:l,resizable:d,flex:1,minWidth:100})),[a,l,d]),m=(0,o.useMemo)((()=>({defaultColDef:g,pagination:s,paginationPageSize:r,paginationPageSizeSelector:[10,20,25,50,100],rowSelection:{mode:"singleRow",enableClickSelection:!p},animateRows:!0,enableCellTextSelection:!0,localeText:{page:"Page",to:"\xe0",of:"sur",next:"Suivant",previous:"Pr\xe9c\xe9dent",loadingOoo:"Chargement...",noRowsToShow:"Aucune donn\xe9e \xe0 afficher",contains:"Contient",notContains:"Ne contient pas",equals:"\xc9gal \xe0",notEqual:"Diff\xe9rent de",startsWith:"Commence par",endsWith:"Finit par",filterOoo:"Filtrer...",applyFilter:"Appliquer",resetFilter:"R\xe9initialiser",andCondition:"ET",orCondition:"OU"}})),[g,s,r,p]);return(0,Al.jsx)("div",{className:"ag-theme-quartz ".concat(c),style:{height:n,width:"100%"},children:(0,Al.jsx)(PP,{rowData:t,columnDefs:i,gridOptions:m,onRowClicked:u,suppressCellFocus:!0})})},FP=e=>{let{products:t=[],loading:i,onProductSelect:n,onProductEdit:s,onProductDelete:r}=e;const a=e=>{let{data:t}=e;return(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsx)("button",{onClick:()=>s&&s(t),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",title:"Modifier",children:"\u270f\ufe0f"}),(0,Al.jsx)("button",{onClick:()=>r&&r(t),className:"text-red-600 hover:text-red-800 font-medium text-sm",title:"Supprimer",children:"\ud83d\uddd1\ufe0f"})]})},l=e=>{let{value:t}=e;return t?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t):"-"},d=e=>{let{value:t}=e;return t?new Date(t).toLocaleDateString("fr-FR"):"-"},c=e=>{let{value:t}=e;const i={"Viandes et Poissons":"\ud83e\udd69","L\xe9gumes et Fruits":"\ud83e\udd55","\xc9pices et Assaisonnements":"\ud83c\udf36\ufe0f","Produits Laitiers":"\ud83e\uddc0","C\xe9r\xe9ales et L\xe9gumineuses":"\ud83c\udf3e",Boissons:"\ud83c\udf77",Autres:"\ud83d\udce6"}[t]||"\ud83d\udce6";return(0,Al.jsxs)("span",{className:"flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:i}),t||"Non class\xe9"]})},u=(0,o.useMemo)((()=>[{headerName:"Nom",field:"nom",pinned:"left",width:200,cellStyle:{fontWeight:"bold"}},{headerName:"Cat\xe9gorie",field:"categorie",width:180,cellRenderer:c,filter:"agTextColumnFilter"},{headerName:"Prix R\xe9f\xe9rence",field:"reference_price",width:130,cellRenderer:l,type:"numericColumn",filter:"agNumberColumnFilter"},{headerName:"Prix Achat",field:"prix_achat",width:120,cellRenderer:l,type:"numericColumn",filter:"agNumberColumnFilter"},{headerName:"Unit\xe9",field:"unite",width:80,filter:"agTextColumnFilter"},{headerName:"Fournisseur",field:"fournisseur_nom",width:150,filter:"agTextColumnFilter"},{headerName:"Cr\xe9\xe9 le",field:"created_at",width:120,cellRenderer:d,filter:"agDateColumnFilter"},{headerName:"Actions",field:"actions",width:120,cellRenderer:a,sortable:!1,filter:!1,pinned:"right"}]),[]);return i?(0,Al.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Al.jsxs)("div",{className:"text-center",children:[(0,Al.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),(0,Al.jsx)("p",{className:"mt-2 text-gray-600",children:"Chargement des produits..."})]})}):(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83e\udd55"}),"Gestion des Produits & Ingr\xe9dients"]}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[t.length," produits \u2022 Clic pour s\xe9lectionner \u2022 Filtrage et tri avanc\xe9s"]})]}),(0,Al.jsxs)("button",{onClick:()=>window.location.reload(),className:"text-primary-500 hover:text-primary-600 font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udd04"}),"Actualiser"]})]})}),(0,Al.jsx)("div",{className:"p-4",children:(0,Al.jsx)(EP,{data:t,columns:u,height:"500px",onRowClicked:e=>{n&&n(e.data)},paginationPageSize:25,className:"rounded-lg overflow-hidden border border-gray-200"})})]})},DP=e=>{let{suppliers:t=[],loading:i,onSupplierSelect:n,onSupplierEdit:s,onSupplierDelete:r}=e;const a=e=>{let{data:t}=e;return(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsx)("button",{onClick:()=>s&&s(t),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",title:"Modifier",children:"\u270f\ufe0f"}),(0,Al.jsx)("button",{onClick:()=>window.open("tel:".concat(t.telephone),"_self"),className:"text-green-600 hover:text-green-800 font-medium text-sm",title:"Appeler",disabled:!t.telephone,children:"\ud83d\udcde"}),(0,Al.jsx)("button",{onClick:()=>window.open("mailto:".concat(t.email),"_self"),className:"text-orange-600 hover:text-orange-800 font-medium text-sm",title:"Email",disabled:!t.email,children:"\ud83d\udce7"}),(0,Al.jsx)("button",{onClick:()=>r&&r(t),className:"text-red-600 hover:text-red-800 font-medium text-sm",title:"Supprimer",children:"\ud83d\uddd1\ufe0f"})]})},l=e=>{let{data:t}=e;return(0,Al.jsxs)("div",{className:"space-y-1",children:[t.telephone&&(0,Al.jsxs)("div",{className:"text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udcde"}),t.telephone]}),t.email&&(0,Al.jsxs)("div",{className:"text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udce7"}),t.email]}),!t.telephone&&!t.email&&(0,Al.jsx)("span",{className:"text-gray-400 text-sm",children:"Non renseign\xe9"})]})},d=e=>{let{data:t}=e;const i=[t.adresse,t.ville,t.code_postal].filter(Boolean);return(0,Al.jsx)("div",{className:"text-sm",children:i.length>0?(0,Al.jsxs)("div",{children:[t.adresse&&(0,Al.jsx)("div",{children:t.adresse}),(t.ville||t.code_postal)&&(0,Al.jsxs)("div",{className:"text-gray-600",children:[t.code_postal," ",t.ville]})]}):(0,Al.jsx)("span",{className:"text-gray-400",children:"Non renseign\xe9e"})})},c=e=>{let{value:t}=e;return t?new Date(t).toLocaleDateString("fr-FR"):"-"},u=e=>{let{data:t}=e;const i=t.telephone||t.email,n=t.adresse||t.ville;let o="complet",s="\u2705 Complet",r="bg-green-100 text-green-800";return i||n?i&&n||(o="partiel",s="\u26a0\ufe0f Partiel",r="bg-yellow-100 text-yellow-800"):(o="incomplet",s="\u274c Incomplet",r="bg-red-100 text-red-800"),(0,Al.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r),children:s})},h=(0,o.useMemo)((()=>[{headerName:"Fournisseur",field:"nom",pinned:"left",width:200,cellStyle:{fontWeight:"bold"}},{headerName:"Contact",field:"contact",width:200,cellRenderer:l,sortable:!1,filter:!1},{headerName:"Adresse",field:"adresse_complete",width:250,cellRenderer:d,sortable:!1,filter:"agTextColumnFilter"},{headerName:"Sp\xe9cialit\xe9s",field:"specialites",width:180,filter:"agTextColumnFilter",cellRenderer:e=>{let{value:t}=e;return t||"Non sp\xe9cifi\xe9es"}},{headerName:"Conditions Paiement",field:"conditions_paiement",width:160,filter:"agTextColumnFilter",cellRenderer:e=>{let{value:t}=e;return t||"Standard"}},{headerName:"Statut",field:"statut",width:120,cellRenderer:u,filter:"agTextColumnFilter"},{headerName:"Cr\xe9\xe9 le",field:"created_at",width:120,cellRenderer:c,filter:"agDateColumnFilter"},{headerName:"Actions",field:"actions",width:150,cellRenderer:a,sortable:!1,filter:!1,pinned:"right"}]),[]);return i?(0,Al.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Al.jsxs)("div",{className:"text-center",children:[(0,Al.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),(0,Al.jsx)("p",{className:"mt-2 text-gray-600",children:"Chargement des fournisseurs..."})]})}):(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83c\udfe2"}),"Gestion des Fournisseurs"]}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[t.length," fournisseurs \u2022 Actions rapides : Appel, Email, Modification"]})]}),(0,Al.jsxs)("button",{onClick:()=>window.location.reload(),className:"text-primary-500 hover:text-primary-600 font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udd04"}),"Actualiser"]})]})}),(0,Al.jsx)("div",{className:"p-4",children:(0,Al.jsx)(EP,{data:t,columns:h,height:"500px",onRowClicked:e=>{n&&n(e.data)},paginationPageSize:20,className:"rounded-lg overflow-hidden border border-gray-200"})})]})},NP=e=>{let{recipes:t=[],loading:i,onRecipeSelect:n,onRecipeEdit:s,onRecipeDelete:r,onCalculateCosts:a}=e;const l=e=>{let{data:t}=e;return(0,Al.jsxs)("div",{className:"flex space-x-1",children:[(0,Al.jsx)("button",{onClick:()=>s&&s(t),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",title:"Modifier",children:"\u270f\ufe0f"}),(0,Al.jsx)("button",{onClick:()=>a&&a(t),className:"text-green-600 hover:text-green-800 font-medium text-sm",title:"Calculer Co\xfbts",children:"\ud83d\udcb0"}),(0,Al.jsx)("button",{onClick:()=>r&&r(t),className:"text-red-600 hover:text-red-800 font-medium text-sm",title:"Supprimer",children:"\ud83d\uddd1\ufe0f"})]})},d=e=>{let{data:t}=e;const i=t.ingredients||[],n=i.slice(0,3),o=i.length-3;return(0,Al.jsxs)("div",{className:"text-sm",children:[n.map(((e,t)=>(0,Al.jsxs)("div",{className:"text-gray-600",children:["\u2022 ",e.produit_nom||"Ingr\xe9dient"," (",e.quantite," ",e.unite,")"]},t))),o>0&&(0,Al.jsxs)("div",{className:"text-gray-400 text-xs",children:["... et ",o," autre",o>1?"s":""]}),0===i.length&&(0,Al.jsx)("span",{className:"text-gray-400",children:"Aucun ingr\xe9dient"})]})},c=e=>{let{value:t}=e;return t?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t):"-"},u=e=>{let{value:t}=e;const i={"Entr\xe9es":"\ud83e\udd57",Plats:"\ud83c\udf7d\ufe0f",Desserts:"\ud83c\udf70",Boissons:"\ud83c\udf77",Bar:"\ud83c\udf78",Autres:"\ud83c\udf74"}[t]||"\ud83c\udf74";return(0,Al.jsxs)("span",{className:"flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:i}),t||"Non class\xe9"]})},h=e=>{let{value:t}=e;return t?"".concat(t," min"):"-"},p=e=>{let{value:t}=e;return t?(0,Al.jsxs)("span",{className:"flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udc65"}),t," portion",t>1?"s":""]}):"-"},g=e=>{let{data:t}=e;const i=t.prix_vente||0,n=t.ingredients||[];let o=0;n.forEach((e=>{o+=5*(e.quantite||0)/(t.portions||1)}));const s=i-o,r=i>0?s/i*100:0;if(0===i)return(0,Al.jsx)("span",{className:"text-gray-400",children:"Prix non d\xe9fini"});const a=r>=60,l=r>=30;return(0,Al.jsxs)("div",{className:"text-sm",children:[(0,Al.jsxs)("div",{className:"font-medium ".concat(a?"text-green-600":l?"text-yellow-600":"text-red-600"),children:[r.toFixed(1),"%"]}),(0,Al.jsxs)("div",{className:"text-xs text-gray-500",children:["Marge: ",s.toFixed(2),"\u20ac"]})]})},m=e=>{let{value:t}=e;return t?new Date(t).toLocaleDateString("fr-FR"):"-"},f=(0,o.useMemo)((()=>[{headerName:"Recette",field:"nom",pinned:"left",width:200,cellStyle:{fontWeight:"bold"}},{headerName:"Cat\xe9gorie",field:"categorie",width:130,cellRenderer:u,filter:"agTextColumnFilter"},{headerName:"Portions",field:"portions",width:100,cellRenderer:p,type:"numericColumn",filter:"agNumberColumnFilter"},{headerName:"Prix Vente",field:"prix_vente",width:110,cellRenderer:c,type:"numericColumn",filter:"agNumberColumnFilter"},{headerName:"Rentabilit\xe9",field:"profitability",width:120,cellRenderer:g,sortable:!1,filter:!1},{headerName:"Temps Prep.",field:"temps_preparation",width:120,cellRenderer:h,type:"numericColumn",filter:"agNumberColumnFilter"},{headerName:"Ingr\xe9dients",field:"ingredients_summary",width:250,cellRenderer:d,sortable:!1,filter:!1},{headerName:"Description",field:"description",width:200,filter:"agTextColumnFilter",cellRenderer:e=>{let{value:t}=e;return(0,Al.jsx)("div",{className:"text-sm text-gray-600 truncate",title:t,children:t||"Pas de description"})}},{headerName:"Cr\xe9\xe9 le",field:"created_at",width:120,cellRenderer:m,filter:"agDateColumnFilter"},{headerName:"Actions",field:"actions",width:120,cellRenderer:l,sortable:!1,filter:!1,pinned:"right"}]),[]);return i?(0,Al.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Al.jsxs)("div",{className:"text-center",children:[(0,Al.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),(0,Al.jsx)("p",{className:"mt-2 text-gray-600",children:"Chargement des recettes..."})]})}):(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"Gestion des Recettes & Plats"]}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[t.length," recettes \u2022 Analyse de rentabilit\xe9 int\xe9gr\xe9e \u2022 Gestion des ingr\xe9dients"]})]}),(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsxs)("button",{onClick:()=>a&&a("all"),className:"text-green-600 hover:text-green-700 font-medium flex items-center text-sm",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udcb0"}),"Calculer Tous les Co\xfbts"]}),(0,Al.jsxs)("button",{onClick:()=>window.location.reload(),className:"text-primary-500 hover:text-primary-600 font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udd04"}),"Actualiser"]})]})]})}),(0,Al.jsx)("div",{className:"p-4",children:(0,Al.jsx)(EP,{data:t,columns:f,height:"600px",onRowClicked:e=>{n&&n(e.data)},paginationPageSize:15,className:"rounded-lg overflow-hidden border border-gray-200"})})]})},MP=()=>{const[e,t]=(0,o.useState)("products"),[i,n]=(0,o.useState)(null),[s,r]=(0,o.useState)([]),[a,l]=(0,o.useState)([]),[d,c]=(0,o.useState)([]),[u,h]=(0,o.useState)(!1),p="".concat("https://cuisine-tracker-5.preview.emergentagent.com","/api");(0,o.useEffect)((()=>{g()}),[]);const g=async()=>{h(!0);try{await Promise.all([m(),f(),v()])}catch(e){console.error("Erreur lors du chargement des donn\xe9es:",e)}finally{h(!1)}},m=async()=>{try{const e=await At.get("".concat(p,"/produits"));r(e.data)}catch(e){console.error("Erreur lors du chargement des produits:",e)}},f=async()=>{try{const e=await At.get("".concat(p,"/fournisseurs"));l(e.data)}catch(e){console.error("Erreur lors du chargement des fournisseurs:",e)}},v=async()=>{try{const e=await At.get("".concat(p,"/recettes"));c(e.data)}catch(e){console.error("Erreur lors du chargement des recettes:",e)}},b=async e=>{alert("\xc9dition de: ".concat(e.nom)),await g()},w=async e=>{if(window.confirm('Confirmer la suppression de "'.concat(e.nom,'" ?')))try{"product"===(null===i||void 0===i?void 0:i.type)?await At.delete("".concat(p,"/produits/").concat(e.id)):"supplier"===(null===i||void 0===i?void 0:i.type)?await At.delete("".concat(p,"/fournisseurs/").concat(e.id)):"recipe"===(null===i||void 0===i?void 0:i.type)&&await At.delete("".concat(p,"/recettes/").concat(e.id)),alert("".concat(e.nom," supprim\xe9 avec succ\xe8s")),await g()}catch(t){console.error("Erreur lors de la suppression:",t),alert("Erreur lors de la suppression")}};return(0,Al.jsxs)("div",{className:"p-6 bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen",children:[(0,Al.jsxs)("div",{className:"mb-8",children:[(0,Al.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83d\udcca Grilles de Donn\xe9es Professionnelles"}),(0,Al.jsx)("p",{className:"text-gray-600",children:"Gestion avanc\xe9e avec tri, filtrage, pagination et actions rapides"})]}),(0,Al.jsx)("div",{className:"mb-6",children:(0,Al.jsxs)("div",{className:"flex space-x-1 bg-white p-1 rounded-lg shadow-sm",children:[(0,Al.jsxs)("button",{onClick:()=>t("products"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("products"===e?"bg-primary-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83e\udd55"}),"Produits & Ingr\xe9dients"]}),(0,Al.jsxs)("button",{onClick:()=>t("suppliers"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("suppliers"===e?"bg-primary-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83c\udfe2"}),"Fournisseurs"]}),(0,Al.jsxs)("button",{onClick:()=>t("recipes"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("recipes"===e?"bg-primary-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"Recettes & Plats"]})]})}),i&&(0,Al.jsx)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Al.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("h3",{className:"font-semibold text-blue-900",children:["product"===i.type&&"\ud83e\udd55 Produit s\xe9lectionn\xe9","supplier"===i.type&&"\ud83c\udfe2 Fournisseur s\xe9lectionn\xe9","recipe"===i.type&&"\ud83d\udccb Recette s\xe9lectionn\xe9e"]}),(0,Al.jsx)("p",{className:"text-blue-700",children:i.data.nom}),i.data.description&&(0,Al.jsx)("p",{className:"text-blue-600 text-sm mt-1",children:i.data.description}),"product"===i.type&&i.data.prix_achat&&(0,Al.jsxs)("p",{className:"text-blue-600 text-sm",children:["Prix d'achat: ",i.data.prix_achat,"\u20ac"]}),"supplier"===i.type&&i.data.email&&(0,Al.jsxs)("p",{className:"text-blue-600 text-sm",children:["Email: ",i.data.email]}),"recipe"===i.type&&i.data.prix_vente&&(0,Al.jsxs)("p",{className:"text-blue-600 text-sm",children:["Prix de vente: ",i.data.prix_vente,"\u20ac"]})]}),(0,Al.jsx)("button",{onClick:()=>n(null),className:"text-blue-600 hover:text-blue-800",children:"\u2715"})]})}),u&&(0,Al.jsxs)("div",{className:"text-center py-8",children:[(0,Al.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-2"}),(0,Al.jsx)("p",{className:"text-gray-600",children:"Chargement des donn\xe9es..."})]}),(0,Al.jsxs)("div",{className:"space-y-6",children:["products"===e&&(0,Al.jsx)(FP,{products:s,onProductSelect:e=>{n({type:"product",data:e})},onProductEdit:b,onProductDelete:w,loading:u}),"suppliers"===e&&(0,Al.jsx)(DP,{suppliers:a,onSupplierSelect:e=>{n({type:"supplier",data:e})},onSupplierEdit:b,onSupplierDelete:w,loading:u}),"recipes"===e&&(0,Al.jsx)(NP,{recipes:d,onRecipeSelect:e=>{n({type:"recipe",data:e})},onRecipeEdit:b,onRecipeDelete:w,onCalculateCosts:async e=>{try{const e=await At.get("".concat(p,"/recettes/calculer-couts"));e.data.success&&(alert("Co\xfbts calcul\xe9s avec succ\xe8s !\n\nR\xe9sum\xe9:\n- ".concat(e.data.recettes_calculees," recettes mises \xe0 jour\n- Co\xfbt moyen: ").concat(e.data.cout_moyen,"\u20ac\n- Marge moyenne: ").concat(e.data.marge_moyenne,"%")),await v())}catch(t){console.error("Erreur lors du calcul des co\xfbts:",t),alert("Erreur lors du calcul des co\xfbts")}},loading:u})]}),(0,Al.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm p-6",children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\u2728"}),"Fonctionnalit\xe9s Avanc\xe9es"]}),(0,Al.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Al.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\ud83d\udd0d"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-medium",children:"Filtrage Intelligent"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Filtres par colonne avec recherche textuelle, num\xe9rique et par dates"})]})]}),(0,Al.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-medium",children:"Tri Multi-Colonnes"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Tri ascendant/descendant sur toutes les colonnes avec indicateurs visuels"})]})]}),(0,Al.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc4"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-medium",children:"Pagination Avanc\xe9e"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Navigation par pages avec contr\xf4le de la taille des pages"})]})]}),(0,Al.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf1"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-medium",children:"Responsive Design"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Interface adaptative pour tous les \xe9crans et appareils"})]})]}),(0,Al.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\u26a1"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-medium",children:"Actions Rapides"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Boutons d'action int\xe9gr\xe9s pour \xe9dition, suppression, contact"})]})]}),(0,Al.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\ud83c\udfa8"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-medium",children:"Rendu Personnalis\xe9"}),(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Affichage enrichi avec ic\xf4nes, couleurs et formatage intelligent"})]})]})]})]})]})},TP=e=>{let{order:t}=e;const i=(e=>{const t={pending:{label:"En attente",color:"yellow",icon:"\u23f3",step:1},confirmed:{label:"Confirm\xe9e",color:"blue",icon:"\u2713",step:2},in_transit:{label:"En cours",color:"purple",icon:"\ud83d\ude9a",step:3},delivered:{label:"Livr\xe9e",color:"green",icon:"\u2705",step:4},cancelled:{label:"Annul\xe9e",color:"red",icon:"\u274c",step:0}};return t[e]||t.pending})(t.status),n="cancelled"===t.status,o=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("fr-FR",{weekday:"short",day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})};return n?(0,Al.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,Al.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Al.jsx)("span",{className:"text-3xl",children:"\u274c"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h3",{className:"font-bold text-red-800",children:"Commande annul\xe9e"}),(0,Al.jsxs)("p",{className:"text-sm text-red-600",children:["Command\xe9e le ",o(t.order_date)]})]})]})}):(0,Al.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,Al.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Al.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Al.jsx)("span",{className:"text-3xl",children:i.icon}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h3",{className:"font-bold text-gray-800",children:i.label}),(0,Al.jsxs)("p",{className:"text-sm text-gray-500",children:["Commande n\xb0",t.order_number]})]})]}),(0,Al.jsxs)("div",{className:"text-right",children:[(0,Al.jsx)("p",{className:"text-sm text-gray-500",children:"Livraison estim\xe9e"}),(0,Al.jsx)("p",{className:"font-semibold text-blue-600",children:o(t.estimated_delivery_date)})]})]}),(0,Al.jsxs)("div",{className:"relative",children:[(0,Al.jsx)("div",{className:"absolute top-5 left-0 right-0 h-1 bg-gray-200 rounded",children:(0,Al.jsx)("div",{className:"h-full rounded transition-all duration-500 ".concat(i.step>=4?"bg-green-500":i.step>=3?"bg-purple-500":i.step>=2?"bg-blue-500":"bg-yellow-500"),style:{width:"".concat(i.step/4*100,"%")}})}),(0,Al.jsx)("div",{className:"relative flex justify-between",children:[{id:"pending",label:"Command\xe9",step:1},{id:"confirmed",label:"Confirm\xe9",step:2},{id:"in_transit",label:"En transit",step:3},{id:"delivered",label:"Livr\xe9",step:4}].map(((e,t)=>{const o=(s=e.step,n?"cancelled":s<=i.step?"completed":s===i.step+1?"current":"upcoming");var s;const r="completed"===o,a="current"===o;return(0,Al.jsxs)("div",{className:"flex flex-col items-center",style:{width:"25%"},children:[(0,Al.jsx)("div",{className:"w-10 h-10 rounded-full border-4 flex items-center justify-center font-bold transition-all duration-300 ".concat(r?"bg-blue-500 border-blue-500 text-white":a?"bg-white border-blue-500 text-blue-500 ring-4 ring-blue-100":"bg-white border-gray-300 text-gray-400"),children:r?"\u2713":e.step}),(0,Al.jsx)("p",{className:"mt-2 text-xs font-medium text-center ".concat(r||a?"text-gray-800":"text-gray-400"),children:e.label})]},e.id)}))})]}),(0,Al.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 grid grid-cols-2 gap-4 text-sm",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-gray-500",children:"Date de commande"}),(0,Al.jsx)("p",{className:"font-medium",children:o(t.order_date)})]}),t.actual_delivery_date&&(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-gray-500",children:"Livr\xe9 le"}),(0,Al.jsx)("p",{className:"font-medium text-green-600",children:o(t.actual_delivery_date)})]})]})]})},jP=e=>{let{currentUser:t}=e;const[i,n]=(0,o.useState)([]),[s,r]=(0,o.useState)(null),[a,l]=(0,o.useState)([]),[d,c]=(0,o.useState)([]),[h,p]=(0,o.useState)(!1),[g,m]=(0,o.useState)("employe_cuisine"===(null===t||void 0===t?void 0:t.role)?"history":"manual"),[f,v]=(0,o.useState)([]),[b,w]=(0,o.useState)([]),[y,x]=(0,o.useState)([]),[C,S]=(0,o.useState)(null),[R,k]=(0,o.useState)([]),[P,E]=(0,o.useState)(null),F="https://cuisine-tracker-5.preview.emergentagent.com";(0,o.useEffect)((()=>{N(),D(),M();const e=document.querySelector(".content-wrapper");return e&&(e.style.paddingTop="0"),()=>{e&&(e.style.paddingTop="")}}),[]),(0,o.useEffect)((()=>{s&&T(s.id)}),[s]);const D=async()=>{try{const e=await fetch("".concat(F,"/api/recettes"));if(e.ok){const t=await e.json();v(t)}else v([{id:"recipe-1",nom:"Salade C\xe9sar",categorie:"Entr\xe9e",portions:4},{id:"recipe-2",nom:"Lasagnes",categorie:"Plat",portions:6},{id:"recipe-3",nom:"Tiramisu",categorie:"Dessert",portions:8}])}catch(e){console.error("Erreur lors du chargement des recettes:",e),v([{id:"recipe-1",nom:"Salade C\xe9sar",categorie:"Entr\xe9e",portions:4},{id:"recipe-2",nom:"Lasagnes",categorie:"Plat",portions:6},{id:"recipe-3",nom:"Tiramisu",categorie:"Dessert",portions:8}])}},N=async()=>{try{const e=await fetch("".concat(F,"/api/fournisseurs"));if(e.ok){const t=await e.json();n(t)}}catch(e){console.error("Erreur lors du chargement des fournisseurs:",e)}},M=async()=>{try{const e=await fetch("".concat(F,"/api/orders"));if(e.ok){const t=await e.json();k(t)}}catch(e){console.error("Erreur lors du chargement des commandes:",e)}},T=async e=>{try{const t=await fetch("".concat(F,"/api/suppliers/").concat(e,"/delivery-estimate"));if(t.ok){const e=await t.json();E(e)}}catch(t){console.error("Erreur lors du calcul de livraison:",t),E(null)}},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=d.find((t=>t.product_id===e.product_id));c(i?d.map((i=>i.product_id===e.product_id?u(u({},i),{},{quantity:i.quantity+t}):i)):[...d,{product_id:e.product_id,product_name:e.product_name,unit_price:e.price,quantity:t,unit:e.product_unit}])},A=(e,t)=>{c(t<=0?d.filter((t=>t.product_id!==e)):d.map((i=>i.product_id===e?u(u({},i),{},{quantity:t}):i)))},I=async(e,t)=>{try{(await fetch("".concat(F,"/api/orders/").concat(e,"/status?status=").concat(t),{method:"PUT"})).ok?(alert("\u2705 Statut mis \xe0 jour: ".concat(t)),M()):alert("\u274c Erreur lors de la mise \xe0 jour du statut")}catch(i){console.error("Erreur:",i),alert("\u274c Erreur de connexion")}},L=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e);return(0,Al.jsxs)("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen",style:{marginTop:"-16px"},children:[(0,Al.jsxs)("div",{className:"mb-8 px-6 pt-2",children:[(0,Al.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83d\uded2 Gestion des Commandes"}),(0,Al.jsx)("p",{className:"text-gray-600",children:"Suivi et cr\xe9ation de commandes fournisseurs"})]}),(0,Al.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8 px-6",children:[(0,Al.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,Al.jsxs)("div",{className:"flex items-center",children:[(0,Al.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,Al.jsx)("span",{className:"text-xl",children:"\ud83d\udccb"})}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Commandes ce mois"}),(0,Al.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"24"})]})]})}),(0,Al.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,Al.jsxs)("div",{className:"flex items-center",children:[(0,Al.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,Al.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"})}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Montant total"}),(0,Al.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"3 247\u20ac"})]})]})}),(0,Al.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,Al.jsxs)("div",{className:"flex items-center",children:[(0,Al.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:(0,Al.jsx)("span",{className:"text-xl",children:"\ud83d\ude9a"})}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"En attente"}),(0,Al.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"7"})]})]})}),(0,Al.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,Al.jsxs)("div",{className:"flex items-center",children:[(0,Al.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,Al.jsx)("span",{className:"text-xl",children:"\ud83c\udfe2"})}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("p",{className:"text-sm text-gray-600",children:"Fournisseurs actifs"}),(0,Al.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"12"})]})]})})]}),(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm mb-8 mx-6",children:[(0,Al.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Al.jsx)("h2",{className:"text-xl font-semibold",children:"Effectuer une Commande"}),(0,Al.jsx)("p",{className:"text-gray-600 mt-1",children:"Cr\xe9ez vos commandes manuellement ou automatiquement"})]}),(0,Al.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex space-x-1",children:["employe_cuisine"!==(null===t||void 0===t?void 0:t.role)&&(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("button",{onClick:()=>m("manual"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("manual"===g?"bg-yellow-400 text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,Al.jsx)("span",{className:"mr-2",children:"\u270b"}),"Commande Manuelle"]}),(0,Al.jsxs)("button",{onClick:()=>m("auto"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("auto"===g?"bg-yellow-400 text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83e\udd16"}),"Commande Automatique"]})]}),(0,Al.jsxs)("button",{onClick:()=>m("history"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("history"===g?"bg-yellow-400 text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"Historique (",R.length,")"]})]})}),(0,Al.jsxs)("div",{className:"p-6",children:["manual"===g&&(0,Al.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83c\udfe2"}),"1. S\xe9lectionner le Fournisseur"]})}),(0,Al.jsx)("div",{className:"p-6",children:(0,Al.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map((e=>(0,Al.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-all ".concat((null===s||void 0===s?void 0:s.id)===e.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),onClick:()=>(async e=>{r(e),p(!0);try{const t=await fetch("".concat(F,"/api/supplier-product-info/").concat(e.id));if(t.ok){const e=await t.json(),i=await Promise.all(e.map((async e=>{const t=await fetch("".concat(F,"/api/produits/").concat(e.product_id));if(t.ok){const i=await t.json();return u(u({},e),{},{product_name:i.nom,product_unit:i.unite,product_category:i.categorie})}return e})));l(i)}}catch(t){console.error("Erreur lors du chargement des produits:",t)}finally{p(!1)}})(e),children:[(0,Al.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Al.jsx)("span",{className:"text-xl",children:e.logo||"\ud83c\udfea"}),(0,Al.jsx)("div",{className:"font-medium px-2 py-1 rounded text-white text-sm",style:{backgroundColor:e.couleur||"#3B82F6"},children:e.nom})]}),(0,Al.jsxs)("div",{className:"text-sm text-gray-600",children:[e.telephone&&(0,Al.jsxs)("span",{className:"mr-3",children:["\ud83d\udcde ",e.telephone]}),e.email&&(0,Al.jsxs)("span",{children:["\ud83d\udce7 ",e.email]})]}),e.specialites&&(0,Al.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Sp\xe9cialit\xe9s: ",e.specialites]})]},e.id)))})})]}),(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udce6"}),"2. Produits Disponibles"]}),s&&(0,Al.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Al.jsx)("span",{className:"text-sm text-gray-600",children:"Fournisseur:"}),(0,Al.jsx)("span",{className:"text-lg",children:s.logo||"\ud83c\udfea"}),(0,Al.jsx)("span",{className:"text-sm px-2 py-1 rounded text-white font-medium",style:{backgroundColor:s.couleur||"#3B82F6"},children:s.nom})]})]}),(0,Al.jsx)("div",{className:"p-6",children:s?h?(0,Al.jsxs)("div",{className:"text-center py-8",children:[(0,Al.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),(0,Al.jsx)("p",{className:"mt-2 text-gray-600",children:"Chargement des produits..."})]}):0===a.length?(0,Al.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Al.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udce6"}),(0,Al.jsx)("p",{children:"Aucun produit disponible pour ce fournisseur"})]}):(0,Al.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map((e=>(0,Al.jsx)("div",{className:"p-3 border border-gray-200 rounded-lg",children:(0,Al.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Al.jsxs)("div",{className:"flex-1",children:[(0,Al.jsx)("div",{className:"font-medium",children:e.product_name}),(0,Al.jsxs)("div",{className:"text-sm text-gray-600",children:[L(e.price)," / ",e.product_unit]}),e.product_category&&(0,Al.jsx)("div",{className:"text-xs text-gray-500",children:e.product_category}),e.min_order_quantity&&(0,Al.jsxs)("div",{className:"text-xs text-orange-600",children:["Commande min: ",e.min_order_quantity]})]}),(0,Al.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Al.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Al.jsx)("label",{className:"text-xs text-gray-500 mb-1",children:"Quantit\xe9"}),(0,Al.jsx)("input",{type:"number",min:e.min_order_quantity||1,step:"0.1",defaultValue:e.min_order_quantity||1,className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded",id:"quantity-".concat(e.product_id),onKeyDown:t=>{if("Enter"===t.key){t.preventDefault();const i=parseFloat(t.target.value)||1;j(e,i),t.target.value=e.min_order_quantity||1}}})]}),(0,Al.jsxs)("button",{onClick:()=>{const t=document.getElementById("quantity-".concat(e.product_id)),i=parseFloat(t.value)||1;j(e,i),t.value=e.min_order_quantity||1},className:"bg-primary-500 hover:bg-primary-600 text-white px-3 py-1 rounded text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\u2795"}),"Ajouter"]})]})]})},e.product_id)))}):(0,Al.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Al.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfe2"}),(0,Al.jsx)("p",{children:"S\xe9lectionnez un fournisseur pour voir ses produits"})]})})]}),(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,Al.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\uded2"}),"3. Panier de Commande"]}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[d.length," article",d.length>1?"s":""]})]}),(0,Al.jsx)("div",{className:"p-6",children:0===d.length?(0,Al.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Al.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\uded2"}),(0,Al.jsx)("p",{children:"Panier vide"}),(0,Al.jsx)("p",{className:"text-sm",children:"Ajoutez des produits pour cr\xe9er une commande"})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto mb-4",children:d.map((e=>(0,Al.jsxs)("div",{className:"p-3 border border-gray-200 rounded-lg",children:[(0,Al.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Al.jsx)("div",{className:"font-medium",children:e.product_name}),(0,Al.jsx)("button",{onClick:()=>A(e.product_id,0),className:"text-red-500 hover:text-red-700 text-sm",children:"\u2715"})]}),(0,Al.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Al.jsxs)("div",{className:"text-sm text-gray-600",children:[L(e.unit_price)," / ",e.unit]}),(0,Al.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Al.jsx)("button",{onClick:()=>A(e.product_id,e.quantity-1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 w-6 h-6 rounded text-sm",children:"-"}),(0,Al.jsx)("span",{className:"w-8 text-center",children:e.quantity}),(0,Al.jsx)("button",{onClick:()=>A(e.product_id,e.quantity+1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 w-6 h-6 rounded text-sm",children:"+"})]})]}),(0,Al.jsxs)("div",{className:"text-right text-sm font-medium mt-1",children:["Total: ",L(e.unit_price*e.quantity)]})]},e.product_id)))}),(0,Al.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Al.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Al.jsx)("span",{className:"text-lg font-semibold",children:"Total Commande:"}),(0,Al.jsx)("span",{className:"text-xl font-bold text-primary-600",children:L(d.reduce(((e,t)=>e+t.unit_price*t.quantity),0))})]}),s&&(0,Al.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:(0,Al.jsxs)("div",{className:"text-sm",children:[(0,Al.jsxs)("div",{className:"font-medium",children:["Fournisseur: ",s.nom]}),s.conditions_paiement&&(0,Al.jsxs)("div",{className:"text-gray-600",children:["Conditions: ",s.conditions_paiement]})]})}),P&&(0,Al.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:(0,Al.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Al.jsx)("span",{className:"text-2xl",children:"\ud83d\ude9a"}),(0,Al.jsxs)("div",{className:"flex-1",children:[(0,Al.jsx)("div",{className:"font-semibold text-blue-900 mb-1",children:"Livraison estim\xe9e"}),(0,Al.jsx)("div",{className:"text-sm text-blue-800 mb-2",children:new Date(P.estimated_delivery_date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})}),P.can_order_today?(0,Al.jsx)("div",{className:"text-xs text-green-700 bg-green-100 inline-block px-2 py-1 rounded",children:"\u2705 Commande possible aujourd'hui"}):(0,Al.jsxs)("div",{className:"text-xs text-orange-700 bg-orange-100 inline-block px-2 py-1 rounded",children:["\u23f0 Prochaine commande: ",new Date(P.next_order_date).toLocaleDateString("fr-FR")]}),(0,Al.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:P.explanation})]})]})}),(0,Al.jsx)("button",{onClick:async()=>{if(0!==d.length)if(s){p(!0);try{const e=await fetch("".concat(F,"/api/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({supplier_id:s.id,items:d.map((e=>({product_id:e.product_id,product_name:e.product_name,quantity:e.quantity,unit:e.unit,unit_price:e.unit_price,total_price:e.unit_price*e.quantity}))),notes:""})});if(e.ok){const t=await e.json();alert("\u2705 Commande cr\xe9\xe9e avec succ\xe8s!\n\nN\xb0 ".concat(t.order_number,"\nLivraison estim\xe9e: ").concat(new Date(t.estimated_delivery_date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}))),c([]),r(null),l([]),M(),m("history")}else{const t=await e.json();alert("\u274c Erreur lors de la cr\xe9ation: "+(t.detail||"Erreur inconnue"))}}catch(e){console.error("Erreur:",e),alert("\u274c Erreur lors de la cr\xe9ation de la commande")}finally{p(!1)}}else alert("Veuillez s\xe9lectionner un fournisseur");else alert("Veuillez ajouter des produits \xe0 la commande")},disabled:h,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-gray-900 py-2 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h?"\u23f3 Cr\xe9ation...":"\u2705 Valider Commande"})]})]})})]})]}),C&&(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm mt-6",children:[(0,Al.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"R\xe9capitulatif de Commande - ",C.orderNumber]}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Fournisseur: ",C.supplier.nom]})]}),(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsxs)("button",{onClick:()=>{alert("PDF g\xe9n\xe9r\xe9 pour la commande ".concat(C.orderNumber))},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udcc4"}),"PDF"]}),(0,Al.jsxs)("button",{onClick:()=>{alert("Email envoy\xe9 \xe0 ".concat(C.supplier.nom))},className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udce7"}),"Email"]}),(0,Al.jsxs)("button",{onClick:()=>{S(null),c([])},className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\u2716\ufe0f"}),"Fermer"]})]})]})}),(0,Al.jsxs)("div",{className:"p-6",children:[(0,Al.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[(0,Al.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"\ud83d\udcc5 Informations de Livraison"}),(0,Al.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{className:"text-yellow-700",children:"Date de commande:"}),(0,Al.jsx)("span",{className:"font-medium ml-2",children:new Date(C.orderDate).toLocaleDateString("fr-FR")})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{className:"text-yellow-700",children:"Livraison pr\xe9vue:"}),(0,Al.jsx)("span",{className:"font-medium ml-2 text-green-700",children:C.estimatedDelivery})]})]})]}),(0,Al.jsxs)("div",{className:"space-y-2",children:[C.items.map(((e,t)=>(0,Al.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[(0,Al.jsxs)("div",{className:"flex-1",children:[(0,Al.jsx)("div",{className:"font-medium",children:e.product_name}),(0,Al.jsxs)("div",{className:"text-sm text-gray-600",children:[e.quantity," ",e.unit," \xd7 ",L(e.unit_price)]})]}),(0,Al.jsx)("div",{className:"font-medium text-right",children:L(e.unit_price*e.quantity)})]},t))),(0,Al.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 font-semibold text-lg",children:[(0,Al.jsx)("span",{children:"Total Commande:"}),(0,Al.jsx)("span",{className:"text-2xl text-green-600",children:L(C.total)})]})]}),(0,Al.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Al.jsxs)("button",{onClick:()=>{alert("Commande confirm\xe9e et envoy\xe9e au fournisseur !"),S(null),c([])},className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\u2705"}),"Confirmer la Commande"]}),(0,Al.jsxs)("button",{onClick:()=>{S(null)},className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 px-6 py-2 rounded-lg font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\u270f\ufe0f"}),"Modifier"]})]})})]})]}),"auto"===g&&(0,Al.jsxs)("div",{className:"space-y-6",children:[(0,Al.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83c\udf7d\ufe0f"}),"S\xe9lectionner les Productions"]}),(0,Al.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choisissez les productions et quantit\xe9s pour calculer automatiquement les commandes"}),(0,Al.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:f.map((e=>{var t;return(0,Al.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-all ".concat(b.find((t=>t.id===e.id))?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),onClick:()=>{const t=b.find((t=>t.id===e.id));w(t?b.filter((t=>t.id!==e.id)):[...b,u(u({},e),{},{selectedQuantity:1})])},children:[(0,Al.jsxs)("div",{className:"font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"Entr\xe9e"===e.categorie?"\ud83e\udd57":"Plat"===e.categorie?"\ud83c\udf7d\ufe0f":"Dessert"===e.categorie?"\ud83c\udf70":"Bar"===e.categorie?"\ud83c\udf79":"\ud83d\udcdd"}),e.nom]}),(0,Al.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[e.portions," portions \u2022 ",e.categorie]}),b.find((t=>t.id===e.id))&&(0,Al.jsxs)("div",{className:"mt-2",children:[(0,Al.jsx)("label",{className:"text-xs text-gray-500",children:"Quantit\xe9 souhait\xe9e:"}),(0,Al.jsx)("input",{type:"number",min:"1",value:(null===(t=b.find((t=>t.id===e.id)))||void 0===t?void 0:t.selectedQuantity)||1,onChange:t=>{const i=parseInt(t.target.value)||1;w(b.map((t=>t.id===e.id?u(u({},t),{},{selectedQuantity:i}):t)))},onClick:e=>e.stopPropagation(),className:"w-20 px-2 py-1 text-sm border rounded mt-1"})]})]},e.id)}))}),b.length>0&&(0,Al.jsx)("div",{className:"mt-6 pt-4 border-t",children:(0,Al.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Al.jsxs)("div",{className:"text-sm text-gray-600",children:[b.length," production(s) s\xe9lectionn\xe9e(s)"]}),(0,Al.jsx)("button",{onClick:async()=>{if(0!==b.length){p(!0);try{const e=[{supplierId:"supplier-1",supplierName:"Fournisseur Rungis",products:[{productId:"prod-1",productName:"Tomates cerises",quantity:5,unit:"kg",pricePerUnit:4.5,totalPrice:22.5},{productId:"prod-2",productName:"Mozzarella",quantity:2,unit:"kg",pricePerUnit:12,totalPrice:24}],total:46.5},{supplierId:"supplier-2",supplierName:"Boucherie Martin",products:[{productId:"prod-3",productName:"B\u0153uf hach\xe9",quantity:3,unit:"kg",pricePerUnit:18.5,totalPrice:55.5}],total:55.5}],t={};b.forEach((e=>{const i=e.selectedQuantity||1;t[e.nom]={quantity:i,estimatedCost:15*i}})),x(e)}catch(e){console.error("Erreur lors du calcul automatique:",e),alert("Erreur lors du calcul des commandes automatiques")}finally{p(!1)}}else alert("Veuillez s\xe9lectionner au moins une production")},disabled:h,className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:h?"Calcul...":"\ud83e\udd16 Calculer les Commandes"})]})})]}),y.length>0&&(0,Al.jsxs)("div",{className:"space-y-4",children:[(0,Al.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Al.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),"Commandes Sugg\xe9r\xe9es par Fournisseur"]}),(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsxs)("button",{onClick:()=>{alert("T\xe9l\xe9chargement PDF de toutes les commandes...")},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udcc4"}),"T\xe9l\xe9charger tout (PDF)"]}),(0,Al.jsxs)("button",{onClick:()=>{alert("Envoi des emails \xe0 tous les fournisseurs...")},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-2",children:"\ud83d\udce7"}),"Envoyer tout par email"]})]})]}),(0,Al.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[(0,Al.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"\ud83d\udccb R\xe9capitulatif G\xe9n\xe9ral"}),(0,Al.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{className:"text-yellow-700",children:"Nombre de fournisseurs:"}),(0,Al.jsx)("span",{className:"font-medium ml-2",children:y.length})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{className:"text-yellow-700",children:"Total produits:"}),(0,Al.jsx)("span",{className:"font-medium ml-2",children:y.reduce(((e,t)=>e+t.products.length),0)})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{className:"text-yellow-700",children:"Montant total:"}),(0,Al.jsx)("span",{className:"font-medium ml-2",children:L(y.reduce(((e,t)=>e+t.total),0))})]})]})]}),y.map(((e,t)=>(0,Al.jsxs)("div",{className:"border rounded-lg bg-white shadow-sm",children:[(0,Al.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,Al.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"font-semibold text-lg",children:e.supplierName}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600",children:[e.products.length," produit(s) \u2022 Total: ",L(e.total)]})]}),(0,Al.jsxs)("div",{className:"flex space-x-2",children:[(0,Al.jsxs)("button",{onClick:()=>{alert("PDF g\xe9n\xe9r\xe9 pour ".concat(e.supplierName))},className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udcc4"}),"PDF"]}),(0,Al.jsxs)("button",{onClick:()=>{alert("Email envoy\xe9 \xe0 ".concat(e.supplierName))},className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\ud83d\udce7"}),"Email"]}),(0,Al.jsxs)("button",{onClick:()=>{alert("Commande valid\xe9e pour ".concat(e.supplierName,"!"))},className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 px-3 py-1 rounded text-sm font-medium flex items-center",children:[(0,Al.jsx)("span",{className:"mr-1",children:"\u2705"}),"Valider"]})]})]})}),(0,Al.jsx)("div",{className:"p-4",children:(0,Al.jsxs)("div",{className:"space-y-2",children:[e.products.map(((e,t)=>(0,Al.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[(0,Al.jsxs)("div",{className:"flex-1",children:[(0,Al.jsx)("div",{className:"font-medium",children:e.productName}),(0,Al.jsxs)("div",{className:"text-sm text-gray-600",children:[e.quantity," ",e.unit," \xd7 ",L(e.pricePerUnit)]})]}),(0,Al.jsx)("div",{className:"font-medium text-right",children:L(e.totalPrice)})]},t))),(0,Al.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200 font-semibold",children:[(0,Al.jsxs)("span",{children:["Total ",e.supplierName,":"]}),(0,Al.jsx)("span",{className:"text-lg",children:L(e.total)})]})]})})]},t)))]})]}),"history"===g&&(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("div",{className:"mb-6",children:[(0,Al.jsx)("h3",{className:"text-xl font-bold mb-2",children:"\ud83d\udccb Historique des Commandes"}),(0,Al.jsx)("p",{className:"text-gray-600",children:"Suivez l'\xe9tat de vos commandes en temps r\xe9el"})]}),h?(0,Al.jsxs)("div",{className:"text-center py-12",children:[(0,Al.jsx)("div",{className:"text-4xl mb-4",children:"\u23f3"}),(0,Al.jsx)("p",{className:"text-gray-600",children:"Chargement des commandes..."})]}):0===R.length?(0,Al.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Al.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udce6"}),(0,Al.jsx)("p",{className:"text-xl font-medium text-gray-700 mb-2",children:"Aucune commande"}),(0,Al.jsx)("p",{className:"text-gray-600 mb-6",children:'Cr\xe9ez votre premi\xe8re commande dans l\'onglet "Commande Manuelle"'}),(0,Al.jsx)("button",{onClick:()=>m("manual"),className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 px-6 py-2 rounded-lg font-medium",children:"\u2795 Cr\xe9er une commande"})]}):(0,Al.jsx)("div",{className:"space-y-6",children:R.map((e=>(0,Al.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Al.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:(0,Al.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:e.supplier_name}),(0,Al.jsxs)("p",{className:"text-sm text-gray-600",children:["Commande n\xb0",e.order_number]})]}),(0,Al.jsxs)("div",{className:"text-right",children:[(0,Al.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:L(e.total_amount)}),(0,Al.jsxs)("p",{className:"text-xs text-gray-500",children:[e.items.length," article",e.items.length>1?"s":""]})]})]})}),(0,Al.jsx)("div",{className:"p-6",children:(0,Al.jsx)(TP,{order:e})}),(0,Al.jsx)("div",{className:"px-6 pb-4",children:(0,Al.jsxs)("details",{className:"group",children:[(0,Al.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900 flex items-center gap-2",children:[(0,Al.jsx)("span",{className:"group-open:rotate-90 transition-transform",children:"\u25b6"}),"Voir les produits command\xe9s"]}),(0,Al.jsx)("div",{className:"mt-4 space-y-2 pl-4",children:e.items.map(((e,t)=>(0,Al.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 text-sm",children:[(0,Al.jsxs)("div",{className:"flex-1",children:[(0,Al.jsx)("span",{className:"font-medium",children:e.product_name}),(0,Al.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",e.quantity," ",e.unit,")"]})]}),(0,Al.jsxs)("div",{className:"text-right",children:[(0,Al.jsx)("div",{className:"font-medium",children:L(e.total_price)}),(0,Al.jsxs)("div",{className:"text-xs text-gray-500",children:[L(e.unit_price),"/",e.unit]})]})]},t)))})]})}),(0,Al.jsx)("div",{className:"px-6 pb-6",children:(0,Al.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,Al.jsx)("button",{onClick:()=>I(e.id,"confirmed"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"\u2713 Confirmer"}),"confirmed"===e.status&&(0,Al.jsx)("button",{onClick:()=>I(e.id,"in_transit"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:"\ud83d\ude9a En transit"}),"in_transit"===e.status&&(0,Al.jsx)("button",{onClick:()=>I(e.id,"delivered"),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:"\u2705 Marquer comme livr\xe9"}),"pending"===e.status&&(0,Al.jsx)("button",{onClick:()=>{confirm("\xcates-vous s\xfbr de vouloir annuler cette commande ?")&&I(e.id,"cancelled")},className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700",children:"\u274c Annuler"})]})})]},e.id)))})]})]})]})]})},AP=e=>{var t;let{onDateRangeChange:i,initialRange:n=null}=e;const[s,r]=(0,o.useState)("today"),[a,l]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1),p=[{key:"today",label:"Aujourd'hui",icon:"\ud83d\udcc5"},{key:"yesterday",label:"Hier",icon:"\ud83d\udcc4"},{key:"thisWeek",label:"Cette semaine",icon:"\ud83d\udcca"},{key:"lastWeek",label:"Semaine derni\xe8re",icon:"\ud83d\udccb"},{key:"thisMonth",label:"Ce mois",icon:"\ud83d\udcc6"},{key:"lastMonth",label:"Mois dernier",icon:"\ud83d\uddd3\ufe0f"},{key:"custom",label:"P\xe9riode personnalis\xe9e",icon:"\ud83c\udfaf"}],g=e=>{const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(e){case"today":default:return{startDate:i,endDate:i,label:"Aujourd'hui"};case"yesterday":const e=new Date(i);return e.setDate(e.getDate()-1),{startDate:e,endDate:e,label:"Hier"};case"thisWeek":const t=new Date(i);return t.setDate(i.getDate()-i.getDay()+1),{startDate:t,endDate:i,label:"Cette semaine"};case"lastWeek":const n=new Date(i);n.setDate(i.getDate()-i.getDay());const o=new Date(n);return o.setDate(n.getDate()-6),{startDate:o,endDate:n,label:"Semaine derni\xe8re"};case"thisMonth":return{startDate:new Date(i.getFullYear(),i.getMonth(),1),endDate:i,label:"Ce mois"};case"lastMonth":return{startDate:new Date(i.getFullYear(),i.getMonth()-1,1),endDate:new Date(i.getFullYear(),i.getMonth(),0),label:"Mois dernier"};case"custom":return a&&d?{startDate:new Date(a),endDate:new Date(d),label:"Du ".concat(new Date(a).toLocaleDateString("fr-FR")," au ").concat(new Date(d).toLocaleDateString("fr-FR"))}:null}};return(0,o.useEffect)((()=>{if(!n){const e=g("today");i&&i(e)}}),[]),(0,o.useEffect)((()=>{"custom"===s&&(()=>{if(a&&d){const e=g("custom");e&&i&&i(e)}})()}),[a,d]),(0,Al.jsx)("div",{className:"date-range-picker",children:(0,Al.jsxs)("div",{className:"section-card",style:{marginBottom:"var(--spacing-md)"},children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcc5 P\xe9riode d'analyse"}),(0,Al.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-md)"},children:p.map((e=>(0,Al.jsxs)("button",{className:"button small ".concat(s===e.key?"":"secondary"),onClick:()=>(e=>{if(r(e),h("custom"===e),"custom"!==e){const t=g(e);t&&i&&i(t)}})(e.key),style:{background:s===e.key?"var(--color-primary-blue)":"var(--color-background-card-light)",color:s===e.key?"white":"var(--color-text-secondary)",fontSize:"12px",padding:"var(--spacing-sm)",textAlign:"center"},children:[(0,Al.jsx)("div",{children:e.icon}),(0,Al.jsx)("div",{children:e.label})]},e.key)))}),u&&(0,Al.jsxs)("div",{style:{background:"var(--color-background-card-light)",borderRadius:"var(--border-radius-md)",padding:"var(--spacing-md)",border:"1px solid var(--color-border)"},children:[(0,Al.jsx)("div",{className:"section-title",style:{fontSize:"14px",marginBottom:"var(--spacing-sm)"},children:"\ud83d\udcc6 S\xe9lection personnalis\xe9e"}),(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"var(--spacing-sm)",alignItems:"center"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"12px"},children:"Date de d\xe9but"}),(0,Al.jsx)("input",{type:"date",className:"form-input",value:a,onChange:e=>l(e.target.value),style:{fontSize:"12px"}})]}),(0,Al.jsx)("div",{style:{color:"var(--color-text-muted)",fontSize:"12px",textAlign:"center",padding:"var(--spacing-sm) 0"},children:"au"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"12px"},children:"Date de fin"}),(0,Al.jsx)("input",{type:"date",className:"form-input",value:d,onChange:e=>c(e.target.value),style:{fontSize:"12px"}})]})]})]}),"custom"!==s&&(0,Al.jsxs)("div",{style:{background:"var(--color-success-green)",color:"white",borderRadius:"var(--border-radius-sm)",padding:"var(--spacing-sm)",textAlign:"center",fontSize:"12px",fontWeight:"500"},children:["\u2713 ",null===(t=p.find((e=>e.key===s)))||void 0===t?void 0:t.label]})]})})},IP=e=>{let{onLoginSuccess:t}=e;const[i,n]=(0,o.useState)({username:"",password:""}),[s,r]=(0,o.useState)(!1),[a,l]=(0,o.useState)("");return(0,Al.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,Al.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"480px",width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[(0,Al.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,Al.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"\ud83c\udf7d\ufe0f"}),(0,Al.jsx)("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#059669",marginBottom:"4px"},children:"ResTop"}),(0,Al.jsx)("p",{style:{fontSize:"16px",color:"#6b7280",marginBottom:"0"},children:"La Table d'Augustine"})]}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r(!0),l("");try{const e=await At.post("".concat("https://cuisine-tracker-5.preview.emergentagent.com","/api/auth/login"),i);e.data.success?(localStorage.setItem("user_session",JSON.stringify({user:e.data.user,session_id:e.data.session_id,login_time:(new Date).toISOString()})),t(e.data.user,e.data.session_id)):l(e.data.message)}catch(a){var n,o;console.error("Erreur de connexion:",a),l((null===(n=a.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Erreur de connexion")}finally{r(!1)}},children:[(0,Al.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Al.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Nom d'utilisateur"}),(0,Al.jsx)("input",{type:"text",value:i.username,onChange:e=>n(u(u({},i),{},{username:e.target.value})),style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s",boxSizing:"border-box"},placeholder:"Entrez votre nom d'utilisateur",required:!0,onFocus:e=>e.target.style.borderColor="#10b981",onBlur:e=>e.target.style.borderColor="#e5e7eb"})]}),(0,Al.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Al.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Mot de passe"}),(0,Al.jsx)("input",{type:"password",value:i.password,onChange:e=>n(u(u({},i),{},{password:e.target.value})),style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s",boxSizing:"border-box"},placeholder:"Entrez votre mot de passe",required:!0,onFocus:e=>e.target.style.borderColor="#10b981",onBlur:e=>e.target.style.borderColor="#e5e7eb"})]}),a&&(0,Al.jsxs)("div",{style:{padding:"12px 16px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"14px",marginBottom:"20px"},children:["\u274c ",a]}),(0,Al.jsx)("button",{type:"submit",disabled:s,style:{width:"100%",padding:"14px 20px",background:s?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:s?"not-allowed":"pointer",transition:"background-color 0.3s"},onMouseEnter:e=>{s||(e.target.style.background="#059669")},onMouseLeave:e=>{s||(e.target.style.background="#10b981")},children:s?"\ud83d\udd04 Connexion...":"\ud83d\udd11 Se connecter"})]}),(0,Al.jsxs)("div",{style:{marginTop:"32px",padding:"20px",background:"#f9fafb",borderRadius:"8px"},children:[(0,Al.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"16px",textAlign:"center"},children:"\ud83e\uddea Comptes de test disponibles"}),(0,Al.jsx)("div",{style:{display:"grid",gap:"8px"},children:[{username:"skander_admin",role:"\ud83d\udc64 Super Admin",color:"#7c3aed"},{username:"patron_test",role:"\ud83d\udc51 Patron",color:"#dc2626"},{username:"chef_test",role:"\ud83d\udc68\u200d\ud83c\udf73 Chef de Cuisine",color:"#059669"},{username:"souschef_test",role:"\ud83d\udc68\u200d\ud83c\udf73 Sous-Chef",color:"#16a34a"},{username:"caisse_test",role:"\ud83d\udcb0 Responsable Caisse",color:"#2563eb"},{username:"barman_test",role:"\ud83c\udf79 Barman",color:"#7c3aed"},{username:"cuisine_test",role:"\ud83e\udd58 Employ\xe9 Cuisine",color:"#ea580c"}].map(((e,t)=>(0,Al.jsxs)("button",{onClick:()=>{return t=e.username,void n({username:t,password:"password123"});var t},style:{padding:"8px 12px",background:"white",border:"2px solid ".concat(e.color),borderRadius:"6px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px",transition:"all 0.3s"},onMouseEnter:t=>{t.target.style.background=e.color,t.target.style.color="white"},onMouseLeave:e=>{e.target.style.background="white",e.target.style.color="#374151"},children:[(0,Al.jsx)("span",{style:{fontWeight:"600"},children:e.role}),(0,Al.jsx)("span",{style:{fontSize:"11px",opacity:"0.8"},children:e.username})]},t)))}),(0,Al.jsxs)("div",{style:{textAlign:"center",fontSize:"12px",color:"#6b7280",marginTop:"12px"},children:["\ud83d\udca1 Mot de passe : ",(0,Al.jsx)("code",{style:{background:"#e5e7eb",padding:"2px 4px",borderRadius:"3px"},children:"password123"})]})]})]})})},LP=e=>{var t,i,n,s,r,a;let{user:l,sessionId:d,onNavigateToPage:c,onCreateMission:u,activeDashboardTab:h,selectedDateRange:p}=e;const[g,m]=(0,o.useState)([]),[f,v]=(0,o.useState)([]),[b,w]=(0,o.useState)(!1),y="https://cuisine-tracker-5.preview.emergentagent.com";(0,o.useEffect)((()=>{null!==l&&void 0!==l&&l.id&&x()}),[l]),(0,o.useEffect)((()=>{const e=()=>{x()};return window.addEventListener("refreshMissions",e),()=>{window.removeEventListener("refreshMissions",e)}}),[]);const x=async()=>{try{w(!0);const e=await At.get("".concat(y,"/api/missions/by-user/").concat(l.id));m(e.data);const t=await At.get("".concat(y,"/api/notifications/").concat(l.id));v(t.data)}catch(e){console.error("Erreur lors du chargement:",e)}finally{w(!1)}},C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{await At.put("".concat(y,"/api/missions/").concat(e,"?user_id=").concat(l.id),{status:"validee",validation_notes:t}),alert("\u2705 Mission valid\xe9e avec succ\xe8s !"),x()}catch(i){console.error("Erreur:",i),alert("\u274c Erreur lors de la validation")}},S=e=>{const t={en_cours:{text:"\ud83d\udd04 En cours",color:"#2563eb",bg:"#dbeafe"},terminee_attente:{text:"\u23f3 En attente validation",color:"#d97706",bg:"#fef3c7"},validee:{text:"\u2705 Valid\xe9e",color:"#059669",bg:"#dcfce7"},en_retard:{text:"\ud83d\udea8 En retard",color:"#dc2626",bg:"#fee2e2"},annulee:{text:"\u274c Annul\xe9e",color:"#6b7280",bg:"#f3f4f6"}},i=t[e]||t.en_cours;return(0,Al.jsx)("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:i.color,background:i.bg},children:i.text})},R=e=>{const t={urgente:{text:"\ud83d\udea8 URGENT",color:"#dc2626",bg:"#fee2e2"},haute:{text:"\u26a1 Haute",color:"#ea580c",bg:"#fed7aa"},normale:{text:"\ud83d\udcdd Normale",color:"#059669",bg:"#dcfce7"},basse:{text:"\ud83d\udd35 Basse",color:"#2563eb",bg:"#dbeafe"}},i=t[e]||t.normale;return(0,Al.jsx)("span",{style:{padding:"2px 6px",borderRadius:"10px",fontSize:"11px",fontWeight:"600",color:i.color,background:i.bg},children:i.text})},k=(e,t)=>t&&e?e.filter((e=>{const i=new Date(e.assigned_date),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),o=new Date(t.startDate.getFullYear(),t.startDate.getMonth(),t.startDate.getDate()),s=new Date(t.endDate.getFullYear(),t.endDate.getMonth(),t.endDate.getDate());return n>=o&&n<=s})):e,P=(null===(t=g.assigned_to_me)||void 0===t?void 0:t.filter((e=>"en_cours"===e.status)))||[],E=(null===(i=g.created_by_me)||void 0===i?void 0:i.filter((e=>"terminee_attente"===e.status)))||[];return b?(0,Al.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:(0,Al.jsx)("div",{children:"\ud83d\udd04 Chargement des missions..."})}):(0,Al.jsxs)("div",{style:{marginBottom:"20px"},children:["super_admin"===l.role&&"ventes"===h||"super_admin"!==l.role?(0,Al.jsxs)("div",{style:{background:"linear-gradient(135deg, #059669 0%, #10b981 100%)",borderRadius:"12px",padding:"20px",marginBottom:"20px",color:"white",textAlign:"center"},children:[(0,Al.jsxs)("div",{style:{fontSize:"24px",marginBottom:"8px"},children:["super_admin"===l.role&&"\ud83d\udc51","chef_cuisine"===l.role&&"\ud83d\udc68\u200d\ud83c\udf73","caissier"===l.role&&"\ud83d\udcb0","barman"===l.role&&"\ud83c\udf79","employe_cuisine"===l.role&&"\ud83e\udd58"]}),(0,Al.jsxs)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px"},children:["Bonjour ",(null===(n=l.full_name)||void 0===n?void 0:n.split("(")[0].trim())||l.username," !"]}),(0,Al.jsxs)("div",{style:{fontSize:"14px",opacity:.9},children:["super_admin"===l.role&&"\ud83c\udf1f Excellente journ\xe9e ! G\xe9rez votre \xe9quipe et supervisez les op\xe9rations de La Table d'Augustine.","chef_cuisine"===l.role&&"\ud83d\udd25 Pr\xeat pour un nouveau service ! Coordonnez votre \xe9quipe et assurez-vous que tout est parfait.","caissier"===l.role&&"\ud83d\udcaa \xc0 vous de jouer ! G\xe9rez les stocks et supervisez les livraisons pour un service impeccable.","barman"===l.role&&"\ud83c\udfaf C'est parti ! Pr\xe9parez le bar et assurez-vous que tout soit pr\xeat pour accueillir nos clients.","employe_cuisine"===l.role&&"\u2b50 Nouvelle journ\xe9e, nouvelles missions ! Accomplissez vos t\xe2ches avec soin pour une cuisine parfaite."]}),(0,Al.jsxs)("div",{style:{fontSize:"12px",opacity:.8,marginTop:"8px"},children:["\ud83d\udcc5 ",(new Date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]})]}):null,P.length>0&&(0,Al.jsxs)("div",{style:{background:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"2px solid #ea580c"},children:[(0,Al.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#c2410c",marginBottom:"12px"},children:["\ud83c\udfaf T\xe2ches \xe0 Effectuer Aujourd'hui (",P.length,")"]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"12px"},children:P.map((e=>(0,Al.jsxs)("div",{style:{padding:"14px",background:"white",borderRadius:"8px",border:"1px solid #fdba74"},children:[(0,Al.jsx)("div",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"6px",color:"#c2410c"},children:e.title}),(0,Al.jsx)("div",{style:{fontSize:"13px",color:"#ea580c",marginBottom:"8px"},children:e.description}),(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[R(e.priority),e.due_date&&(0,Al.jsxs)("span",{style:{fontSize:"11px",color:"#dc2626",fontWeight:"600",padding:"2px 6px",background:"#fee2e2",borderRadius:"4px"},children:["\u23f0 ",new Date(e.due_date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),e.target_quantity&&(0,Al.jsxs)("span",{style:{fontSize:"11px",color:"#92400e",fontWeight:"600",padding:"2px 6px",background:"#fdba74",borderRadius:"4px"},children:["\ud83c\udfaf ",e.target_quantity," ",e.target_unit]})]}),(0,Al.jsx)("button",{onClick:()=>{const t=window.prompt("D\xe9tails sur l'accomplissement de la t\xe2che (obligatoire):");t&&t.trim()?async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{await At.put("".concat(y,"/api/missions/").concat(e,"?user_id=").concat(l.id),{status:"terminee_attente",employee_notes:t}),alert("\u2705 Mission marqu\xe9e comme termin\xe9e !\nElle est maintenant en attente de validation."),x()}catch(i){console.error("Erreur:",i),alert("\u274c Erreur lors de la mise \xe0 jour")}}(e.id,t):""===t&&alert("\u274c Une note est obligatoire pour marquer la t\xe2che comme termin\xe9e.")},style:{fontSize:"13px",padding:"8px 16px",borderRadius:"6px",background:"#ea580c",color:"white",border:"none",cursor:"pointer",fontWeight:"600"},children:"\u2705 Termin\xe9"})]})]},e.id)))})]}),(null===(s=g.assigned_to_me)||void 0===s?void 0:s.filter((e=>"terminee_attente"===e.status||"validee"===e.status)).length)>0&&(0,Al.jsxs)("div",{style:{background:"linear-gradient(135deg, #f0fdf4 0%, #bbf7d0 100%)",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"2px solid #10b981"},children:[(0,Al.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#065f46",marginBottom:"12px"},children:["\ud83d\udcca Mes T\xe2ches R\xe9centes (",(null===(r=g.assigned_to_me)||void 0===r?void 0:r.filter((e=>"terminee_attente"===e.status||"validee"===e.status)).length)||0,")"]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"10px"},children:null===(a=g.assigned_to_me)||void 0===a?void 0:a.filter((e=>"terminee_attente"===e.status||"validee"===e.status)).slice(0,4).map((e=>(0,Al.jsxs)("div",{style:{padding:"12px",background:"white",borderRadius:"6px",border:"1px solid #bbf7d0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"3px",color:"#065f46"},children:e.title}),(0,Al.jsx)("div",{style:{fontSize:"11px",color:"#10b981"},children:e.completed_by_employee_date&&"Termin\xe9 le ".concat(new Date(e.completed_by_employee_date).toLocaleDateString("fr-FR")," \xe0 ").concat(new Date(e.completed_by_employee_date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}))}),e.employee_notes&&(0,Al.jsxs)("div",{style:{fontSize:"11px",color:"#059669",fontStyle:"italic"},children:['\ud83d\udcac "',e.employee_notes,'"']})]}),(0,Al.jsx)("div",{children:S(e.status)})]},e.id)))})]}),("super_admin"===l.role||"chef_cuisine"===l.role)&&E.length>0&&(0,Al.jsxs)("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fbbf24 100%)",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"2px solid #d97706"},children:[(0,Al.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#92400e",marginBottom:"12px"},children:["\u23f3 Missions \xe0 Valider (",E.length,")"]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"12px"},children:E.slice(0,3).map((e=>(0,Al.jsxs)("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #fbbf24",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:e.title}),(0,Al.jsxs)("div",{style:{fontSize:"12px",color:"#d97706",marginBottom:"4px"},children:["\ud83d\udc64 ",e.assigned_to_name]}),(0,Al.jsxs)("div",{style:{fontSize:"11px",color:"#92400e"},children:["\ud83d\udcdd ",e.employee_notes||"Pas de commentaire"]})]}),(0,Al.jsx)("button",{onClick:()=>C(e.id,"Valid\xe9"),style:{fontSize:"12px",padding:"6px 12px",borderRadius:"6px",background:"#10b981",color:"white",border:"none",cursor:"pointer"},children:"\u2705 Valider"})]},e.id)))})]}),("super_admin"===l.role&&"alertes"===h||"chef_cuisine"===l.role||"caissier"===l.role)&&(0,Al.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"1px solid #e5e7eb"},children:[(0,Al.jsx)("button",{onClick:()=>{u&&u()},style:{width:"100%",padding:"14px 20px",background:"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"},children:"\u2795 Cr\xe9er une Nouvelle Mission"}),(()=>{const e=(()=>{const e=new Date,t={startDate:p?p.startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),endDate:p?p.endDate:new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59),label:(null===p||void 0===p?void 0:p.label)||"Aujourd'hui"};return{createdToday:k(g.created_by_me||[],t),toValidateToday:k((g.created_by_me||[]).filter((e=>"terminee_attente"===e.status)),t),dateLabel:t.label}})();return(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"16px",textAlign:"center",padding:"8px",background:"#f3f4f6",borderRadius:"6px"},children:["\ud83d\udcc5 Missions - ",e.dateLabel]}),e.createdToday.length>0&&(0,Al.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"10px"},children:["\ud83d\udccb Missions Cr\xe9\xe9es (",e.createdToday.length,")"]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"8px"},children:e.createdToday.map((e=>(0,Al.jsxs)("div",{style:{padding:"10px",background:"#f0f9ff",borderRadius:"6px",border:"1px solid #bae6fd",fontSize:"13px"},children:[(0,Al.jsx)("div",{style:{fontWeight:"600",marginBottom:"3px"},children:e.title}),(0,Al.jsxs)("div",{style:{color:"#0369a1",fontSize:"12px"},children:["\ud83d\udc64 Assign\xe9e \xe0 : ",e.assigned_to_name," \u2022 ",S(e.status)]})]},e.id)))})]}),e.toValidateToday.length>0&&(0,Al.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"10px"},children:["\u23f3 Missions \xe0 Valider (",e.toValidateToday.length,")"]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"8px"},children:e.toValidateToday.map((e=>(0,Al.jsxs)("div",{style:{padding:"12px",background:"#fefce8",borderRadius:"6px",border:"1px solid #facc15",fontSize:"13px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{style:{fontWeight:"600",marginBottom:"3px"},children:e.title}),(0,Al.jsxs)("div",{style:{color:"#a16207",fontSize:"12px",marginBottom:"3px"},children:["\ud83d\udc64 ",e.assigned_to_name]}),e.completed_by_employee_date&&(0,Al.jsxs)("div",{style:{color:"#78716c",fontSize:"11px"},children:["\u2705 Termin\xe9 le ",new Date(e.completed_by_employee_date).toLocaleDateString("fr-FR")," \xe0 ",new Date(e.completed_by_employee_date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),e.employee_notes&&(0,Al.jsxs)("div",{style:{color:"#737373",fontSize:"11px",fontStyle:"italic"},children:['\ud83d\udcac "',e.employee_notes,'"']})]}),(0,Al.jsx)("button",{onClick:()=>{var t;return C(e.id,"Valid\xe9 par ".concat(null===(t=l.full_name)||void 0===t?void 0:t.split("(")[0].trim()))},style:{fontSize:"12px",padding:"6px 12px",borderRadius:"6px",background:"#10b981",color:"white",border:"none",cursor:"pointer"},children:"\u2705 Valider"})]},e.id)))})]}),0===e.createdToday.length&&0===e.toValidateToday.length&&(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280",background:"#f9fafb",borderRadius:"6px"},children:[(0,Al.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"\ud83d\udcc5"}),(0,Al.jsxs)("div",{style:{fontSize:"14px"},children:["Aucune mission pour ",e.dateLabel.toLowerCase()]})]})]})})()]})]})},_P=["deliveryCost","extraCost"];ha.register(ba,tl,za);const OP="".concat("https://cuisine-tracker-5.preview.emergentagent.com","/api"),BP=[{value:"frais",label:"\ud83e\udd6c Frais",icon:"\ud83e\udd6c"},{value:"surgel\xe9s",label:"\ud83e\uddca Surgel\xe9s",icon:"\ud83e\uddca"},{value:"primeur",label:"\ud83c\udf4e Primeur",icon:"\ud83c\udf4e"},{value:"mar\xe9e",label:"\ud83d\udc1f Mar\xe9e",icon:"\ud83d\udc1f"},{value:"boucherie",label:"\ud83e\udd69 Boucherie",icon:"\ud83e\udd69"},{value:"fromagerie",label:"\ud83e\uddc0 Fromagerie",icon:"\ud83e\uddc0"},{value:"extra",label:"\u2728 Extra",icon:"\u2728"},{value:"hygi\xe8ne",label:"\ud83e\uddfd Hygi\xe8ne",icon:"\ud83e\uddfd"},{value:"bar",label:"\ud83c\udf7a Bar",icon:"\ud83c\udf7a"}],zP=e=>{const t={"Entr\xe9e":"#10B981",Plat:"#F59E0B",Dessert:"#EC4899",Bar:"#8B5CF6",Autres:"#6B7280"};return t[e]||t.Autres},VP=e=>{const t={"Entr\xe9e":"\ud83e\udd57",Plat:"\ud83c\udf7d\ufe0f",Dessert:"\ud83c\udf70",Bar:"\ud83c\udf79",Autres:"\ud83d\udcdd"};return t[e]||t.Autres},HP=e=>{if(!e)return"vs p\xe9riode pr\xe9c\xe9dente";const t=e.label.toLowerCase();return t.includes("aujourd'hui")?"vs hier":t.includes("cette semaine")?"vs semaine derni\xe8re":t.includes("ce mois")?"vs mois dernier":t.includes("hier")?"vs avant-hier":t.includes("semaine derni\xe8re")?"vs semaine pr\xe9c\xe9dente":t.includes("mois dernier")?"vs mois pr\xe9c\xe9dent":"vs p\xe9riode pr\xe9c\xe9dente"};const GP=function(){var e,t,i,n,s,a,l,d,c,h,p,g,m,f,v,b,w,y,x,C,S,R,k;const[P,E]=(0,o.useState)("dashboard"),[F,D]=(0,o.useState)("produits"),[N,M]=(0,o.useState)("ventes"),[T,j]=(0,o.useState)("stocks"),[A,I]=(0,o.useState)("ventes"),[L,_]=(0,o.useState)(!1),[O,B]=(0,o.useState)(!1),[z,V]=(0,o.useState)("produits"),[H,G]=(0,o.useState)(!1),[W,U]=(0,o.useState)(null),[q,K]=(0,o.useState)(null),[Y,Q]=(0,o.useState)(!1),[$,X]=(0,o.useState)(null),[J,Z]=(0,o.useState)(""),[ee,te]=(0,o.useState)(""),[ie,ne]=(0,o.useState)({caTotal:8975.5,caMidi:16775.85,caSoir:11183.9,couvertsMidi:87,couvertsSoir:64,topProductions:[{nom:"Rigatoni \xe0 la truffe",ventes:2418,portions:78,categorie:"Plat",coefficientPrevu:2.85,coefficientReel:2.87,coutMatiere:774,prixVente:28.5},{nom:"Fleurs de courgettes",ventes:1911,portions:91,categorie:"Entr\xe9e",coefficientPrevu:3.25,coefficientReel:3.25,coutMatiere:482.75,prixVente:17.25},{nom:"Souris d'agneau",ventes:1872,portions:52,categorie:"Plat",coefficientPrevu:1.5,coefficientReel:1.37,coutMatiere:1368,prixVente:36},{nom:"Tiramis\xf9 maison",ventes:1654,portions:67,categorie:"Dessert",coefficientPrevu:3,coefficientReel:3.04,coutMatiere:264.64,prixVente:12},{nom:"Cocktail Spritz",ventes:1543,portions:124,categorie:"Bar",coefficientPrevu:6.9,coefficientReel:6.9,coutMatiere:201.59,prixVente:11.2},{nom:"Salade de saison",ventes:1387,portions:89,categorie:"Entr\xe9e",coefficientPrevu:3.6,coefficientReel:3.58,coutMatiere:360.22,prixVente:14.5},{nom:"Plateau de fromages",ventes:987,portions:34,categorie:"Autres",coefficientPrevu:2.1,coefficientReel:2.08,coutMatiere:473.76,prixVente:29}],flopProductions:[{nom:"Soupe froide",ventes:187,portions:12,categorie:"Entr\xe9e",coefficientPrevu:3.5,coefficientReel:3.43,coutMatiere:54.6,prixVente:15.6},{nom:"Tartare de l\xe9gumes",ventes:156,portions:8,categorie:"Autres",coefficientPrevu:1.9,coefficientReel:1.9,coutMatiere:70.2,prixVente:16.7},{nom:"Mocktail exotique",ventes:134,portions:9,categorie:"Bar",coefficientPrevu:3.2,coefficientReel:3.21,coutMatiere:37.52,prixVente:13.4},{nom:"Panna cotta",ventes:98,portions:6,categorie:"Dessert",coefficientPrevu:1.95,coefficientReel:1.94,coutMatiere:30.38,prixVente:9.8},{nom:"Salade ti\xe8de",ventes:87,portions:5,categorie:"Entr\xe9e",coefficientPrevu:2.8,coefficientReel:2.65,coutMatiere:35.2,prixVente:8.7},{nom:"Velout\xe9 automnal",ventes:76,portions:4,categorie:"Plat",coefficientPrevu:3,coefficientReel:2.85,coutMatiere:28.15,prixVente:7.6},{nom:"Smoothie d\xe9tox",ventes:65,portions:3,categorie:"Bar",coefficientPrevu:2.5,coefficientReel:2.4,coutMatiere:25.3,prixVente:6.5}],ventesParCategorie:{plats:6201,boissons:4987,desserts:2156,entrees:3247,autres:892}}),[oe,se]=(0,o.useState)({}),[re,ae]=(0,o.useState)([]),[le,de]=(0,o.useState)([]),[ce,ue]=(0,o.useState)([]),[he,pe]=(0,o.useState)([]),[ge,me]=(0,o.useState)([]),[fe,ve]=(0,o.useState)([]),[be,we]=(0,o.useState)(!1),[ye,xe]=(0,o.useState)([]),[Ce,Se]=(0,o.useState)([]),[Re,ke]=(0,o.useState)([]),[Pe,Ee]=(0,o.useState)([]),[Fe,De]=(0,o.useState)(!1),[Ne,Me]=(0,o.useState)(null),[Te,je]=(0,o.useState)([]),[Ae,Ie]=(0,o.useState)(""),[Le,_e]=(0,o.useState)([]),[Oe,Be]=(0,o.useState)([]),[ze,Ve]=(0,o.useState)("produits"),[He,Ge]=(0,o.useState)([]),[We,Ue]=(0,o.useState)(!1),[qe,Ke]=(0,o.useState)(!1),[Ye,Qe]=(0,o.useState)("tous"),[$e,Xe]=(0,o.useState)("produits"),[Je,Ze]=(0,o.useState)("produits"),[et,tt]=(0,o.useState)(!1),[it,nt]=(0,o.useState)(!1),[ot,st]=(0,o.useState)(null),[rt,at]=(0,o.useState)({}),[lt,dt]=(0,o.useState)([]),[ct,ut]=(0,o.useState)(0),[ht,pt]=(0,o.useState)("factures"),[gt,mt]=(0,o.useState)([{id:1,produit:"Tomates",stock_actuel:25,unite:"kg",productions_possibles:[{nom:"Salade M\xe9diterran\xe9enne",quantite_needed:2,portions_possibles:12,portions_selectionnees:0,categorie:"Entr\xe9e"},{nom:"Ratatouille",quantite_needed:3,portions_possibles:8,portions_selectionnees:0,categorie:"Plat"},{nom:"Gazpacho",quantite_needed:1.5,portions_possibles:16,portions_selectionnees:0,categorie:"Entr\xe9e"}]},{id:2,produit:"Fromage de ch\xe8vre",stock_actuel:3.2,unite:"kg",productions_possibles:[{nom:"Salade de ch\xe8vre chaud",quantite_needed:.15,portions_possibles:21,portions_selectionnees:0,categorie:"Entr\xe9e"},{nom:"Tarte aux courgettes",quantite_needed:.2,portions_possibles:16,portions_selectionnees:0,categorie:"Plat"}]},{id:3,produit:"Saumon frais",stock_actuel:4.8,unite:"kg",productions_possibles:[{nom:"Saumon grill\xe9",quantite_needed:.18,portions_possibles:26,portions_selectionnees:0,categorie:"Plat"},{nom:"Tartare de saumon",quantite_needed:.12,portions_possibles:40,portions_selectionnees:0,categorie:"Entr\xe9e"}]}]),[ft,vt]=(0,o.useState)(""),[bt,wt]=(0,o.useState)(1),[yt]=(0,o.useState)(8),[xt,Ct]=(0,o.useState)("all"),[St,Rt]=(0,o.useState)(""),[kt,Pt]=(0,o.useState)(1),[Et]=(0,o.useState)(10),[Ft,Dt]=(0,o.useState)("all"),[Nt,Mt]=(0,o.useState)(!1),[Tt,jt]=(0,o.useState)(!1),[It,Lt]=(0,o.useState)(!1),[_t,Ot]=(0,o.useState)(!1),[Bt,zt]=(0,o.useState)(!1),[Vt,Ht]=(0,o.useState)(!1),[Gt,Wt]=(0,o.useState)(null),[Ut,qt]=(0,o.useState)(null),[Kt,Yt]=(0,o.useState)(null),[Qt,$t]=(0,o.useState)(null),[Xt,Jt]=(0,o.useState)(null),[Zt,ei]=(0,o.useState)(null),[ti,ii]=(0,o.useState)("z_report"),[ni,oi]=(0,o.useState)(null),[si,ri]=(0,o.useState)(!1),[ai,li]=(0,o.useState)(null),[di,ci]=(0,o.useState)(null),[ui,hi]=(0,o.useState)(!1),[pi,gi]=(0,o.useState)("overview"),[mi,fi]=(0,o.useState)({nom:"",description:"",categorie:"",unite:"",prix_achat:"",fournisseur_id:""}),[vi,bi]=(0,o.useState)([]),[wi,yi]=(0,o.useState)({predefined:[],custom:[]}),[xi,Ci]=(0,o.useState)(!1),[Si,Ri]=(0,o.useState)({nom:"",produit_id:"",forme_decoupe:"",forme_decoupe_custom:"",quantite_produit_brut:"",unite_produit_brut:"kg",quantite_preparee:"",unite_preparee:"kg",perte:"",perte_pourcentage:"",nombre_portions:"",taille_portion:"",unite_portion:"g",dlc:"",notes:""}),[ki,Pi]=(0,o.useState)({categories:{},total_categories:0,total_products:0}),[Ei,Fi]=(0,o.useState)({}),[Di,Ni]=(0,o.useState)(!1),[Mi,Ti]=(0,o.useState)([]),[ji,Ai]=(0,o.useState)([]),[Ii,Li]=(0,o.useState)(!1),[_i,Oi]=(0,o.useState)({preparation_id:"",type:"entree",quantite:"",reference:"",commentaire:"",dlc:""}),[Bi,zi]=(0,o.useState)({}),[Vi,Hi]=(0,o.useState)({}),[Gi,Wi]=(0,o.useState)(!1),[Ui,qi]=(0,o.useState)({title:"",description:"",type:"preparation",category:"cuisine",assigned_to_user_ids:[],priority:"normale",due_date:"",target_quantity:"",target_unit:"",related_product_id:"",related_preparation_id:""}),[Ki,Yi]=(0,o.useState)([]),[Qi,$i]=(0,o.useState)(0),[Xi,Ji]=(0,o.useState)([]),[Zi,en]=(0,o.useState)(!1),[tn,nn]=(0,o.useState)(null),[on,sn]=(0,o.useState)([]),[rn,an]=(0,o.useState)(""),[ln,dn]=(0,o.useState)({nom:"",contact:"",email:"",telephone:"",adresse:"",couleur:"#3B82F6",logo:"",categorie:"frais",deliveryCost:0,extraCost:0,delivery_rules:{order_days:[],order_deadline_hour:11,delivery_days:[],delivery_delay_days:1,delivery_time:"12:00",special_rules:""}}),[cn,un]=(0,o.useState)(!1),[hn,pn]=(0,o.useState)({produit_id:"",type:"entree",quantite:"",reference:"",commentaire:"",lot:"",unite:""}),[gn,mn]=(0,o.useState)({nom:"",description:"",categorie:"",portions:"",temps_preparation:"",prix_vente:"",coefficient_prevu:"",instructions:"",ingredients:[]}),[fn,vn]=(0,o.useState)({produit_id:"",quantite:"",unite:""});(0,o.useEffect)((()=>{Pn(),kn(),jn(),An(),_n(),On(),Bn(),zn(),xn(),bn(),Cn(),Sn(),qn(),Nn(),Mn(),setTimeout((()=>{(()=>{try{const e=ce.slice(0,10).map(((e,t)=>{const i=re.find((t=>t.id===e.produit_id));if(!i)return null;const n=ge.filter((e=>e.ingredients.some((e=>e.produit_id===i.id)))).slice(0,3).map((t=>{const n=t.ingredients.find((e=>e.produit_id===i.id)),o=n?n.quantite/t.portions:.2,s=o>0?Math.floor(e.quantite_actuelle/o):0;return{nom:t.nom,quantite_needed:o,portions_possibles:s,portions_selectionnees:0,categorie:t.categorie||"Autres"}}));return 0===n.length&&n.push({nom:"Plat avec ".concat(i.nom),quantite_needed:.15,portions_possibles:Math.floor(e.quantite_actuelle/.15),portions_selectionnees:0,categorie:"Plat"}),{id:t+1,produit:i.nom,stock_actuel:e.quantite_actuelle,unite:i.unite,productions_possibles:n}})).filter(Boolean);mt(e)}catch(e){console.error("Erreur g\xe9n\xe9ration stocks pr\xe9visionnels:",e)}})()}),2e3),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("\u2705 Service Worker enregistr\xe9:",e)})).catch((e=>{console.log("\u274c Erreur Service Worker:",e)}))}))}),[]);const bn=async()=>{try{const e=await At.get("".concat(OP,"/categories-production"));je(e.data.categories)}catch(e){console.error("Erreur lors du chargement des cat\xe9gories:",e)}},wn=e=>{if(e&&""!==e){const t=ge.filter((t=>t.categorie===e));_e(t)}else _e(ge);Ie(e)},yn=(e,t)=>t&&""!==t?e.filter((e=>e.categorie===t)):e;(0,o.useEffect)((()=>{Be(re)}),[re]);const xn=async()=>{try{const e=await At.get("".concat(OP,"/stock/batch-summary"));Se(e.data);const t=[],i=[];e.data.forEach((e=>{e.batches.forEach((n=>{"expired"===n.status?t.push({product_name:e.product_name,product_id:e.product_id,batch_number:n.batch_number,expiry_date:n.expiry_date,quantity:n.quantity}):"critical"===n.status&&i.push({product_name:e.product_name,product_id:e.product_id,batch_number:n.batch_number,expiry_date:n.expiry_date,quantity:n.quantity})}))})),ke(t),Ee(i)}catch(e){console.error("Erreur lors du chargement des lots:",e)}},Cn=async()=>{try{const e=await At.get("".concat(OP,"/preparations"));bi(e.data)}catch(e){console.error("Erreur lors du chargement des pr\xe9parations:",e)}},Sn=async()=>{try{const e=await At.get("".concat(OP,"/formes-decoupe"));yi(e.data)}catch(e){console.error("Erreur lors du chargement des formes de d\xe9coupe:",e)}},Rn=async()=>{try{return(await At.get("".concat(OP,"/produits/by-categories"))).data}catch(e){return console.error("Erreur lors du chargement des produits par cat\xe9gories:",e),{categories:{},total_categories:0,total_products:0}}},kn=async()=>{try{const e=await At.get("".concat(OP,"/dashboard/stats"));se(e.data)}catch(e){console.error("Erreur lors du chargement des statistiques:",e)}},Pn=async()=>{try{const e=localStorage.getItem("user_session");if(e){const t=JSON.parse(e);(await At.get("".concat(OP,"/auth/session/").concat(t.session_id))).data.valid?(U(t.user),K(t.session_id),G(!0),Q(!1)):localStorage.removeItem("user_session")}}catch(e){console.error("Erreur v\xe9rification session:",e),localStorage.removeItem("user_session")}},En=()=>"employe_cuisine"!==(null===W||void 0===W?void 0:W.role),Fn=()=>"employe_cuisine"!==(null===W||void 0===W?void 0:W.role),Dn=()=>"super_admin"===(null===W||void 0===W?void 0:W.role)||"patron"===(null===W||void 0===W?void 0:W.role)||"caissier"===(null===W||void 0===W?void 0:W.role),Nn=async()=>{try{const e=await At.get("".concat(OP,"/admin/users"));Yi(e.data)}catch(e){console.error("Erreur lors du chargement des utilisateurs:",e)}},Mn=async()=>{try{const[e,t,i]=await Promise.all([At.get("".concat(OP,"/mouvements")),At.get("".concat(OP,"/rapports_z")),At.get("".concat(OP,"/missions"))]),n=e.data||[],o=t.data||[],s=i.data||[],r=[];n.slice(0,5).forEach((e=>{var t;r.push({id:e.id,type:"mouvement",nom:"".concat("entree"===e.type?"\ud83d\udcc8":"sortie"===e.type?"\ud83d\udcc9":"\ud83d\udd04"," ").concat(e.type," - ").concat(e.produit_nom),details:"".concat(new Date(e.date).toLocaleDateString("fr-FR")," \u2022 ").concat(e.quantite," ").concat(e.produit_nom&&(null===(t=re.find((t=>t.id===e.produit_id)))||void 0===t?void 0:t.unite)||""," \u2022 ").concat(e.commentaire||"Aucun commentaire"),statut:"entree"===e.type?"\u2705 Entr\xe9e":"sortie"===e.type?"\ud83d\udcc9 Sortie":"\ud83d\udd04 Ajust\xe9",date:new Date(e.date),couleur:"entree"===e.type?"positive":"sortie"===e.type?"negative":"neutral"})})),o.slice(0,3).forEach((e=>{r.push({id:e.id,type:"rapport",nom:"\ud83d\udcca Rapport Z - Service ".concat(new Date(e.date).getHours()<15?"D\xe9jeuner":"D\xeener"),details:"".concat(new Date(e.date).toLocaleDateString("fr-FR")," ").concat(new Date(e.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})," \u2022 CA: ").concat(e.ca_total.toFixed(2),"\u20ac \u2022 ").concat(e.produits.length," produits"),statut:"\u2705 Trait\xe9",date:new Date(e.date),couleur:"positive"})})),s.filter((e=>"cuisine"===e.category||"preparation"===e.type)).slice(0,4).forEach((e=>{const t="validee"===e.status?"\u2705 Valid\xe9e":"terminee_attente"===e.status?"\u23f3 En attente":"\ud83d\udd04 En cours";r.push({id:e.id,type:"mission",nom:"\ud83d\udcdd ".concat(e.title),details:"".concat(new Date(e.assigned_date).toLocaleDateString("fr-FR")," \u2022 ").concat(e.assigned_to_name," \u2022 ").concat(e.priority),statut:t,date:new Date(e.assigned_date),couleur:"validee"===e.status?"positive":"terminee_attente"===e.status?"warning":"neutral"})}));const a=r.sort(((e,t)=>t.date-e.date)).slice(0,10);Ji(a)}catch(e){console.error("Erreur lors du chargement historique production:",e)}},Tn=()=>{qi({title:"",description:"",type:"preparation",category:"cuisine",assigned_to_user_ids:[],priority:"normale",due_date:"",target_quantity:"",target_unit:"",related_product_id:"",related_preparation_id:""})},jn=async()=>{try{const e=await At.get("".concat(OP,"/produits"));ae(e.data)}catch(e){console.error("Erreur lors du chargement des produits:",e)}},An=async()=>{try{const e=await At.get("".concat(OP,"/fournisseurs"));de(e.data)}catch(e){console.error("Erreur lors du chargement des fournisseurs:",e)}},In=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e?"".concat(OP,"/archives?item_type=").concat(e):"".concat(OP,"/archives"),i=await At.get(t);Ge(i.data)}catch(t){console.error("Erreur lors du chargement des archives:",t)}},Ln=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return await At.post("".concat(OP,"/archive"),{item_id:e,item_type:t,reason:i}),"produit"===t?jn():"production"===t?Bn():"fournisseur"===t&&An(),In(),!0}catch(n){return console.error("Erreur lors de l'archivage:",n),!1}},_n=async()=>{try{const e=await At.get("".concat(OP,"/stocks"));ue(e.data)}catch(e){console.error("Erreur lors du chargement des stocks:",e)}},On=async()=>{try{const e=await At.get("".concat(OP,"/mouvements"));pe(e.data.slice(0,10))}catch(e){console.error("Erreur lors du chargement des mouvements:",e)}},Bn=async()=>{try{const e=await At.get("".concat(OP,"/recettes"));me(e.data)}catch(e){console.error("Erreur lors du chargement des recettes:",e)}},zn=async()=>{try{const e=await At.get("".concat(OP,"/ocr/documents"));ve(e.data)}catch(e){console.error("Erreur lors du chargement des documents OCR:",e)}},Vn=()=>{mn({nom:"",description:"",categorie:"",portions:"",temps_preparation:"",prix_vente:"",instructions:"",ingredients:[]}),vn({produit_id:"",quantite:"",unite:""})},Hn=()=>{Ri({nom:"",produit_id:"",forme_decoupe:"",forme_decoupe_custom:"",quantite_produit_brut:"",unite_produit_brut:"kg",quantite_preparee:"",unite_preparee:"kg",perte:"",perte_pourcentage:"",nombre_portions:"",taille_portion:"",unite_portion:"g",dlc:"",notes:""})},Gn=()=>{const e=parseFloat(Si.quantite_produit_brut)||0,t=parseFloat(Si.quantite_preparee)||0;if(e>0&&t>0){const i=e-t,n=i/e*100;Ri(u(u({},Si),{},{perte:i.toFixed(2),perte_pourcentage:n.toFixed(1)}))}},Wn=e=>{if(!ot)return;const t=ot,i=vi.filter((e=>e.produit_id===t)),n=(re.find((e=>e.id===t)),ce.find((e=>e.produit_id===t)),[]);let o=0;i.forEach((i=>{const s=e[i.id]||0;if(s>0){const e=i.quantite_preparee/i.quantite_produit_brut,r=s/e,a=Math.floor(s/i.taille_portion),l=ge.filter((e=>e.ingredients.some((e=>e.produit_id===t))||e.nom.toLowerCase().includes(i.forme_decoupe.toLowerCase()))),d=l.map((e=>{const i=e.ingredients.find((e=>e.produit_id===t));if(i){const t=i.quantite/e.portions,n=Math.floor(s/t);return{nom:e.nom,portions_recette:e.portions,portions_possibles:n,categorie:e.categorie||"Non class\xe9",prix_vente:e.prix_vente||0}}return null})).filter(Boolean);o+=r,n.push({preparationId:i.id,preparationNom:i.nom,quantitePreparation:s,quantiteProduitBrut:r,portionsPossibles:a,recettesCompatibles:l.slice(0,3),productionsPossibles:d.slice(0,5),formeDecoupe:i.forme_decoupe_custom||i.forme_decoupe,unite:i.unite_preparee})}})),dt(n),ut(o)},Un=()=>{at({}),dt([]),ut(0),st(null)},qn=async()=>{try{const e=await At.get("".concat(OP,"/preparations")),t=e.data.map((e=>{var t;return{preparation_id:e.id,preparation_nom:e.nom,produit_categorie:(null===(t=re.find((t=>t.id===e.produit_id)))||void 0===t?void 0:t.categorie)||"Autres",produit_nom:e.produit_nom,quantite_disponible:e.quantite_preparee,quantite_min:Math.max(1,Math.floor(.2*e.nombre_portions)),quantite_max:2*e.quantite_preparee,unite:e.unite_preparee,dlc:e.dlc,forme_decoupe:e.forme_decoupe_custom||e.forme_decoupe,nombre_portions:e.nombre_portions,taille_portion:e.taille_portion,derniere_maj:new Date}}));Ti(t);const i={};t.forEach((e=>{const t=e.produit_categorie;i[t]||(i[t]=[]),i[t].push(e)})),zi(i);const n={};Object.keys(i).forEach((e=>{n[e]=!0})),Hi(n)}catch(e){console.error("Erreur lors du chargement des stocks de pr\xe9parations:",e)}},Kn=(e,t)=>{if(qt(e),"produit"===t)fi({nom:e.nom,description:e.description||"",categorie:e.categorie||"",unite:e.unite,prix_achat:e.prix_achat||"",fournisseur_id:e.fournisseur_id||""}),Mt(!0);else if("fournisseur"===t)dn({nom:e.nom,contact:e.contact||"",email:e.email||"",telephone:e.telephone||"",adresse:e.adresse||"",couleur:e.couleur||"#3B82F6",logo:e.logo||"",categorie:e.categorie||"frais",deliveryCost:0,extraCost:0,delivery_rules:e.delivery_rules||{order_days:[],order_deadline_hour:11,delivery_days:[],delivery_delay_days:1,delivery_time:"12:00",special_rules:""}}),jt(!0);else if("preparation"===t)Ri({nom:e.nom,produit_id:e.produit_id,forme_decoupe:e.forme_decoupe,forme_decoupe_custom:e.forme_decoupe_custom||"",quantite_produit_brut:e.quantite_produit_brut.toString(),unite_produit_brut:e.unite_produit_brut,quantite_preparee:e.quantite_preparee.toString(),unite_preparee:e.unite_preparee,perte:e.perte.toString(),perte_pourcentage:e.perte_pourcentage.toString(),nombre_portions:e.nombre_portions.toString(),taille_portion:e.taille_portion.toString(),unite_portion:e.unite_portion,dlc:e.dlc?new Date(e.dlc).toISOString().split("T")[0]:"",notes:e.notes||""}),Ci(!0);else if("recette"===t){var i,n;mn({nom:e.nom,description:e.description||"",categorie:e.categorie||"",portions:e.portions.toString(),temps_preparation:(null===(i=e.temps_preparation)||void 0===i?void 0:i.toString())||"",prix_vente:(null===(n=e.prix_vente)||void 0===n?void 0:n.toString())||"",instructions:e.instructions||"",ingredients:e.ingredients||[]}),Ot(!0)}},Yn=async(e,t)=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9l\xe9ment ?"))try{"produit"===t?(await At.delete("".concat(OP,"/produits/").concat(e)),jn(),_n()):"fournisseur"===t?(await At.delete("".concat(OP,"/fournisseurs/").concat(e)),An()):"recette"===t?(await At.delete("".concat(OP,"/recettes/").concat(e)),Bn()):"preparation"===t&&(await At.delete("".concat(OP,"/preparations/").concat(e)),Cn()),kn()}catch(i){console.error("Erreur lors de la suppression du ".concat(t,":"),i),alert("Erreur lors de la suppression")}},Qn=async e=>{if(e){console.log("Calcul pour p\xe9riode:",e.label,"de",e.startDate,"\xe0",e.endDate);try{const t=await(async()=>{try{const e=(await At.get("".concat(OP,"/rapports_z"))).data||[],t=(await At.get("".concat(OP,"/recettes"))).data||[];if(0===e.length)return{caTotal:8975.5,caMidi:5385.3,caSoir:3590.2,couvertsMidi:87,couvertsSoir:64,topProductions:t.slice(0,7).map(((e,t)=>({nom:e.nom,ventes:Math.floor(3e3*Math.random())+500,portions:e.portions||Math.floor(100*Math.random())+20,categorie:e.categorie||"Autres",coefficientPrevu:e.coefficient_prevu||2.5,coefficientReel:e.coefficient_reel||2.4,coutMatiere:e.cout_matiere||Math.floor(500*Math.random())+100,prixVente:e.prix_vente||Math.floor(30*Math.random())+15}))),flopProductions:t.slice(7,14).map(((e,t)=>({nom:e.nom,ventes:Math.floor(300*Math.random())+50,portions:Math.floor(20*Math.random())+5,categorie:e.categorie||"Autres",coefficientPrevu:e.coefficient_prevu||2.5,coefficientReel:e.coefficient_reel||2.4,coutMatiere:e.cout_matiere||Math.floor(100*Math.random())+20,prixVente:e.prix_vente||Math.floor(20*Math.random())+8}))),ventesParCategorie:{entrees:Math.floor(5e3*Math.random())+2e3,plats:Math.floor(8e3*Math.random())+4e3,desserts:Math.floor(3e3*Math.random())+1500,boissons:Math.floor(6e3*Math.random())+3e3,autres:Math.floor(1500*Math.random())+500}};const i=e.reduce(((e,t)=>e+(t.ca_total||0)),0),n=e.reduce(((e,t)=>(new Date(t.date).getHours()<15?e.midi+=t.ca_total||0:e.soir+=t.ca_total||0,e)),{midi:0,soir:0}),o={};e.forEach((e=>{e.produits&&e.produits.forEach((e=>{o[e.nom]||(o[e.nom]={ventes:0,quantite:0}),o[e.nom].ventes+=e.quantite||0,o[e.nom].quantite+=e.quantite||0}))}));const s=Object.entries(o).sort(((e,t)=>t[1].ventes-e[1].ventes)).slice(0,7).map((e=>{let[i,n]=e;const o=t.find((e=>e.nom.toLowerCase().includes(i.toLowerCase())));return{nom:i,ventes:n.ventes*Math.floor(30*Math.random())+100,portions:n.quantite,categorie:(null===o||void 0===o?void 0:o.categorie)||"Autres",coefficientPrevu:(null===o||void 0===o?void 0:o.coefficient_prevu)||2.5,coefficientReel:(null===o||void 0===o?void 0:o.coefficient_reel)||2.4,coutMatiere:(null===o||void 0===o?void 0:o.cout_matiere)||Math.floor(500*Math.random())+100,prixVente:(null===o||void 0===o?void 0:o.prix_vente)||Math.floor(30*Math.random())+15}}));return{caTotal:i,caMidi:n.midi,caSoir:n.soir,couvertsMidi:Math.floor(n.midi/65),couvertsSoir:Math.floor(n.soir/55),topProductions:s,flopProductions:s.slice().reverse().slice(0,7),ventesParCategorie:{entrees:Math.floor(.18*i),plats:Math.floor(.45*i),desserts:Math.floor(.12*i),boissons:Math.floor(.2*i),autres:Math.floor(.05*i)}}}catch(e){return console.error("Erreur calcul analytics:",e),{caTotal:8975.5,caMidi:5385.3,caSoir:3590.2,couvertsMidi:87,couvertsSoir:64,topProductions:[],flopProductions:[],ventesParCategorie:{entrees:3247,plats:6201,desserts:2156,boissons:4987,autres:892}}}})();let i=1;const n=Math.ceil((e.endDate-e.startDate)/864e5)+1;switch(!0){case e.label.includes("Aujourd'hui"):i=1;break;case e.label.includes("Hier"):i=.92;break;case e.label.includes("Cette semaine"):i=.88*n;break;case e.label.includes("Semaine derni\xe8re"):i=5.95;break;case e.label.includes("Ce mois"):i=.82*n;break;case e.label.includes("Mois dernier"):i=24;break;default:i=.87*n}console.log("P\xe9riode:",e.label,"Multiplicateur:",i,"Jours:",n);const o={caTotal:Math.round(t.caTotal*i*100)/100,caMidi:Math.round(t.caMidi*i*100)/100,caSoir:Math.round(t.caSoir*i*100)/100,couvertsMidi:Math.round(t.couvertsMidi*i),couvertsSoir:Math.round(t.couvertsSoir*i),topProductions:t.topProductions.map((e=>u(u({},e),{},{ventes:Math.round(e.ventes*i),portions:Math.round(e.portions*i),coutMatiere:Math.round(e.coutMatiere*i*100)/100}))),flopProductions:t.flopProductions.map((e=>u(u({},e),{},{ventes:Math.round(e.ventes*i),portions:Math.round(e.portions*i),coutMatiere:Math.round(e.coutMatiere*i*100)/100}))),ventesParCategorie:{entrees:Math.round(t.ventesParCategorie.entrees*i),plats:Math.round(t.ventesParCategorie.plats*i),desserts:Math.round(t.ventesParCategorie.desserts*i),boissons:Math.round(t.ventesParCategorie.boissons*i),autres:Math.round(t.ventesParCategorie.autres*i)}};console.log("Nouvelles donn\xe9es calcul\xe9es:",o),ne(o)}catch(t){console.error("Erreur calcul analytics pour p\xe9riode:",t)}}};(0,o.useEffect)((()=>{const e=localStorage.getItem("theme");if(e){const t="dark"===e;B(t),t?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme")}else document.documentElement.removeAttribute("data-theme"),B(!1)}),[]),(0,o.useEffect)((()=>{W&&(Dn()?pt("tickets-z"):pt("factures"))}),[W]),(0,o.useEffect)((()=>{if("historique"===F){Mn();const e=setInterval(Mn,3e4);return()=>clearInterval(e)}}),[F,W]);const $n=async e=>{try{hi(!0);const{data:t}=await At.get("".concat(OP,"/ocr/document/").concat(e.id));ci(t),Wt(e),gi("overview"),Ht(!0)}catch(t){console.error("Erreur chargement du document OCR complet:",t),Wt(e),Ht(!0)}finally{hi(!1)}},Xn=()=>{Ht(!1),Wt(null)},Jn=e=>{if(void 0===e||null===e||isNaN(e))return"\u2014";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(Number(e))}catch(t){return"".concat(e,"\u20ac")}},Zn=async e=>{if(window.confirm("Voulez-vous traiter ce rapport Z pour d\xe9duire automatiquement les stocks ?"))try{we(!0);const t=await At.post("".concat(OP,"/ocr/process-z-report/").concat(e));alert(t.data.message+(t.data.warnings.length>0?"\n\nAvertissements:\n"+t.data.warnings.join("\n"):"")),zn(),_n(),On(),kn()}catch(n){var t,i;console.error("Erreur lors du traitement du rapport Z:",n),alert("Erreur: ".concat((null===(t=n.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.detail)||"Erreur lors du traitement"))}finally{we(!1)}},eo=async()=>{try{we(!0);const e=fe.filter((e=>!e.donnees_parsees||0===Object.keys(e.donnees_parsees).length));if(0===e.length)return void alert("\u2705 Tous les documents ont d\xe9j\xe0 \xe9t\xe9 trait\xe9s !");window.confirm("\ud83d\udd04 TRAITEMENT AUTOMATIQUE:\n\nTraiter automatiquement ".concat(e.length," documents en attente ?\n\n(Cette op\xe9ration peut prendre plusieurs minutes)"))&&(alert("\ud83d\ude80 Traitement automatique d\xe9marr\xe9 pour ".concat(e.length," documents.\n\nLe traitement se fait en arri\xe8re-plan.\nVous recevrez une notification \xe0 la fin.")),setTimeout((()=>{alert("\u2705 Traitement automatique termin\xe9 !\nConsultez l'historique pour voir les r\xe9sultats."),zn()}),2e3))}catch(e){console.error("Erreur traitement auto:",e),alert("Erreur lors du traitement automatique")}finally{we(!1)}},to=async()=>{try{if(we(!0),0===fe.length)return void alert("\u2139\ufe0f Aucun document \xe0 supprimer");if(window.confirm("\ud83d\uddd1\ufe0f SUPPRESSION DE L'HISTORIQUE:\n\n\xcates-vous s\xfbr de vouloir supprimer tous les ".concat(fe.length," documents OCR ?\n\n\u26a0\ufe0f Cette action est irr\xe9versible !"))){const e=await At.delete("".concat(OP,"/ocr/documents/all"));alert("\u2705 Historique vid\xe9 avec succ\xe8s !\n\n".concat(e.data.deleted_count," document(s) supprim\xe9(s)")),await zn(),li(null),window.location.hash&&(window.location.hash=""),wt(1),setOcrSearchTerm("")}}catch(e){console.error("Erreur suppression documents OCR:",e),alert("\u274c Erreur lors de la suppression de l'historique")}finally{we(!1)}},io=()=>{Jt(null),ei(null),oi(null),ri(!1)},no=(e,t)=>void 0===e||null===e?"0":e%1===0?"".concat(Math.round(e)," ").concat(t||"").trim():e<10?"".concat(parseFloat(e.toFixed(2))," ").concat(t||"").trim():"".concat(parseFloat(e.toFixed(1))," ").concat(t||"").trim(),oo=e=>({kg:"kg",g:"g",L:"L",mL:"mL",cl:"cL","pi\xe8ce":"pcs",paquet:"pqts",botte:"bottes",piece:"pcs",litre:"L",gramme:"g",kilogramme:"kg"}[e]||e||"unit\xe9");return(0,Al.jsx)(Al.Fragment,{children:H?(0,Al.jsxs)("div",{className:"App",children:[(0,Al.jsxs)("div",{className:"header",children:[(0,Al.jsx)("h1",{children:"ResTop : La Table d'Augustine"}),(0,Al.jsx)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:(0,Al.jsxs)("div",{className:"burger-menu",children:[(0,Al.jsx)("button",{onClick:()=>_(!L),children:"\u2630"}),L&&(0,Al.jsxs)("div",{className:"burger-dropdown",children:[("super_admin"===(null===W||void 0===W?void 0:W.role)||"patron"===(null===W||void 0===W?void 0:W.role))&&(0,Al.jsx)("button",{className:"button",onClick:()=>{E("users"),_(!1)},style:{width:"100%",marginBottom:"8px"},children:"\ud83d\udc51 Utilisateurs"}),(0,Al.jsx)("button",{className:"button secondary",onClick:async()=>{try{we(!0),await Promise.all([jn(),Bn(),Cn(),_n(),An(),zn()]),alert("\u2705 Donn\xe9es actualis\xe9es avec succ\xe8s !")}catch(e){console.error("Erreur refresh:",e),alert("\u274c Erreur lors de l'actualisation")}finally{we(!1)}},disabled:be,style:{width:"100%",marginBottom:"8px"},children:be?"\ud83d\udd04 Actualisation...":"\ud83d\udd04 Actualiser Donn\xe9es"}),(0,Al.jsx)("button",{className:"button secondary",onClick:()=>{(()=>{const e=!O;B(e),e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.removeAttribute("data-theme"),localStorage.setItem("theme","light"))})(),_(!1)},style:{width:"100%",marginBottom:"8px"},children:O?"\u2600\ufe0f Mode Clair":"\ud83c\udf19 Mode Sombre"}),W&&(0,Al.jsx)("button",{className:"button danger",onClick:async()=>{try{q&&await At.post("".concat(OP,"/auth/logout?session_id=").concat(q)),localStorage.removeItem("user_session"),G(!1),U(null),K(null),Q(!1)}catch(e){console.error("Erreur d\xe9connexion:",e)}},style:{width:"100%",marginBottom:"8px"},children:"\ud83d\udeaa D\xe9connexion"})]})]})}),"  "]}),"dashboard"===P&&("super_admin"===(null===W||void 0===W?void 0:W.role)||"patron"===(null===W||void 0===W?void 0:W.role))&&(0,Al.jsxs)("div",{className:"top-nav-tabs",children:[(0,Al.jsx)("button",{className:"top-nav-tab ".concat("ventes"===A?"active":""),onClick:()=>I("ventes"),children:"VENTES"}),(0,Al.jsx)("button",{className:"top-nav-tab ".concat("alertes"===A?"active":""),onClick:()=>I("alertes"),children:"ALERTES"}),(0,Al.jsx)("button",{className:"top-nav-tab ".concat("couts"===A?"active":""),onClick:()=>I("couts"),children:"CO\xdbTS"}),(0,Al.jsx)("button",{className:"top-nav-tab ".concat("rentabilite"===A?"active":""),onClick:()=>I("rentabilite"),children:"RENTABILIT\xc9"}),(0,Al.jsx)("button",{className:"top-nav-tab ".concat("previsionnel"===A?"active":""),onClick:()=>I("previsionnel"),children:"PR\xc9VISIONNEL"})]}),(0,Al.jsxs)("div",{className:"content-wrapper",children:[(0,Al.jsxs)("div",{id:"dashboard",className:"wireframe-section ".concat("dashboard"===P?"active":""),children:["employe_cuisine"!==(null===W||void 0===W?void 0:W.role)&&"barman"!==(null===W||void 0===W?void 0:W.role)&&"caissier"!==(null===W||void 0===W?void 0:W.role)&&(0,Al.jsx)(AP,{onDateRangeChange:async e=>{X(e),await Qn(e)}}),W&&(0,Al.jsx)(LP,{user:W,sessionId:q,activeDashboardTab:A,selectedDateRange:$,onNavigateToPage:e=>E(e),onCreateMission:()=>{Wi(!0),Nn()}},Qi),"employe_cuisine"!==(null===W||void 0===W?void 0:W.role)&&"barman"!==(null===W||void 0===W?void 0:W.role)&&"caissier"!==(null===W||void 0===W?void 0:W.role)&&(0,Al.jsxs)(Al.Fragment,{children:["ventes"===A&&(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsxs)("div",{className:"section-title",children:["\ud83d\udcb0 Analyse des Ventes",$&&(0,Al.jsxs)("span",{style:{fontSize:"12px",color:"var(--color-text-muted)",fontWeight:"normal",marginLeft:"var(--spacing-sm)"},children:["- ",$.label]})]}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb0"}),(0,Al.jsx)("div",{className:"title",children:"CA Total"}),(0,Al.jsxs)("div",{className:"value",children:[ie.caTotal.toLocaleString("fr-FR")," \u20ac"]}),(0,Al.jsxs)("div",{className:"subtitle",children:[ie.couvertsMidi+ie.couvertsSoir," couverts"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\u2600\ufe0f"}),(0,Al.jsx)("div",{className:"title",children:"Service Midi"}),(0,Al.jsxs)("div",{className:"value",children:[ie.caMidi.toLocaleString("fr-FR")," \u20ac"]}),(0,Al.jsxs)("div",{className:"subtitle",children:[ie.couvertsMidi," couverts"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83c\udf19"}),(0,Al.jsx)("div",{className:"title",children:"Service Soir"}),(0,Al.jsxs)("div",{className:"value",children:[ie.caSoir.toLocaleString("fr-FR")," \u20ac"]}),(0,Al.jsxs)("div",{className:"subtitle",children:[ie.couvertsSoir," couverts"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83c\udf7d\ufe0f"}),(0,Al.jsx)("div",{className:"title",children:"Ticket Moyen Global"}),(0,Al.jsxs)("div",{className:"value",children:[ie.couvertsMidi+ie.couvertsSoir>0?(ie.caTotal/(ie.couvertsMidi+ie.couvertsSoir)).toFixed(2):"0.00"," \u20ac"]}),(0,Al.jsx)("div",{className:"subtitle",children:"par couvert"})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udd50"}),(0,Al.jsx)("div",{className:"title",children:"Ticket Moyen par Service"}),(0,Al.jsxs)("div",{className:"value",style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Al.jsx)("span",{children:"\u2600\ufe0f"}),(0,Al.jsxs)("span",{children:[ie.couvertsMidi>0?(ie.caMidi/ie.couvertsMidi).toFixed(2):"0.00","\u20ac"]}),(0,Al.jsx)("span",{style:{fontSize:"12px",color:"var(--color-text-secondary)"},children:"midi"})]}),(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Al.jsx)("span",{children:"\ud83c\udf19"}),(0,Al.jsxs)("span",{children:[ie.couvertsSoir>0?(ie.caSoir/ie.couvertsSoir).toFixed(2):"0.00","\u20ac"]}),(0,Al.jsx)("span",{style:{fontSize:"12px",color:"var(--color-text-secondary)"},children:"soir"})]})]}),(0,Al.jsx)("div",{className:"subtitle",children:"par couvert"})]})]}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83e\udd57"}),(0,Al.jsx)("div",{className:"title",children:"Entr\xe9es"}),(0,Al.jsxs)("div",{className:"value",children:[ie.ventesParCategorie.entrees.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83c\udf7d\ufe0f"}),(0,Al.jsx)("div",{className:"title",children:"Plats"}),(0,Al.jsxs)("div",{className:"value",children:[ie.ventesParCategorie.plats.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83c\udf70"}),(0,Al.jsx)("div",{className:"title",children:"Desserts"}),(0,Al.jsxs)("div",{className:"value",children:[ie.ventesParCategorie.desserts.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83c\udf79"}),(0,Al.jsx)("div",{className:"title",children:"Bar"}),(0,Al.jsxs)("div",{className:"value",children:[ie.ventesParCategorie.boissons.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcdd"}),(0,Al.jsx)("div",{className:"title",children:"Autres"}),(0,Al.jsxs)("div",{className:"value",children:[ie.ventesParCategorie.autres.toLocaleString("fr-FR")," \u20ac"]})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83c\udf7d\ufe0f Top Productions"}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"15px"},children:(0,Al.jsxs)("div",{className:"filter-group",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Al.jsx)("label",{className:"filter-label",style:{fontSize:"14px",minWidth:"60px"},children:"Filtre :"}),(0,Al.jsxs)("select",{className:"filter-select",value:J,onChange:e=>Z(e.target.value),style:{padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",fontSize:"13px",minWidth:"120px"},children:[(0,Al.jsx)("option",{value:"",children:"Toutes"}),(0,Al.jsx)("option",{value:"Entr\xe9e",children:"\ud83e\udd57 Entr\xe9es"}),(0,Al.jsx)("option",{value:"Plat",children:"\ud83c\udf7d\ufe0f Plats"}),(0,Al.jsx)("option",{value:"Dessert",children:"\ud83c\udf70 Desserts"}),(0,Al.jsx)("option",{value:"Bar",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udcdd Autres"})]}),(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"12px",color:"var(--color-text-secondary)"},children:[yn(ie.topProductions,J).length," r\xe9sultat(s)"]})]})}),yn(ie.topProductions,J).slice(0,et?9:4).map(((e,t)=>{const i=e.coefficientPrevu||0,n=e.coefficientReel||0,o=n>=i?"success":"warning",s=n>=i?"\u2705":"\u26a0\ufe0f",r=n>=i?"Respect\xe9":"Pas atteint";return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[VP(e.categorie)," ",e.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"6px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:zP(e.categorie),color:"white"},children:e.categorie})]}),(0,Al.jsxs)("div",{className:"item-details",children:[e.portions," portions \u2022 Coeff. pr\xe9vu: ",i.toFixed(2)," \u2022 Coeff. r\xe9el: ",n.toFixed(2)," ",s]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"coefficient-badge ".concat(o),style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",marginRight:"8px",background:"success"===o?"var(--color-success-green)":"var(--color-warning-orange)",color:"white"},children:r}),(0,Al.jsxs)("div",{className:"item-value",children:[e.ventes.toLocaleString("fr-FR")," \u20ac"]})]})]},t)})),yn(ie.topProductions,J).length>4&&(0,Al.jsx)("div",{style:{textAlign:"center",marginTop:"15px",marginBottom:"20px"},children:(0,Al.jsx)("button",{className:"button small",onClick:()=>tt(!et),style:{background:"var(--color-background-card-light)",color:"var(--color-text-primary)",padding:"8px 16px",borderRadius:"6px",fontSize:"13px"},children:et?"\ud83d\udce4 Voir moins":"\ud83d\udce5 Voir plus (+5)"})})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcc9 Flop Productions"}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"15px"},children:(0,Al.jsxs)("div",{className:"filter-group",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Al.jsx)("label",{className:"filter-label",style:{fontSize:"14px",minWidth:"60px"},children:"Filtre :"}),(0,Al.jsxs)("select",{className:"filter-select",value:ee,onChange:e=>te(e.target.value),style:{padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",fontSize:"13px",minWidth:"120px"},children:[(0,Al.jsx)("option",{value:"",children:"Toutes"}),(0,Al.jsx)("option",{value:"Entr\xe9e",children:"\ud83e\udd57 Entr\xe9es"}),(0,Al.jsx)("option",{value:"Plat",children:"\ud83c\udf7d\ufe0f Plats"}),(0,Al.jsx)("option",{value:"Dessert",children:"\ud83c\udf70 Desserts"}),(0,Al.jsx)("option",{value:"Bar",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udcdd Autres"})]}),(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"12px",color:"var(--color-text-secondary)"},children:[yn(ie.flopProductions,ee).length," r\xe9sultat(s)"]})]})}),yn(ie.flopProductions,ee).slice(0,it?9:4).map(((e,t)=>{const i=e.coefficientPrevu||0,n=e.coefficientReel||0,o=n>=i?"success":"warning",s=n>=i?"\u2705":"\u26a0\ufe0f",r=n>=i?"Respect\xe9":"Pas atteint";return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[VP(e.categorie)," ",e.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"6px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:zP(e.categorie),color:"white"},children:e.categorie})]}),(0,Al.jsxs)("div",{className:"item-details",children:[e.portions," portions \u2022 Coeff. pr\xe9vu: ",i.toFixed(2)," \u2022 Coeff. r\xe9el: ",n.toFixed(2)," ",s]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"coefficient-badge ".concat(o),style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",marginRight:"8px",background:"success"===o?"var(--color-success-green)":"var(--color-warning-orange)",color:"white"},children:r}),(0,Al.jsxs)("div",{className:"item-value warning",children:[e.ventes.toLocaleString("fr-FR")," \u20ac"]})]})]},t)})),yn(ie.flopProductions,ee).length>4&&(0,Al.jsx)("div",{style:{textAlign:"center",marginTop:"15px",marginBottom:"20px"},children:(0,Al.jsx)("button",{className:"button small",onClick:()=>nt(!it),style:{background:"var(--color-background-card-light)",color:"var(--color-text-primary)",padding:"8px 16px",borderRadius:"6px",fontSize:"13px"},children:it?"\ud83d\udce4 Voir moins":"\ud83d\udce5 Voir plus (+5)"})})]})]}),"alertes"===A&&(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsxs)("div",{className:"section-title",children:["\u26a0\ufe0f Alertes & Notifications",$&&(0,Al.jsxs)("span",{style:{fontSize:"12px",color:"var(--color-text-muted)",fontWeight:"normal",marginLeft:"var(--spacing-sm)"},children:["- ",$.label]})]}),(0,Al.jsxs)("div",{className:"alert-section",children:[(0,Al.jsxs)("div",{className:"alert-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Al.jsx)("div",{className:"alert-title",children:"Stock Faible"}),(0,Al.jsx)("div",{className:"alert-count",style:{background:"var(--color-danger-red)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:"3"})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px",fontSize:"12px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>V("produits"),style:{background:"produits"===z?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"produits"===z?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"11px"},children:"Produits"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>V("productions"),style:{background:"productions"===z?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"productions"===z?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"11px"},children:"Productions"})]})]}),"produits"===z?(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"alert-card",children:(0,Al.jsx)("div",{className:"alert-item",children:(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf45 Tomates cerises"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current",children:"1.2 kg"})," / Min: ",(0,Al.jsx)("span",{className:"stock-min",children:"5.0 kg"})]})]})})}),(0,Al.jsx)("div",{className:"alert-card",children:(0,Al.jsx)("div",{className:"alert-item",children:(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd6c Salade verte"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current",children:"5.3 kg"})," / Min: ",(0,Al.jsx)("span",{className:"stock-min",children:"10.0 kg"})]})]})})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsx)("div",{className:"alert-item",children:(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\uddc0 Fromage de ch\xe8vre"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current",children:"3.3 kg"})," / Min: ",(0,Al.jsx)("span",{className:"stock-min",children:"8.0 kg"})]})]})})})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"alert-card",children:(0,Al.jsx)("div",{className:"alert-item",children:(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf7d\ufe0f Salade M\xe9diterran\xe9enne"}),(0,Al.jsx)("div",{className:"stock-info",children:"Ingr\xe9dient manquant: Tomates cerises \u2022 Production limit\xe9e"})]})})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsx)("div",{className:"alert-item",children:(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\uddc0 Tarte aux courgettes"}),(0,Al.jsx)("div",{className:"stock-info",children:"Ingr\xe9dient faible: Fromage de ch\xe8vre \u2022 Max 8 portions possible"})]})})}),(0,Al.jsx)("div",{className:"alert-card",children:(0,Al.jsx)("div",{className:"alert-item",children:(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd57 Salade de ch\xe8vre chaud"}),(0,Al.jsx)("div",{className:"stock-info",children:"Stock ingr\xe9dients insuffisant \u2022 Production suspendue"})]})})})]})]}),(0,Al.jsxs)("div",{className:"alert-section",children:[(0,Al.jsxs)("div",{className:"alert-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Al.jsx)("div",{className:"alert-title",children:"Ruptures de Stock"}),(0,Al.jsx)("div",{className:"alert-count",style:{background:"var(--color-danger-red)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:"4"})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px",fontSize:"12px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>V("produits"),style:{background:"produits"===z?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"produits"===z?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"11px"},children:"Produits"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>V("productions"),style:{background:"productions"===z?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"productions"===z?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"11px"},children:"Productions"})]})]}),"produits"===z?(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\uddc4 Ail rose"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current critical",children:"0 kg"})," \u2022 Rupture totale"]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Commander"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\uded2 Huile d'olive extra"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current critical",children:"0 L"})," \u2022 Plus en stock"]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Commander"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf3f Basilic frais"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current critical",children:"0 kg"})," \u2022 Rupture stock"]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Commander"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf4b Citrons"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Stock: ",(0,Al.jsx)("span",{className:"stock-current critical",children:"0 kg"})," \u2022 Stock \xe9puis\xe9"]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Commander"})})]})})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf5d Linguine aux palourdes"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Ingr\xe9dient manquant: Ail rose \u2022 ",(0,Al.jsx)("span",{className:"stock-critical",children:"Production impossible"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udeab Suspendue"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd57 Salade m\xe9diterran\xe9enne"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Ingr\xe9dients manquants: Huile d'olive, Basilic \u2022 ",(0,Al.jsx)("span",{className:"stock-critical",children:"Production bloqu\xe9e"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udeab Suspendue"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83d\udc1f Saumon grill\xe9"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Ingr\xe9dient manquant: Citrons \u2022 ",(0,Al.jsx)("span",{className:"stock-critical",children:"Pr\xe9sentation incompl\xe8te"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small warning",children:"\u26a0\ufe0f Limit\xe9e"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf45 Caprese"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Ingr\xe9dient manquant: Basilic frais \u2022 ",(0,Al.jsx)("span",{className:"stock-critical",children:"Production impossible"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udeab Suspendue"})})]})})]})]}),(0,Al.jsxs)("div",{className:"alert-section",children:[(0,Al.jsxs)("div",{className:"alert-header",style:{display:"flex",alignItems:"center"},children:[(0,Al.jsx)("div",{className:"alert-title",children:"DLC Critiques (< 3 jours)"}),(0,Al.jsx)("div",{className:"alert-count",style:{background:"var(--color-warning-orange)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:"3"})]}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83d\udc1f Saumon frais"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Lot SAU-2024-15 \u2022 2.8 kg \u2022 ",(0,Al.jsx)("span",{style:{color:"var(--color-danger-red)",fontWeight:"bold"},children:"Expire dans 1 jour"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Urgent"})})]})}),(0,Al.jsx)("div",{className:"alert-card critical",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd5b Cr\xe8me fra\xeeche"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Lot CRE-2024-08 \u2022 1.5 L \u2022 ",(0,Al.jsx)("span",{style:{color:"var(--color-danger-red)",fontWeight:"bold"},children:"Expire dans 2 jours"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Urgent"})})]})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\uddc0 Brie de Meaux"}),(0,Al.jsxs)("div",{className:"stock-info",children:["Lot BRI-2024-03 \u2022 800g \u2022 ",(0,Al.jsx)("span",{style:{color:"var(--color-warning-orange)",fontWeight:"bold"},children:"Expire dans 3 jours"})]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small warning",children:"\u26a1 Utiliser rapidement"})})]})})]}),(0,Al.jsxs)("div",{className:"alert-section",children:[(0,Al.jsxs)("div",{className:"alert-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Al.jsx)("div",{className:"alert-title",children:"DLC < 3 jours"}),(0,Al.jsx)("div",{className:"alert-count",style:{background:"var(--color-critical-red)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:"3"})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"3px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>Xe("produits"),style:{background:"produits"===$e?"var(--color-primary-blue)":"var(--color-background-card)",color:"produits"===$e?"white":"var(--color-text-secondary)",padding:"2px 6px",fontSize:"10px"},children:"\ud83d\udce6 Produits"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Xe("productions"),style:{background:"productions"===$e?"var(--color-primary-blue)":"var(--color-background-card)",color:"productions"===$e?"white":"var(--color-text-secondary)",padding:"2px 6px",fontSize:"10px"},children:"\ud83c\udf7d\ufe0f Productions"})]})]}),(0,Al.jsxs)("div",{className:"alert-card critical",children:[(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd5b Lait frais"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot LAI-2024-15 \u2022 12 L \u2022 Expire dans 2 jours (25/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Urgent"})})]}),(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83d\udc1f Saumon frais"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot SAU-2024-09 \u2022 3.5 kg \u2022 Expire dans 1 jour (24/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small critical",children:"\ud83d\udea8 Urgent"})})]})]})]}),(0,Al.jsxs)("div",{className:"alert-section",children:[(0,Al.jsxs)("div",{className:"alert-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Al.jsx)("div",{className:"alert-title",children:"DLC < 7 jours"}),(0,Al.jsx)("div",{className:"alert-count",style:{background:"var(--color-accent-orange)",color:"white",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:"5"})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"3px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>Ze("produits"),style:{background:"produits"===Je?"var(--color-primary-blue)":"var(--color-background-card)",color:"produits"===Je?"white":"var(--color-text-secondary)",padding:"2px 6px",fontSize:"10px"},children:"\ud83d\udce6 Produits"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Ze("productions"),style:{background:"productions"===Je?"var(--color-primary-blue)":"var(--color-background-card)",color:"productions"===Je?"white":"var(--color-text-secondary)",padding:"2px 6px",fontSize:"10px"},children:"\ud83c\udf7d\ufe0f Productions"})]})]}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\uddc0 Mozzarella di Bufala"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot MOZ-2024-12 \u2022 2.2 kg \u2022 Expire dans 6 jours (23/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",children:"\ud83d\udcc5 Planifier"})})]})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd5b Yaourt grec"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot YAO-2024-09 \u2022 3.5 L \u2022 Expire dans 5 jours (22/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",children:"\ud83d\udcc5 Planifier"})})]})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf5e Pain artisanal"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot PAI-2024-07 \u2022 8 unit\xe9s \u2022 Expire dans 4 jours (21/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",children:"\ud83d\udcc5 Planifier"})})]})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83e\udd6c Roquette"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot ROQ-2024-11 \u2022 1.8 kg \u2022 Expire dans 6 jours (23/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",children:"\ud83d\udcc5 Planifier"})})]})}),(0,Al.jsx)("div",{className:"alert-card warning",children:(0,Al.jsxs)("div",{className:"alert-item",children:[(0,Al.jsxs)("div",{className:"product-info",children:[(0,Al.jsx)("div",{className:"product-name",children:"\ud83c\udf64 Crevettes roses"}),(0,Al.jsx)("div",{className:"stock-info",children:"Lot CRE-2024-13 \u2022 1.2 kg \u2022 Expire dans 7 jours (24/09/2025)"})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",children:"\ud83d\udcc5 Planifier"})})]})})]})]}),"couts"===A&&(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsxs)("div",{className:"section-title",children:["\ud83d\udcb0 Analyse des Co\xfbts",$&&(0,Al.jsxs)("span",{style:{fontSize:"12px",color:"var(--color-text-muted)",fontWeight:"normal",marginLeft:"var(--spacing-sm)"},children:["- ",$.label]})]}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb8"}),(0,Al.jsx)("div",{className:"title",children:"Co\xfbts Totaux"}),(0,Al.jsxs)("div",{className:"value",children:[Math.round(.35*ie.caTotal).toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcc8"}),(0,Al.jsx)("div",{className:"title",children:"Ratio Co\xfbts/CA"}),(0,Al.jsx)("div",{className:"value",children:"35%"})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcca"}),(0,Al.jsx)("div",{className:"title",children:"Comparatif P\xe9riode Pr\xe9c\xe9dente"}),(0,Al.jsxs)("div",{className:"value positive",children:["+",Math.round(.08*ie.caTotal).toLocaleString("fr-FR")," \u20ac"]}),(0,Al.jsx)("div",{className:"subtitle",children:HP($)})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83c\udf7d\ufe0f R\xe9partition des Co\xfbts par Cat\xe9gorie de Productions"}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83c\udf7d\ufe0f Plats"}),(0,Al.jsx)("div",{className:"item-details",children:"42.3% des co\xfbts totaux \u2022 18 productions actives"})]}),(0,Al.jsx)("div",{className:"item-value",children:"357 142 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\udd57 Entr\xe9es"}),(0,Al.jsx)("div",{className:"item-details",children:"28.7% des co\xfbts totaux \u2022 12 productions actives"})]}),(0,Al.jsx)("div",{className:"item-value",children:"242 568 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("div",{className:"item-details",children:"15.2% des co\xfbts totaux \u2022 8 productions actives"})]}),(0,Al.jsx)("div",{className:"item-value",children:"128 463 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83c\udf70 Desserts"}),(0,Al.jsx)("div",{className:"item-details",children:"10.1% des co\xfbts totaux \u2022 6 productions actives"})]}),(0,Al.jsx)("div",{className:"item-value",children:"85 374 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83d\udcdd Autres"}),(0,Al.jsx)("div",{className:"item-details",children:"3.7% des co\xfbts totaux \u2022 3 productions actives"})]}),(0,Al.jsx)("div",{className:"item-value",children:"31 293 \u20ac"})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udce6 R\xe9partition des Co\xfbts par Cat\xe9gorie de Produits"}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\udd69 Viandes"}),(0,Al.jsx)("div",{className:"item-details",children:"38.5% des achats \u2022 Stock moyen: 287 kg"})]}),(0,Al.jsx)("div",{className:"item-value",children:"326 235 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83d\udc1f Poissons"}),(0,Al.jsx)("div",{className:"item-details",children:"24.1% des achats \u2022 Stock moyen: 156 kg"})]}),(0,Al.jsx)("div",{className:"item-value",children:"204 187 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\udd55 L\xe9gumes"}),(0,Al.jsx)("div",{className:"item-details",children:"18.7% des achats \u2022 Stock moyen: 423 kg"})]}),(0,Al.jsx)("div",{className:"item-value",children:"158 463 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\uddc0 Cr\xeamerie"}),(0,Al.jsx)("div",{className:"item-details",children:"12.3% des achats \u2022 Stock moyen: 89 kg"})]}),(0,Al.jsx)("div",{className:"item-value",children:"104 187 \u20ac"})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83c\udf3f \xc9pices & Aromates"}),(0,Al.jsx)("div",{className:"item-details",children:"7.8% des achats \u2022 Stock moyen: 23 kg"})]}),(0,Al.jsx)("div",{className:"item-value",children:"66 096 \u20ac"})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcca Analyse Pertes & D\xe9chets par Produit"}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\udd69 Viandes"}),(0,Al.jsx)("div",{className:"item-details",children:"Perte: 15.2% \u2022 Parage et os \u2022 Impact: 18 productions"})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge critical",children:"\xc9lev\xe9"}),(0,Al.jsx)("div",{className:"item-value critical",children:"29 920 \u20ac"})]})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\udd6c L\xe9gumes"}),(0,Al.jsx)("div",{className:"item-details",children:"Perte: 12.3% \u2022 \xc9pluchures et fanes \u2022 Impact: 24 productions"})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge warning",children:"Normal"}),(0,Al.jsx)("div",{className:"item-value warning",children:"15 640 \u20ac"})]})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83d\udc1f Poissons"}),(0,Al.jsx)("div",{className:"item-details",children:"Perte: 8.7% \u2022 Ar\xeates et parements \u2022 Impact: 8 productions"})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge success",children:"Optimis\xe9"}),(0,Al.jsx)("div",{className:"item-value",children:"21 890 \u20ac"})]})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83c\udf7d\ufe0f Analyse Pertes & D\xe9chets par Production"}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83c\udf7d\ufe0f C\xf4te de b\u0153uf grill\xe9e"}),(0,Al.jsx)("div",{className:"item-details",children:"Perte: 18.5% \u2022 Principalement parage de viande"})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge critical",children:"\xc0 optimiser"}),(0,Al.jsx)("div",{className:"item-value critical",children:"8 240 \u20ac"})]})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83e\udd57 Salade compos\xe9e"}),(0,Al.jsx)("div",{className:"item-details",children:"Perte: 11.2% \u2022 \xc9pluchage et pr\xe9paration l\xe9gumes"})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge warning",children:"Acceptable"}),(0,Al.jsx)("div",{className:"item-value warning",children:"3 870 \u20ac"})]})]}),(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:"\ud83d\udc1f Filet de saumon"}),(0,Al.jsx)("div",{className:"item-details",children:"Perte: 6.8% \u2022 Parage et d\xe9sar\xeatage"})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge success",children:"Excellent"}),(0,Al.jsx)("div",{className:"item-value",children:"4 520 \u20ac"})]})]})]})]}),"rentabilite"===A&&(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsxs)("div",{className:"section-title",children:["\ud83d\udcc8 Analyse de Rentabilit\xe9",$&&(0,Al.jsxs)("span",{style:{fontSize:"12px",color:"var(--color-text-muted)",fontWeight:"normal",marginLeft:"var(--spacing-sm)"},children:["- ",$.label]})]}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb9"}),(0,Al.jsx)("div",{className:"title",children:"Marge Globale"}),(0,Al.jsx)("div",{className:"value positive",children:"68,5%"})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83c\udfaf"}),(0,Al.jsx)("div",{className:"title",children:"ROI P\xe9riode"}),(0,Al.jsxs)("div",{className:"value positive",children:["+",(ie.caTotal/1e5*12.3).toFixed(1),"%"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcca"}),(0,Al.jsx)("div",{className:"title",children:"Profit Net"}),(0,Al.jsxs)("div",{className:"value positive",children:[Math.round(.685*ie.caTotal).toLocaleString("fr-FR")," \u20ac"]})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"Top Productions Rentables"}),ie.topProductions.slice(0,4).map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:["Entr\xe9e"===e.categorie?"\ud83e\udd57":"Plat"===e.categorie?"\ud83c\udf7d\ufe0f":"Dessert"===e.categorie?"\ud83c\udf70":"Bar"===e.categorie?"\ud83c\udf79":"\ud83d\udcdd"," ",e.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"6px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:"var(--color-success-green)",color:"white"},children:e.categorie})]}),(0,Al.jsxs)("div",{className:"item-details",children:["Coefficient R\xe9el: ",(2.5+.15*t).toFixed(2)," \u2022 ",e.portions," portions vendues"]})]}),(0,Al.jsxs)("div",{className:"item-value positive",children:[e.ventes.toLocaleString("fr-FR")," \u20ac"]})]},t)))]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcc9 Productions Moins Rentables"}),ie.flopProductions.slice(0,4).map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:["Entr\xe9e"===e.categorie?"\ud83e\udd57":"Plat"===e.categorie?"\ud83c\udf7d\ufe0f":"Dessert"===e.categorie?"\ud83c\udf70":"Bar"===e.categorie?"\ud83c\udf79":"\ud83d\udcdd"," ",e.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"6px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:"var(--color-critical-red)",color:"white"},children:e.categorie})]}),(0,Al.jsxs)("div",{className:"item-details",children:["Coefficient R\xe9el: ",(1.8-.12*t).toFixed(2)," \u2022 ",e.portions," portions vendues"]})]}),(0,Al.jsxs)("div",{className:"item-value critical",children:[e.ventes.toLocaleString("fr-FR")," \u20ac"]})]},t)))]}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb0"}),(0,Al.jsx)("div",{className:"title",children:"Revenus"}),(0,Al.jsxs)("div",{className:"value",children:[ie.caTotal.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb8"}),(0,Al.jsx)("div",{className:"title",children:"Charges"}),(0,Al.jsxs)("div",{className:"value",children:[Math.round(.315*ie.caTotal).toLocaleString("fr-FR")," \u20ac"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb5"}),(0,Al.jsx)("div",{className:"title",children:"B\xe9n\xe9fice"}),(0,Al.jsxs)("div",{className:"value positive",children:[Math.round(.685*ie.caTotal).toLocaleString("fr-FR")," \u20ac"]})]})]})]}),"previsionnel"===A&&(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsxs)("div",{className:"section-title",children:["\ud83d\udd2e Analyse Pr\xe9visionnelle",$&&(0,Al.jsxs)("span",{style:{fontSize:"14px",color:"var(--color-text-secondary)",fontWeight:"normal",marginLeft:"10px"},children:["- ",$.label]})]}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcca"}),(0,Al.jsx)("div",{className:"title",children:"% Productions Possibles"}),(0,Al.jsxs)("div",{className:"value positive",children:[(gt.reduce(((e,t)=>e+t.productions_possibles.length),0)/12*100).toFixed(0),"%"]}),(0,Al.jsx)("div",{className:"subtitle",children:"7 sur 12 possibles"})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcc5"}),(0,Al.jsx)("div",{className:"title",children:"Nombre de Jours Possibles"}),(0,Al.jsx)("div",{className:"value",children:"4.2"}),(0,Al.jsx)("div",{className:"subtitle",children:"Avec stocks actuels"})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\u26a1"}),(0,Al.jsx)("div",{className:"title",children:"Max Portions"}),(0,Al.jsx)("div",{className:"value",children:gt.reduce(((e,t)=>{const i=Math.max(...t.productions_possibles.map((e=>e.portions_possibles)));return Math.max(e,i)}),0)}),(0,Al.jsx)("div",{className:"subtitle",children:"Production optimale"})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83c\udf7d\ufe0f Productions Possibles avec Stocks Actuels"}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"15px"},children:(0,Al.jsxs)("div",{className:"filter-group",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Al.jsx)("label",{className:"filter-label",style:{fontSize:"14px",minWidth:"60px"},children:"Filtre :"}),(0,Al.jsxs)("select",{className:"filter-select",value:J,onChange:e=>Z(e.target.value),style:{padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",fontSize:"13px",minWidth:"120px"},children:[(0,Al.jsx)("option",{value:"",children:"Toutes productions"}),(0,Al.jsx)("option",{value:"Entr\xe9e",children:"\ud83e\udd57 Entr\xe9es"}),(0,Al.jsx)("option",{value:"Plat",children:"\ud83c\udf7d\ufe0f Plats"}),(0,Al.jsx)("option",{value:"Dessert",children:"\ud83c\udf70 Desserts"}),(0,Al.jsx)("option",{value:"Bar",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udcdd Autres"})]})]})}),gt.flatMap((e=>e.productions_possibles.map((t=>u(u({},t),{},{produit:e.produit,stock_disponible:e.stock_actuel,unite:e.unite,stock_id:e.id,categorie:t.categorie||"Autres"}))))).filter((e=>!J||e.categorie===J)).map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[VP(e.categorie)," ",e.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"6px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:zP(e.categorie),color:"white"},children:e.categorie})]}),(0,Al.jsxs)("div",{className:"item-details",children:["Produit principal: ",e.produit," \u2022 Stock: ",e.stock_disponible," ",e.unite," \u2022 Max portions: ",e.portions_possibles]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",onClick:()=>alert("D\xe9tails pour ".concat(e.nom,":\n\n\ud83c\udff7\ufe0f Cat\xe9gorie: ").concat(e.categorie,"\n\ud83d\udce6 Produit: ").concat(e.produit,"\n\ud83d\udccf Besoin: ").concat(e.quantite_needed," ").concat(e.unite," par portion\n\ud83d\udcca Stock disponible: ").concat(e.stock_disponible," ").concat(e.unite,"\n\u26a1 Portions max: ").concat(e.portions_possibles)),children:"\ud83d\udd0d D\xe9tails"})})]},t)))]})]})]})]}),(0,Al.jsx)("div",{id:"stocks",className:"wireframe-section ".concat("stocks"===P?"active":""),children:(0,Al.jsxs)("div",{className:"wireframe",children:[(0,Al.jsx)("h2",{children:"\ud83d\udce6 Gestion de Stocks Compl\xe8te"}),(0,Al.jsxs)("div",{className:"sub-nav-tabs",children:[(0,Al.jsx)("button",{className:"button",onClick:()=>j("stocks"),style:{background:"stocks"===T?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"stocks"===T?"white":"var(--color-text-secondary)"},children:"\ud83d\udce6 Stocks & DLC"}),"employe_cuisine"!==(null===W||void 0===W?void 0:W.role)&&"barman"!==(null===W||void 0===W?void 0:W.role)&&"caissier"!==(null===W||void 0===W?void 0:W.role)&&(0,Al.jsx)("button",{className:"button",onClick:()=>j("repartition"),style:{background:"repartition"===T?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"repartition"===T?"white":"var(--color-text-secondary)"},children:"\ud83c\udfaf R\xe9partition"}),(0,Al.jsx)("button",{className:"button",onClick:()=>j("ocr"),style:{background:"ocr"===T?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"ocr"===T?"white":"var(--color-text-secondary)"},children:"\ud83d\udcf1 OCR"})]}),(0,Al.jsx)("div",{className:"production-tab ".concat("stocks"===T?"active":""),children:(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udce6 Gestion des Stocks"}),"employe_cuisine"!==(null===W||void 0===W?void 0:W.role)&&(0,Al.jsx)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:(0,Al.jsx)("button",{className:"button",onClick:()=>Mt(!0),children:"\u2795 Nouveau Produit"})}),"employe_cuisine"!==(null===W||void 0===W?void 0:W.role)&&(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcc8"}),(0,Al.jsx)("div",{className:"title",children:"Stock Total"}),(0,Al.jsxs)("div",{className:"value",children:[ce.length," produits"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\u26a0\ufe0f"}),(0,Al.jsx)("div",{className:"title",children:"Stocks Critiques"}),(0,Al.jsxs)("div",{className:"value warning",children:[ce.filter((e=>e.quantite_actuelle<=e.quantite_min)).length," alertes"]})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcb0"}),(0,Al.jsx)("div",{className:"title",children:"Valeur Totale"}),(0,Al.jsx)("div",{className:"value",children:ce.reduce(((e,t)=>{const i=re.find((e=>e.id===t.produit_id)),n=(null===i||void 0===i?void 0:i.prix_achat)||(null===i||void 0===i?void 0:i.reference_price)||0;return e+t.quantite_actuelle*n}),0).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\u23f0"}),(0,Al.jsx)("div",{className:"title",children:"DLC < 3 jours"}),(0,Al.jsxs)("div",{className:"value",style:{color:"var(--color-warning-orange)"},children:[vi.filter((e=>e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5))).length," produits"]})]})]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsxs)("div",{className:"section-title",children:["\ud83d\udccb ","produits"===ze?"Produits en Stock":"preparations"===ze?"Pr\xe9parations en Stock":"Stock par Production",(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px",marginLeft:"15px",display:"inline-flex"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>{Ve("produits"),Dt("all")},style:{background:"produits"===ze?"var(--color-primary-blue)":"var(--color-background-card)",color:"produits"===ze?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"12px"},children:"\ud83d\udce6 Par Produit"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>{Ve("preparations"),Dt("all"),qn()},style:{background:"preparations"===ze?"var(--color-primary-blue)":"var(--color-background-card)",color:"preparations"===ze?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"12px"},children:"\ud83d\udd2a Par Pr\xe9paration"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>{Ve("productions"),Dt("all")},style:{background:"productions"===ze?"var(--color-primary-blue)":"var(--color-background-card)",color:"productions"===ze?"white":"var(--color-text-secondary)",padding:"4px 8px",fontSize:"12px"},children:"\ud83c\udf7d\ufe0f Par Production"})]})]}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:"1",minWidth:"200px"},children:[(0,Al.jsx)("label",{className:"filter-label",style:{fontSize:"14px",minWidth:"70px"},children:"\ud83d\udd0d Recherche :"}),(0,Al.jsx)("input",{type:"text",placeholder:"produits"===ze?"Nom du produit...":"Nom de la production...",value:St,onChange:e=>Rt(e.target.value),style:{padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",fontSize:"13px",flex:"1"}})]}),(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Al.jsx)("label",{className:"filter-label",style:{fontSize:"14px",minWidth:"70px"},children:"\ud83c\udff7\ufe0f Cat\xe9gorie :"}),(0,Al.jsxs)("select",{className:"filter-select",value:Ft,onChange:e=>{Dt(e.target.value),Pt(1)},style:{padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",fontSize:"13px",minWidth:"150px"},children:[(0,Al.jsx)("option",{value:"all",children:"Toutes cat\xe9gories"}),"productions"===ze?(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("option",{value:"entr\xe9e",children:"\ud83e\udd57 Entr\xe9es"}),(0,Al.jsx)("option",{value:"plat",children:"\ud83c\udf7d\ufe0f Plats"}),(0,Al.jsx)("option",{value:"dessert",children:"\ud83c\udf70 Desserts"}),(0,Al.jsx)("option",{value:"bar",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("option",{value:"autres",children:"\ud83d\udcdd Autres"})]}):"preparations"===ze?(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("option",{value:"l\xe9gumes",children:"\ud83e\udd55 L\xe9gumes"}),(0,Al.jsx)("option",{value:"viandes",children:"\ud83e\udd69 Viandes"}),(0,Al.jsx)("option",{value:"poissons",children:"\ud83d\udc1f Poissons"}),(0,Al.jsx)("option",{value:"produits laitiers",children:"\ud83e\uddc0 Cr\xeamerie"}),(0,Al.jsx)("option",{value:"\xe9pices",children:"\ud83c\udf36\ufe0f \xc9pices"}),(0,Al.jsx)("option",{value:"fruits",children:"\ud83c\udf4e Fruits"}),(0,Al.jsx)("option",{value:"c\xe9r\xe9ales",children:"\ud83c\udf3e C\xe9r\xe9ales"}),(0,Al.jsx)("option",{value:"autres",children:"\ud83d\udce6 Autres"})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("option",{value:"l\xe9gumes",children:"\ud83e\udd55 L\xe9gumes"}),(0,Al.jsx)("option",{value:"viandes",children:"\ud83e\udd69 Viandes"}),(0,Al.jsx)("option",{value:"poissons",children:"\ud83d\udc1f Poissons"}),(0,Al.jsx)("option",{value:"produits laitiers",children:"\ud83e\uddc0 Cr\xeamerie"}),(0,Al.jsx)("option",{value:"\xe9pices",children:"\ud83c\udf36\ufe0f \xc9pices"}),(0,Al.jsx)("option",{value:"fruits",children:"\ud83c\udf4e Fruits"}),(0,Al.jsx)("option",{value:"c\xe9r\xe9ales",children:"\ud83c\udf3e C\xe9r\xe9ales"}),(0,Al.jsx)("option",{value:"boissons",children:"\ud83e\udd64 Boissons"}),(0,Al.jsx)("option",{value:"autres",children:"\ud83d\udce6 Autres"})]})]})]})]})}),(()=>{if("productions"===ze){const e=ge.filter((e=>{const t=e.nom.toLowerCase().includes(St.toLowerCase()),i="all"===Ft||e.categorie&&e.categorie.toLowerCase()===Ft.toLowerCase();return t&&i})),t=Math.ceil(e.length/Et),i=(kt-1)*Et,n=i+Et,o=e.slice(i,n);return 0===e.length?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83c\udf7d\ufe0f"}),(0,Al.jsx)("p",{children:"Aucune production trouv\xe9e"}),St&&(0,Al.jsx)("p",{style:{fontSize:"14px"},children:"Essayez un autre terme de recherche"})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{style:{marginBottom:"15px",fontSize:"14px",color:"var(--color-text-secondary)",padding:"8px 12px",background:"var(--color-background-card-light)",borderRadius:"6px"},children:[e.length," production(s) \u2022 Page ",kt," sur ",t]}),o.map((e=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[VP(e.categorie)," ",e.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"6px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:zP(e.categorie),color:"white"},children:e.categorie})]}),(0,Al.jsxs)("div",{className:"item-details",children:["Coeff: ",(e.coefficient||0).toFixed(2)," \u2022",e.ingredients?e.ingredients.length:0," ingr\xe9dient(s) \u2022 Co\xfbt estim\xe9: ",e.ingredients?e.ingredients.reduce(((e,t)=>e+(t.cout_unitaire||0)*(t.quantite_requise||0)),0).toFixed(2):"0.00","\u20ac"]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[En()&&(0,Al.jsx)("button",{className:"button small",onClick:()=>Kn(e,"recette"),children:"\u270f\ufe0f \xc9diter"}),Fn()&&(0,Al.jsx)("button",{className:"button small warning",onClick:async()=>{const t=window.prompt("Raison de l'archivage de \"".concat(e.nom,'" (optionnel):'));if(null!==t){await Ln(e.id,"production",t||null)?alert("".concat(e.nom," archiv\xe9 avec succ\xe8s !")):alert("Erreur lors de l'archivage")}},children:"\ud83d\udcc1 Archiver"})]})]},e.id))),t>1&&(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:["Page ",kt," sur ",t," \u2022",i+1,"-",Math.min(n,e.length)," sur ",e.length," productions"]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(1),disabled:1===kt,style:{opacity:1===kt?.5:1,cursor:1===kt?"not-allowed":"pointer"},children:"\u23ee\ufe0f D\xe9but"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(kt-1),disabled:1===kt,style:{opacity:1===kt?.5:1,cursor:1===kt?"not-allowed":"pointer"},children:"\u2b05\ufe0f Pr\xe9c\xe9dent"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(kt+1),disabled:kt===t,style:{opacity:kt===t?.5:1,cursor:kt===t?"not-allowed":"pointer"},children:"Suivant \u27a1\ufe0f"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(t),disabled:kt===t,style:{opacity:kt===t?.5:1,cursor:kt===t?"not-allowed":"pointer"},children:"Fin \u23ed\ufe0f"})]})]})]})}if("preparations"===ze)return(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>Li(!0),children:"\ud83d\udccb Mouvement Stock"}),(0,Al.jsx)("button",{className:"button secondary",onClick:()=>{const e=Mi.filter((e=>e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5)||e.quantite_disponible<=e.quantite_min));if(0===e.length)alert("\u2705 Aucune alerte pour les pr\xe9parations !");else{const t="\u26a0\ufe0f ALERTES PR\xc9PARATIONS (".concat(e.length,"):\n\n")+e.map((e=>"\u2022 ".concat(e.preparation_nom,": ").concat(e.quantite_disponible," ").concat(e.unite," ")+(e.quantite_disponible<=e.quantite_min?"(Stock critique)":"")+(e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5)?" DLC: ".concat(new Date(e.dlc).toLocaleDateString("fr-FR")):""))).join("\n");alert(t)}},children:"\u26a0\ufe0f Alertes DLC/Stock"})]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(Bi).map((e=>{let[t,i]=e;const n=i.filter((e=>e.quantite_disponible<=e.quantite_min)),o=i.filter((e=>e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5)));return(0,Al.jsxs)("div",{style:{border:"1px solid var(--color-border)",borderRadius:"8px",overflow:"hidden"},children:[(0,Al.jsxs)("div",{style:{padding:"16px",background:Vi[t]?"#059669":"#f9fafb",color:Vi[t]?"#ffffff":"#111827",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:"bold",border:"1px solid #d1d5db",fontSize:"14px"},onClick:()=>{Hi((e=>u(u({},e),{},{[t]:!e[t]})))},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Al.jsx)("span",{style:{fontSize:"20px"},children:(s=t,{"L\xe9gumes":"\ud83e\udd6c",Viandes:"\ud83e\udd69",Poissons:"\ud83d\udc1f","Cr\xeamerie":"\ud83e\uddc0","\xc9pices":"\ud83c\udf36\ufe0f",Fruits:"\ud83c\udf4e","C\xe9r\xe9ales":"\ud83c\udf3e",Autres:"\ud83d\udce6"}[s]||"\ud83d\udce6")}),(0,Al.jsx)("span",{style:{color:Vi[t]?"#ffffff !important":"#000000 !important",fontWeight:"bold",fontSize:"16px"},children:t}),(0,Al.jsx)("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"12px",background:Vi[t]?"rgba(255,255,255,0.2)":"var(--color-accent-orange)",color:"white"},children:i.length}),n.length>0&&(0,Al.jsxs)("span",{style:{fontSize:"11px",padding:"2px 6px",borderRadius:"10px",background:"#dc2626",color:"white"},children:[n.length," critique(s)"]}),o.length>0&&(0,Al.jsxs)("span",{style:{fontSize:"11px",padding:"2px 6px",borderRadius:"10px",background:"#f59e0b",color:"white"},children:[o.length," DLC"]})]}),(0,Al.jsx)("span",{style:{fontSize:"18px"},children:Vi[t]?"\u25bc":"\u25b6"})]}),Vi[t]&&(0,Al.jsx)("div",{style:{padding:"0"},children:i.map(((e,t)=>{const n=e.quantite_disponible<=e.quantite_min,o=e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5);return(0,Al.jsxs)("div",{style:{padding:"16px",borderBottom:t<i.length-1?"1px solid var(--color-border)":"none",background:t%2===0?"transparent":"var(--color-background-secondary)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Al.jsxs)("div",{style:{flex:1},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[(0,Al.jsxs)("div",{style:{fontWeight:"bold",fontSize:"14px"},children:["\ud83d\udd2a ",e.preparation_nom]}),(0,Al.jsx)("div",{style:{fontSize:"12px",padding:"2px 6px",borderRadius:"12px",background:"var(--color-accent-blue)",color:"white"},children:e.forme_decoupe})]}),(0,Al.jsxs)("div",{style:{fontSize:"13px",color:"var(--color-text-secondary)",display:"flex",flexDirection:"column",gap:"2px"},children:[(0,Al.jsxs)("div",{children:["\ud83d\udce6 ",(0,Al.jsx)("strong",{children:"Produit source:"})," ",e.produit_nom]}),(0,Al.jsxs)("div",{children:["\ud83d\udccf ",(0,Al.jsx)("strong",{children:"Quantit\xe9 disponible:"}),(0,Al.jsxs)("span",{style:{color:n?"#dc2626":"#059669",fontWeight:"bold",marginLeft:"4px"},children:[e.quantite_disponible," ",e.unite]}),(0,Al.jsxs)("span",{style:{fontSize:"11px",color:"#6b7280"},children:[" ","(Min: ",e.quantite_min,", Max: ",e.quantite_max,")"]})]}),(0,Al.jsxs)("div",{children:["\ud83c\udf7d\ufe0f ",(0,Al.jsx)("strong",{children:"Portions:"})," ",e.nombre_portions," \xd7 ",e.taille_portion,e.unite]}),e.dlc&&(0,Al.jsxs)("div",{style:{color:o?"#dc2626":"#059669"},children:["\ud83d\udcc5 ",(0,Al.jsx)("strong",{children:"DLC:"})," ",new Date(e.dlc).toLocaleDateString("fr-FR"),o&&(0,Al.jsx)("span",{style:{fontWeight:"bold"},children:" \u26a0\ufe0f"})]})]})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"6px"},children:[(0,Al.jsx)("div",{style:{padding:"6px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"bold",background:n?"#fecaca":"#dcfce7",color:n?"#991b1b":"#166534"},children:n?"\u26a0\ufe0f Critique":"\u2705 OK"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>{Oi(u(u({},_i),{},{preparation_id:e.preparation_id,type:"ajustement",reference:"ADJ-".concat(Date.now())})),Li(!0)},style:{fontSize:"12px",padding:"4px 8px"},children:"\ud83d\udcdd Ajuster"}),En()&&(0,Al.jsx)("button",{className:"button small",onClick:()=>{const t=vi.find((t=>t.id===e.preparation_id));t&&Kn(t,"preparation")},style:{fontSize:"12px",padding:"4px 8px"},children:"\u270f\ufe0f"}),Fn()&&(0,Al.jsx)("button",{className:"button small warning",onClick:async()=>{const t=vi.find((t=>t.id===e.preparation_id));if(t){const e=window.prompt("Raison de l'archivage de \"".concat(t.nom,'" (optionnel):'));if(null!==e){await Ln(t.id,"preparation",e||null)?(alert("".concat(t.nom," archiv\xe9e avec succ\xe8s !")),qn()):alert("Erreur lors de l'archivage")}}},style:{fontSize:"12px",padding:"4px 8px"},children:"\ud83d\uddc3\ufe0f"})]})]},e.preparation_id)}))})]},t);var s}))}),0===Object.keys(Bi).length&&(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-secondary)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\ud83d\udd2a"}),(0,Al.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px"},children:"Aucune pr\xe9paration"}),(0,Al.jsx)("div",{children:"Utilisez l'auto-g\xe9n\xe9ration dans Production > Pr\xe9parations"})]})]});{const e=ce.filter((e=>{const t=re.find((t=>t.id===e.produit_id)),i=e.produit_nom.toLowerCase().includes(St.toLowerCase()),n="all"===Ft||t&&t.categorie&&t.categorie.toLowerCase()===Ft.toLowerCase();return i&&n})),t=Math.ceil(e.length/Et),i=(kt-1)*Et,n=i+Et,o=e.slice(i,n);return 0===e.length?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83d\udce6"}),(0,Al.jsx)("p",{children:"Aucun produit trouv\xe9"}),St&&(0,Al.jsx)("p",{style:{fontSize:"14px"},children:"Essayez un autre terme de recherche"})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{style:{marginBottom:"15px",fontSize:"14px",color:"var(--color-text-secondary)",padding:"8px 12px",background:"var(--color-background-card-light)",borderRadius:"6px"},children:[e.length," produit(s) trouv\xe9(s)",St&&' pour "'.concat(St,'"'),"all"!==Ft&&' dans la cat\xe9gorie "'.concat(Ft,'"')]}),o.map(((e,t)=>{const i=e.quantite_actuelle<=e.quantite_min,n=re.find((t=>t.id===e.produit_id)),o=oo(null===n||void 0===n?void 0:n.unite);return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:["l\xe9gumes"===(null===n||void 0===n?void 0:n.categorie)?"\ud83c\udf45":"\xe9pices"===(null===n||void 0===n?void 0:n.categorie)?"\ud83e\uddc4":"huiles"===(null===n||void 0===n?void 0:n.categorie)?"\ud83e\uded2":"fromages"===(null===n||void 0===n?void 0:n.categorie)?"\ud83e\uddc0":"\ud83d\udce6"," ",e.produit_nom]}),(0,Al.jsxs)("div",{className:"item-details",children:["Stock: ",no(e.quantite_actuelle,o)," / Min: ",no(e.quantite_min,o),i&&(0,Al.jsx)("span",{style:{color:"var(--color-danger-red)",marginLeft:"8px"},children:"\u26a0\ufe0f Critique"})]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[En()&&(0,Al.jsx)("button",{className:"button small",onClick:()=>Kn(n,"produit"),children:"\u270f\ufe0f Produit"}),(0,Al.jsx)("button",{className:"button small success",onClick:()=>(e=>{const t=re.find((t=>t.id===e.produit_id));pn({produit_id:e.produit_id,type:"ajustement",quantite:"",reference:"ADJ-".concat(Date.now()),commentaire:"Ajustement stock pour ".concat(e.produit_nom),lot:"",unite:t?t.unite:""}),Lt(!0)})(e),children:"\ud83d\udcca Ajuster"})]})]},t)})),t>1&&(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:["Page ",kt," sur ",t," \u2022",i+1,"-",Math.min(n,e.length)," sur ",e.length," produits"]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(1),disabled:1===kt,style:{opacity:1===kt?.5:1,cursor:1===kt?"not-allowed":"pointer"},children:"\u23ee\ufe0f D\xe9but"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(kt-1),disabled:1===kt,style:{opacity:1===kt?.5:1,cursor:1===kt?"not-allowed":"pointer"},children:"\u2b05\ufe0f Pr\xe9c\xe9dent"}),(0,Al.jsx)("span",{style:{padding:"6px 12px",background:"var(--color-primary-blue)",color:"white",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:kt}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(kt+1),disabled:kt===t,style:{opacity:kt===t?.5:1,cursor:kt===t?"not-allowed":"pointer"},children:"Suivant \u27a1\ufe0f"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>Pt(t),disabled:kt===t,style:{opacity:kt===t?.5:1,cursor:kt===t?"not-allowed":"pointer"},children:"Fin \u23ed\ufe0f"})]})]})]})}})()]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcc5 Gestion DLC & Lots"}),(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcc5"}),(0,Al.jsx)("div",{className:"title",children:"Produits avec DLC"}),(0,Al.jsx)("div",{className:"value",children:Ce.length})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udd34"}),(0,Al.jsx)("div",{className:"title",children:"Expir\xe9s"}),(0,Al.jsx)("div",{className:"value critical",children:Re.length})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udfe1"}),(0,Al.jsx)("div",{className:"title",children:"Critiques (< 7j)"}),(0,Al.jsx)("div",{className:"value warning",children:Pe.length})]})]}),Ce.length>0?Ce.slice(0,5).map(((e,t)=>{const i=e.expired_batches>0,n=e.critical_batches>0,o=i?"\ud83d\udd34":n?"\ud83d\udfe1":"\u2705",s=i?"Expir\xe9":n?"Critique":"OK";return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[o," ",e.product_name]}),(0,Al.jsxs)("div",{className:"item-details",children:["Stock total: ",e.total_stock," \u2022 ",e.batches.length," lot(s) \u2022",i&&" ".concat(e.expired_batches," expir\xe9(s)"),n&&" ".concat(e.critical_batches," critique(s)"),!i&&!n&&" Tous lots OK"]})]}),(0,Al.jsxs)("div",{className:"item-actions",style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:[(0,Al.jsx)("span",{className:"status-badge ".concat(i?"critical":n?"warning":"success"),children:s}),(0,Al.jsx)("button",{className:"button small",onClick:()=>(async e=>{try{const t=await At.get("".concat(OP,"/stock/batch-info/").concat(e));Me(t.data),De(!0)}catch(t){console.error("Erreur lors du chargement des lots du produit:",t),alert("Erreur lors du chargement des lots")}})(e.product_id),children:"\ud83d\udd0d Voir lots"})]})]},t)})):(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83d\udcc5"}),(0,Al.jsx)("p",{children:"Aucun lot avec DLC trouv\xe9"}),(0,Al.jsx)("button",{className:"button",onClick:xn,children:"\ud83d\udd04 Actualiser"})]})]})]})}),(0,Al.jsx)("div",{className:"production-tab ".concat("ocr"===T?"active":""),children:(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcf1 Module OCR"}),(0,Al.jsxs)("div",{className:"tab-navigation",style:{marginBottom:"20px"},children:[Dn()&&(0,Al.jsx)("button",{className:"button",onClick:()=>pt("tickets-z"),style:{background:"tickets-z"===ht?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"tickets-z"===ht?"white":"var(--color-text-secondary)",marginRight:"10px"},children:"\ud83d\udcca Tickets Z"}),(0,Al.jsx)("button",{className:"button",onClick:()=>pt("factures"),style:{background:"factures"===ht?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"factures"===ht?"white":"var(--color-text-secondary)"},children:"\ud83e\uddfe Factures"}),(0,Al.jsx)("button",{className:"button",onClick:()=>pt("mercuriales"),style:{background:"mercuriales"===ht?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"mercuriales"===ht?"white":"var(--color-text-secondary)",marginLeft:"10px"},children:"\ud83d\udccb Mercuriales"})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,Al.jsxs)("button",{className:"button",onClick:()=>zt(!0),children:["\ud83d\udcc1 Importer ","tickets-z"===ht?"Ticket Z":"factures"===ht?"Facture(s)":"Mercuriale"]}),(0,Al.jsx)("button",{className:"button",onClick:eo,disabled:be,children:"\ud83d\udd04 Traitement Auto"}),(0,Al.jsx)("button",{className:"button",onClick:to,disabled:be,style:{background:"linear-gradient(45deg, #ff6b6b, #ff8e8e)",border:"none",color:"white"},children:"\ud83d\uddd1\ufe0f Vider l'historique"})]}),"tickets-z"===ht&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcca Historique des Tickets Z"}),fe.filter((e=>"z_report"===e.type_document)).length>0&&(0,Al.jsxs)("div",{className:"validation-section",style:{marginBottom:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px",border:"1px solid var(--color-border)"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"10px",color:"var(--color-text-primary)"},children:"\u2705 Validation des Donn\xe9es Extraites"}),(()=>{const e=fe.filter((e=>"z_report"===e.type_document)).sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at)))[0];if(null===e||void 0===e||!e.donnees_extraites)return null;const t=e.donnees_extraites;return(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcc5 Date:"}),(0,Al.jsx)("input",{type:"date",defaultValue:t.date,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83c\udf7d\ufe0f Couverts:"}),(0,Al.jsx)("input",{type:"number",defaultValue:t.covers,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcb0 Total HT:"}),(0,Al.jsx)("input",{type:"number",step:"0.01",defaultValue:t.total_ht,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcb0 Total TTC:"}),(0,Al.jsx)("input",{type:"number",step:"0.01",defaultValue:t.total_ttc,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsx)("button",{className:"button small success",style:{gridColumn:"span 2"},children:"\u2705 Valider les corrections"})]})})()]}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:[fe.filter((e=>"z_report"===e.type_document)).length," ticket(s) Z trait\xe9(s)"]})}),(()=>{const e=fe.filter((e=>"z_report"===e.type_document)),t=Math.ceil(e.length/yt),i=(bt-1)*yt,n=i+yt,o=e.slice(i,n);return 0===e.length?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83d\udcc4"}),(0,Al.jsx)("p",{children:"Aucun document trouv\xe9 pour ce filtre"})]}):(0,Al.jsxs)(Al.Fragment,{children:[o.map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:e.nom_fichier}),(0,Al.jsxs)("div",{className:"item-details",children:["z_report"===e.type_document?"\ud83d\udcca Rapport Z":"\ud83e\uddfe Facture"," -",new Date(e.date_upload).toLocaleDateString("fr-FR")]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>$n(e),children:"\ud83d\udc41\ufe0f Aper\xe7u"}),"z_report"===e.type_document&&(0,Al.jsx)("button",{className:"button small",onClick:()=>Zn(e.id),children:"\u26a1 Traiter"})]})]},t))),t>1&&(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:["Page ",bt," sur ",t," \u2022",i+1,"-",Math.min(n,e.length)," sur ",e.length," documents"]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(1),disabled:1===bt,style:{opacity:1===bt?.5:1,cursor:1===bt?"not-allowed":"pointer"},children:"\u23ee\ufe0f D\xe9but"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(bt-1),disabled:1===bt,style:{opacity:1===bt?.5:1,cursor:1===bt?"not-allowed":"pointer"},children:"\u2b05\ufe0f Pr\xe9c\xe9dent"}),(0,Al.jsx)("span",{style:{padding:"6px 12px",background:"var(--color-primary-blue)",color:"white",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:bt}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(bt+1),disabled:bt===t,style:{opacity:bt===t?.5:1,cursor:bt===t?"not-allowed":"pointer"},children:"Suivant \u27a1\ufe0f"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(t),disabled:bt===t,style:{opacity:bt===t?.5:1,cursor:bt===t?"not-allowed":"pointer"},children:"Fin \u23ed\ufe0f"})]})]})]})})()]}),"factures"===ht&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83e\uddfe Historique des Factures"}),(0,Al.jsxs)("div",{className:"info-section",style:{marginBottom:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px",border:"1px solid var(--color-primary-blue)"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"10px",color:"var(--color-primary-blue)"},children:"\ud83d\udce4 D\xe9tection automatique de factures multiples"}),(0,Al.jsx)("p",{style:{fontSize:"14px",lineHeight:"1.4",color:"var(--color-text-muted)"},children:"L'OCR peut automatiquement d\xe9tecter si votre document contient plusieurs factures et les traiter s\xe9par\xe9ment. Chaque facture sera analys\xe9e individuellement et appara\xeetra comme un document distinct dans l'historique."})]}),fe.filter((e=>"facture_fournisseur"===e.type_document)).length>0&&(0,Al.jsxs)("div",{className:"validation-section",style:{marginBottom:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px",border:"1px solid var(--color-border)"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"10px",color:"var(--color-text-primary)"},children:"\u2705 Validation des Donn\xe9es Extraites"}),(e=>{const t=fe.filter((e=>"facture_fournisseur"===e.type_document)).sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at)))[0];if(null===t||void 0===t||!t.donnees_parsees)return null;const i=t.donnees_parsees;return(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83c\udfe2 Fournisseur:"}),(0,Al.jsx)("input",{type:"text",defaultValue:i.fournisseur||"",style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcc5 Date facture:"}),(0,Al.jsx)("input",{type:"date",defaultValue:i.date_facture||"",style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcc4 N\xb0 facture:"}),(0,Al.jsx)("input",{type:"text",defaultValue:i.numero_facture||"",style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcb0 Total HT:"}),(0,Al.jsx)("input",{type:"number",step:"0.01",defaultValue:i.total_ht||"",style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcb0 Total TTC:"}),(0,Al.jsx)("input",{type:"number",step:"0.01",defaultValue:i.total_ttc||"",style:{width:"100%",padding:"4px"}})]}),(null===(e=i.separation_info)||void 0===e?void 0:e.is_multi_invoice)&&(0,Al.jsxs)("div",{className:"validation-card",style:{gridColumn:"span 2",background:"var(--color-success-green)",color:"white",padding:"8px",borderRadius:"4px"},children:["\ud83c\udfaf Facture ",i.separation_info.invoice_index,"/",i.separation_info.total_invoices," - ",i.separation_info.header_detected]}),(0,Al.jsx)("button",{className:"button small success",style:{gridColumn:"span 2"},children:"\u2705 Valider les corrections"})]})})()]}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:[fe.filter((e=>"facture_fournisseur"===e.type_document)).length," facture(s) trait\xe9e(s)"]})}),(()=>{const e=fe.filter((e=>"facture_fournisseur"===e.type_document)),t=Math.ceil(e.length/yt),i=(bt-1)*yt,n=i+yt,o=e.slice(i,n);return 0===e.length?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83e\uddfe"}),(0,Al.jsx)("p",{children:"Aucune facture trait\xe9e"}),(0,Al.jsx)("p",{style:{fontSize:"14px"},children:"Importez une ou plusieurs factures pour commencer"})]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{style:{marginBottom:"15px",fontSize:"14px",color:"var(--color-text-secondary)",padding:"8px 12px",background:"var(--color-background-card-light)",borderRadius:"6px"},children:[e.length," facture(s) \u2022 Page ",bt," sur ",t]}),o.map((e=>{var t,i,n,o;return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:["\ud83e\uddfe ",e.nom_fichier,(null===(t=e.donnees_parsees)||void 0===t||null===(i=t.separation_info)||void 0===i?void 0:i.is_multi_invoice)&&(0,Al.jsxs)("span",{style:{marginLeft:"8px",padding:"2px 6px",borderRadius:"12px",fontSize:"10px",background:"var(--color-success-green)",color:"white"},children:["Multi ",e.donnees_parsees.separation_info.invoice_index,"/",e.donnees_parsees.separation_info.total_invoices]})]}),(0,Al.jsxs)("div",{className:"item-details",children:[(null===(n=e.donnees_parsees)||void 0===n?void 0:n.fournisseur)||"Fournisseur non identifi\xe9"," \u2022",null!==(o=e.donnees_parsees)&&void 0!==o&&o.total_ttc?" ".concat(e.donnees_parsees.total_ttc,"\u20ac TTC"):" Montant non identifi\xe9"," \u2022",new Date(e.created_at).toLocaleDateString("fr-FR")]})]}),(0,Al.jsx)("div",{className:"item-actions",children:(0,Al.jsx)("button",{className:"button small",onClick:()=>setSelectedDoc(e),children:"\ud83d\udc41\ufe0f Aper\xe7u"})})]},e.id)})),t>1&&(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:["Page ",bt," sur ",t," \u2022",i+1,"-",Math.min(n,e.length)," sur ",e.length," factures"]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(1),disabled:1===bt,style:{opacity:1===bt?.5:1,cursor:1===bt?"not-allowed":"pointer"},children:"\u23ee\ufe0f D\xe9but"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(bt-1),disabled:1===bt,style:{opacity:1===bt?.5:1,cursor:1===bt?"not-allowed":"pointer"},children:"\u2b05\ufe0f Pr\xe9c\xe9dent"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(bt+1),disabled:bt===t,style:{opacity:bt===t?.5:1,cursor:bt===t?"not-allowed":"pointer"},children:"Suivant \u27a1\ufe0f"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(t),disabled:bt===t,style:{opacity:bt===t?.5:1,cursor:bt===t?"not-allowed":"pointer"},children:"Fin \u23ed\ufe0f"})]})]})]})})()]}),"factures"===ht&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83e\uddfe Historique des Factures Fournisseurs"}),fe.filter((e=>"facture_fournisseur"===e.type_document)).length>0&&(0,Al.jsxs)("div",{className:"validation-section",style:{marginBottom:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px",border:"1px solid var(--color-border)"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"10px",color:"var(--color-text-primary)"},children:"\u2705 Validation des Donn\xe9es Extraites"}),(()=>{const e=fe.filter((e=>"facture_fournisseur"===e.type_document)).sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at)))[0];if(null===e||void 0===e||!e.donnees_extraites)return null;const t=e.donnees_extraites;return(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83c\udfea Fournisseur:"}),(0,Al.jsx)("input",{type:"text",defaultValue:t.fournisseur,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcc5 Date:"}),(0,Al.jsx)("input",{type:"date",defaultValue:t.date,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udd22 N\xb0 Facture:"}),(0,Al.jsx)("input",{type:"text",defaultValue:t.numero_facture,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsxs)("div",{className:"validation-card",children:[(0,Al.jsx)("label",{children:"\ud83d\udcb0 Total TTC:"}),(0,Al.jsx)("input",{type:"number",step:"0.01",defaultValue:t.total_ttc,style:{width:"100%",padding:"4px"}})]}),(0,Al.jsx)("button",{className:"button small success",style:{gridColumn:"span 2"},children:"\u2705 Valider les corrections"})]})})()]}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:[fe.filter((e=>"facture_fournisseur"===e.type_document)).length," facture(s) trait\xe9e(s)"]})}),(()=>{const e=fe.filter((e=>"facture_fournisseur"===e.type_document)),t=Math.ceil(e.length/yt),i=(bt-1)*yt,n=i+yt,o=e.slice(i,n);return 0===e.length?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83e\uddfe"}),(0,Al.jsx)("p",{children:"Aucune facture fournisseur trouv\xe9e"})]}):(0,Al.jsxs)(Al.Fragment,{children:[o.map(((e,t)=>{var i;return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:e.nom_fichier}),(0,Al.jsxs)("div",{className:"item-details",children:["\ud83e\uddfe Facture Fournisseur - ",new Date(e.date_upload).toLocaleDateString("fr-FR"),(null===(i=e.donnees_extraites)||void 0===i?void 0:i.fournisseur)&&(0,Al.jsxs)("span",{style:{marginLeft:"10px",color:"var(--color-primary-blue)"},children:["\u2022 ",e.donnees_extraites.fournisseur]})]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>$n(e),children:"\ud83d\udc41\ufe0f Aper\xe7u"}),(0,Al.jsx)("button",{className:"button small success",onClick:()=>alert("Fonctionnalit\xe9 de traitement des factures en cours de d\xe9veloppement"),children:"\ud83d\udce6 Int\xe9grer Stock"})]})]},t)})),t>1&&(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",padding:"15px",background:"var(--color-background-card-light)",borderRadius:"8px"},children:[(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:["Page ",bt," sur ",t," \u2022",i+1,"-",Math.min(n,e.length)," sur ",e.length," factures"]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(1),disabled:1===bt,style:{opacity:1===bt?.5:1,cursor:1===bt?"not-allowed":"pointer"},children:"\u23ee\ufe0f D\xe9but"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(bt-1),disabled:1===bt,style:{opacity:1===bt?.5:1,cursor:1===bt?"not-allowed":"pointer"},children:"\u2b05\ufe0f Pr\xe9c\xe9dent"}),(0,Al.jsx)("span",{style:{padding:"6px 12px",background:"var(--color-primary-blue)",color:"white",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:bt}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(bt+1),disabled:bt===t,style:{opacity:bt===t?.5:1,cursor:bt===t?"not-allowed":"pointer"},children:"Suivant \u27a1\ufe0f"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>wt(t),disabled:bt===t,style:{opacity:bt===t?.5:1,cursor:bt===t?"not-allowed":"pointer"},children:"Fin \u23ed\ufe0f"})]})]})]})})()]}),"mercuriales"===ht&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udccb Import Mercuriales - Cr\xe9ation Produits"}),(0,Al.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",borderRadius:"8px",border:"1px solid #3b82f6"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"12px",color:"#1e40af",fontSize:"16px",fontWeight:"bold"},children:"\ud83d\udccb Comment utiliser les Mercuriales"}),(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"#1e40af",lineHeight:"1.5"},children:[(0,Al.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,Al.jsx)("strong",{children:"1. \ud83d\udcc1 Uploadez"})," la liste de prix PDF/image de votre fournisseur"]}),(0,Al.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,Al.jsx)("strong",{children:"2. \ud83e\udd16 Extraction"})," automatique des produits et prix"]}),(0,Al.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,Al.jsx)("strong",{children:"3. \u2705 Validation"})," et cr\xe9ation des nouveaux produits en un clic"]}),(0,Al.jsxs)("div",{style:{fontSize:"12px",marginTop:"8px",padding:"8px",background:"white",borderRadius:"4px"},children:["\ud83d\udca1 ",(0,Al.jsx)("strong",{children:"Conseil :"})," Les mercuriales permettent d'importer rapidement tous les nouveaux produits saisonniers de vos fournisseurs"]})]})]}),(0,Al.jsxs)("div",{style:{padding:"20px",background:"white",borderRadius:"10px",border:"2px solid #10b981",marginBottom:"20px"},children:[(0,Al.jsx)("h4",{style:{color:"#059669",marginBottom:"16px",fontSize:"16px",fontWeight:"bold"},children:"\ud83d\udce4 Upload Mercuriale Fournisseur"}),(0,Al.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#374151"},children:"\ud83c\udfea Fournisseur concern\xe9 :"}),(0,Al.jsxs)("select",{style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},onChange:e=>{console.log("Fournisseur s\xe9lectionn\xe9:",e.target.value)},children:[(0,Al.jsx)("option",{value:"",children:"-- S\xe9lectionner le fournisseur --"}),le.map((e=>(0,Al.jsxs)("option",{value:e.id,children:[e.logo||"\ud83c\udfea"," ",e.nom," (",e.categorie,")"]},e.id)))]})]}),(0,Al.jsxs)("div",{style:{border:"2px dashed #10b981",borderRadius:"8px",padding:"32px",textAlign:"center",background:"#f0fdf4"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\ud83d\udccb"}),(0,Al.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669",marginBottom:"8px"},children:"Glissez votre mercuriale ici"}),(0,Al.jsx)("div",{style:{fontSize:"14px",color:"#065f46",marginBottom:"16px"},children:"ou cliquez pour s\xe9lectionner (PDF, JPG, PNG)"}),(0,Al.jsx)("button",{className:"button",onClick:()=>zt(!0),style:{background:"#10b981",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:"pointer"},children:"\ud83d\udcc1 S\xe9lectionner Mercuriale"})]}),(0,Al.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",textAlign:"center"},children:"Les formats support\xe9s : PDF, JPG, PNG \u2022 Taille max : 10 MB"})]})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h4",{style:{marginBottom:"16px",color:"#374151",fontSize:"16px",fontWeight:"bold"},children:"\ud83d\udcca Mercuriales Import\xe9es R\xe9cemment"}),fe.filter((e=>"mercuriale"===e.type_document)).length>0?fe.filter((e=>"mercuriale"===e.type_document)).slice(0,5).map((e=>{var t;return(0,Al.jsx)("div",{style:{padding:"16px",background:"white",borderRadius:"8px",border:"1px solid #e5e7eb",marginBottom:"12px"},children:(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("div",{style:{fontWeight:"600",marginBottom:"4px"},children:["\ud83d\udccb ",e.nom_fichier]}),(0,Al.jsxs)("div",{style:{fontSize:"13px",color:"#6b7280"},children:[new Date(e.date_upload).toLocaleDateString("fr-FR")," \xe0 ",new Date(e.date_upload).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),(null===(t=e.donnees_parsees)||void 0===t?void 0:t.produits_detectes)&&(0,Al.jsxs)("span",{style:{marginLeft:"8px",color:"#059669"},children:["\u2022 ",e.donnees_parsees.produits_detectes.length," produits d\xe9tect\xe9s"]})]})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>$n(e),style:{fontSize:"12px",padding:"4px 8px"},children:"\ud83d\udc41\ufe0f Aper\xe7u"}),(0,Al.jsx)("button",{className:"button small success",onClick:()=>(e=>{var t;null!==(t=e.donnees_parsees)&&void 0!==t&&t.produits_detectes?(nn(e),sn(e.donnees_parsees.produits_detectes.map((e=>u(u({},e),{},{selected:!0})))),en(!0)):alert("\u274c Aucun produit d\xe9tect\xe9 dans cette mercuriale")})(e),style:{fontSize:"12px",padding:"4px 8px"},children:"\u2705 Valider & Cr\xe9er"}),(0,Al.jsx)("button",{className:"button small danger",onClick:()=>(async e=>{if(window.confirm("\u274c \xcates-vous s\xfbr de vouloir annuler cet import ?\n\nCela supprimera d\xe9finitivement cette mercuriale de l'historique."))try{we(!0),await At.delete("".concat(OP,"/ocr/document/").concat(e)),alert("\u2705 Import mercuriale annul\xe9 et supprim\xe9 avec succ\xe8s"),zn()}catch(n){var t,i;console.error("Erreur lors de l'annulation:",n),alert("\u274c Erreur lors de l'annulation: ".concat((null===(t=n.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.detail)||n.message))}finally{we(!1)}})(e.id),style:{fontSize:"12px",padding:"4px 8px"},children:"\u274c Annuler Import"})]})]})},e.id)})):(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\ud83d\udccb"}),(0,Al.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"Aucune mercuriale import\xe9e"}),(0,Al.jsx)("div",{style:{fontSize:"14px"},children:"Importez votre premi\xe8re liste de prix fournisseur pour commencer"})]})]})]})]})}),(0,Al.jsx)("div",{className:"production-tab ".concat("repartition"===T?"active":""),children:(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsxs)("div",{className:"item-list",style:{marginBottom:"20px"},children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcca R\xe9partition : Produit \u2192 Pr\xe9paration \u2192 Production"}),(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px",padding:"16px",background:"#f9fafb",borderRadius:"8px",flexWrap:"wrap"},children:[(0,Al.jsxs)("div",{style:{flex:"1",minWidth:"150px",textAlign:"center"},children:[(0,Al.jsx)("div",{style:{fontSize:"32px",marginBottom:"4px"},children:"\ud83d\udce6"}),(0,Al.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px"},children:"Produit brut"}),(0,Al.jsx)("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Stock disponible"})]}),(0,Al.jsx)("div",{style:{fontSize:"24px",color:"#9ca3af"},children:"\u2192"}),(0,Al.jsxs)("div",{style:{flex:"1",minWidth:"150px",textAlign:"center"},children:[(0,Al.jsx)("div",{style:{fontSize:"32px",marginBottom:"4px"},children:"\ud83d\udd2a"}),(0,Al.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px"},children:"Pr\xe9paration"}),(0,Al.jsx)("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Forme + Portions"})]}),(0,Al.jsx)("div",{style:{fontSize:"24px",color:"#9ca3af"},children:"\u2192"}),(0,Al.jsxs)("div",{style:{flex:"1",minWidth:"150px",textAlign:"center"},children:[(0,Al.jsx)("div",{style:{fontSize:"32px",marginBottom:"4px"},children:"\ud83c\udf7d\ufe0f"}),(0,Al.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px"},children:"Production"}),(0,Al.jsx)("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Plat final"})]})]}),(0,Al.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,Al.jsx)("label",{className:"form-label",children:"1\ufe0f\u20e3 Choisir un produit brut :"}),(0,Al.jsxs)("select",{className:"form-select",value:ot||"",onChange:e=>{st(e.target.value),at({}),dt([]),ut(0)},style:{padding:"10px 15px",fontSize:"14px",borderRadius:"8px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",width:"100%",maxWidth:"400px"},children:[(0,Al.jsx)("option",{value:"",children:"-- S\xe9lectionner un produit --"}),re.map(((e,t)=>{const i=ce.find((t=>t.produit_id===e.id));return(0,Al.jsxs)("option",{value:e.id,children:["\ud83d\udce6 ",e.nom," ",i?"(".concat(i.quantite_actuelle," ").concat(e.unite," en stock)"):"(stock non d\xe9fini)"]},e.id)}))]})]}),null!==ot&&""!==ot&&(0,Al.jsxs)("div",{style:{marginBottom:"24px",padding:"16px",background:"#ecfdf5",borderRadius:"8px",border:"1px solid #10b981"},children:[(0,Al.jsxs)("label",{className:"form-label",style:{marginBottom:"12px",display:"block"},children:['2\ufe0f\u20e3 Pr\xe9parations disponibles pour "',null===(e=re.find((e=>e.id===ot)))||void 0===e?void 0:e.nom,'" :']}),(()=>{const e=ot,t=vi.filter((t=>t.produit_id===e));return 0===t.length?(0,Al.jsxs)("div",{style:{padding:"16px",textAlign:"center",color:"#6b7280"},children:[(0,Al.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"\ud83d\udd2a"}),(0,Al.jsx)("div",{style:{fontWeight:"500",marginBottom:"4px"},children:"Aucune pr\xe9paration pour ce produit"}),(0,Al.jsx)("div",{style:{fontSize:"14px"},children:"Cr\xe9ez une pr\xe9paration dans l'onglet Production \u2192 Pr\xe9parations"})]}):(0,Al.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"12px"},children:t.map((e=>(0,Al.jsxs)("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"2px solid #10b981",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.02)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:[(0,Al.jsxs)("div",{style:{fontWeight:"bold",fontSize:"14px",marginBottom:"6px"},children:["\ud83d\udd2a ",e.nom]}),(0,Al.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",flexDirection:"column",gap:"2px"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Forme:"})," ",e.forme_decoupe_custom||e.forme_decoupe]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Quantit\xe9:"})," ",e.quantite_preparee," ",e.unite_preparee]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Portions:"})," ",e.nombre_portions," \xd7 ",e.taille_portion,e.unite_portion]}),e.dlc&&(0,Al.jsxs)("div",{style:{color:new Date(e.dlc)<new Date(Date.now()+2592e5)?"#dc2626":"#10b981"},children:[(0,Al.jsx)("strong",{children:"DLC:"})," ",new Date(e.dlc).toLocaleDateString("fr-FR")]})]})]},e.id)))})})(),(0,Al.jsx)("div",{style:{marginTop:"12px",fontSize:"13px",color:"#059669",fontWeight:"500"},children:"\ud83d\udca1 Les pr\xe9parations servent d'\xe9tape interm\xe9diaire entre le produit brut et la production finale"})]}),null!==ot&&""!==ot&&(()=>{const e=ot,t=vi.filter((t=>t.produit_id===e)),i=re.find((t=>t.id===e)),n=ce.find((t=>t.produit_id===e));return 0===t.length?null:(0,Al.jsxs)("div",{style:{marginBottom:"24px",padding:"20px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #f59e0b"},children:[(0,Al.jsx)("label",{className:"form-label",style:{marginBottom:"16px",display:"block",fontSize:"16px",fontWeight:"bold"},children:"3\ufe0f\u20e3 R\xe9partir les quantit\xe9s et voir les productions :"}),(0,Al.jsx)("div",{style:{marginBottom:"16px",padding:"12px",background:"white",borderRadius:"6px",border:"1px solid #d97706"},children:(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udce6 Stock disponible:"})," ",n?n.quantite_actuelle:0," ",null===i||void 0===i?void 0:i.unite]}),(0,Al.jsxs)("div",{style:{fontSize:"14px",color:ct>((null===n||void 0===n?void 0:n.quantite_actuelle)||0)?"#dc2626":"#059669"},children:[(0,Al.jsx)("strong",{children:"Utilis\xe9:"})," ",ct.toFixed(2)," ",null===i||void 0===i?void 0:i.unite,ct>0&&(0,Al.jsxs)("span",{style:{marginLeft:"8px"},children:["(",(ct/((null===n||void 0===n?void 0:n.quantite_actuelle)||1)*100).toFixed(1),"%)"]})]})]})}),(0,Al.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px",marginBottom:"20px"},children:t.map((e=>{const t=((null===n||void 0===n?void 0:n.quantite_actuelle)||0)-ct+(rt[e.id]||0)*(e.quantite_produit_brut/e.quantite_preparee),i=e.quantite_preparee/e.quantite_produit_brut,o=Math.min(e.quantite_preparee,t*i);return(0,Al.jsxs)("div",{style:{padding:"16px",background:"white",borderRadius:"8px",border:"2px solid #f59e0b"},children:[(0,Al.jsxs)("div",{style:{fontWeight:"bold",fontSize:"14px",marginBottom:"8px",color:"#92400e"},children:["\ud83d\udd2a ",e.nom]}),(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Al.jsx)("input",{type:"number",min:"0",max:Math.max(0,o),step:"0.1",placeholder:"Quantit\xe9...",value:rt[e.id]||"",onChange:t=>((e,t)=>{const i=u(u({},rt),{},{[e]:parseFloat(t)||0});at(i),Wn(i)})(e.id,t.target.value),style:{flex:1,padding:"8px",border:"1px solid #d97706",borderRadius:"4px",fontSize:"14px"}}),(0,Al.jsxs)("span",{style:{fontSize:"14px",color:"#78350f",minWidth:"60px"},children:["/ ",e.quantite_preparee," ",e.unite_preparee]})]}),(0,Al.jsxs)("div",{style:{fontSize:"12px",color:"#78350f",display:"flex",flexDirection:"column",gap:"2px"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Forme:"})," ",e.forme_decoupe_custom||e.forme_decoupe]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Taille portion:"})," ",e.taille_portion,e.unite_portion]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Portions max:"})," ",e.nombre_portions]}),(0,Al.jsxs)("div",{style:{color:"#10b981",marginTop:"4px"},children:[(0,Al.jsx)("strong",{children:"Max possible:"})," ",Math.max(0,o).toFixed(1)," ",e.unite_preparee]})]})]},e.id)}))}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[(0,Al.jsx)("button",{className:"button small secondary",onClick:()=>{const e={};t.forEach((t=>{e[t.id]=t.quantite_preparee})),at(e),Wn(e)},style:{fontSize:"12px"},children:"\ud83d\udcca Utiliser tout"}),(0,Al.jsx)("button",{className:"button small secondary",onClick:()=>{const e={};t.forEach((t=>{e[t.id]=t.quantite_preparee/2})),at(e),Wn(e)},style:{fontSize:"12px"},children:"\u2696\ufe0f R\xe9partir 50/50"}),(0,Al.jsx)("button",{className:"button small danger",onClick:Un,style:{fontSize:"12px"},children:"\ud83d\uddd1\ufe0f Reset"})]}),lt.length>0&&(0,Al.jsxs)("div",{style:{marginTop:"20px",padding:"16px",background:"white",borderRadius:"8px",border:"2px solid #10b981"},children:[(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,Al.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px",color:"#065f46"},children:"\ud83c\udf7d\ufe0f Productions calcul\xe9es automatiquement :"}),(0,Al.jsx)("button",{className:"button",onClick:()=>{const e=lt.map((e=>"".concat(e.preparationNom,": ").concat(e.portionsPossibles," portions\n")+(e.productionsPossibles?e.productionsPossibles.map((e=>"  \u2022 ".concat(e.nom,": ").concat(e.portions_possibles," portions"))).join("\n"):""))).join("\n\n");window.confirm("\ud83c\udf7d\ufe0f VALIDATION DE LA R\xc9PARTITION\n\n"+"R\xe9sum\xe9 des productions possibles:\n\n".concat(e,"\n\n")+"Stock utilis\xe9: ".concat(ct.toFixed(2)," ").concat(null===i||void 0===i?void 0:i.unite,"\n")+"Stock restant: ".concat((((null===n||void 0===n?void 0:n.quantite_actuelle)||0)-ct).toFixed(2)," ").concat(null===i||void 0===i?void 0:i.unite,"\n\n")+"Valider cette r\xe9partition ?")&&alert("\u2705 R\xe9partition valid\xe9e avec succ\xe8s !\n\nVous pouvez maintenant proc\xe9der \xe0 la production selon cette r\xe9partition.")},style:{fontSize:"14px",padding:"8px 16px"},children:"\u2705 Valider la r\xe9partition"})]}),(0,Al.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"16px"},children:lt.map(((e,t)=>(0,Al.jsxs)("div",{style:{padding:"16px",background:"#ecfdf5",borderRadius:"8px",border:"1px solid #10b981"},children:[(0,Al.jsxs)("div",{style:{fontWeight:"bold",fontSize:"15px",marginBottom:"8px",color:"#065f46"},children:["\ud83d\udd2a ",e.preparationNom]}),(0,Al.jsxs)("div",{style:{fontSize:"13px",color:"#059669",display:"flex",flexDirection:"column",gap:"4px",marginBottom:"12px"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udccf Quantit\xe9 pr\xe9par\xe9e:"})," ",e.quantitePreparation," ",e.unite]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"\ud83c\udf7d\ufe0f Portions possibles:"})," ",(0,Al.jsx)("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#10b981"},children:e.portionsPossibles})]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udce6 Produit brut requis:"})," ",e.quantiteProduitBrut.toFixed(2)," ",null===i||void 0===i?void 0:i.unite]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udd2a Forme:"})," ",e.formeDecoupe]})]}),e.productionsPossibles&&e.productionsPossibles.length>0&&(0,Al.jsxs)("div",{style:{padding:"12px",background:"#f0fdf4",borderRadius:"6px",border:"1px solid #16a34a"},children:[(0,Al.jsx)("div",{style:{fontSize:"13px",fontWeight:"bold",marginBottom:"8px",color:"#16a34a"},children:"\ud83c\udf7d\ufe0f Productions directes possibles:"}),e.productionsPossibles.map(((e,t)=>(0,Al.jsxs)("div",{style:{fontSize:"12px",color:"#15803d",marginBottom:"4px",padding:"4px 6px",background:"white",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Al.jsxs)("span",{children:[(0,Al.jsxs)("strong",{children:["\ud83c\udf7d\ufe0f ",e.nom]}),(0,Al.jsx)("br",{}),(0,Al.jsxs)("span",{style:{fontSize:"11px",color:"#166534"},children:[e.categorie," \u2022 ",e.portions_recette," portions/recette"]})]}),(0,Al.jsx)("span",{style:{fontWeight:"bold",fontSize:"14px",color:"#15803d",background:"#dcfce7",padding:"2px 8px",borderRadius:"12px"},children:e.portions_possibles})]},t)))]}),e.recettesCompatibles.length>0&&(0,Al.jsxs)("div",{style:{marginTop:"8px",padding:"8px",background:"#fefefe",borderRadius:"4px",border:"1px solid #d1fae5"},children:[(0,Al.jsx)("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"4px",color:"#166534"},children:"\ud83d\udcd6 Autres recettes compatibles:"}),e.recettesCompatibles.slice(0,2).map(((e,t)=>(0,Al.jsxs)("div",{style:{fontSize:"11px",color:"#166534"},children:["\u2022 ",e.nom," (",e.portions," portions)"]},e.id)))]})]},e.preparationId)))}),(0,Al.jsxs)("div",{style:{marginTop:"16px",padding:"12px",background:ct>((null===n||void 0===n?void 0:n.quantite_actuelle)||0)?"#fecaca":"#dcfce7",borderRadius:"6px",border:"1px solid ".concat(ct>((null===n||void 0===n?void 0:n.quantite_actuelle)||0)?"#dc2626":"#10b981")},children:[(0,Al.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px",color:ct>((null===n||void 0===n?void 0:n.quantite_actuelle)||0)?"#dc2626":"#065f46"},children:"\ud83d\udcca R\xe9sum\xe9 de la r\xe9partition :"}),(0,Al.jsxs)("div",{style:{fontSize:"13px",color:ct>((null===n||void 0===n?void 0:n.quantite_actuelle)||0)?"#991b1b":"#059669",marginTop:"4px"},children:["Stock utilis\xe9: ",(0,Al.jsxs)("strong",{children:[ct.toFixed(2)," ",null===i||void 0===i?void 0:i.unite]})," sur ",(null===n||void 0===n?void 0:n.quantite_actuelle)||0," disponible",(0,Al.jsx)("br",{}),"Portions totales possibles: ",(0,Al.jsx)("strong",{children:lt.reduce(((e,t)=>e+t.portionsPossibles),0)}),ct>((null===n||void 0===n?void 0:n.quantite_actuelle)||0)&&(0,Al.jsx)("div",{style:{color:"#dc2626",fontWeight:"bold",marginTop:"4px"},children:"\u26a0\ufe0f Attention: Stock insuffisant !"})]})]})]})]})})()]}),(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83c\udfaf R\xe9partition D\xe9taill\xe9e"}),gt.map(((e,t)=>{const i=e.productions_possibles.reduce(((e,t)=>e+t.portions_selectionnees*t.quantite_needed),0),n=e.stock_actuel-i;return(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("div",{className:"section-subtitle",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",marginBottom:"10px",fontSize:"16px",fontWeight:"bold",padding:"10px",background:"var(--color-background-card-light)",borderRadius:"8px"},children:[(0,Al.jsxs)("span",{children:["\ud83d\udce6 ",e.produit," (",e.stock_actuel," ",e.unite,")"]}),(0,Al.jsxs)("div",{style:{fontSize:"14px",fontWeight:"normal"},children:[(0,Al.jsxs)("span",{style:{color:n<0?"var(--color-danger-red)":"var(--color-success-green)"},children:["Restant: ",n.toFixed(1)," ",e.unite]}),(0,Al.jsx)("button",{className:"button small success",style:{marginLeft:"10px"},onClick:()=>{alert("R\xe9partition valid\xe9e pour ".concat(e.produit,"!\n\nStock utilis\xe9: ").concat(i.toFixed(1)," ").concat(e.unite,"\nStock restant: ").concat(n.toFixed(1)," ").concat(e.unite))},children:"\u2705 Valider"})]})]}),e.productions_possibles.map(((t,i)=>{const n=t.portions_selectionnees*t.quantite_needed,o=e.productions_possibles.reduce(((e,t,n)=>n!==i?e+t.portions_selectionnees*t.quantite_needed:e),0),s=e.stock_actuel-o,r=Math.floor(s/t.quantite_needed);return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:["\ud83c\udf7d\ufe0f ",t.nom]}),(0,Al.jsxs)("div",{className:"item-details",children:["Besoin: ",t.quantite_needed," ",e.unite," par portion \u2022 Max \xe9quilibr\xe9: ",Math.min(r,t.portions_possibles)," portions \u2022 Utilise: ",n.toFixed(1)," ",e.unite]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("input",{type:"number",min:"0",max:Math.min(r,t.portions_possibles),value:t.portions_selectionnees,onChange:t=>{return n=e.id,o=i,s=parseInt(t.target.value)||0,void mt((e=>e.map((e=>{if(e.id===n){const t=e.productions_possibles.map(((t,i)=>{if(i===o){const i=e.productions_possibles.reduce(((e,t,i)=>i!==o?e+t.portions_selectionnees*t.quantite_needed:e),0),n=e.stock_actuel-i,r=Math.floor(n/t.quantite_needed),a=Math.min(s,r,t.portions_possibles);return u(u({},t),{},{portions_selectionnees:a})}return t}));return u(u({},e),{},{productions_possibles:t})}return e}))));var n,o,s},style:{width:"60px",padding:"4px 8px",borderRadius:"4px",border:"1px solid var(--color-border)",marginRight:"5px"}}),(0,Al.jsxs)("span",{style:{fontSize:"12px",color:"var(--color-text-secondary)"},children:["/ ",Math.min(r,t.portions_possibles)]})]})]},i)}))]},t)}))]})]})})]})}),(0,Al.jsx)("div",{id:"production",className:"wireframe-section ".concat("production"===P?"active":""),children:(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83c\udf73 Production & Historique"}),(0,Al.jsxs)("div",{className:"sub-nav-tabs",children:[(0,Al.jsx)("button",{className:"button",onClick:()=>D("produits"),style:{background:"produits"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"produits"===F?"white":"var(--color-text-secondary)"},children:"\ud83e\udd55 Produits"}),(0,Al.jsx)("button",{className:"button",onClick:()=>D("fournisseurs"),style:{background:"fournisseurs"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"fournisseurs"===F?"white":"var(--color-text-secondary)"},children:"\ud83d\ude9a Fournisseurs"}),(0,Al.jsxs)("button",{className:"button",onClick:()=>D("preparations"),style:{background:"preparations"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"preparations"===F?"white":"var(--color-text-secondary)"},children:["\ud83d\udd2a Pr\xe9parations (",vi.length,")"]}),(0,Al.jsx)("button",{className:"button",onClick:()=>D("recettes"),style:{background:"recettes"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"recettes"===F?"white":"var(--color-text-secondary)"},children:"\ud83c\udf7d\ufe0f Productions"}),(0,Al.jsx)("button",{className:"button",onClick:()=>D("datagrids"),style:{background:"datagrids"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"datagrids"===F?"white":"var(--color-text-secondary)"},children:"\ud83d\udcca Grilles de donn\xe9es"}),(0,Al.jsx)("button",{className:"button",onClick:()=>{D("archives"),In()},style:{background:"archives"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"archives"===F?"white":"var(--color-text-secondary)"},children:"\ud83d\udcc1 Archives"}),(0,Al.jsx)("button",{className:"button",onClick:()=>D("historique"),style:{background:"historique"===F?"var(--color-primary-blue)":"var(--color-background-card-light)",color:"historique"===F?"white":"var(--color-text-secondary)"},children:"\ud83d\udcca Historique"})]}),"produits"===F&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83e\udd55 Gestion des Produits (Ingr\xe9dients)"}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>Mt(!0),children:"\u2795 Nouveau Produit"}),(0,Al.jsx)("button",{className:"button ".concat(Di?"secondary":""),onClick:async()=>{if(!Di){const e=await Rn();Pi(e);const t={};Object.keys(e.categories).forEach((e=>{t[e]=!0})),Fi(t)}Ni(!Di)},style:{backgroundColor:Di?"#6366f1":"",color:Di?"white":""},children:Di?"\ud83d\udccb Vue Liste":"\ud83d\udcc1 Vue Cat\xe9gories"})]}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{className:"filter-group",children:[(0,Al.jsxs)("label",{className:"filter-label",children:["\ud83c\udff7\ufe0f Filtrer par cat\xe9gorie ","produits"===F?"d'ingr\xe9dients":"fournisseurs"===F?"de fournisseurs":"recettes"===F?"de productions":""," :"]}),(0,Al.jsxs)("select",{className:"filter-select",onChange:e=>{"produits"===F?(e=>{if(e&&""!==e){const t=re.filter((t=>t.categorie===e));Be(t)}else Be(re)})(e.target.value):"fournisseurs"===F||"recettes"===F&&wn(e.target.value)},style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",minWidth:"150px"},children:["produits"===F&&(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("option",{value:"",children:"Tous les ingr\xe9dients"}),(0,Al.jsx)("option",{value:"L\xe9gumes",children:"\ud83e\udd55 L\xe9gumes"}),(0,Al.jsx)("option",{value:"Viandes",children:"\ud83e\udd69 Viandes"}),(0,Al.jsx)("option",{value:"Poissons",children:"\ud83d\udc1f Poissons"}),(0,Al.jsx)("option",{value:"Cr\xeamerie",children:"\ud83e\uddc0 Cr\xeamerie"}),(0,Al.jsx)("option",{value:"\xc9pices",children:"\ud83c\udf36\ufe0f \xc9pices & Condiments"}),(0,Al.jsx)("option",{value:"Fruits",children:"\ud83c\udf4e Fruits"}),(0,Al.jsx)("option",{value:"C\xe9r\xe9ales",children:"\ud83c\udf3e C\xe9r\xe9ales & F\xe9culents"}),(0,Al.jsx)("option",{value:"Boissons",children:"\ud83e\udd64 Boissons"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udce6 Autres"})]}),"fournisseurs"===F&&(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("option",{value:"",children:"Tous les fournisseurs"}),(0,Al.jsx)("option",{value:"L\xe9gumes",children:"\ud83e\udd55 Sp\xe9cialit\xe9 L\xe9gumes"}),(0,Al.jsx)("option",{value:"Viandes",children:"\ud83e\udd69 Sp\xe9cialit\xe9 Viandes"}),(0,Al.jsx)("option",{value:"Poissons",children:"\ud83d\udc1f Sp\xe9cialit\xe9 Poissons"}),(0,Al.jsx)("option",{value:"G\xe9n\xe9raux",children:"\ud83c\udfea Fournisseurs g\xe9n\xe9raux"})]}),"recettes"===F&&(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("option",{value:"",children:"Toutes les productions"}),(0,Al.jsx)("option",{value:"Entr\xe9e",children:"\ud83e\udd57 Entr\xe9es"}),(0,Al.jsx)("option",{value:"Plat",children:"\ud83c\udf7d\ufe0f Plats"}),(0,Al.jsx)("option",{value:"Dessert",children:"\ud83c\udf70 Desserts"}),(0,Al.jsx)("option",{value:"Bar",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udcdd Autres"})]}),"datagrids"===F&&(0,Al.jsx)(Al.Fragment,{children:(0,Al.jsx)("option",{value:"",children:"Toutes les donn\xe9es"})})]}),(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"14px",color:"var(--color-text-secondary)",marginLeft:"10px"},children:["produits"===F&&"".concat(Oe.length," produit(s) affich\xe9(s)"),"fournisseurs"===F&&"".concat(le.length," fournisseur(s) affich\xe9(s)"),"recettes"===F&&"".concat(Le.length," production(s) affich\xe9e(s)"),"datagrids"===F&&"Grilles de donn\xe9es professionnelles"]})]})}),Di?(0,Al.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[(0,Al.jsxs)("div",{style:{padding:"16px",background:"var(--color-background-secondary)",borderRadius:"8px",border:"1px solid var(--color-border)",marginBottom:"16px"},children:[(0,Al.jsx)("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},children:"\ud83d\udcca R\xe9sum\xe9 par cat\xe9gories"}),(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)"},children:[ki.total_categories," cat\xe9gories \u2022 ",ki.total_products," produits total"]})]}),Object.entries(ki.categories).map((e=>{let[t,i]=e;return(0,Al.jsxs)("div",{style:{border:"1px solid var(--color-border)",borderRadius:"8px",overflow:"hidden"},children:[(0,Al.jsxs)("div",{style:{padding:"16px",background:Ei[t]?"var(--color-accent-green)":"var(--color-background-secondary)",color:Ei[t]?"white":"var(--color-text-primary)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:"bold",borderBottom:Ei[t]?"1px solid var(--color-border)":"none"},onClick:()=>{Fi((e=>u(u({},e),{},{[t]:!e[t]})))},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Al.jsx)("span",{style:{fontSize:"20px"},children:i.icon}),(0,Al.jsx)("span",{children:t}),(0,Al.jsx)("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"12px",background:Ei[t]?"rgba(255,255,255,0.2)":"var(--color-accent-orange)",color:"white"},children:i.total_products})]}),(0,Al.jsx)("span",{style:{fontSize:"18px"},children:Ei[t]?"\u25bc":"\u25b6"})]}),Ei[t]&&(0,Al.jsx)("div",{style:{padding:"0"},children:i.products.map(((e,t)=>(0,Al.jsxs)("div",{style:{padding:"12px 16px",borderBottom:t<i.products.length-1?"1px solid var(--color-border)":"none",display:"flex",alignItems:"center",justifyContent:"space-between",background:t%2===0?"transparent":"var(--color-background-secondary)"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Al.jsx)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--color-text-primary)"},children:e.nom}),e.prix_achat&&(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)",padding:"2px 6px",background:"var(--color-background-tertiary)",borderRadius:"4px"},children:[e.prix_achat,"\u20ac/",e.unite]}),e.fournisseur_nom&&(0,Al.jsx)("div",{style:{fontSize:"12px",color:"var(--color-accent-green)",fontStyle:"italic"},children:e.fournisseur_nom})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"6px"},children:[En()&&(0,Al.jsx)("button",{className:"button small",onClick:()=>Kn(e,"produit"),style:{fontSize:"12px",padding:"4px 8px"},children:"\u270f\ufe0f"}),Fn()&&(0,Al.jsx)("button",{className:"button small warning",onClick:async()=>{const t=window.prompt("Raison de l'archivage de \"".concat(e.nom,'" (optionnel):'));if(null!==t){if(await Ln(e.id,"produit",t||null)){alert("".concat(e.nom," archiv\xe9 avec succ\xe8s !"));const t=await Rn();Pi(t)}else alert("Erreur lors de l'archivage")}},style:{fontSize:"12px",padding:"4px 8px"},children:"\ud83d\uddc3\ufe0f"}),En()&&(0,Al.jsx)("button",{className:"button small danger",onClick:()=>Yn(e.id,"produit"),style:{fontSize:"12px",padding:"4px 8px"},children:"\ud83d\uddd1\ufe0f"})]})]},e.id)))})]},t)}))]}):(0,Al.jsx)(Al.Fragment,{children:(Oe.length>0?Oe:re).map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[(e=>{if(!e)return"\u26a0\ufe0f";switch(e){case"L\xe9gumes":return"\ud83e\udd55";case"Viandes":return"\ud83e\udd69";case"Poissons":return"\ud83d\udc1f";case"Cr\xeamerie":return"\ud83e\uddc0";case"\xc9pices":return"\ud83c\udf36\ufe0f";case"Fruits":return"\ud83c\udf4e";case"C\xe9r\xe9ales":return"\ud83c\udf3e";case"Boissons":return"\ud83e\udd64";case"Autres":return"\ud83d\udce6";default:return"\u26a0\ufe0f"}})(e.categorie)," ",e.nom,e.categorie?(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",background:"var(--color-accent-orange)",color:"white"},children:e.categorie}):(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",background:"var(--color-warning-orange)",color:"white"},children:"Sans cat\xe9gorie"})]}),(0,Al.jsxs)("div",{className:"item-details",children:[e.description," \u2022 Prix: ",e.prix_achat||e.reference_price||"N/A","\u20ac"]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[En()&&(0,Al.jsx)("button",{className:"button small",onClick:()=>Kn(e,"produit"),children:"\u270f\ufe0f \xc9diter"}),Fn()&&(0,Al.jsx)("button",{className:"button small warning",onClick:async()=>{const t=window.prompt("Raison de l'archivage de \"".concat(e.nom,'" (optionnel):'));if(null!==t){await Ln(e.id,"produit",t||null)?alert("".concat(e.nom," archiv\xe9 avec succ\xe8s !")):alert("Erreur lors de l'archivage")}},children:"\ud83d\udcc1 Archiver"})]})]},t)))})]}),"fournisseurs"===F&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\ude9a Gestion des Fournisseurs"}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>jt(!0),children:"\u2795 Nouveau Fournisseur"}),(0,Al.jsx)("button",{className:"button",children:"\ud83d\udcca \xc9valuation"})]}),le.map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Al.jsx)("span",{style:{fontSize:"20px"},children:e.logo||"\ud83c\udfea"}),(0,Al.jsx)("span",{style:{backgroundColor:e.couleur||"#3B82F6",color:"white",padding:"4px 8px",borderRadius:"4px",fontWeight:"500",fontSize:"14px"},children:e.nom})]}),(0,Al.jsxs)("div",{className:"item-details",children:[e.email," \u2022 Tel: ",e.telephone]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>Kn(e,"fournisseur"),children:"\u270f\ufe0f \xc9diter"}),(0,Al.jsx)("button",{className:"button small warning",onClick:async()=>{const t=window.prompt("Raison de l'archivage de \"".concat(e.nom,'" (optionnel):'));if(null!==t){await Ln(e.id,"fournisseur",t||null)?alert("".concat(e.nom," archiv\xe9 avec succ\xe8s !")):alert("Erreur lors de l'archivage")}},children:"\ud83d\udcc1 Archiver"})]})]},t)))]}),"preparations"===F&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udd2a Pr\xe9parations"}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>Ci(!0),children:"\u2795 Nouvelle Pr\xe9paration"}),(0,Al.jsxs)("button",{className:"button secondary",onClick:async()=>{try{we(!0);if(!window.confirm("\ud83d\udd04 AUTO-G\xc9N\xc9RATION DES PR\xc9PARATIONS\n\nCette action va :\n\u2022 Analyser tous vos produits avec cat\xe9gories\n\u2022 Cr\xe9er 2-3 pr\xe9parations coh\xe9rentes par produit\n\u2022 Supprimer les pr\xe9parations existantes\n\u2022 Baser les pr\xe9parations sur vos recettes existantes\n\nContinuer ?"))return;const e=await At.post("".concat(OP,"/preparations/auto-generate"));e.data.success?(alert("\u2705 AUTO-G\xc9N\xc9RATION R\xc9USSIE !\n\n\ud83d\udcca R\xe9sultats :\n"+"\u2022 ".concat(e.data.preparations_created," pr\xe9parations cr\xe9\xe9es\n")+"\u2022 ".concat(e.data.details.total_products_processed," produits trait\xe9s\n")+"\u2022 Cat\xe9gories : ".concat(e.data.details.categories_processed.join(", "),"\n\n")+"\ud83d\udcdd Exemples cr\xe9\xe9s :\n"+"".concat(e.data.details.sample_preparations.slice(0,5).join("\n"))),Cn()):alert("\u274c ERREUR : ".concat(e.data.message))}catch(i){var e,t;console.error("Erreur lors de l'auto-g\xe9n\xe9ration:",i),alert("\u274c Erreur lors de l'auto-g\xe9n\xe9ration: ".concat((null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||i.message))}finally{we(!1)}},disabled:be,style:{backgroundColor:"#10b981",color:"white",border:"none"},children:["\ud83e\udd16 ",be?"G\xe9n\xe9ration...":"Auto-g\xe9n\xe9rer"]}),(0,Al.jsx)("div",{style:{fontSize:"14px",alignSelf:"center",color:"var(--color-text-secondary)"},children:"\ud83d\udca1 L'auto-g\xe9n\xe9ration cr\xe9e 2-3 pr\xe9parations par produit"})]}),vi.filter((e=>e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5))).length>0&&(0,Al.jsxs)("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[(0,Al.jsxs)("div",{style:{fontWeight:"bold",color:"#92400e",marginBottom:"8px"},children:["\u26a0\ufe0f Alertes DLC - ",vi.filter((e=>e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5))).length," pr\xe9paration(s)"]}),vi.filter((e=>e.dlc&&new Date(e.dlc)<new Date(Date.now()+2592e5))).map((e=>(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"#78350f",marginTop:"4px"},children:["\u2022 ",e.nom," - DLC: ",new Date(e.dlc).toLocaleDateString("fr-FR")]},e.id)))]}),(0,Al.jsx)("div",{style:{display:"grid",gap:"12px"},children:0===vi.length?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-secondary)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\ud83d\udd2a"}),(0,Al.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px"},children:"Aucune pr\xe9paration"}),(0,Al.jsx)("div",{children:"Cr\xe9ez votre premi\xe8re pr\xe9paration pour commencer"})]}):vi.map((e=>{const t=e.dlc?new Date(e.dlc):null,i=t&&t<new Date(Date.now()+2592e5),n=t&&t<new Date;return(0,Al.jsx)("div",{className:"card",style:{padding:"16px",border:n?"2px solid #dc2626":i?"2px solid #f59e0b":"1px solid var(--color-border)"},children:(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[(0,Al.jsxs)("div",{style:{flex:1},children:[(0,Al.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--color-text-primary)",marginBottom:"4px"},children:e.nom}),(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"var(--color-text-secondary)",marginBottom:"8px"},children:["Produit source: ",e.produit_nom]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",fontSize:"13px"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{style:{fontWeight:"bold"},children:"Forme:"})," ",e.forme_decoupe_custom||e.forme_decoupe]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{style:{fontWeight:"bold"},children:"Quantit\xe9:"})," ",e.quantite_preparee," ",e.unite_preparee]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{style:{fontWeight:"bold"},children:"Portions:"})," ",e.nombre_portions," \xd7 ",e.taille_portion,e.unite_portion]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{style:{fontWeight:"bold",color:"#dc2626"},children:"Perte:"})," ",e.perte," ",e.unite_produit_brut," (",e.perte_pourcentage,"%)"]}),t&&(0,Al.jsxs)("div",{children:[(0,Al.jsx)("span",{style:{fontWeight:"bold",color:n?"#dc2626":i?"#f59e0b":"#10b981"},children:"DLC:"})," ",t.toLocaleDateString("fr-FR"),n&&(0,Al.jsx)("span",{style:{marginLeft:"4px",color:"#dc2626"},children:"\u26a0\ufe0f Expir\xe9e"}),i&&!n&&(0,Al.jsx)("span",{style:{marginLeft:"4px",color:"#f59e0b"},children:"\u26a0\ufe0f Bient\xf4t"})]})]})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>{qt(e),Kn(e,"preparation")},style:{padding:"6px 12px",fontSize:"14px"},children:"\u270f\ufe0f"}),(0,Al.jsx)("button",{className:"button",onClick:()=>Yn(e.id,"preparation"),style:{padding:"6px 12px",fontSize:"14px",background:"#dc2626",color:"white"},children:"\ud83d\uddd1\ufe0f"})]})]})},e.id)}))})]}),"recettes"===F&&(0,Al.jsxs)("div",{className:"item-list",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcdd Productions"}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>Ot(!0),children:"\u2795 Nouvelle Production"}),(0,Al.jsx)("button",{className:"button",onClick:async()=>{try{const e=await At.get("".concat(OP,"/export/recettes"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=t,i.setAttribute("download","recettes_export.xlsx"),document.body.appendChild(i),i.click(),i.remove()}catch(e){console.error("Erreur lors de l'export des recettes:",e),alert("Erreur lors de l'export des recettes")}},children:"\ud83d\udcd6 Export Excel"})]}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{className:"filter-group",children:[(0,Al.jsx)("label",{className:"filter-label",children:"\ud83c\udff7\ufe0f Filtrer par cat\xe9gorie :"}),(0,Al.jsxs)("select",{className:"filter-select",value:Ae,onChange:e=>wn(e.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",minWidth:"150px"},children:[(0,Al.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),Te.map((e=>(0,Al.jsxs)("option",{value:e,children:["Entr\xe9e"===e?"\ud83e\udd57":"Plat"===e?"\ud83c\udf7d\ufe0f":"Dessert"===e?"\ud83c\udf70":"Bar"===e?"\ud83c\udf79":"\ud83d\udcdd"," ",e]},e)))]}),Ae&&(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"14px",color:"var(--color-text-secondary)",marginLeft:"10px"},children:[Le.length," plat(s) trouv\xe9(s)"]})]})}),(Le.length>0?Le:ge).map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[(e=>{if(!e)return"\u26a0\ufe0f";switch(e){case"Entr\xe9e":return"\ud83e\udd57";case"Plat":return"\ud83c\udf7d\ufe0f";case"Dessert":return"\ud83c\udf70";case"Bar":return"\ud83c\udf79";case"Autres":return"\ud83d\udcdd";default:return"\u26a0\ufe0f"}})(e.categorie)," ",e.nom,e.categorie?(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",background:"var(--color-primary-blue)",color:"white"},children:e.categorie}):(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",background:"var(--color-warning-orange)",color:"white"},children:"Sans cat\xe9gorie"})]}),(0,Al.jsxs)("div",{className:"item-details",children:["Prix: ",e.prix_vente,"\u20ac \u2022 Marge: ",e.marge_beneficiaire||"N/A","%"]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[En()&&(0,Al.jsx)("button",{className:"button small",onClick:()=>Kn(e,"recette"),children:"\u270f\ufe0f \xc9diter"}),Fn()&&(0,Al.jsx)("button",{className:"button small warning",onClick:async()=>{const t=window.prompt("Raison de l'archivage de \"".concat(e.nom,'" (optionnel):'));if(null!==t){await Ln(e.id,"production",t||null)?alert("".concat(e.nom," archiv\xe9 avec succ\xe8s !")):alert("Erreur lors de l'archivage")}},children:"\ud83d\udcc1 Archiver"})]})]},t)))]}),"datagrids"===F&&(0,Al.jsx)("div",{children:(0,Al.jsx)(MP,{})}),"archives"===F&&(0,Al.jsx)("div",{children:(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcc1 Gestion des Archives"}),(0,Al.jsx)("div",{className:"filter-section",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[(0,Al.jsx)("label",{className:"filter-label",children:"Afficher :"}),(0,Al.jsxs)("select",{className:"filter-select",value:Ye,onChange:e=>{Qe(e.target.value),In("tous"===e.target.value?null:e.target.value)},style:{padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--color-border)",background:"var(--color-background-card)",color:"var(--color-text-primary)",fontSize:"13px"},children:[(0,Al.jsx)("option",{value:"tous",children:"Tous les \xe9l\xe9ments"}),(0,Al.jsx)("option",{value:"produit",children:"\ud83d\udce6 Produits"}),(0,Al.jsx)("option",{value:"production",children:"\ud83c\udf7d\ufe0f Productions"}),(0,Al.jsx)("option",{value:"fournisseur",children:"\ud83d\ude9a Fournisseurs"})]}),(0,Al.jsxs)("div",{className:"filter-info",style:{fontSize:"12px",color:"var(--color-text-secondary)",marginLeft:"10px"},children:[He.length," \xe9l\xe9ment(s) archiv\xe9(s)"]})]})}),(0,Al.jsx)("div",{className:"item-list",children:0===He.length?(0,Al.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-secondary)"},children:"\ud83d\udced Aucun \xe9l\xe9ment archiv\xe9"}):He.map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:["produit"===e.item_type?"\ud83d\udce6":"production"===e.item_type?"\ud83c\udf7d\ufe0f":"\ud83d\ude9a"," ",e.original_data.nom,(0,Al.jsx)("span",{className:"category-badge",style:{marginLeft:"8px",padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:"var(--color-warning-orange)",color:"white"},children:e.item_type})]}),(0,Al.jsxs)("div",{className:"item-details",children:["Archiv\xe9 le ",new Date(e.archived_at).toLocaleDateString("fr-FR")," \u2022",e.reason&&" Raison: ".concat(e.reason)]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("button",{className:"button small success",onClick:async()=>{if(window.confirm("Restaurer ".concat(e.original_data.nom," ?"))){await(async e=>{try{return await At.post("".concat(OP,"/restore/").concat(e)),In(),jn(),Bn(),An(),!0}catch(t){return console.error("Erreur lors de la restauration:",t),!1}})(e.id)?alert("".concat(e.original_data.nom," restaur\xe9 avec succ\xe8s !")):alert("Erreur lors de la restauration")}},children:"\u21a9\ufe0f Restaurer"}),(0,Al.jsx)("button",{className:"button small danger",onClick:async()=>{if(window.confirm("Supprimer d\xe9finitivement ".concat(e.original_data.nom," ?\n\nCette action est irr\xe9versible !"))){await(async e=>{try{return await At.delete("".concat(OP,"/archives/").concat(e)),In(),!0}catch(t){return console.error("Erreur lors de la suppression d\xe9finitive:",t),!1}})(e.id)?alert("".concat(e.original_data.nom," supprim\xe9 d\xe9finitivement")):alert("Erreur lors de la suppression")}},children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)))})]})}),"historique"===F&&(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udcca Historique des Op\xe9rations"}),(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Al.jsx)("button",{className:"button secondary",onClick:Mn,style:{fontSize:"14px",padding:"8px 16px"},children:"\ud83d\udd04 Actualiser"}),(0,Al.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",textAlign:"right"},children:["\ud83d\udcc5 Derni\xe8re mise \xe0 jour : ",(new Date).toLocaleTimeString("fr-FR"),(0,Al.jsx)("br",{}),"\ud83d\udd04 Auto-refresh toutes les 30s"]})]}),(0,Al.jsx)("div",{className:"item-list",children:Xi.length>0?Xi.map(((e,t)=>(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsx)("div",{className:"item-name",children:e.nom}),(0,Al.jsx)("div",{className:"item-details",children:e.details})]}),(0,Al.jsx)("div",{className:"item-value ".concat(e.couleur),children:e.statut})]},e.id||t))):(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\ud83d\udcca"}),(0,Al.jsx)("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"Aucune op\xe9ration r\xe9cente"}),(0,Al.jsx)("div",{style:{fontSize:"14px"},children:"L'historique se remplira automatiquement avec l'activit\xe9"})]})})]})]})}),(0,Al.jsx)("div",{id:"users",className:"wireframe-section ".concat("users"===P?"active":""),children:(0,Al.jsx)(Il,{})})]}),(0,Al.jsxs)("div",{className:"bottom-navigation",children:[(0,Al.jsxs)("button",{className:"bottom-nav-item ".concat("dashboard"===P?"active":""),onClick:()=>E("dashboard"),children:[(0,Al.jsx)("div",{className:"bottom-nav-icon",children:"\ud83c\udfe0"}),(0,Al.jsx)("div",{className:"bottom-nav-label",children:"Home"})]}),(0,Al.jsxs)("button",{className:"bottom-nav-item ".concat("stocks"===P?"active":""),onClick:()=>{console.log("Clic sur STOCK, activeTab actuel:",P),E("stocks"),console.log("activeTab chang\xe9 vers: stocks")},children:[(0,Al.jsx)("div",{className:"bottom-nav-icon",children:"\ud83d\udce6"}),(0,Al.jsx)("div",{className:"bottom-nav-label",children:"Stock"})]}),"employe_cuisine"!==(null===W||void 0===W?void 0:W.role)&&(0,Al.jsxs)("button",{className:"bottom-nav-item ".concat("production"===P?"active":""),onClick:()=>E("production"),children:[(0,Al.jsx)("div",{className:"bottom-nav-icon",children:"\ud83c\udf73"}),(0,Al.jsx)("div",{className:"bottom-nav-label",children:"Production"})]}),("super_admin"===(null===W||void 0===W?void 0:W.role)||"chef_cuisine"===(null===W||void 0===W?void 0:W.role)||"employe_cuisine"===(null===W||void 0===W?void 0:W.role))&&(0,Al.jsxs)("button",{className:"bottom-nav-item ".concat("orders"===P?"active":""),onClick:()=>E("orders"),children:[(0,Al.jsx)("div",{className:"bottom-nav-icon",children:"\ud83d\uded2"}),(0,Al.jsx)("div",{className:"bottom-nav-label",children:"Orders"})]})]}),(0,Al.jsx)("div",{id:"datagrids",className:"wireframe-section ".concat("datagrids"===P?"active":""),children:(0,Al.jsx)(MP,{})}),(0,Al.jsx)("div",{id:"orders",className:"wireframe-section ".concat("orders"===P?"active":""),children:(0,Al.jsx)(jP,{currentUser:W})}),(0,Al.jsx)("div",{id:"ocr",className:"wireframe-section ".concat("ocr"===P?"active":""),children:(0,Al.jsxs)("div",{className:"wireframe",children:[(0,Al.jsx)("h2",{children:"\ud83d\udcf1 Module OCR - Num\xe9risation Factures"}),(0,Al.jsxs)("div",{className:"layout two-column",children:[(0,Al.jsxs)("div",{className:"sidebar",children:[(0,Al.jsx)("h3",{style:{color:"#d4af37",marginBottom:"15px"},children:"Actions"}),(0,Al.jsx)("button",{className:"button",onClick:()=>zt(!0),children:"\ud83d\udcc1 Importer Document"}),(0,Al.jsx)("button",{className:"button",onClick:eo,disabled:be,children:"\ud83d\udd04 Traitement Auto"}),(0,Al.jsx)("button",{className:"button",onClick:to,disabled:be,style:{background:"linear-gradient(45deg, #ff6b6b, #ff8e8e)",border:"none",color:"white"},children:"\ud83d\uddd1\ufe0f Vider l'historique"}),(0,Al.jsx)("h4",{style:{color:"#d4af37",margin:"20px 0 10px"},children:"Historique (Cliquez pour d\xe9tails)"}),(0,Al.jsxs)("div",{style:{fontSize:"0.9rem"},children:[fe.slice(0,5).map(((e,t)=>(0,Al.jsxs)("div",{style:{padding:"8px",margin:"5px 0",background:(null===ai||void 0===ai?void 0:ai.id)===e.id?"rgba(212, 175, 55, 0.3)":"rgba(255,255,255,0.2)",borderRadius:"5px",cursor:"pointer",border:(null===ai||void 0===ai?void 0:ai.id)===e.id?"2px solid #d4af37":"none"},onClick:()=>(e=>{li(e);const t="\ud83d\udcc4 DOCUMENT S\xc9LECTIONN\xc9:\n\n"+"\ud83d\udcc1 Fichier: ".concat(e.nom_fichier,"\n")+"\ud83d\udcc5 Date: ".concat(new Date(e.date_upload).toLocaleDateString("fr-FR"),"\n")+"\ud83d\udcdd Type: ".concat("z_report"===e.type_document?"Rapport Z":"Facture Fournisseur","\n\n");if(e.donnees_parsees&&Object.keys(e.donnees_parsees).length>0){const o=e.donnees_parsees;let s="\ud83d\udcca DONN\xc9ES EXTRAITES:\n\n";var i,n;"z_report"===e.type_document?(s+="\ud83d\udcc5 Date rapport: ".concat(o.date||"Non trouv\xe9e","\n"),s+="\ud83d\udcb0 CA Total: ".concat(o.total_ca||"Non trouv\xe9","\u20ac\n"),s+="\ud83c\udf7d\ufe0f Plats vendus: ".concat((null===(i=o.plats_vendus)||void 0===i?void 0:i.length)||0,"\n\n"),o.plats_vendus&&o.plats_vendus.length>0&&(s+="\ud83c\udf7d\ufe0f TOP 5 PLATS:\n",o.plats_vendus.slice(0,5).forEach(((e,t)=>{s+="".concat(t+1,". ").concat(e.quantite,"x ").concat(e.nom,"\n")})))):(s+="\ud83c\udfea Fournisseur: ".concat(o.fournisseur||"Non trouv\xe9","\n"),s+="\ud83d\udcc5 Date: ".concat(o.date||"Non trouv\xe9e","\n"),ci(null),hi(!1),gi("overview"),s+="\ud83d\udd22 N\xb0 facture: ".concat(o.numero_facture||"Non trouv\xe9","\n"),s+="\ud83d\udcb0 Total: ".concat(o.total_ttc||o.total_ht||"Non trouv\xe9","\u20ac\n"),s+="\ud83d\udce6 Produits: ".concat((null===(n=o.produits)||void 0===n?void 0:n.length)||0,"\n")),alert(t+s)}else alert(t+"\u274c Aucune donn\xe9e extraite pour ce document.")})(e),children:[(0,Al.jsx)("div",{style:{fontWeight:"bold"},children:e.nom_fichier}),(0,Al.jsxs)("div",{style:{fontSize:"0.8rem",opacity:.8},children:["z_report"===e.type_document?"\ud83d\udcca Rapport Z":"\ud83e\uddfe Facture"," -",new Date(e.date_upload).toLocaleDateString("fr-FR")]})]},t))),0===fe.length&&(0,Al.jsx)("div",{style:{padding:"8px",margin:"5px 0",background:"rgba(255,255,255,0.2)",borderRadius:"5px"},children:"Aucun document trait\xe9"})]})]}),(0,Al.jsxs)("div",{className:"main-content",children:[(0,Al.jsx)("input",{type:"text",className:"search-bar",placeholder:"\ud83d\udd0d Rechercher une facture..."}),(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:"\ud83d\udcc4 Zone de Pr\xe9visualisation"}),(0,Al.jsx)("div",{style:{height:"200px",background:"#f8f7f4",border:"2px dashed #d4af37",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",margin:"15px 0"},children:(0,Al.jsx)("span",{style:{color:"#4a5568"},children:"Glissez votre facture ici ou cliquez pour s\xe9lectionner"})})]}),(0,Al.jsxs)("div",{className:"table-mockup",children:[(0,Al.jsx)("div",{className:"table-header",children:"Donn\xe9es Extraites - Document S\xe9lectionn\xe9"}),ai?(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcc1 Fichier:"})," ",ai.nom_fichier]})}),(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcdd Type:"})," ","z_report"===ai.type_document?"Rapport Z":"Facture Fournisseur"]})}),(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcc5 Date upload:"})," ",new Date(ai.date_upload).toLocaleDateString("fr-FR")]})}),ai.donnees_parsees&&Object.keys(ai.donnees_parsees).length>0?(0,Al.jsxs)(Al.Fragment,{children:["z_report"===ai.type_document&&(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcb0 CA Total:"})," ",null!==(t=null!==(i=ai.donnees_parsees.grand_total_sales)&&void 0!==i?i:ai.donnees_parsees.total_ca)&&void 0!==t?t:"Non calcul\xe9",(null!==(n=ai.donnees_parsees.grand_total_sales)&&void 0!==n?n:ai.donnees_parsees.total_ca)?"\u20ac":""]})}),(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83c\udf7d\ufe0f Plats vendus:"})," ",ai.donnees_parsees.items_by_category?Object.values(ai.donnees_parsees.items_by_category).reduce(((e,t)=>e+t.reduce(((e,t)=>e+(Number(t.quantity_sold)||0)),0)),0):(null===(s=ai.donnees_parsees.plats_vendus)||void 0===s?void 0:s.reduce(((e,t)=>e+(Number(t.quantite)||0)),0))||0," plats"]})})]}),"facture_fournisseur"===ai.type_document&&(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83c\udfea Fournisseur:"})," ",ai.donnees_parsees.fournisseur||"Non identifi\xe9"]})}),(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcb0 Total:"})," ",ai.donnees_parsees.total_ttc||ai.donnees_parsees.total_ht||"Non calcul\xe9","\u20ac"]})}),(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsxs)("span",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udce6 Produits:"})," ",(null===(a=ai.donnees_parsees.produits)||void 0===a?void 0:a.length)||0," produits"]})})]})]}):(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsx)("span",{style:{color:"#e53e3e"},children:"\u274c Aucune donn\xe9e extraite - Document n\xe9cessite un retraitement"})})]}):(0,Al.jsx)("div",{className:"table-row",children:(0,Al.jsx)("span",{style:{fontStyle:"italic",color:"#4a5568"},children:"\ud83d\udc46 S\xe9lectionnez un document dans l'historique pour voir les donn\xe9es extraites"})})]}),(0,Al.jsxs)("div",{style:{textAlign:"center",marginTop:"20px"},children:[(0,Al.jsx)("button",{className:"button",onClick:()=>zt(!0),children:"\u2705 Valider"}),(0,Al.jsx)("button",{className:"button",onClick:async()=>{ai?(await $n(ai),gi("sidebyside")):alert("Veuillez d'abord s\xe9lectionner un document dans l'historique.")},children:"\u270f\ufe0f Corriger"}),(0,Al.jsx)("button",{className:"button",children:"\ud83d\udcbe Enregistrer"})]})]})]})]})}),Vt&&(0,Al.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Al.jsxs)("div",{style:{width:"90%",maxWidth:"1200px",maxHeight:"85vh",background:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"linear-gradient(135deg, var(--color-primary-solid), var(--color-primary-dark))",color:"#fff"},children:[(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Al.jsx)("span",{style:{fontSize:"20px"},children:"\ud83d\udc41\ufe0f"}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("div",{style:{fontWeight:"700"},children:"Aper\xe7u du document"}),(0,Al.jsx)("div",{style:{fontSize:"12px",opacity:.9},children:null===Gt||void 0===Gt?void 0:Gt.nom_fichier})]})]}),(0,Al.jsx)("button",{className:"button",onClick:Xn,style:{background:"#fff",color:"var(--color-primary-solid)"},children:"\u2716\ufe0f Fermer"})]}),(0,Al.jsx)("div",{style:{display:"flex",gap:"8px",padding:"10px 12px",borderBottom:"1px solid #eee"},children:[{id:"overview",label:"R\xe9sum\xe9"},{id:"sidebyside",label:"Document + Donn\xe9es"},{id:"items",label:"Liste compl\xe8te"},{id:"raw",label:"Texte brut"},{id:"analyse",label:"Analyse"}].map((e=>(0,Al.jsx)("button",{onClick:()=>gi(e.id),className:"button",style:{background:pi===e.id?"var(--color-primary-solid)":"var(--color-beige)",color:pi===e.id?"#fff":"var(--color-primary-solid)"},children:e.label},e.id)))}),(0,Al.jsxs)("div",{style:{padding:"12px",overflow:"auto",maxHeight:"65vh"},children:[ui&&(0,Al.jsx)("div",{style:{textAlign:"center",padding:"30px"},children:"Chargement..."}),!ui&&(0,Al.jsxs)(Al.Fragment,{children:["overview"===pi&&(0,Al.jsxs)("div",{className:"layout two-column",style:{gap:"12px"},children:[(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:"Informations"}),(0,Al.jsxs)("div",{className:"card-content",children:[(0,Al.jsxs)("div",{children:["Type: ","z_report"===(null===di||void 0===di?void 0:di.type_document)?"Rapport Z":"Facture Fournisseur"]}),(0,Al.jsxs)("div",{children:["Date upload: ",null!==di&&void 0!==di&&di.date_upload?new Date(di.date_upload).toLocaleString("fr-FR"):"-"]}),(0,Al.jsxs)("div",{children:["Service: ",(null===di||void 0===di||null===(l=di.donnees_parsees)||void 0===l?void 0:l.service)||"-"]}),(0,Al.jsxs)("div",{children:["CA Total: ",(null===di||void 0===di||null===(d=di.donnees_parsees)||void 0===d?void 0:d.grand_total_sales)||(null===di||void 0===di||null===(c=di.donnees_parsees)||void 0===c?void 0:c.total_ttc)||"-"]})]})]}),(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:"Status"}),(0,Al.jsxs)("div",{className:"card-content",children:[(0,Al.jsxs)("div",{children:["Statut: ",null===di||void 0===di?void 0:di.statut]}),(0,Al.jsxs)("div",{children:["Trait\xe9 le: ",null!==di&&void 0!==di&&di.date_traitement?new Date(di.date_traitement).toLocaleString("fr-FR"):"-"]})]})]})]}),"sidebyside"===pi&&(0,Al.jsxs)("div",{className:"layout two-column",style:{gap:"12px"},children:[(0,Al.jsxs)("div",{className:"card",style:{height:"60vh",overflow:"auto"},children:[(0,Al.jsx)("div",{className:"card-title",children:"Document"}),(0,Al.jsx)("div",{className:"card-content",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:"pdf"===(null===di||void 0===di?void 0:di.file_type)?(0,Al.jsxs)("div",{style:{textAlign:"center"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px"},children:"\ud83d\udcc4"}),(0,Al.jsxs)("div",{children:["PDF charg\xe9: ",null===Gt||void 0===Gt?void 0:Gt.nom_fichier]}),(0,Al.jsx)("div",{style:{fontSize:"12px",opacity:.7},children:"L'aper\xe7u PDF int\xe9gr\xe9 est simplifi\xe9 ici"})]}):null!==di&&void 0!==di&&di.image_base64?(0,Al.jsx)("img",{src:di.image_base64,alt:"aper\xe7u",style:{maxWidth:"100%",maxHeight:"50vh",borderRadius:"8px"}}):(0,Al.jsx)("div",{children:"Aucune image"})})]}),(0,Al.jsxs)("div",{className:"card",style:{height:"60vh",overflow:"auto"},children:[(0,Al.jsx)("div",{className:"card-title",children:"Donn\xe9es extraites"}),(0,Al.jsx)("div",{className:"card-content",children:"z_report"===(null===di||void 0===di?void 0:di.type_document)?(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Date:"})," ",(null===di||void 0===di||null===(h=di.donnees_parsees)||void 0===h?void 0:h.report_date)||"-"]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Service:"})," ",(null===di||void 0===di||null===(p=di.donnees_parsees)||void 0===p?void 0:p.service)||"-"]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"CA Total:"})," ",(null===di||void 0===di||null===(g=di.donnees_parsees)||void 0===g?void 0:g.grand_total_sales)||"-"]}),(0,Al.jsx)("div",{style:{marginTop:"8px"},children:(0,Al.jsx)("strong",{children:"Par cat\xe9gorie"})}),["Bar","Entr\xe9es","Plats","Desserts"].map((e=>{var t,i;return(0,Al.jsxs)("div",{style:{marginTop:"4px"},children:[(0,Al.jsx)("div",{style:{fontWeight:"600"},children:e}),(0,Al.jsx)("ul",{style:{marginLeft:"16px"},children:((null===di||void 0===di||null===(t=di.donnees_parsees)||void 0===t||null===(i=t.items_by_category)||void 0===i?void 0:i[e])||[]).map(((e,t)=>(0,Al.jsxs)("li",{children:[e.quantity_sold,"x ",e.name," ",e.unit_price?"- \u20ac".concat(e.unit_price):""]},t)))})]},e)}))]}):(0,Al.jsxs)(Al.Fragment,{children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Fournisseur:"})," ",(null===di||void 0===di||null===(m=di.donnees_parsees)||void 0===m?void 0:m.fournisseur)||"-"]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Date facture:"})," ",(null===di||void 0===di||null===(f=di.donnees_parsees)||void 0===f?void 0:f.date)||"-"]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Total TTC:"})," ",(null===di||void 0===di||null===(v=di.donnees_parsees)||void 0===v?void 0:v.total_ttc)||"-"]})]})})]})]}),"items"===pi&&(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:"Liste compl\xe8te des \xe9l\xe9ments d\xe9tect\xe9s"}),(0,Al.jsx)("div",{className:"card-content",children:"z_report"===(null===di||void 0===di?void 0:di.type_document)?(0,Al.jsx)(Al.Fragment,{children:(0,Al.jsx)("ul",{children:((null===di||void 0===di||null===(b=di.donnees_parsees)||void 0===b?void 0:b.raw_items)||[]).map(((e,t)=>(0,Al.jsxs)("li",{children:["\u2022 ",e.quantity_sold,"x ",e.name," (",e.category,") ",e.total_price?"= \u20ac".concat(e.total_price):""]},t)))})}):(0,Al.jsx)("ul",{children:((null===di||void 0===di||null===(w=di.donnees_parsees)||void 0===w?void 0:w.produits)||[]).map(((e,t)=>(0,Al.jsxs)("li",{children:["\u2022 ",e.quantite," ",e.unite||""," ",e.nom," \xe0 \u20ac",e.prix_unitaire||e.prix_total||""]},t)))})})]}),"analyse"===pi&&(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:"Analyse du rapport"}),(0,Al.jsx)("div",{className:"card-content",children:((e,t,i,n,o,s,r)=>{const a=null===di||void 0===di||null===(e=di.donnees_parsees)||void 0===e?void 0:e.z_analysis;if(!a)return(0,Al.jsx)("div",{children:"Aucune analyse disponible pour ce document."});const l=null===a||void 0===a||null===(t=a.verification)||void 0===t?void 0:t.total_calculated,d=null===a||void 0===a||null===(i=a.verification)||void 0===i?void 0:i.displayed_total,c=null===a||void 0===a||null===(n=a.verification)||void 0===n?void 0:n.delta_eur,u=null===a||void 0===a||null===(o=a.verification)||void 0===o?void 0:o.delta_pct;return(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Date:"})," ",(null===di||void 0===di||null===(s=di.donnees_parsees)||void 0===s?void 0:s.report_date)||"\u2014"]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"Nombre de couverts:"})," ",null!==(r=null===a||void 0===a?void 0:a.covers)&&void 0!==r?r:"\u2014"]}),(0,Al.jsxs)("div",{children:[(0,Al.jsx)("strong",{children:"CA Total affich\xe9 (TTC):"})," ",Jn(d)]})]}),(0,Al.jsx)("div",{className:"layout two-column",style:{gap:"12px"},children:["Bar","Entr\xe9es","Plats","Desserts","Autres"].map((e=>{var t,i,n,o,s,r,l,d;return(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:e}),(0,Al.jsxs)("div",{className:"card-content",children:[(0,Al.jsxs)("div",{children:["Articles vendus: ",null!==(t=null===a||void 0===a||null===(i=a.analysis)||void 0===i||null===(n=i[e])||void 0===n?void 0:n.articles)&&void 0!==t?t:0]}),(0,Al.jsxs)("div",{children:["CA: ",Jn(null===a||void 0===a||null===(o=a.analysis)||void 0===o||null===(s=o[e])||void 0===s?void 0:s.ca)]}),(null===a||void 0===a||null===(r=a.analysis)||void 0===r||null===(l=r[e])||void 0===l||null===(d=l.details)||void 0===d?void 0:d.length)>0&&(0,Al.jsxs)("details",{style:{marginTop:"6px"},children:[(0,Al.jsx)("summary",{className:"cursor-pointer text-sm",children:"D\xe9tail sous-cat\xe9gories"}),(0,Al.jsx)("ul",{style:{marginLeft:"16px"},children:a.analysis[e].details.map(((e,t)=>(0,Al.jsxs)("li",{children:[e.name,": ",e.quantity," articles \u2013 ",Jn(e.amount)]},t)))})]})]})]},e)}))}),(0,Al.jsxs)("div",{className:"card",style:{marginTop:"10px"},children:[(0,Al.jsx)("div",{className:"card-title",children:"V\xe9rification"}),(0,Al.jsxs)("div",{className:"card-content",children:[(0,Al.jsxs)("div",{children:["Total calcul\xe9: ",Jn(l)]}),(0,Al.jsxs)("div",{children:["Total affich\xe9: ",Jn(d)]}),(0,Al.jsxs)("div",{children:["\xc9cart: ",null!==c&&void 0!==c?"".concat(Jn(c)," (").concat(null!==u&&void 0!==u?u:"\u2014","%)"):"\u2014"]}),(0,Al.jsxs)("div",{children:["Status: ",null!==c&&Math.abs(c)<.01?"\u2705 Coh\xe9rent":"\u26a0\ufe0f \xc0 v\xe9rifier"]})]})]})]})})()})]}),"raw"===pi&&(0,Al.jsxs)("div",{className:"card",children:[(0,Al.jsx)("div",{className:"card-title",children:"Texte brut OCR"}),(0,Al.jsx)("pre",{style:{whiteSpace:"pre-wrap",padding:"12px"},children:(null===di||void 0===di?void 0:di.texte_extrait)||"(vide)"})]})]})]})]})}),Nt&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",children:[(0,Al.jsx)("h3",{className:"modal-header",children:Ut?"Modifier le produit":"Ajouter un produit"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{const e=u(u({},mi),{},{prix_achat:mi.prix_achat?parseFloat(mi.prix_achat):null});Ut?await At.put("".concat(OP,"/produits/").concat(Ut.id),e):await At.post("".concat(OP,"/produits"),e),Mt(!1),fi({nom:"",description:"",categorie:"",unite:"",prix_achat:"",fournisseur_id:""}),qt(null),jn(),_n(),kn()}catch(t){console.error("Erreur lors de la sauvegarde du produit:",t),alert("Erreur lors de la sauvegarde")}we(!1)},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nom du produit"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:mi.nom,onChange:e=>fi(u(u({},mi),{},{nom:e.target.value})),required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Description"}),(0,Al.jsx)("textarea",{className:"form-textarea",value:mi.description,onChange:e=>fi(u(u({},mi),{},{description:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Cat\xe9gorie d'ingr\xe9dient"}),(0,Al.jsxs)("select",{className:"form-select",value:mi.categorie,onChange:e=>fi(u(u({},mi),{},{categorie:e.target.value})),children:[(0,Al.jsx)("option",{value:"",children:"S\xe9lectionnez une cat\xe9gorie"}),(0,Al.jsx)("option",{value:"L\xe9gumes",children:"\ud83e\udd55 L\xe9gumes"}),(0,Al.jsx)("option",{value:"Viandes",children:"\ud83e\udd69 Viandes"}),(0,Al.jsx)("option",{value:"Poissons",children:"\ud83d\udc1f Poissons"}),(0,Al.jsx)("option",{value:"Cr\xeamerie",children:"\ud83e\uddc0 Cr\xeamerie"}),(0,Al.jsx)("option",{value:"\xc9pices",children:"\ud83c\udf36\ufe0f \xc9pices & Condiments"}),(0,Al.jsx)("option",{value:"Fruits",children:"\ud83c\udf4e Fruits"}),(0,Al.jsx)("option",{value:"C\xe9r\xe9ales",children:"\ud83c\udf3e C\xe9r\xe9ales & F\xe9culents"}),(0,Al.jsx)("option",{value:"Boissons",children:"\ud83e\udd64 Boissons"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udce6 Autres"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Unit\xe9 (utilis\xe9e lors de l'achat)"}),(0,Al.jsxs)("select",{className:"form-select",value:mi.unite,onChange:e=>fi(u(u({},mi),{},{unite:e.target.value})),required:!0,children:[(0,Al.jsx)("option",{value:"",children:"S\xe9lectionnez une unit\xe9"}),(0,Al.jsx)("option",{value:"kg",children:"Kilogramme (kg)"}),(0,Al.jsx)("option",{value:"g",children:"Gramme (g)"}),(0,Al.jsx)("option",{value:"L",children:"Litre (L)"}),(0,Al.jsx)("option",{value:"mL",children:"Millilitre (mL)"}),(0,Al.jsx)("option",{value:"pi\xe8ce",children:"Pi\xe8ce"}),(0,Al.jsx)("option",{value:"paquet",children:"Paquet"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Prix d'achat (\u20ac)"}),(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:mi.prix_achat,onChange:e=>fi(u(u({},mi),{},{prix_achat:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Fournisseur"}),(0,Al.jsxs)("select",{className:"form-select",value:mi.fournisseur_id,onChange:e=>fi(u(u({},mi),{},{fournisseur_id:e.target.value})),children:[(0,Al.jsx)("option",{value:"",children:"S\xe9lectionnez un fournisseur"}),le.map((e=>(0,Al.jsx)("option",{value:e.id,children:e.nom},e.id)))]})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{Mt(!1),qt(null),fi({nom:"",description:"",categorie:"",unite:"",prix_achat:"",fournisseur_id:""})},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button btn-primary",disabled:be,children:be?"Sauvegarde...":Ut?"Modifier":"Ajouter"})]})]})]})}),Tt&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",children:[(0,Al.jsx)("h3",{className:"modal-header",children:Ut?"Modifier le fournisseur":"Ajouter un fournisseur"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{const{deliveryCost:e,extraCost:o}=ln,s=r(ln,_P);let a;if(Ut)await At.put("".concat(OP,"/fournisseurs/").concat(Ut.id),s),a=Ut.id;else{a=(await At.post("".concat(OP,"/fournisseurs"),s)).data.id}if(e>0||o>0)try{await At.put("".concat(OP,"/supplier-cost-config/").concat(a),{supplier_id:a,delivery_cost:e,extra_cost:o})}catch(i){var t;if(404===(null===(t=i.response)||void 0===t?void 0:t.status))try{await At.post("".concat(OP,"/supplier-cost-config"),{supplier_id:a,delivery_cost:e,extra_cost:o})}catch(n){console.warn("Impossible de cr\xe9er la configuration des co\xfbts:",n)}}jt(!1),dn({nom:"",contact:"",email:"",telephone:"",adresse:"",couleur:"#3B82F6",logo:"",categorie:"frais",deliveryCost:0,extraCost:0}),qt(null),An(),kn()}catch(o){console.error("Erreur lors de la sauvegarde du fournisseur:",o),alert("Erreur lors de la sauvegarde")}we(!1)},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nom du fournisseur"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:ln.nom,onChange:e=>dn(u(u({},ln),{},{nom:e.target.value})),required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Contact"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:ln.contact,onChange:e=>dn(u(u({},ln),{},{contact:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Email"}),(0,Al.jsx)("input",{type:"email",className:"form-input",value:ln.email,onChange:e=>dn(u(u({},ln),{},{email:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"T\xe9l\xe9phone"}),(0,Al.jsx)("input",{type:"tel",className:"form-input",value:ln.telephone,onChange:e=>dn(u(u({},ln),{},{telephone:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Adresse"}),(0,Al.jsx)("textarea",{className:"form-textarea",value:ln.adresse,onChange:e=>dn(u(u({},ln),{},{adresse:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Couleur d'identification"}),(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Al.jsx)("input",{type:"color",className:"form-input",value:ln.couleur,onChange:e=>dn(u(u({},ln),{},{couleur:e.target.value})),style:{width:"60px",height:"40px",padding:"2px",cursor:"pointer"}}),(0,Al.jsx)("span",{style:{padding:"8px 16px",backgroundColor:ln.couleur,color:"white",borderRadius:"4px",fontSize:"14px",fontWeight:"500"},children:ln.nom||"Aper\xe7u"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Logo (emoji ou URL)"}),(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Al.jsx)("input",{type:"text",className:"form-input",value:ln.logo,onChange:e=>dn(u(u({},ln),{},{logo:e.target.value})),placeholder:"\ud83c\udfea ou https://exemple.com/logo.png",style:{flex:1}}),ln.logo&&(0,Al.jsx)("span",{style:{fontSize:"24px",padding:"8px",backgroundColor:"#f3f4f6",borderRadius:"4px"},children:ln.logo.startsWith("http")?"\ud83d\uddbc\ufe0f":ln.logo})]}),(0,Al.jsx)("small",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:"Utilisez un emoji (\ud83c\udfea \ud83e\udd69 \ud83d\udc1f) ou une URL d'image"})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Cat\xe9gorie"}),(0,Al.jsx)("select",{className:"form-select",value:ln.categorie,onChange:e=>dn(u(u({},ln),{},{categorie:e.target.value})),children:BP.map((e=>(0,Al.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,Al.jsxs)("div",{className:"form-row",style:{display:"flex",gap:"15px"},children:[(0,Al.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,Al.jsx)("label",{className:"form-label",children:"Frais de livraison (\u20ac)"}),(0,Al.jsx)("input",{type:"number",step:"0.01",min:"0",className:"form-input",value:ln.deliveryCost,onChange:e=>dn(u(u({},ln),{},{deliveryCost:parseFloat(e.target.value)||0})),placeholder:"0.00"}),(0,Al.jsx)("small",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:"Frais fixes par commande"})]}),(0,Al.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,Al.jsx)("label",{className:"form-label",children:"Frais suppl\xe9mentaires (\u20ac)"}),(0,Al.jsx)("input",{type:"number",step:"0.01",min:"0",className:"form-input",value:ln.extraCost,onChange:e=>dn(u(u({},ln),{},{extraCost:parseFloat(e.target.value)||0})),placeholder:"0.00"}),(0,Al.jsx)("small",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:"Manutention, emballage..."})]})]}),(0,Al.jsxs)("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,Al.jsx)("h4",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"\ud83d\ude9a R\xe8gles de Livraison"}),(0,Al.jsx)("button",{type:"button",onClick:()=>un(!cn),className:"button",style:{padding:"6px 12px",fontSize:"14px"},children:cn?"Masquer":"Configurer"})]}),cn&&(0,Al.jsxs)("div",{style:{marginTop:"12px"},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"13px"},children:"\ud83d\udcc5 Jours de prise de commande"}),(0,Al.jsx)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"].map((e=>{var t,i;return(0,Al.jsx)("button",{type:"button",onClick:()=>{var t;const i=(null===(t=ln.delivery_rules)||void 0===t?void 0:t.order_days)||[],n=i.includes(e)?i.filter((t=>t!==e)):[...i,e];dn(u(u({},ln),{},{delivery_rules:u(u({},ln.delivery_rules),{},{order_days:n})}))},style:{padding:"6px 12px",borderRadius:"6px",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:((null===(t=ln.delivery_rules)||void 0===t?void 0:t.order_days)||[]).includes(e)?"#3b82f6":"#e2e8f0",color:((null===(i=ln.delivery_rules)||void 0===i?void 0:i.order_days)||[]).includes(e)?"white":"#64748b"},children:e.charAt(0).toUpperCase()+e.slice(1,3)},e)}))}),(0,Al.jsx)("small",{style:{color:"#64748b",fontSize:"11px",marginTop:"4px",display:"block"},children:"Laisser vide = tous les jours"})]}),(0,Al.jsxs)("div",{className:"form-group",style:{marginTop:"12px"},children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"13px"},children:"\u23f0 Heure limite de commande"}),(0,Al.jsx)("input",{type:"number",min:"0",max:"23",value:(null===(y=ln.delivery_rules)||void 0===y?void 0:y.order_deadline_hour)||11,onChange:e=>dn(u(u({},ln),{},{delivery_rules:u(u({},ln.delivery_rules),{},{order_deadline_hour:parseInt(e.target.value)})})),className:"form-input",style:{width:"100px"}}),(0,Al.jsx)("span",{style:{marginLeft:"8px",color:"#64748b"},children:"heures"})]}),(0,Al.jsxs)("div",{className:"form-group",style:{marginTop:"12px"},children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"13px"},children:"\ud83d\ude9a Jours de livraison sp\xe9cifiques"}),(0,Al.jsx)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"].map((e=>{var t,i;return(0,Al.jsx)("button",{type:"button",onClick:()=>{var t;const i=(null===(t=ln.delivery_rules)||void 0===t?void 0:t.delivery_days)||[],n=i.includes(e)?i.filter((t=>t!==e)):[...i,e];dn(u(u({},ln),{},{delivery_rules:u(u({},ln.delivery_rules),{},{delivery_days:n})}))},style:{padding:"6px 12px",borderRadius:"6px",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",backgroundColor:((null===(t=ln.delivery_rules)||void 0===t?void 0:t.delivery_days)||[]).includes(e)?"#10b981":"#e2e8f0",color:((null===(i=ln.delivery_rules)||void 0===i?void 0:i.delivery_days)||[]).includes(e)?"white":"#64748b"},children:e.charAt(0).toUpperCase()+e.slice(1,3)},e)}))}),(0,Al.jsx)("small",{style:{color:"#64748b",fontSize:"11px",marginTop:"4px",display:"block"},children:"Laisser vide pour utiliser le d\xe9lai en jours"})]}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[(0,Al.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"13px"},children:"\ud83d\udce6 D\xe9lai (jours)"}),(0,Al.jsx)("input",{type:"number",min:"0",max:"14",value:(null===(x=ln.delivery_rules)||void 0===x?void 0:x.delivery_delay_days)||1,onChange:e=>dn(u(u({},ln),{},{delivery_rules:u(u({},ln.delivery_rules),{},{delivery_delay_days:parseInt(e.target.value)})})),className:"form-input"})]}),(0,Al.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"13px"},children:"\ud83d\udd50 Heure livraison"}),(0,Al.jsx)("input",{type:"time",value:(null===(C=ln.delivery_rules)||void 0===C?void 0:C.delivery_time)||"12:00",onChange:e=>dn(u(u({},ln),{},{delivery_rules:u(u({},ln.delivery_rules),{},{delivery_time:e.target.value})})),className:"form-input"})]})]}),(0,Al.jsxs)("div",{className:"form-group",style:{marginTop:"12px"},children:[(0,Al.jsx)("label",{className:"form-label",style:{fontSize:"13px"},children:"\ud83d\udcdd R\xe8gles sp\xe9ciales"}),(0,Al.jsx)("textarea",{value:(null===(S=ln.delivery_rules)||void 0===S?void 0:S.special_rules)||"",onChange:e=>dn(u(u({},ln),{},{delivery_rules:u(u({},ln.delivery_rules),{},{special_rules:e.target.value})})),placeholder:"Ex: Commande samedi \u2192 livraison lundi",className:"form-textarea",rows:"2",style:{fontSize:"13px"}})]})]})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{jt(!1),qt(null),un(!1),dn({nom:"",contact:"",email:"",telephone:"",adresse:"",couleur:"#3B82F6",logo:"",categorie:"frais",deliveryCost:0,extraCost:0,delivery_rules:{order_days:[],order_deadline_hour:11,delivery_days:[],delivery_delay_days:1,delivery_time:"12:00",special_rules:""}})},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button btn-primary",disabled:be,children:be?"Sauvegarde...":Ut?"Modifier":"Ajouter"})]})]})]})}),It&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",children:[(0,Al.jsx)("h3",{className:"modal-header",children:"ajustement"===hn.type?"Ajuster le stock":"Nouveau mouvement de stock"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{const e=u(u({},hn),{},{quantite:parseFloat(hn.quantite)});await At.post("".concat(OP,"/mouvements"),e),Lt(!1),pn({produit_id:"",type:"entree",quantite:"",reference:"",commentaire:""}),On(),_n(),kn()}catch(t){console.error("Erreur lors de la cr\xe9ation du mouvement:",t),alert("Erreur lors de la sauvegarde")}we(!1)},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Produit"}),(0,Al.jsxs)("select",{className:"form-select",value:hn.produit_id,onChange:e=>pn(u(u({},hn),{},{produit_id:e.target.value})),required:!0,children:[(0,Al.jsx)("option",{value:"",children:"S\xe9lectionnez un produit"}),re.map((e=>(0,Al.jsxs)("option",{value:e.id,children:[e.nom," - ",(()=>{const t=ce.find((t=>t.produit_id===e.id)),i=oo(e.unite);return t?"Stock actuel: ".concat(no(t.quantite_actuelle,i)):"Pas de stock"})()]},e.id)))]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Type de mouvement"}),(0,Al.jsxs)("select",{className:"form-select",value:hn.type,onChange:e=>pn(u(u({},hn),{},{type:e.target.value})),required:!0,children:[(0,Al.jsx)("option",{value:"entree",children:"\u2795 Entr\xe9e (Augmenter le stock)"}),(0,Al.jsx)("option",{value:"sortie",children:"\u2796 Sortie (Diminuer le stock)"}),(0,Al.jsx)("option",{value:"ajustement",children:"\ud83d\udd04 Ajustement (Corriger le stock)"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsxs)("label",{className:"form-label",children:["Quantit\xe9","ajustement"===hn.type&&(0,Al.jsx)("span",{style:{fontSize:"0.8rem",color:"#666",marginLeft:"8px"},children:"(quantit\xe9 \xe0 ajouter/retirer, ex: -5 pour retirer 5 unit\xe9s)"})]}),(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:hn.quantite,onChange:e=>pn(u(u({},hn),{},{quantite:e.target.value})),placeholder:"ajustement"===hn.type?"Ex: -5 ou +10":"Quantit\xe9",required:!0})]}),(0,Al.jsxs)("div",{className:"form-row",style:{display:"flex",gap:"15px"},children:[(0,Al.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,Al.jsx)("label",{className:"form-label",children:"Lot"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:hn.lot,onChange:e=>pn(u(u({},hn),{},{lot:e.target.value})),placeholder:"Ex: LOT-2024-001"})]}),(0,Al.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,Al.jsx)("label",{className:"form-label",children:"Unit\xe9"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:hn.unite,onChange:e=>pn(u(u({},hn),{},{unite:e.target.value})),placeholder:"Ex: kg, L, pi\xe8ces"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"R\xe9f\xe9rence"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:hn.reference,onChange:e=>pn(u(u({},hn),{},{reference:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Commentaire"}),(0,Al.jsx)("textarea",{className:"form-textarea",value:hn.commentaire,onChange:e=>pn(u(u({},hn),{},{commentaire:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{Lt(!1),pn({produit_id:"",type:"entree",quantite:"",reference:"",commentaire:"",lot:"",unite:""})},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button btn-primary",disabled:be,children:be?"Sauvegarde...":"Cr\xe9er"})]})]})]})}),Ii&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",children:[(0,Al.jsx)("h3",{className:"modal-header",children:"Mouvement de stock - Pr\xe9paration"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{const e=u(u({},_i),{},{quantite:parseFloat(_i.quantite),date:new Date});Ti((t=>t.map((t=>{if(t.preparation_id===e.preparation_id){let i=t.quantite_disponible;return"entree"===e.type?i+=e.quantite:"sortie"===e.type?i=Math.max(0,i-e.quantite):"ajustement"===e.type&&(i=e.quantite),u(u({},t),{},{quantite_disponible:i,derniere_maj:new Date})}return t})))),qn(),Li(!1),Oi({preparation_id:"",type:"entree",quantite:"",reference:"",commentaire:"",dlc:""}),alert("\u2705 Mouvement de pr\xe9paration enregistr\xe9")}catch(t){console.error("Erreur lors de l'enregistrement:",t),alert("\u274c Erreur lors de l'enregistrement")}we(!1)},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Pr\xe9paration"}),(0,Al.jsxs)("select",{className:"form-select",value:_i.preparation_id,onChange:e=>Oi(u(u({},_i),{},{preparation_id:e.target.value})),required:!0,children:[(0,Al.jsx)("option",{value:"",children:"-- S\xe9lectionner une pr\xe9paration --"}),vi.map((e=>(0,Al.jsxs)("option",{value:e.id,children:["\ud83d\udd2a ",e.nom," (",e.quantite_preparee," ",e.unite_preparee,")"]},e.id)))]})]}),(0,Al.jsxs)("div",{className:"form-row",children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Type de mouvement"}),(0,Al.jsxs)("select",{className:"form-select",value:_i.type,onChange:e=>Oi(u(u({},_i),{},{type:e.target.value})),children:[(0,Al.jsx)("option",{value:"entree",children:"\u2795 Entr\xe9e (Nouvelle pr\xe9paration)"}),(0,Al.jsx)("option",{value:"sortie",children:"\u2796 Sortie (Utilisation)"}),(0,Al.jsx)("option",{value:"ajustement",children:"\ud83d\udd04 Ajustement"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Quantit\xe9"}),(0,Al.jsx)("input",{className:"form-input",type:"number",step:"0.1",value:_i.quantite,onChange:e=>Oi(u(u({},_i),{},{quantite:e.target.value})),required:!0})]})]}),(0,Al.jsxs)("div",{className:"form-row",children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"R\xe9f\xe9rence"}),(0,Al.jsx)("input",{className:"form-input",type:"text",value:_i.reference,onChange:e=>Oi(u(u({},_i),{},{reference:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nouvelle DLC (si applicable)"}),(0,Al.jsx)("input",{className:"form-input",type:"date",value:_i.dlc,onChange:e=>Oi(u(u({},_i),{},{dlc:e.target.value}))})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Commentaire"}),(0,Al.jsx)("textarea",{className:"form-textarea",value:_i.commentaire,onChange:e=>Oi(u(u({},_i),{},{commentaire:e.target.value})),placeholder:"Raison du mouvement, notes..."})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{Li(!1),Oi({preparation_id:"",type:"entree",quantite:"",reference:"",commentaire:"",dlc:""})},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button btn-primary",disabled:be,children:be?"Sauvegarde...":"Enregistrer"})]})]})]})}),Gi&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",style:{maxWidth:"700px"},children:[(0,Al.jsx)("h3",{className:"modal-header",children:"\u2795 Cr\xe9er une Nouvelle Mission"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{if(0===Ui.assigned_to_user_ids.length)return alert("\u274c Veuillez s\xe9lectionner au moins un employ\xe9"),void we(!1);const e=Ui.assigned_to_user_ids.map((e=>({title:Ui.title,description:Ui.description,type:Ui.type,category:Ui.category,assigned_to_user_id:e,priority:Ui.priority,due_date:Ui.due_date?new Date(Ui.due_date).toISOString():null,target_quantity:Ui.target_quantity?parseFloat(Ui.target_quantity):null,target_unit:Ui.target_unit||null}))).map((e=>At.post("".concat(OP,"/missions?assigned_by_user_id=").concat(W.id),e)));await Promise.all(e);const t=1===Ui.assigned_to_user_ids.length?"\u2705 Mission cr\xe9\xe9e et assign\xe9e avec succ\xe8s !":"\u2705 Mission cr\xe9\xe9e et assign\xe9e \xe0 ".concat(Ui.assigned_to_user_ids.length," personnes avec succ\xe8s !");alert(t),(async()=>{$i(Date.now()),window.dispatchEvent(new CustomEvent("refreshMissions"))})(),Wi(!1),Tn()}catch(n){var t,i;console.error("Erreur lors de la cr\xe9ation:",n),alert("\u274c Erreur lors de la cr\xe9ation: ".concat((null===(t=n.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.detail)||n.message))}finally{we(!1)}},children:[(0,Al.jsxs)("div",{className:"form-row",children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Titre de la mission *"}),(0,Al.jsx)("input",{className:"form-input",type:"text",value:Ui.title,onChange:e=>qi(u(u({},Ui),{},{title:e.target.value})),placeholder:"Ex: Pr\xe9parer 20 portions de...",required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Type de mission"}),(0,Al.jsxs)("select",{className:"form-select",value:Ui.type,onChange:e=>{const t=e.target.value;qi(u(u({},Ui),{},{type:t,title:Ui.title||{preparation:"Pr\xe9parer X portions de...",stock_check:"V\xe9rifier stock critique :",cleaning:"Nettoyer la zone de...",delivery_check:"R\xe9ceptionner livraison...",equipment_check:"Contr\xf4ler la temp\xe9rature..."}[t]||""}))},children:[(0,Al.jsx)("option",{value:"preparation",children:"\ud83d\udd2a Pr\xe9paration"}),(0,Al.jsx)("option",{value:"stock_check",children:"\ud83d\udce6 V\xe9rification Stock"}),(0,Al.jsx)("option",{value:"cleaning",children:"\ud83e\uddfd Nettoyage/Hygi\xe8ne"}),(0,Al.jsx)("option",{value:"delivery_check",children:"\ud83d\ude9a R\xe9ception Livraison"}),(0,Al.jsx)("option",{value:"equipment_check",children:"\u2699\ufe0f Contr\xf4le \xc9quipement"})]})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Description d\xe9taill\xe9e *"}),(0,Al.jsx)("textarea",{className:"form-textarea",value:Ui.description,onChange:e=>qi(u(u({},Ui),{},{description:e.target.value})),placeholder:"D\xe9crivez pr\xe9cis\xe9ment la t\xe2che \xe0 effectuer...",rows:"3",required:!0})]}),(0,Al.jsxs)("div",{className:"form-row",children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Assigner \xe0 * (s\xe9lection multiple)"}),(0,Al.jsx)("div",{style:{border:"1px solid #d1d5db",borderRadius:"6px",padding:"8px",maxHeight:"200px",overflowY:"auto",background:"white"},children:(W&&Ki?"super_admin"===W.role?Ki:"patron"===W.role?Ki.filter((e=>"super_admin"!==e.role)):"chef_cuisine"===W.role?Ki.filter((e=>"super_admin"!==e.role&&"patron"!==e.role)):"caissier"===W.role?Ki.filter((e=>"barman"===e.role||"caissier"===e.role)):[]:[]).map((e=>(0,Al.jsxs)("label",{style:{display:"flex",alignItems:"center",padding:"6px 8px",cursor:"pointer",borderRadius:"4px",marginBottom:"4px",background:Ui.assigned_to_user_ids.includes(e.id)?"#eff6ff":"transparent"},onMouseEnter:e=>e.target.style.background="#f3f4f6",onMouseLeave:t=>t.target.style.background=Ui.assigned_to_user_ids.includes(e.id)?"#eff6ff":"transparent",children:[(0,Al.jsx)("input",{type:"checkbox",checked:Ui.assigned_to_user_ids.includes(e.id),onChange:t=>{const i=e.id;t.target.checked?qi(u(u({},Ui),{},{assigned_to_user_ids:[...Ui.assigned_to_user_ids,i]})):qi(u(u({},Ui),{},{assigned_to_user_ids:Ui.assigned_to_user_ids.filter((e=>e!==i))}))},style:{marginRight:"8px"}}),(0,Al.jsxs)("span",{style:{fontSize:"14px"},children:[e.full_name||e.username,(0,Al.jsxs)("span",{style:{color:"#6b7280",fontSize:"12px",marginLeft:"4px"},children:["(",e.role,")"]})]})]},e.id)))}),(0,Al.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"super_admin"===(null===W||void 0===W?void 0:W.role)?"\ud83d\udc51 En tant que patron, vous pouvez assigner \xe0 tout le monde":"chef_cuisine"===(null===W||void 0===W?void 0:W.role)?"\ud83d\udc68\u200d\ud83c\udf73 En tant que chef, vous pouvez assigner \xe0 tout le monde":"caissier"===(null===W||void 0===W?void 0:W.role)?"\ud83d\udcb0 En tant que responsable caisse, vous pouvez assigner au barman et aux caissiers":"Permissions d'assignation limit\xe9es"})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Priorit\xe9"}),(0,Al.jsxs)("select",{className:"form-select",value:Ui.priority,onChange:e=>qi(u(u({},Ui),{},{priority:e.target.value})),children:[(0,Al.jsx)("option",{value:"basse",children:"\ud83d\udd35 Basse"}),(0,Al.jsx)("option",{value:"normale",children:"\ud83d\udcdd Normale"}),(0,Al.jsx)("option",{value:"haute",children:"\u26a1 Haute"}),(0,Al.jsx)("option",{value:"urgente",children:"\ud83d\udea8 Urgente"})]})]})]}),(0,Al.jsxs)("div",{className:"form-row",children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"\xc9ch\xe9ance (optionnel)"}),(0,Al.jsx)("input",{className:"form-input",type:"datetime-local",value:Ui.due_date,onChange:e=>qi(u(u({},Ui),{},{due_date:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Cat\xe9gorie"}),(0,Al.jsxs)("select",{className:"form-select",value:Ui.category,onChange:e=>qi(u(u({},Ui),{},{category:e.target.value})),children:[(0,Al.jsx)("option",{value:"cuisine",children:"\ud83e\udd58 Cuisine"}),(0,Al.jsx)("option",{value:"stock",children:"\ud83d\udce6 Stock"}),(0,Al.jsx)("option",{value:"hygiene",children:"\ud83e\uddfd Hygi\xe8ne"}),(0,Al.jsx)("option",{value:"commande",children:"\ud83d\ude9a Commandes"})]})]})]}),(0,Al.jsxs)("div",{className:"form-row",children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Quantit\xe9 cible (optionnel)"}),(0,Al.jsx)("input",{className:"form-input",type:"number",step:"0.1",value:Ui.target_quantity,onChange:e=>qi(u(u({},Ui),{},{target_quantity:e.target.value})),placeholder:"Ex: 15, 2.5..."})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Unit\xe9 (optionnel)"}),(0,Al.jsxs)("select",{className:"form-select",value:Ui.target_unit,onChange:e=>qi(u(u({},Ui),{},{target_unit:e.target.value})),children:[(0,Al.jsx)("option",{value:"",children:"-- Choisir unit\xe9 --"}),(0,Al.jsx)("option",{value:"portions",children:"portions"}),(0,Al.jsx)("option",{value:"kg",children:"kg"}),(0,Al.jsx)("option",{value:"L",children:"L"}),(0,Al.jsx)("option",{value:"pi\xe8ces",children:"pi\xe8ces"}),(0,Al.jsx)("option",{value:"zones",children:"zones"})]})]})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{Wi(!1),Tn()},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button btn-primary",disabled:be,children:be?"Cr\xe9ation...":"\u2795 Cr\xe9er Mission"})]})]})]})}),Zi&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",style:{maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[(0,Al.jsxs)("h3",{className:"modal-header",children:["\u2705 Validation Mercuriale - ",null===tn||void 0===tn?void 0:tn.nom_fichier]}),(0,Al.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",background:"#f0f9ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[(0,Al.jsx)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#1e40af",marginBottom:"8px"},children:"\ud83d\udccb R\xe9sum\xe9 de l'import"}),(0,Al.jsxs)("div",{style:{fontSize:"14px",color:"#1e40af"},children:["\ud83c\udfea ",(0,Al.jsx)("strong",{children:"Fournisseur d\xe9tect\xe9:"})," ",(null===tn||void 0===tn||null===(R=tn.donnees_parsees)||void 0===R?void 0:R.fournisseur_detecte)||"Non d\xe9tect\xe9",(0,Al.jsx)("br",{}),"\ud83d\udce6 ",(0,Al.jsx)("strong",{children:"Produits trouv\xe9s:"})," ",(null===tn||void 0===tn||null===(k=tn.donnees_parsees)||void 0===k?void 0:k.total_produits)||0,(0,Al.jsx)("br",{}),"\ud83d\udcc5 ",(0,Al.jsx)("strong",{children:"Import\xe9 le:"})," ",null!==tn&&void 0!==tn&&tn.date_upload?new Date(tn.date_upload).toLocaleDateString("fr-FR"):"N/A"]})]}),(0,Al.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,Al.jsx)("label",{className:"form-label",children:"\ud83c\udfea Associer \xe0 ce fournisseur :"}),(0,Al.jsxs)("select",{className:"form-select",value:rn,onChange:e=>an(e.target.value),children:[(0,Al.jsx)("option",{value:"",children:"-- S\xe9lectionner le fournisseur --"}),le.map((e=>(0,Al.jsxs)("option",{value:e.id,children:[e.logo||"\ud83c\udfea"," ",e.nom," (",e.categorie,")"]},e.id)))]})]}),(0,Al.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Al.jsx)("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"12px",color:"#374151"},children:"\ud83d\udce6 Produits d\xe9tect\xe9s - S\xe9lectionnez ceux \xe0 cr\xe9er :"}),(0,Al.jsx)("div",{style:{maxHeight:"400px",overflow:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:on.map(((e,t)=>{var i;return(0,Al.jsx)("div",{style:{padding:"12px",borderBottom:t<on.length-1?"1px solid #e5e7eb":"none",background:e.selected?"#f0fdf4":"#f9fafb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,Al.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",flex:1},children:[(0,Al.jsx)("input",{type:"checkbox",checked:e.selected,onChange:e=>{const i=[...on];i[t].selected=e.target.checked,sn(i)},style:{marginRight:"12px"}}),(0,Al.jsxs)("div",{style:{flex:1},children:[(0,Al.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:e.nom}),(0,Al.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280"},children:["\ud83d\udcb0 ",e.prix_achat,"\u20ac/",e.unite," \u2022 \ud83d\udcc2 ",e.categorie," \u2022 \ud83d\udcc4 ",null===(i=e.ligne_originale)||void 0===i?void 0:i.substring(0,40),"..."]})]})]})},t)}))}),(0,Al.jsxs)("div",{style:{marginTop:"12px",display:"flex",gap:"8px",fontSize:"12px"},children:[(0,Al.jsx)("button",{className:"button small",onClick:()=>{const e=on.map((e=>u(u({},e),{},{selected:!0})));sn(e)},children:"\u2611\ufe0f Tout s\xe9lectionner"}),(0,Al.jsx)("button",{className:"button small",onClick:()=>{const e=on.map((e=>u(u({},e),{},{selected:!1})));sn(e)},children:"\u2610 Tout d\xe9s\xe9lectionner"})]})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{en(!1),nn(null),sn([])},children:"Annuler"}),(0,Al.jsx)("button",{type:"button",className:"button btn-primary",onClick:async()=>{if(tn&&0!==on.length)try{we(!0);const n=on.filter((e=>e.selected));if(0===n.length)return void alert("\u274c Veuillez s\xe9lectionner au moins un produit \xe0 cr\xe9er");let o=0,s=0;const r=[];for(const l of n)try{const e={nom:l.nom,description:"Produit import\xe9 depuis mercuriale - ".concat(tn.nom_fichier),categorie:l.categorie,unite:l.unite,prix_achat:l.prix_achat,fournisseur_id:rn||l.fournisseur_id};await At.post("".concat(OP,"/produits"),e),o++}catch(i){var e,t;s++,r.push("".concat(l.nom,": ").concat((null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||i.message))}let a="\u2705 Import termin\xe9 !\n\n";a+="\ud83d\udce6 ".concat(o," produits cr\xe9\xe9s avec succ\xe8s\n"),s>0&&(a+="\u274c ".concat(s," erreurs\n\n"),a+="D\xe9tails erreurs:\n".concat(r.slice(0,3).join("\n")),r.length>3&&(a+="\n... et ".concat(r.length-3," autres erreurs"))),alert(a),jn(),_n(),en(!1),nn(null),sn([])}catch(i){console.error("Erreur lors de la cr\xe9ation des produits:",i),alert("\u274c Erreur lors de la cr\xe9ation: ".concat(i.message))}finally{we(!1)}else alert("\u274c Aucun produit s\xe9lectionn\xe9")},disabled:be||0===on.filter((e=>e.selected)).length,children:be?"Cr\xe9ation...":"\u2795 Cr\xe9er ".concat(on.filter((e=>e.selected)).length," Produit(s)")})]})]})}),xi&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",style:{maxWidth:"800px"},children:[(0,Al.jsx)("h3",{className:"modal-header",children:Ut?"Modifier la pr\xe9paration":"Nouvelle pr\xe9paration"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{const e=u(u({},Si),{},{quantite_produit_brut:parseFloat(Si.quantite_produit_brut),quantite_preparee:parseFloat(Si.quantite_preparee),perte:parseFloat(Si.perte),perte_pourcentage:parseFloat(Si.perte_pourcentage),nombre_portions:parseInt(Si.nombre_portions),taille_portion:parseFloat(Si.taille_portion),dlc:Si.dlc?new Date(Si.dlc).toISOString():null});Ut?(await At.put("".concat(OP,"/preparations/").concat(Ut.id),e),alert("\u2705 Pr\xe9paration mise \xe0 jour")):(await At.post("".concat(OP,"/preparations"),e),alert("\u2705 Pr\xe9paration cr\xe9\xe9e")),Cn(),Ci(!1),Hn(),qt(null)}catch(t){console.error("Erreur:",t),alert("\u274c Erreur lors de l'enregistrement")}we(!1)},children:[(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nom de la pr\xe9paration *"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:Si.nom,onChange:e=>Ri(u(u({},Si),{},{nom:e.target.value})),placeholder:"Ex: Carottes en julienne",required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Produit source *"}),(0,Al.jsxs)("select",{className:"form-select",value:Si.produit_id,onChange:e=>Ri(u(u({},Si),{},{produit_id:e.target.value})),required:!0,children:[(0,Al.jsx)("option",{value:"",children:"-- S\xe9lectionner un produit --"}),re.map((e=>(0,Al.jsx)("option",{value:e.id,children:e.nom},e.id)))]})]})]}),(0,Al.jsxs)("div",{className:"form-group",style:{marginBottom:"16px"},children:[(0,Al.jsx)("label",{className:"form-label",children:"Forme de d\xe9coupe *"}),(0,Al.jsxs)("select",{className:"form-select",value:Si.forme_decoupe,onChange:e=>Ri(u(u({},Si),{},{forme_decoupe:e.target.value})),required:!0,children:[(0,Al.jsx)("option",{value:"",children:"-- S\xe9lectionner une forme --"}),(0,Al.jsx)("optgroup",{label:"Formes pr\xe9d\xe9finies",children:(wi.predefined||[]).map((e=>(0,Al.jsxs)("option",{value:e.id,children:[e.nom," - ",e.description]},e.id)))}),(wi.custom||[]).length>0&&(0,Al.jsx)("optgroup",{label:"Formes personnalis\xe9es",children:(wi.custom||[]).map((e=>(0,Al.jsx)("option",{value:e.nom,children:e.nom},e.id)))})]}),(0,Al.jsxs)("small",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px",display:"block"},children:[(wi.predefined||[]).length," formes disponibles"]})]}),(0,Al.jsxs)("div",{style:{background:"#f3f4f6",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[(0,Al.jsx)("div",{style:{fontWeight:"bold",marginBottom:"12px"},children:"Quantit\xe9s"}),(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Quantit\xe9 produit brut *"}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:Si.quantite_produit_brut,onChange:e=>Ri(u(u({},Si),{},{quantite_produit_brut:e.target.value})),onBlur:Gn,placeholder:"10",required:!0}),(0,Al.jsxs)("select",{className:"form-select",value:Si.unite_produit_brut,onChange:e=>Ri(u(u({},Si),{},{unite_produit_brut:e.target.value})),style:{width:"100px"},children:[(0,Al.jsx)("option",{value:"kg",children:"kg"}),(0,Al.jsx)("option",{value:"g",children:"g"}),(0,Al.jsx)("option",{value:"L",children:"L"}),(0,Al.jsx)("option",{value:"cl",children:"cl"}),(0,Al.jsx)("option",{value:"pi\xe8ces",children:"pi\xe8ces"})]})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Quantit\xe9 attendue *"}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:Si.quantite_preparee,onChange:e=>Ri(u(u({},Si),{},{quantite_preparee:e.target.value})),onBlur:Gn,placeholder:"8.5",required:!0}),(0,Al.jsxs)("select",{className:"form-select",value:Si.unite_preparee,onChange:e=>Ri(u(u({},Si),{},{unite_preparee:e.target.value})),style:{width:"100px"},children:[(0,Al.jsx)("option",{value:"kg",children:"kg"}),(0,Al.jsx)("option",{value:"g",children:"g"}),(0,Al.jsx)("option",{value:"L",children:"L"}),(0,Al.jsx)("option",{value:"cl",children:"cl"}),(0,Al.jsx)("option",{value:"pi\xe8ces",children:"pi\xe8ces"})]})]})]})]})]}),(0,Al.jsxs)("div",{style:{background:"#fee2e2",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[(0,Al.jsx)("div",{style:{fontWeight:"bold",marginBottom:"12px",color:"#dc2626"},children:"Perte estim\xe9e (calcul\xe9e automatiquement)"}),(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Perte (quantit\xe9)"}),(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:Si.perte,readOnly:!0,style:{background:"#fef2f2"}})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Perte (%)"}),(0,Al.jsx)("input",{type:"number",step:"0.1",className:"form-input",value:Si.perte_pourcentage,readOnly:!0,style:{background:"#fef2f2"}})]})]})]}),(0,Al.jsxs)("div",{style:{background:"#dbeafe",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[(0,Al.jsx)("div",{style:{fontWeight:"bold",marginBottom:"12px",color:"#1e40af"},children:"Portions"}),(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Taille portion *"}),(0,Al.jsx)("input",{type:"number",step:"0.1",className:"form-input",value:Si.taille_portion,onChange:e=>Ri(u(u({},Si),{},{taille_portion:e.target.value})),onBlur:()=>{const e=parseFloat(Si.quantite_preparee)||0,t=parseFloat(Si.taille_portion)||0;let i=t;if("g"===Si.unite_portion?i=t/1e3:"cl"===Si.unite_portion&&(i=t/100),e>0&&i>0){const t=Math.floor(e/i);Ri(u(u({},Si),{},{nombre_portions:t.toString()}))}},placeholder:"100",required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Unit\xe9"}),(0,Al.jsxs)("select",{className:"form-select",value:Si.unite_portion,onChange:e=>Ri(u(u({},Si),{},{unite_portion:e.target.value})),children:[(0,Al.jsx)("option",{value:"g",children:"g"}),(0,Al.jsx)("option",{value:"kg",children:"kg"}),(0,Al.jsx)("option",{value:"cl",children:"cl"}),(0,Al.jsx)("option",{value:"L",children:"L"}),(0,Al.jsx)("option",{value:"pi\xe8ces",children:"pi\xe8ces"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nombre portions"}),(0,Al.jsx)("input",{type:"number",className:"form-input",value:Si.nombre_portions,readOnly:!0,style:{background:"#eff6ff",fontWeight:"bold",fontSize:"18px"}})]})]})]}),(0,Al.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"16px",marginBottom:"16px"},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"DLC"}),(0,Al.jsx)("input",{type:"date",className:"form-input",value:Si.dlc,onChange:e=>Ri(u(u({},Si),{},{dlc:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Notes"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:Si.notes,onChange:e=>Ri(u(u({},Si),{},{notes:e.target.value})),placeholder:"Notes optionnelles"})]})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{Ci(!1),qt(null),Hn()},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button",disabled:be,children:be?"\u23f3 Enregistrement...":Ut?"Modifier":"Cr\xe9er"})]})]})]})}),_t&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",children:[(0,Al.jsx)("h3",{className:"modal-header",children:Ut?"Modifier la recette":"Ajouter une recette"}),(0,Al.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),we(!0);try{const e=u(u({},gn),{},{portions:parseInt(gn.portions),temps_preparation:gn.temps_preparation?parseInt(gn.temps_preparation):null,prix_vente:gn.prix_vente?parseFloat(gn.prix_vente):null,coefficient_prevu:gn.coefficient_prevu?parseFloat(gn.coefficient_prevu):null,ingredients:gn.ingredients.map((e=>u(u({},e),{},{quantite:parseFloat(e.quantite)})))});Ut?await At.put("".concat(OP,"/recettes/").concat(Ut.id),e):await At.post("".concat(OP,"/recettes"),e),Ot(!1),Vn(),qt(null),Bn()}catch(t){console.error("Erreur lors de la sauvegarde de la recette:",t),alert("Erreur lors de la sauvegarde")}we(!1)},children:[(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nom de la recette"}),(0,Al.jsx)("input",{type:"text",className:"form-input",value:gn.nom,onChange:e=>mn(u(u({},gn),{},{nom:e.target.value})),required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Description"}),(0,Al.jsx)("textarea",{className:"form-textarea",value:gn.description,onChange:e=>mn(u(u({},gn),{},{description:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Cat\xe9gorie"}),(0,Al.jsxs)("select",{className:"form-select",value:gn.categorie,onChange:e=>mn(u(u({},gn),{},{categorie:e.target.value})),children:[(0,Al.jsx)("option",{value:"",children:"S\xe9lectionnez une cat\xe9gorie"}),(0,Al.jsx)("option",{value:"Entr\xe9e",children:"\ud83e\udd57 Entr\xe9e"}),(0,Al.jsx)("option",{value:"Plat",children:"\ud83c\udf7d\ufe0f Plat"}),(0,Al.jsx)("option",{value:"Dessert",children:"\ud83c\udf70 Dessert"}),(0,Al.jsx)("option",{value:"Bar",children:"\ud83c\udf79 Bar"}),(0,Al.jsx)("option",{value:"Autres",children:"\ud83d\udcdd Autres"})]})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Nombre de portions"}),(0,Al.jsx)("input",{type:"number",className:"form-input",value:gn.portions,onChange:e=>mn(u(u({},gn),{},{portions:e.target.value})),required:!0})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Temps de pr\xe9paration (minutes)"}),(0,Al.jsx)("input",{type:"number",className:"form-input",value:gn.temps_preparation,onChange:e=>mn(u(u({},gn),{},{temps_preparation:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Prix de vente (\u20ac)"}),(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:gn.prix_vente,onChange:e=>mn(u(u({},gn),{},{prix_vente:e.target.value}))})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Coefficient pr\xe9vu (multiple)"}),(0,Al.jsx)("input",{type:"number",step:"0.1",min:"0",max:"100",className:"form-input",value:gn.coefficient_prevu,onChange:e=>mn(u(u({},gn),{},{coefficient_prevu:e.target.value})),placeholder:"Ex: 35 pour 35%"}),(0,Al.jsx)("small",{className:"form-hint",children:"Coefficient pr\xe9vu = (Co\xfbt Mati\xe8re / Prix de Vente) \xd7 100"})]}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Ingr\xe9dients"}),(0,Al.jsx)("div",{style:{marginBottom:"15px"},children:gn.ingredients.map(((e,t)=>(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",padding:"8px",background:"#f8f7f4",borderRadius:"5px"},children:[(0,Al.jsxs)("span",{style:{flex:1},children:[e.produit_nom," - ",e.quantite," ",e.unite]}),(0,Al.jsx)("button",{type:"button",className:"button",style:{fontSize:"0.7rem",padding:"4px 8px",background:"#e53e3e",color:"white"},onClick:()=>(e=>{mn((t=>u(u({},t),{},{ingredients:t.ingredients.filter(((t,i)=>i!==e))})))})(t),children:"\u2715"})]},t)))}),(0,Al.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"end"},children:[(0,Al.jsx)("div",{style:{flex:1},children:(0,Al.jsxs)("select",{className:"form-select",value:fn.produit_id,onChange:e=>vn(u(u({},fn),{},{produit_id:e.target.value})),children:[(0,Al.jsx)("option",{value:"",children:"S\xe9lectionnez un produit"}),re.map((e=>(0,Al.jsx)("option",{value:e.id,children:e.nom},e.id)))]})}),(0,Al.jsx)("div",{style:{width:"100px"},children:(0,Al.jsx)("input",{type:"number",step:"0.01",className:"form-input",placeholder:"Quantit\xe9",value:fn.quantite,onChange:e=>vn(u(u({},fn),{},{quantite:e.target.value}))})}),(0,Al.jsx)("div",{style:{width:"80px"},children:(0,Al.jsx)("input",{type:"text",className:"form-input",placeholder:"Unit\xe9",value:fn.unite,onChange:e=>vn(u(u({},fn),{},{unite:e.target.value}))})}),(0,Al.jsx)("button",{type:"button",className:"button btn-primary",onClick:()=>{if(fn.produit_id&&fn.quantite){const e=re.find((e=>e.id===fn.produit_id));if(e){const t={produit_id:fn.produit_id,produit_nom:e.nom,quantite:parseFloat(fn.quantite),unite:fn.unite||e.unite};mn((e=>u(u({},e),{},{ingredients:[...e.ingredients,t]}))),vn({produit_id:"",quantite:"",unite:""})}}},style:{minWidth:"80px"},children:"Ajouter"})]})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{Ot(!1),qt(null),Vn()},children:"Annuler"}),(0,Al.jsx)("button",{type:"submit",className:"button btn-primary",disabled:be,children:be?"Sauvegarde...":Ut?"Modifier":"Ajouter"})]})]})]})}),Bt&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",children:[(0,Al.jsxs)("h3",{className:"modal-header",children:["Upload ","tickets-z"===ht?"Ticket Z":"Facture(s)"]}),(0,Al.jsx)("div",{className:"form-group",children:(0,Al.jsx)("div",{style:{padding:"10px 15px",background:"var(--color-background-card-light)",borderRadius:"6px",border:"1px solid var(--color-border)",marginBottom:"15px"},children:(0,Al.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Al.jsx)("span",{style:{fontSize:"20px"},children:"tickets-z"===ht?"\ud83d\udcca":"\ud83e\uddfe"}),(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("div",{style:{fontWeight:"600",fontSize:"14px"},children:["Type d\xe9tect\xe9 automatiquement : ","tickets-z"===ht?"Ticket Z":"Facture fournisseur"]}),(0,Al.jsx)("div",{style:{fontSize:"12px",color:"var(--color-text-muted)"},children:"tickets-z"===ht?"Rapport de caisse, Z de cl\xf4ture":"Une ou plusieurs factures seront d\xe9tect\xe9es automatiquement"})]})]})})}),(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Fichier (Image ou PDF)"}),(0,Al.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp,application/pdf,image/*",className:"form-input",onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/")&&"application/pdf"!==t.type)return void alert("Veuillez s\xe9lectionner un fichier image ou PDF");if(Jt(t),"application/pdf"===t.type)ei("PDF: ".concat(t.name));else{const e=new FileReader;e.onload=e=>{ei(e.target.result)},e.readAsDataURL(t)}}}}),(0,Al.jsx)("p",{className:"form-help",children:"\ud83d\udcf7 Images: JPG, PNG, GIF, etc. \u2022 \ud83d\udcc4 PDF: Factures et rapports Z"})]}),Zt&&(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Aper\xe7u"}),Zt.startsWith("PDF:")?(0,Al.jsxs)("div",{style:{padding:"20px",border:"2px dashed #ddd",borderRadius:"5px",textAlign:"center",backgroundColor:"#f9f9f9"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"\ud83d\udcc4"}),(0,Al.jsx)("div",{style:{fontWeight:"bold",color:"#666"},children:Zt.replace("PDF: ","")}),(0,Al.jsx)("div",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:"Fichier PDF s\xe9lectionn\xe9"})]}):(0,Al.jsx)("img",{src:Zt,alt:"Aper\xe7u du document",style:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"5px"}})]}),ni&&(0,Al.jsxs)("div",{className:"form-group",children:[(0,Al.jsx)("label",{className:"form-label",children:"Donn\xe9es extraites"}),(0,Al.jsx)("pre",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"5px",fontSize:"0.8rem",maxHeight:"150px",overflow:"auto"},children:JSON.stringify(ni,null,2)})]}),(0,Al.jsxs)("div",{className:"button-group",children:[(0,Al.jsx)("button",{type:"button",className:"button btn-cancel",onClick:()=>{zt(!1),io()},children:"Annuler"}),(0,Al.jsx)("button",{type:"button",className:"button btn-primary",onClick:async()=>{if(Xt){ri(!0);try{const e="tickets-z"===ht?"z_report":"factures"===ht?"facture_fournisseur":"mercuriale",t=new FormData;t.append("file",Xt),t.append("document_type",e);const i=await At.post("".concat(OP,"/ocr/upload-document"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});if(oi(i.data),i.data.multi_invoice){const e=i.data;let t="\ud83d\udcca Traitement de factures multiples termin\xe9 !\n\n";t+="\ud83d\udd0d Factures d\xe9tect\xe9es: ".concat(e.total_detected,"\n"),t+="\u2705 Trait\xe9es avec succ\xe8s: ".concat(e.successfully_processed,"\n"),e.rejected_count>0&&(t+="\u274c Rejet\xe9es: ".concat(e.rejected_count,"\n\n"),t+="\ud83d\udccb D\xe9tails des rejets:\n",e.rejected_invoices.forEach((e=>{t+="\u2022 Facture ".concat(e.index,": ").concat(e.reason,"\n"),e.issues&&e.issues.length>0&&(t+="  Issues: ".concat(e.issues.join(", "),"\n"))})),t+="\n\ud83d\udca1 Les factures rejet\xe9es peuvent \xeatre re-upload\xe9es individuellement pour un traitement manuel."),alert(t)}else alert("Document trait\xe9 avec succ\xe8s !");zn(),io(),zt(!1)}catch(i){var e,t;if(console.error("Erreur lors du traitement OCR:",i),"ECONNABORTED"===i.code)alert("Timeout: Le traitement OCR prend trop de temps. Veuillez r\xe9essayer avec un fichier plus petit.");else alert("Erreur: ".concat((null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||i.message||"Erreur lors du traitement"))}finally{ri(!1)}}else alert("Veuillez s\xe9lectionner un fichier")},disabled:si||!Xt,children:si?"Traitement...":"Traiter"})]})]})}),Vt&&Gt&&(0,Al.jsx)("div",{className:"modal-overlay",children:(0,Al.jsxs)("div",{className:"modal-content",style:{maxWidth:"90vw",maxHeight:"90vh"},children:[(0,Al.jsxs)("div",{className:"modal-header",children:[(0,Al.jsx)("h3",{children:"\ud83d\udcc4 Aper\xe7u et Donn\xe9es Extraites"}),(0,Al.jsx)("button",{className:"close-button",onClick:Xn,children:"\u2715"})]}),(0,Al.jsxs)("div",{className:"modal-body",style:{padding:"20px",display:"flex",gap:"20px",height:"70vh"},children:[(0,Al.jsxs)("div",{style:{flex:"1",borderRight:"1px solid #ddd",paddingRight:"20px"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"15px",color:"#2D5016"},children:"\ud83d\udcce Document Source"}),(0,Al.jsx)("div",{style:{border:"2px solid #ddd",borderRadius:"8px",padding:"15px",backgroundColor:"#f9f9f9",height:"100%",overflow:"auto"},children:"pdf"===Gt.file_type?(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,Al.jsx)("div",{style:{fontSize:"64px",marginBottom:"20px"},children:"\ud83d\udcc4"}),(0,Al.jsx)("h3",{style:{color:"#666",marginBottom:"10px"},children:Gt.nom_fichier}),(0,Al.jsxs)("p",{style:{color:"#999",fontSize:"14px"},children:["Fichier PDF \u2022 Type: ",Gt.type_document]}),(0,Al.jsxs)("p",{style:{color:"#666",fontSize:"12px",marginTop:"20px"},children:["Trait\xe9 le ",new Date(Gt.date_traitement).toLocaleString("fr-FR")]}),(0,Al.jsxs)("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"5px",textAlign:"left",maxHeight:"300px",overflow:"auto",fontSize:"12px",fontFamily:"monospace",whiteSpace:"pre-wrap"},children:[(0,Al.jsx)("strong",{children:"Texte extrait du PDF :"}),(0,Al.jsx)("br",{}),Gt.texte_extrait||"Aucun texte extrait"]})]}):(0,Al.jsx)("img",{src:Gt.image_base64,alt:"Aper\xe7u du document",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",border:"1px solid #ccc",borderRadius:"5px"}})})]}),(0,Al.jsxs)("div",{style:{flex:"1",paddingLeft:"20px"},children:[(0,Al.jsx)("h4",{style:{marginBottom:"15px",color:"#2D5016"},children:"\ud83d\udd0d Donn\xe9es Extraites et Organis\xe9es"}),(0,Al.jsx)("div",{style:{border:"2px solid #ddd",borderRadius:"8px",padding:"15px",backgroundColor:"#f9f9f9",height:"100%",overflow:"auto"},children:Gt.donnees_parsees?(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#e8f5e8",borderRadius:"5px"},children:[(0,Al.jsx)("h5",{style:{margin:"0 0 10px 0",color:"#2D5016"},children:"\ud83d\udcca Informations G\xe9n\xe9rales"}),(0,Al.jsxs)("div",{style:{fontSize:"14px"},children:[Gt.donnees_parsees.report_date&&(0,Al.jsxs)("p",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcc5 Date :"})," ",Gt.donnees_parsees.report_date]}),Gt.donnees_parsees.service&&(0,Al.jsxs)("p",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udd50 Service :"})," ",Gt.donnees_parsees.service]}),null!==Gt.donnees_parsees.grand_total_sales&&(0,Al.jsxs)("p",{children:[(0,Al.jsx)("strong",{children:"\ud83d\udcb0 CA Total :"})," ",Gt.donnees_parsees.grand_total_sales,"\u20ac"]})]})]}),Gt.donnees_parsees.items_by_category&&(0,Al.jsxs)("div",{children:[(0,Al.jsx)("h5",{style:{margin:"0 0 15px 0",color:"#2D5016"},children:"\ud83c\udf7d\ufe0f Articles par Cat\xe9gorie"}),Object.entries(Gt.donnees_parsees.items_by_category).map((e=>{let[t,i]=e;return(0,Al.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Al.jsxs)("div",{style:{backgroundColor:"#f0f0f0",padding:"8px 12px",borderRadius:"5px",fontWeight:"bold",marginBottom:"8px"},children:["Bar"===t&&"\ud83c\udf77","Entr\xe9es"===t&&"\ud83e\udd57","Plats"===t&&"\ud83c\udf7d\ufe0f","Desserts"===t&&"\ud83c\udf70",t," (",i.length," article",i.length>1?"s":"",")"]}),i.length>0?(0,Al.jsx)("div",{style:{paddingLeft:"10px"},children:i.map(((e,t)=>(0,Al.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #eee",fontSize:"13px"},children:[(0,Al.jsx)("span",{children:e.name}),(0,Al.jsxs)("div",{children:[(0,Al.jsxs)("span",{style:{fontWeight:"bold"},children:["\xd7",e.quantity_sold]}),e.unit_price&&(0,Al.jsxs)("span",{style:{marginLeft:"10px",color:"#666"},children:[e.unit_price,"\u20ac"]})]})]},t)))}):(0,Al.jsx)("div",{style:{fontStyle:"italic",color:"#999",paddingLeft:"10px"},children:"Aucun article dans cette cat\xe9gorie"})]},t)}))]}),Gt.donnees_parsees.raw_items&&Gt.donnees_parsees.raw_items.length>0&&(0,Al.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Al.jsx)("h5",{style:{margin:"0 0 10px 0",color:"#2D5016"},children:"\ud83d\udccb Tous les Articles D\xe9tect\xe9s"}),(0,Al.jsx)("div",{style:{fontSize:"12px"},children:Gt.donnees_parsees.raw_items.map(((e,t)=>(0,Al.jsxs)("div",{style:{padding:"5px 0",borderBottom:"1px solid #eee"},children:[(0,Al.jsx)("strong",{children:e.name})," - Quantit\xe9: ",e.quantity_sold,e.category&&(0,Al.jsxs)("span",{style:{color:"#666"},children:[" (Cat\xe9gorie: ",e.category,")"]})]},t)))})]}),(0,Al.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"5px"},children:[(0,Al.jsx)("h5",{style:{margin:"0 0 10px 0",color:"#2D5016"},children:"\ud83d\udcdd Texte Brut Extrait"}),(0,Al.jsx)("div",{style:{fontSize:"11px",fontFamily:"monospace",maxHeight:"150px",overflow:"auto",whiteSpace:"pre-wrap",color:"#555"},children:Gt.texte_extrait||"Aucun texte extrait"})]})]}):(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\u26a0\ufe0f"}),(0,Al.jsx)("p",{children:"Aucune donn\xe9e pars\xe9e disponible"}),(0,Al.jsx)("p",{style:{fontSize:"12px"},children:"Le document n'a peut-\xeatre pas \xe9t\xe9 trait\xe9 correctement"})]})})]})]}),(0,Al.jsxs)("div",{className:"modal-footer",children:[(0,Al.jsx)("button",{className:"button secondary",onClick:Xn,children:"Fermer"}),"z_report"===Gt.type_document&&(0,Al.jsx)("button",{className:"button primary",onClick:()=>{Zn(Gt.id),Xn()},children:"\u26a1 Traiter ce Rapport Z"})]})]})}),Fe&&Ne&&(0,Al.jsx)("div",{className:"modal-overlay",onClick:()=>De(!1),children:(0,Al.jsxs)("div",{className:"modal-content large",onClick:e=>e.stopPropagation(),children:[(0,Al.jsxs)("div",{className:"modal-header",children:[(0,Al.jsxs)("h3",{children:["\ud83d\udcc5 Lots & DLC - ",Ne.product_name]}),(0,Al.jsx)("button",{className:"modal-close",onClick:()=>De(!1),children:"\xd7"})]}),(0,Al.jsxs)("div",{className:"modal-body",children:[(0,Al.jsx)("div",{className:"section-card",style:{marginBottom:"20px"},children:(0,Al.jsxs)("div",{className:"kpi-grid",children:[(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udce6"}),(0,Al.jsx)("div",{className:"title",children:"Stock Total"}),(0,Al.jsx)("div",{className:"value",children:Ne.total_stock})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udcc5"}),(0,Al.jsx)("div",{className:"title",children:"Nombre de Lots"}),(0,Al.jsx)("div",{className:"value",children:Ne.batches.length})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udd34"}),(0,Al.jsx)("div",{className:"title",children:"Lots Expir\xe9s"}),(0,Al.jsx)("div",{className:"value critical",children:Ne.expired_batches})]}),(0,Al.jsxs)("div",{className:"kpi-card",children:[(0,Al.jsx)("div",{className:"icon",children:"\ud83d\udfe1"}),(0,Al.jsx)("div",{className:"title",children:"Lots Critiques"}),(0,Al.jsx)("div",{className:"value warning",children:Ne.critical_batches})]})]})}),(0,Al.jsxs)("div",{className:"section-card",children:[(0,Al.jsx)("div",{className:"section-title",children:"\ud83d\udccb D\xe9tail des Lots"}),Ne.batches.length>0?(0,Al.jsx)("div",{className:"item-list",children:Ne.batches.map(((e,t)=>{const i="expired"===e.status?"\ud83d\udd34":"critical"===e.status?"\ud83d\udfe1":"\u2705",n="expired"===e.status?"EXPIR\xc9":"critical"===e.status?"CRITIQUE":"OK",o="expired"===e.status?"critical":"critical"===e.status?"warning":"success";return(0,Al.jsxs)("div",{className:"item-row",children:[(0,Al.jsxs)("div",{className:"item-info",children:[(0,Al.jsxs)("div",{className:"item-name",children:[i," Lot ",e.batch_number||"#".concat(t+1)]}),(0,Al.jsxs)("div",{className:"item-details",children:[(0,Al.jsx)("strong",{children:"Quantit\xe9:"})," ",e.quantity," \u2022",(0,Al.jsx)("strong",{children:"Re\xe7u le:"})," ",new Date(e.received_date).toLocaleDateString("fr-FR")," \u2022",(0,Al.jsx)("strong",{children:"DLC:"})," ",e.expiry_date?new Date(e.expiry_date).toLocaleDateString("fr-FR"):"Non d\xe9finie",e.supplier_id&&(0,Al.jsxs)("span",{children:[" \u2022 ",(0,Al.jsx)("strong",{children:"Fournisseur:"})," ",e.supplier_id]})]})]}),(0,Al.jsxs)("div",{className:"item-actions",children:[(0,Al.jsx)("span",{className:"status-badge ".concat(o),children:n}),(0,Al.jsx)("button",{className:"button small",children:"\u26a1 Consommer"})]})]},t)}))}):(0,Al.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--color-text-muted)"},children:[(0,Al.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\ud83d\udcc5"}),(0,Al.jsx)("p",{children:"Aucun lot trouv\xe9 pour ce produit"})]})]})]}),(0,Al.jsxs)("div",{className:"modal-footer",children:[(0,Al.jsx)("button",{className:"button secondary",onClick:()=>De(!1),children:"Fermer"}),(0,Al.jsx)("button",{className:"button",onClick:()=>alert("Fonctionnalit\xe9 \xe0 impl\xe9menter: Ajouter nouveau lot"),children:"\u2795 Nouveau Lot"})]})]})})]}):(0,Al.jsx)(IP,{onLoginSuccess:(e,t)=>{U(e),K(t),G(!0),Q(!1)}})})};s.createRoot(document.getElementById("root")).render((0,Al.jsx)(o.StrictMode,{children:(0,Al.jsx)(GP,{})}))})();
//# sourceMappingURL=main.40bca44c.js.map