{
  "total": 304,
  "passed": 247,
  "failed": 57,
  "success_rate": 81.25,
  "results": [
    {
      "test": "POST /fournisseurs",
      "success": true,
      "message": "Fournisseur créé avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.506678"
    },
    {
      "test": "GET /fournisseurs",
      "success": true,
      "message": "8 fournisseur(s) récupéré(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.527499"
    },
    {
      "test": "GET /fournisseurs/{id}",
      "success": true,
      "message": "Fournisseur récupéré correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.545338"
    },
    {
      "test": "PUT /fournisseurs/{id}",
      "success": true,
      "message": "Fournisseur modifié avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.604816"
    },
    {
      "test": "POST /produits",
      "success": true,
      "message": "Produit créé avec liaison fournisseur",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.630762"
    },
    {
      "test": "Auto-création stock",
      "success": true,
      "message": "Stock créé automatiquement à 0",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.649631"
    },
    {
      "test": "GET /produits",
      "success": true,
      "message": "68 produit(s) récupéré(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.672017"
    },
    {
      "test": "PUT /produits/{id}",
      "success": true,
      "message": "Produit modifié avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.702473"
    },
    {
      "test": "Mise à jour nom dans stock",
      "success": true,
      "message": "Nom mis à jour dans stock",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.724550"
    },
    {
      "test": "GET /stocks",
      "success": true,
      "message": "68 stock(s) récupéré(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.743074"
    },
    {
      "test": "Structure données stocks",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.743107"
    },
    {
      "test": "PUT /stocks/{id}",
      "success": true,
      "message": "Stock mis à jour avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.759540"
    },
    {
      "test": "Mise à jour derniere_maj",
      "success": true,
      "message": "Date de dernière MAJ mise à jour",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.759579"
    },
    {
      "test": "POST /mouvements (entrée)",
      "success": true,
      "message": "Mouvement d'entrée créé",
      "details": null,
      "timestamp": "2025-12-01T15:02:49.780714"
    },
    {
      "test": "Mise à jour stock (entrée)",
      "success": true,
      "message": "Stock mis à jour: 75.5",
      "details": null,
      "timestamp": "2025-12-01T15:02:50.298274"
    },
    {
      "test": "POST /mouvements (sortie)",
      "success": true,
      "message": "Mouvement de sortie créé",
      "details": null,
      "timestamp": "2025-12-01T15:02:50.319523"
    },
    {
      "test": "Mise à jour stock (sortie)",
      "success": true,
      "message": "Stock mis à jour: 60.5",
      "details": null,
      "timestamp": "2025-12-01T15:02:50.837877"
    },
    {
      "test": "POST /mouvements (ajustement)",
      "success": true,
      "message": "Ajustement créé",
      "details": null,
      "timestamp": "2025-12-01T15:02:50.858558"
    },
    {
      "test": "Mise à jour stock (ajustement)",
      "success": true,
      "message": "Stock ajusté: 55.0",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.378473"
    },
    {
      "test": "GET /mouvements",
      "success": true,
      "message": "80 mouvement(s) dans l'historique",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.400677"
    },
    {
      "test": "Ordre chronologique mouvements",
      "success": true,
      "message": "Mouvements triés par date décroissante",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.400713"
    },
    {
      "test": "GET /export/stocks",
      "success": true,
      "message": "Fichier Excel généré avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.701972"
    },
    {
      "test": "Taille fichier Excel",
      "success": true,
      "message": "Fichier de 10251 bytes",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.702011"
    },
    {
      "test": "Structure Excel",
      "success": true,
      "message": "Excel valide avec 68 lignes",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.808665"
    },
    {
      "test": "POST /import/stocks",
      "success": true,
      "message": "Import Excel réussi",
      "details": null,
      "timestamp": "2025-12-01T15:02:51.849559"
    },
    {
      "test": "Validation import Excel",
      "success": true,
      "message": "Données importées correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.371628"
    },
    {
      "test": "GET /dashboard/stats",
      "success": true,
      "message": "Toutes les statistiques présentes",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.395282"
    },
    {
      "test": "Validation stats",
      "success": true,
      "message": "Produits: 68, Fournisseurs: 8",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.395338"
    },
    {
      "test": "GET /dashboard/analytics - Structure",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.414511"
    },
    {
      "test": "Types de données analytics",
      "success": true,
      "message": "Tous les types corrects",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.414558"
    },
    {
      "test": "Structure période",
      "success": true,
      "message": "Période: 0 rapports",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.414578"
    },
    {
      "test": "Données réelles confirmées",
      "success": true,
      "message": "is_real_data = true",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.414584"
    },
    {
      "test": "GET /rapports_z",
      "success": true,
      "message": "23 rapports Z disponibles",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.429644"
    },
    {
      "test": "Structure rapport Z",
      "success": true,
      "message": "Structure complète validée",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.429685"
    },
    {
      "test": "Coexistence endpoints",
      "success": true,
      "message": "Les deux endpoints /stats et /analytics coexistent",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.467388"
    },
    {
      "test": "Différenciation endpoints",
      "success": true,
      "message": "Endpoints retournent des structures différentes",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.467442"
    },
    {
      "test": "Validation calculs - Données existantes",
      "success": false,
      "message": "CA = 0 malgré des rapports existants",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.504143"
    },
    {
      "test": "Validation topProductions",
      "success": true,
      "message": "Array avec 0 items",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.504178"
    },
    {
      "test": "Cohérence nb_rapports",
      "success": false,
      "message": "Incohérence: 0 vs 23",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.504188"
    },
    {
      "test": "Test période 30 jours",
      "success": true,
      "message": "Aucun rapport récent - comportement normal",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.522552"
    },
    {
      "test": "POST /recettes",
      "success": true,
      "message": "Recette créée avec enrichissement noms produits",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.545973"
    },
    {
      "test": "GET /recettes",
      "success": true,
      "message": "70 recette(s) récupérée(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.564909"
    },
    {
      "test": "Structure données recettes",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.564947"
    },
    {
      "test": "GET /recettes/{id}",
      "success": true,
      "message": "Recette récupérée correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.582759"
    },
    {
      "test": "PUT /recettes/{id}",
      "success": true,
      "message": "Recette modifiée avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.645582"
    },
    {
      "test": "GET /recettes/{id}/production-capacity",
      "success": true,
      "message": "Capacité calculée: 1 portions max",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.660010"
    },
    {
      "test": "Structure ingredients_status",
      "success": true,
      "message": "Détails ingrédients complets",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.660045"
    },
    {
      "test": "GET /export/recettes",
      "success": true,
      "message": "Fichier Excel recettes généré",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.751599"
    },
    {
      "test": "Taille fichier Excel recettes",
      "success": true,
      "message": "Fichier de 11974 bytes",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.751639"
    },
    {
      "test": "Structure Excel recettes",
      "success": true,
      "message": "Excel valide avec 106 lignes",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.768362"
    },
    {
      "test": "POST /import/recettes",
      "success": true,
      "message": "Import Excel recettes réussi",
      "details": null,
      "timestamp": "2025-12-01T15:02:52.807862"
    },
    {
      "test": "Validation import recettes",
      "success": true,
      "message": "Recette importée correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.329201"
    },
    {
      "test": "DELETE /recettes/{id}",
      "success": true,
      "message": "Recette supprimée",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.347264"
    },
    {
      "test": "Validation suppression recette",
      "success": true,
      "message": "Recette bien supprimée",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.401221"
    },
    {
      "test": "GET /orders - Récupération commandes",
      "success": true,
      "message": "Total commandes: 5",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.418644"
    },
    {
      "test": "POST /orders - Création commande",
      "success": true,
      "message": "Commande créée: CMD-20251201-A99C5C, Montant: 50.0€, Status: pending",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.466801"
    },
    {
      "test": "Structure commande créée",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.466841"
    },
    {
      "test": "PUT /orders/{id}/confirm - Confirmation",
      "success": false,
      "message": "Erreur 404",
      "details": "{\"detail\":\"Not Found\"}",
      "timestamp": "2025-12-01T15:02:53.542535"
    },
    {
      "test": "DELETE /orders/{id} - Annulation",
      "success": false,
      "message": "Erreur 405",
      "details": "{\"detail\":\"Method Not Allowed\"}",
      "timestamp": "2025-12-01T15:02:53.618104"
    },
    {
      "test": "PUT /orders/{id} - Modification",
      "success": false,
      "message": "Erreur 405",
      "details": "{\"detail\":\"Method Not Allowed\"}",
      "timestamp": "2025-12-01T15:02:53.656140"
    },
    {
      "test": "Validation statuts",
      "success": true,
      "message": "Statuts valides trouvés: ['pending', 'confirmed', 'in_transit']",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.672789"
    },
    {
      "test": "Support statuts de base",
      "success": false,
      "message": "Pas assez de statuts de base: ['pending', 'confirmed']",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.672829"
    },
    {
      "test": "Test cohérence annulation",
      "success": true,
      "message": "Commande en status pending - test non applicable",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.691373"
    },
    {
      "test": "Cohérence - Structure items",
      "success": true,
      "message": "Items correctement structurés: 1 item(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.713497"
    },
    {
      "test": "Cohérence - Calculs prix",
      "success": true,
      "message": "Calcul correct: 10.0 × 5.0 = 50.0",
      "details": null,
      "timestamp": "2025-12-01T15:02:53.713542"
    },
    {
      "test": "extract_text_from_pdf (pdfplumber/PyPDF2)",
      "success": true,
      "message": "PDF traité mais contenu différent (normal pour PDF simulé)",
      "details": null,
      "timestamp": "2025-12-01T15:02:54.083591"
    },
    {
      "test": "PDF file_type detection",
      "success": true,
      "message": "Type PDF correctement détecté",
      "details": null,
      "timestamp": "2025-12-01T15:02:54.083631"
    },
    {
      "test": "detect_file_type (rapport.pdf)",
      "success": false,
      "message": "Erreur upload: 400",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.221664"
    },
    {
      "test": "detect_file_type (tous cas)",
      "success": false,
      "message": "Seulement 6/7 cas réussis",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.221706"
    },
    {
      "test": "POST /ocr/upload-document (PDF Z-report)",
      "success": true,
      "message": "PDF Z-report traité, ID: 92432954...",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.421474"
    },
    {
      "test": "DocumentOCR file_type field (PDF)",
      "success": true,
      "message": "Champ file_type=pdf correctement défini",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.421505"
    },
    {
      "test": "PDF text extraction",
      "success": true,
      "message": "Texte extrait: 85 caractères",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.421513"
    },
    {
      "test": "POST /ocr/upload-document (PDF Facture)",
      "success": true,
      "message": "PDF Facture traitée, ID: df18ce52...",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.627459"
    },
    {
      "test": "PDF facture parsing",
      "success": true,
      "message": "Données facture parsées depuis PDF",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.627495"
    },
    {
      "test": "POST /ocr/parse-z-report-enhanced (PDF)",
      "success": false,
      "message": "Erreur 422",
      "details": "{\"detail\":[{\"type\":\"missing\",\"loc\":[\"query\",\"document_id\"],\"msg\":\"Field required\",\"input\":null,\"url\":\"https://errors.pydantic.dev/2.11/v/missing\"}]}",
      "timestamp": "2025-12-01T15:02:56.643466"
    },
    {
      "test": "POST /ocr/calculate-stock-deductions",
      "success": true,
      "message": "Déductions calculées: 3 propositions",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.667510"
    },
    {
      "test": "Stock deduction structure",
      "success": true,
      "message": "Structure StockDeductionProposal correcte",
      "details": null,
      "timestamp": "2025-12-01T15:02:56.667542"
    },
    {
      "test": "Backward compatibility - Image OCR",
      "success": true,
      "message": "Images OCR fonctionnent toujours",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.048104"
    },
    {
      "test": "Image file_type detection",
      "success": true,
      "message": "Type image correctement détecté",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.048140"
    },
    {
      "test": "Image OCR parsing compatibility",
      "success": true,
      "message": "Parsing image OCR préservé",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.048147"
    },
    {
      "test": "PDF error handling - Corrupted",
      "success": true,
      "message": "Erreur PDF corrompu gérée correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.249002"
    },
    {
      "test": "PDF error handling - Image-based",
      "success": true,
      "message": "PDF traité avec contenu minimal",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.447444"
    },
    {
      "test": "POST /ocr/upload-document (z_report)",
      "success": true,
      "message": "Document Z-report traité, ID: ca215ea3...",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.803342"
    },
    {
      "test": "Parsing Z-report",
      "success": false,
      "message": "Structure de données parsées incorrecte",
      "details": null,
      "timestamp": "2025-12-01T15:02:57.803377"
    },
    {
      "test": "POST /ocr/upload-document (facture)",
      "success": true,
      "message": "Facture traitée, ID: b8071bcb...",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.169873"
    },
    {
      "test": "Parsing facture",
      "success": true,
      "message": "Facture parsée: Maison Artigiana avec 0 produits",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.169906"
    },
    {
      "test": "GET /ocr/documents",
      "success": true,
      "message": "14 document(s) récupéré(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.190033"
    },
    {
      "test": "Structure documents OCR",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.190073"
    },
    {
      "test": "GET /ocr/document/{id}",
      "success": true,
      "message": "Document récupéré correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.216554"
    },
    {
      "test": "Données complètes document",
      "success": true,
      "message": "Texte et données parsées présents",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.216608"
    },
    {
      "test": "POST /ocr/process-z-report",
      "success": false,
      "message": "Structure de réponse incorrecte",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.273980"
    },
    {
      "test": "DELETE /ocr/document/{id}",
      "success": true,
      "message": "Document OCR supprimé",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.291731"
    },
    {
      "test": "Validation suppression document OCR",
      "success": true,
      "message": "Document bien supprimé",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.315606"
    },
    {
      "test": "Création document test 1",
      "success": true,
      "message": "Document créé: 75d35973-abd5-4808-a110-833230bc5ca4",
      "details": null,
      "timestamp": "2025-12-01T15:02:58.659696"
    },
    {
      "test": "Création document test 2",
      "success": true,
      "message": "Document créé: fa450864-54c0-4d73-957c-cf4e057c5da5",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.016389"
    },
    {
      "test": "Création document test 3",
      "success": true,
      "message": "Document créé: f9472ab5-79e1-419a-adb4-9a90f85d1ff4",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.369791"
    },
    {
      "test": "GET /ocr/documents (avant suppression)",
      "success": true,
      "message": "16 document(s) trouvé(s)",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.394043"
    },
    {
      "test": "Vérification documents créés",
      "success": true,
      "message": "3 documents de test confirmés",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.394197"
    },
    {
      "test": "DELETE /ocr/documents/all",
      "success": true,
      "message": "Réponse correcte: 16 documents supprimés",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.411219"
    },
    {
      "test": "Cohérence deleted_count",
      "success": true,
      "message": "Nombre supprimé cohérent: 16",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.411252"
    },
    {
      "test": "Format message réponse",
      "success": true,
      "message": "Message approprié",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.411260"
    },
    {
      "test": "Vérification suppression complète",
      "success": true,
      "message": "Tous les documents ont été supprimés",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.426254"
    },
    {
      "test": "DELETE sur collection vide",
      "success": true,
      "message": "Suppression sur collection vide gérée correctement",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.443608"
    },
    {
      "test": "Création document final",
      "success": true,
      "message": "Document créé après suppression totale",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.829198"
    },
    {
      "test": "Vérification document final",
      "success": true,
      "message": "Document final correctement listé",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.865880"
    },
    {
      "test": "OCR type document invalide",
      "success": true,
      "message": "Erreur 400 pour type invalide",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.883173"
    },
    {
      "test": "OCR document inexistant",
      "success": true,
      "message": "Erreur 404 pour document inexistant",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.899529"
    },
    {
      "test": "OCR traitement document inexistant",
      "success": false,
      "message": "Code erreur inattendu: 500",
      "details": null,
      "timestamp": "2025-12-01T15:02:59.917620"
    },
    {
      "test": "Setup Enhanced OCR Document",
      "success": true,
      "message": "Document créé pour tests Enhanced: 1b619db9...",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.280790"
    },
    {
      "test": "POST /ocr/parse-z-report-enhanced - Structure",
      "success": true,
      "message": "Tous les champs StructuredZReportData présents",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.302024"
    },
    {
      "test": "Catégorisation automatique",
      "success": true,
      "message": "4 catégories détectées: ['Bar', 'Entrées', 'Plats', 'Desserts']",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.302072"
    },
    {
      "test": "Items catégorisés",
      "success": true,
      "message": "11 items répartis dans les catégories",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.302084"
    },
    {
      "test": "Structure items Bar",
      "success": true,
      "message": "Structure StructuredZReportItem correcte",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.302093"
    },
    {
      "test": "Extraction service",
      "success": true,
      "message": "Service détecté: Soir",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.302098"
    },
    {
      "test": "Extraction total CA",
      "success": false,
      "message": "Total CA non détecté",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.302103"
    },
    {
      "test": "POST /ocr/calculate-stock-deductions - Structure",
      "success": true,
      "message": "Structure ZReportValidationResult correcte",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.325024"
    },
    {
      "test": "Calcul déductions stock",
      "success": true,
      "message": "3 propositions de déduction calculées",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.325061"
    },
    {
      "test": "Structure StockDeductionProposal",
      "success": true,
      "message": "Structure déduction correcte",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.325071"
    },
    {
      "test": "Calcul déductions ingrédients",
      "success": true,
      "message": "Calculs par ingrédient corrects",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.325079"
    },
    {
      "test": "Gestion avertissements",
      "success": true,
      "message": "3 avertissement(s) générés",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.325085"
    },
    {
      "test": "GET /ocr/z-report-preview - Structure",
      "success": true,
      "message": "Structure prévisualisation correcte",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.351613"
    },
    {
      "test": "Mode preview",
      "success": true,
      "message": "Mode preview_only activé",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.351650"
    },
    {
      "test": "Données preview complètes",
      "success": true,
      "message": "Données structurées et validation présentes",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.351658"
    },
    {
      "test": "POST /ocr/validate-z-report (preview)",
      "success": true,
      "message": "Structure validation correcte",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.375709"
    },
    {
      "test": "Mode validation preview",
      "success": true,
      "message": "Déductions non appliquées en mode preview",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.375747"
    },
    {
      "test": "Pattern Recognition: (x2) Linguine aux pa...",
      "success": true,
      "message": "2 item(s) détecté(s)",
      "details": null,
      "timestamp": "2025-12-01T15:03:00.757578"
    },
    {
      "test": "Pattern Recognition: 3x Supions persillad...",
      "success": true,
      "message": "2 item(s) détecté(s)",
      "details": null,
      "timestamp": "2025-12-01T15:03:01.128594"
    },
    {
      "test": "Pattern Recognition: Rigatoni truffe: 1...",
      "success": true,
      "message": "2 item(s) détecté(s)",
      "details": null,
      "timestamp": "2025-12-01T15:03:01.503789"
    },
    {
      "test": "Pattern Recognition: Bœuf Wellington €56....",
      "success": false,
      "message": "Aucun item détecté",
      "details": null,
      "timestamp": "2025-12-01T15:03:01.871173"
    },
    {
      "test": "Fuzzy Matching avec recettes",
      "success": true,
      "message": "Recette 'Supions en persillade de Mamie' matchée avec déductions calculées",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.301737"
    },
    {
      "test": "Calcul ingrédients recette réelle",
      "success": true,
      "message": "1 ingrédient(s) traités",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.301774"
    },
    {
      "test": "Prérequis intégration OCR-Stocks",
      "success": true,
      "message": "70 recettes, 68 stocks disponibles",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.339081"
    },
    {
      "test": "Sélection recette test",
      "success": true,
      "message": "Recette sélectionnée: Supions en persillade de Mamie",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.339119"
    },
    {
      "test": "Upload document intégration",
      "success": true,
      "message": "Document créé: 33907fd6...",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.708615"
    },
    {
      "test": "Application déductions stocks",
      "success": false,
      "message": "Déductions non appliquées",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.764536"
    },
    {
      "test": "Analyse échec déductions",
      "success": true,
      "message": "1 warning(s), 0 erreur(s) détectées",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.764581"
    },
    {
      "test": "GET /api/ocr/documents",
      "success": true,
      "message": "8 documents trouvés",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.783287"
    },
    {
      "test": "POST /api/ocr/process-z-report/{document_id} - Success",
      "success": true,
      "message": "Traitement réussi",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.831458"
    },
    {
      "test": "Productions Matched",
      "success": true,
      "message": "2 recettes matchées",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.831492"
    },
    {
      "test": "Stock Deductions",
      "success": true,
      "message": "2 déductions appliquées",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.831509"
    },
    {
      "test": "Rapport Z Created",
      "success": true,
      "message": "Rapport Z créé: 135e3edd-570f-432b-a1f1-ae2fd74c4e41",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.831519"
    },
    {
      "test": "Stocks Updated",
      "success": false,
      "message": "Aucun stock modifié détecté",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.846714"
    },
    {
      "test": "Mouvements Sortie Created",
      "success": false,
      "message": "Aucun mouvement de sortie créé",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.862713"
    },
    {
      "test": "Rapport Z Validation",
      "success": false,
      "message": "Données rapport Z incomplètes",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.880084"
    },
    {
      "test": "Test Facture Processing",
      "success": false,
      "message": "Aucun document facture disponible",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.880128"
    },
    {
      "test": "Test Mercuriale Processing",
      "success": true,
      "message": "Aucun document mercuriale (normal)",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.880136"
    },
    {
      "test": "Error Test - Invalid ID (404)",
      "success": false,
      "message": "Code incorrect: 500",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.898691"
    },
    {
      "test": "Stock Integrity - No Negative",
      "success": true,
      "message": "Aucun stock négatif détecté",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.930302"
    },
    {
      "test": "Document Status - Integre",
      "success": true,
      "message": "1 documents intégrés",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.950752"
    },
    {
      "test": "Collection Mouvements - Accessible",
      "success": true,
      "message": "Collection mouvements accessible",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.968575"
    },
    {
      "test": "Collection Consistency",
      "success": true,
      "message": "Cohérence des collections validée",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.968606"
    },
    {
      "test": "POST /rapports_z",
      "success": true,
      "message": "Rapport Z créé avec ID: 057541a8...",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.986251"
    },
    {
      "test": "UUID génération automatique",
      "success": true,
      "message": "ID UUID généré automatiquement",
      "details": null,
      "timestamp": "2025-12-01T15:03:02.986294"
    },
    {
      "test": "GET /rapports_z",
      "success": true,
      "message": "26 rapport(s) Z récupéré(s)",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.008215"
    },
    {
      "test": "Tri par date décroissante",
      "success": true,
      "message": "Rapports triés correctement",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.008253"
    },
    {
      "test": "Structure données rapports Z",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.008266"
    },
    {
      "test": "created_at automatique",
      "success": true,
      "message": "Timestamp created_at ajouté",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.008272"
    },
    {
      "test": "GET /rapports_z/{id}",
      "success": true,
      "message": "Rapport spécifique récupéré correctement",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.027750"
    },
    {
      "test": "Structure produits rapport Z",
      "success": true,
      "message": "Structure produits correcte",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.027784"
    },
    {
      "test": "GET /rapports_z/{id} inexistant",
      "success": true,
      "message": "Erreur 404 pour ID inexistant",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.047099"
    },
    {
      "test": "DELETE /rapports_z/{id}",
      "success": true,
      "message": "Rapport Z supprimé avec succès",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.064365"
    },
    {
      "test": "Validation suppression rapport Z",
      "success": true,
      "message": "Rapport bien supprimé",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.079200"
    },
    {
      "test": "DELETE /rapports_z/{id} inexistant",
      "success": true,
      "message": "Erreur 404 pour suppression ID inexistant",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.096601"
    },
    {
      "test": "POST /rapports_z (données réalistes)",
      "success": true,
      "message": "Deuxième rapport Z créé avec données La Table d'Augustine",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.111747"
    },
    {
      "test": "Liste rapports Z mise à jour",
      "success": true,
      "message": "Liste contient 26 rapport(s)",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.131267"
    },
    {
      "test": "GET /analytics/profitability",
      "success": false,
      "message": "Erreur 500",
      "details": "Internal Server Error",
      "timestamp": "2025-12-01T15:03:03.342976"
    },
    {
      "test": "GET /analytics/sales-performance",
      "success": true,
      "message": "Analyse ventes: 34412.00€ total, 26 commandes",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.359185"
    },
    {
      "test": "Calcul average order value",
      "success": true,
      "message": "Panier moyen: 1323.54€",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.359226"
    },
    {
      "test": "Structure top recipes",
      "success": true,
      "message": "Top recette: Rigatoni à la truffe de Forcalquier (2976.00€)",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.359236"
    },
    {
      "test": "Sales by category",
      "success": true,
      "message": "Toutes les catégories présentes",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.359245"
    },
    {
      "test": "GET /analytics/alerts",
      "success": true,
      "message": "Centre d'alertes: 65 alertes totales",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.432411"
    },
    {
      "test": "Calcul total alerts",
      "success": true,
      "message": "Total cohérent: 65",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.432456"
    },
    {
      "test": "Expiring products",
      "success": true,
      "message": "Aucun produit expirant (bon signe)",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.432465"
    },
    {
      "test": "Structure low stock",
      "success": true,
      "message": "Stock faible: Supions (0/5.0)",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.432478"
    },
    {
      "test": "Price anomalies",
      "success": true,
      "message": "Aucune anomalie de prix",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.432484"
    },
    {
      "test": "GET /analytics/cost-analysis",
      "success": false,
      "message": "Erreur 500",
      "details": "Internal Server Error",
      "timestamp": "2025-12-01T15:03:03.497818"
    },
    {
      "test": "Données La Table d'Augustine présentes",
      "success": false,
      "message": "Seulement 4 produits authentiques trouvés",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.519429"
    },
    {
      "test": "Prérequis Advanced Stock Management",
      "success": true,
      "message": "68 produits, 70 recettes disponibles",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.552937"
    },
    {
      "test": "Sélection données test",
      "success": true,
      "message": "Produit: Supions, Recette: Supions en persillade de Mamie",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.552978"
    },
    {
      "test": "POST /stock/advanced-adjustment (ingredient) - Structure",
      "success": true,
      "message": "Ajustement créé: Supions +10.5",
      "details": null,
      "timestamp": "2025-12-01T15:03:03.633256"
    },
    {
      "test": "Mise à jour stock ingredient",
      "success": true,
      "message": "Stock mis à jour: 0.0 → 10.5",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.150512"
    },
    {
      "test": "Création mouvement stock automatique",
      "success": true,
      "message": "Mouvement créé: entree 10.5",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.172561"
    },
    {
      "test": "POST /stock/advanced-adjustment (prepared_dish) - Structure",
      "success": true,
      "message": "Plat préparé: Supions en persillade de Mamie x2.0",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.228124"
    },
    {
      "test": "Calcul déductions ingrédients",
      "success": true,
      "message": "1 ingrédient(s) déduits automatiquement",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.228162"
    },
    {
      "test": "Mise à jour stocks ingrédients",
      "success": true,
      "message": "Tous les 1 stocks d'ingrédients mis à jour correctement",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.744940"
    },
    {
      "test": "GET /stock/adjustments-history",
      "success": true,
      "message": "34 ajustement(s) dans l'historique",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.760471"
    },
    {
      "test": "Tri historique ajustements",
      "success": true,
      "message": "Ajustements triés par date décroissante",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.760503"
    },
    {
      "test": "Structure historique ajustements",
      "success": true,
      "message": "Structure AdvancedStockAdjustment complète",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.760515"
    },
    {
      "test": "Types ajustements dans historique",
      "success": true,
      "message": "17 ingredient, 17 prepared_dish",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.760529"
    },
    {
      "test": "GET /stock/batch-info - Structure",
      "success": true,
      "message": "Info lot pour Supions: 10.3 total",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.777529"
    },
    {
      "test": "Cohérence product_id",
      "success": true,
      "message": "Product ID correct",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.777561"
    },
    {
      "test": "Structure batches",
      "success": true,
      "message": "0 lot(s) trouvé(s)",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.777581"
    },
    {
      "test": "Cohérence compteurs batches",
      "success": true,
      "message": "0 critiques, 0 expirés",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.777589"
    },
    {
      "test": "GET /stock/batch-summary",
      "success": true,
      "message": "0 produit(s) avec gestion de lots",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.840237"
    },
    {
      "test": "Contenu batch summary",
      "success": true,
      "message": "Aucun produit avec gestion de lots (normal si pas de batches)",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.840268"
    },
    {
      "test": "Création batch test",
      "success": true,
      "message": "Batch créé: 4ea60dbf... (50.0 unités)",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.880257"
    },
    {
      "test": "PUT /stock/consume-batch - Calcul",
      "success": true,
      "message": "Quantité restante correcte: 30.0",
      "details": null,
      "timestamp": "2025-12-01T15:03:04.962471"
    },
    {
      "test": "Mise à jour stock total après consommation",
      "success": true,
      "message": "Stock total mis à jour: 60.3 → 40.3",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.489011"
    },
    {
      "test": "Création mouvement consommation",
      "success": true,
      "message": "Mouvement créé: sortie 20.0",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.506663"
    },
    {
      "test": "Consommation complète batch",
      "success": true,
      "message": "Batch entièrement consommé",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.526724"
    },
    {
      "test": "Marquage batch consommé",
      "success": true,
      "message": "Batch retiré de la liste active",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.547128"
    },
    {
      "test": "Ajustement produit La Table d'Augustine",
      "success": true,
      "message": "Ajustement réussi pour Supions",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.566476"
    },
    {
      "test": "Déduction ingrédients recette La Table d'Augustine",
      "success": true,
      "message": "Recette Supions en persillade de Mamie: 1 ingrédients déduits",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.584777"
    },
    {
      "test": "Calcul portions recette authentique",
      "success": true,
      "message": "Calcul basé sur 4 portion(s) de recette",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.584818"
    },
    {
      "test": "POST /admin/users (role: super_admin)",
      "success": true,
      "message": "Utilisateur super_admin créé avec sécurité",
      "details": null,
      "timestamp": "2025-12-01T15:03:05.899588"
    },
    {
      "test": "POST /admin/users (role: gerant)",
      "success": true,
      "message": "Utilisateur gerant créé avec sécurité",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.148481"
    },
    {
      "test": "POST /admin/users (role: chef_cuisine)",
      "success": true,
      "message": "Utilisateur chef_cuisine créé avec sécurité",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.399144"
    },
    {
      "test": "POST /admin/users (role: barman)",
      "success": true,
      "message": "Utilisateur barman créé avec sécurité",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.646363"
    },
    {
      "test": "POST /admin/users (role: caissier)",
      "success": true,
      "message": "Utilisateur caissier créé avec sécurité",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.895183"
    },
    {
      "test": "Création utilisateurs tous rôles",
      "success": true,
      "message": "5 utilisateurs créés avec tous les rôles RBAC",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.895219"
    },
    {
      "test": "GET /admin/users",
      "success": true,
      "message": "12 utilisateurs récupérés",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.912059"
    },
    {
      "test": "Structure données utilisateurs",
      "success": true,
      "message": "Tous champs requis présents, mots de passe sécurisés",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.912100"
    },
    {
      "test": "Validation rôles utilisateurs",
      "success": true,
      "message": "Tous les rôles RBAC présents: ['barman', 'caissier', 'chef_cuisine', 'employe_cuisine', 'gerant', 'patron', 'super_admin']",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.912121"
    },
    {
      "test": "DELETE /admin/users/{user_id}",
      "success": true,
      "message": "Utilisateur user_super_admin_test supprimé",
      "details": null,
      "timestamp": "2025-12-01T15:03:06.925636"
    },
    {
      "test": "Validation suppression utilisateur",
      "success": true,
      "message": "Utilisateur bien supprimé de la base",
      "details": null,
      "timestamp": "2025-12-01T15:03:07.441293"
    },
    {
      "test": "DELETE utilisateur inexistant",
      "success": true,
      "message": "Erreur 404 correcte pour utilisateur inexistant",
      "details": null,
      "timestamp": "2025-12-01T15:03:07.496606"
    },
    {
      "test": "Sécurité mot de passe",
      "success": true,
      "message": "Mot de passe non exposé dans la réponse",
      "details": null,
      "timestamp": "2025-12-01T15:03:07.747922"
    },
    {
      "test": "Validation hachage bcrypt",
      "success": true,
      "message": "Utilisateur créé avec succès (hachage bcrypt fonctionnel)",
      "details": null,
      "timestamp": "2025-12-01T15:03:07.747965"
    },
    {
      "test": "Création utilisateur de base",
      "success": true,
      "message": "Utilisateur de référence créé",
      "details": null,
      "timestamp": "2025-12-01T15:03:08.019508"
    },
    {
      "test": "Validation unicité username",
      "success": true,
      "message": "Username dupliqué correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:08.034067"
    },
    {
      "test": "Validation unicité email",
      "success": true,
      "message": "Email dupliqué correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:08.047475"
    },
    {
      "test": "Validation rôle super_admin",
      "success": true,
      "message": "Rôle super_admin accepté et assigné",
      "details": null,
      "timestamp": "2025-12-01T15:03:08.355628"
    },
    {
      "test": "Validation rôle gerant",
      "success": true,
      "message": "Rôle gerant accepté et assigné",
      "details": null,
      "timestamp": "2025-12-01T15:03:08.623948"
    },
    {
      "test": "Validation rôle chef_cuisine",
      "success": true,
      "message": "Rôle chef_cuisine accepté et assigné",
      "details": null,
      "timestamp": "2025-12-01T15:03:08.889742"
    },
    {
      "test": "Validation rôle barman",
      "success": true,
      "message": "Rôle barman accepté et assigné",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.153492"
    },
    {
      "test": "Validation rôle caissier",
      "success": true,
      "message": "Rôle caissier accepté et assigné",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.419741"
    },
    {
      "test": "Rejet rôle invalide 'admin'",
      "success": true,
      "message": "Rôle invalide correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.491303"
    },
    {
      "test": "Rejet rôle invalide 'user'",
      "success": true,
      "message": "Rôle invalide correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.505684"
    },
    {
      "test": "Rejet rôle invalide 'manager'",
      "success": true,
      "message": "Rôle invalide correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.520421"
    },
    {
      "test": "Rejet rôle invalide 'invalid_role'",
      "success": true,
      "message": "Rôle invalide correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.539977"
    },
    {
      "test": "Rejet rôle invalide 'super_user'",
      "success": true,
      "message": "Rôle invalide correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.559495"
    },
    {
      "test": "Rejet rôle invalide ''",
      "success": true,
      "message": "Rôle invalide correctement rejeté",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.573223"
    },
    {
      "test": "Structure modèle User",
      "success": true,
      "message": "Tous les champs requis présents avec types corrects",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.820866"
    },
    {
      "test": "Valeur par défaut is_active",
      "success": true,
      "message": "is_active défini à True par défaut",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.820908"
    },
    {
      "test": "Valeur par défaut last_login",
      "success": true,
      "message": "last_login défini à null par défaut",
      "details": null,
      "timestamp": "2025-12-01T15:03:09.820916"
    },
    {
      "test": "Sécurité UserResponse (POST)",
      "success": true,
      "message": "Aucune donnée sensible exposée lors de la création",
      "details": null,
      "timestamp": "2025-12-01T15:03:10.086859"
    },
    {
      "test": "Sécurité UserResponse (GET)",
      "success": true,
      "message": "Aucune donnée sensible exposée dans la liste",
      "details": null,
      "timestamp": "2025-12-01T15:03:10.132801"
    },
    {
      "test": "Utilisateur admin par défaut",
      "success": false,
      "message": "Utilisateur admin par défaut non trouvé",
      "details": null,
      "timestamp": "2025-12-01T15:03:10.166659"
    },
    {
      "test": "Mise à jour compteur utilisateurs",
      "success": true,
      "message": "Nombre d'utilisateurs passé de 11 à 12",
      "details": null,
      "timestamp": "2025-12-01T15:03:10.952523"
    },
    {
      "test": "Persistance données utilisateur",
      "success": true,
      "message": "Toutes les données utilisateur correctement persistées",
      "details": null,
      "timestamp": "2025-12-01T15:03:10.952601"
    },
    {
      "test": "Utilisateur existe avant suppression",
      "success": true,
      "message": "Utilisateur trouvé avant suppression",
      "details": null,
      "timestamp": "2025-12-01T15:03:11.277461"
    },
    {
      "test": "Suppression complète utilisateur",
      "success": true,
      "message": "Utilisateur complètement supprimé de la base",
      "details": null,
      "timestamp": "2025-12-01T15:03:11.816706"
    },
    {
      "test": "Mise à jour compteur après suppression",
      "success": true,
      "message": "Nombre d'utilisateurs réduit de 12 à 11",
      "details": null,
      "timestamp": "2025-12-01T15:03:11.816744"
    },
    {
      "test": "Timestamp created_at",
      "success": true,
      "message": "Timestamp correct: 2025-12-01T15:03:12.062964",
      "details": null,
      "timestamp": "2025-12-01T15:03:12.066502"
    },
    {
      "test": "Timestamp last_login initial",
      "success": true,
      "message": "last_login correctement null pour nouvel utilisateur",
      "details": null,
      "timestamp": "2025-12-01T15:03:12.066538"
    },
    {
      "test": "Format ID utilisateur",
      "success": true,
      "message": "ID au format UUID",
      "details": null,
      "timestamp": "2025-12-01T15:03:12.066545"
    },
    {
      "test": "Intégration - APIs existantes",
      "success": true,
      "message": "APIs existantes fonctionnent avec User Management",
      "details": null,
      "timestamp": "2025-12-01T15:03:12.103037"
    },
    {
      "test": "Intégration - isolation collections",
      "success": true,
      "message": "Création utilisateur n'affecte pas les autres collections",
      "details": null,
      "timestamp": "2025-12-01T15:03:12.386499"
    },
    {
      "test": "Stockage MongoDB correct",
      "success": true,
      "message": "Utilisateur correctement stocké et récupérable",
      "details": null,
      "timestamp": "2025-12-01T15:03:12.664342"
    },
    {
      "test": "Persistance MongoDB",
      "success": true,
      "message": "Utilisateur persiste correctement dans MongoDB",
      "details": null,
      "timestamp": "2025-12-01T15:03:13.680885"
    },
    {
      "test": "Isolation opérations utilisateur",
      "success": true,
      "message": "Opérations utilisateur n'affectent pas les autres collections",
      "details": null,
      "timestamp": "2025-12-01T15:03:14.690119"
    },
    {
      "test": "Validation données valides",
      "success": true,
      "message": "Données valides acceptées",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.013807"
    },
    {
      "test": "Validation - Email invalide",
      "success": false,
      "message": "Données invalides acceptées: 200",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.304302"
    },
    {
      "test": "Validation - Username vide",
      "success": false,
      "message": "Données invalides acceptées: 200",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.586015"
    },
    {
      "test": "Validation - Mot de passe trop court",
      "success": false,
      "message": "Données invalides acceptées: 200",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.877406"
    },
    {
      "test": "Validation - Rôle manquant",
      "success": true,
      "message": "Données invalides correctement rejetées (422)",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.894668"
    },
    {
      "test": "POST /demo/init-missions-users",
      "success": false,
      "message": "Message inattendu: ✅ Système missions et utilisateurs initialisé !",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.954167"
    },
    {
      "test": "Login chef_test",
      "success": true,
      "message": "Rôle: chef_cuisine",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.970712"
    },
    {
      "test": "Login caisse_test",
      "success": true,
      "message": "Rôle: caissier",
      "details": null,
      "timestamp": "2025-12-01T15:03:15.989430"
    },
    {
      "test": "Login barman_test",
      "success": true,
      "message": "Rôle: barman",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.053452"
    },
    {
      "test": "Login cuisine_test",
      "success": true,
      "message": "Rôle: employe_cuisine",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.073001"
    },
    {
      "test": "Login identifiants incorrects",
      "success": false,
      "message": "Code retour inattendu: 200",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.087053"
    },
    {
      "test": "Mission Management",
      "success": false,
      "message": "Session patron non disponible",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.087249"
    },
    {
      "test": "Notification System",
      "success": false,
      "message": "Pas d'utilisateurs test disponibles",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.087262"
    },
    {
      "test": "Role-based Permissions",
      "success": false,
      "message": "Pas d'utilisateurs test disponibles",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.087270"
    },
    {
      "test": "Mission Workflow",
      "success": false,
      "message": "Pas d'utilisateurs test disponibles",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.087278"
    },
    {
      "test": "OCR Text Extraction - ALL Items",
      "success": false,
      "message": "Extraction insuffisante: seulement 0/13 items détectés",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.285115"
    },
    {
      "test": "OCR Categorization - ALL Items",
      "success": false,
      "message": "Catégorisation insuffisante: seulement 0 items",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.306540"
    },
    {
      "test": "New Items Categorization",
      "success": false,
      "message": "Catégorisation des nouveaux items insuffisante: 0/4",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.306592"
    },
    {
      "test": "Stock Deductions - Existing Items",
      "success": false,
      "message": "Aucune déduction calculée pour les items existants",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.321402"
    },
    {
      "test": "Warnings - New Items",
      "success": false,
      "message": "Warnings insuffisants pour nouveaux items: 0",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.321439"
    },
    {
      "test": "Unmatched Items Warnings",
      "success": false,
      "message": "Messages d'alerte insuffisants pour items non trouvés",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.321447"
    },
    {
      "test": "Data Storage - All Items",
      "success": false,
      "message": "Stockage incomplet: 0 items seulement",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.336275"
    },
    {
      "test": "Grand Total Storage",
      "success": false,
      "message": "Grand total incorrect: None€",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.336308"
    },
    {
      "test": "Interface Visibility - All Items",
      "success": false,
      "message": "Visibilité insuffisante: 0 items",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.361754"
    },
    {
      "test": "Stock Impact - Existing Only",
      "success": false,
      "message": "Impact stock incorrect: 0 déductions",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.361790"
    },
    {
      "test": "PDF Document Upload - file_type",
      "success": true,
      "message": "Document sauvé avec file_type='pdf'",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.561864"
    },
    {
      "test": "PDF Text Extraction",
      "success": true,
      "message": "Texte extrait: 85 caractères",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.561905"
    },
    {
      "test": "StructuredZReportData Structure",
      "success": true,
      "message": "Tous les champs requis présents",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581590"
    },
    {
      "test": "4 Categories Organization",
      "success": true,
      "message": "Toutes les catégories présentes",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581631"
    },
    {
      "test": "Category Bar Items",
      "success": false,
      "message": "Aucun item dans Bar",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581639"
    },
    {
      "test": "Category Entrées Items",
      "success": false,
      "message": "Aucun item dans Entrées",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581644"
    },
    {
      "test": "Category Plats Items",
      "success": false,
      "message": "Aucun item dans Plats",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581649"
    },
    {
      "test": "Category Desserts Items",
      "success": false,
      "message": "Aucun item dans Desserts",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581653"
    },
    {
      "test": "Grand Total Calculation",
      "success": false,
      "message": "CA total non calculé ou incorrect: None",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581659"
    },
    {
      "test": "Report Date Extraction",
      "success": false,
      "message": "Date non extraite",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581664"
    },
    {
      "test": "Service Extraction",
      "success": false,
      "message": "Service non extrait",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581668"
    },
    {
      "test": "categorize_menu_item Function",
      "success": true,
      "message": "Catégorisation correcte des items",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.581695"
    },
    {
      "test": "OCR Document Storage - donnees_parsees",
      "success": true,
      "message": "Données structurées stockées dans donnees_parsees",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.599640"
    },
    {
      "test": "Structured Data in Storage",
      "success": true,
      "message": "items_by_category présent dans le stockage",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.599677"
    },
    {
      "test": "Stock Deductions Calculation",
      "success": true,
      "message": "0 propositions de déduction calculées",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.675948"
    },
    {
      "test": "FIXED: File Type Assignment",
      "success": true,
      "message": "file_type correctement défini à 'pdf'",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.886275"
    },
    {
      "test": "PDF Text Extraction",
      "success": false,
      "message": "Texte insuffisant extrait",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.886370"
    },
    {
      "test": "FIXED: CA Total Calculation",
      "success": false,
      "message": "grand_total_sales incorrect: None au lieu de 456.50€",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.901630"
    },
    {
      "test": "FIXED: Supions Categorization",
      "success": false,
      "message": "Supions en persillade mal catégorisé",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.901662"
    },
    {
      "test": "FIXED: Fleurs de courgettes Categorization",
      "success": false,
      "message": "Fleurs de courgettes mal catégorisées",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.901669"
    },
    {
      "test": "Categories Structure",
      "success": true,
      "message": "Toutes les 4 catégories présentes",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.901687"
    },
    {
      "test": "Date Extraction",
      "success": false,
      "message": "Date incorrecte: None",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.901694"
    },
    {
      "test": "Service Extraction",
      "success": false,
      "message": "Service incorrect: None",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.901699"
    },
    {
      "test": "Stock Deduction Calculation",
      "success": false,
      "message": "Aucune proposition de déduction",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.958681"
    },
    {
      "test": "DELETE /produits/{id}",
      "success": true,
      "message": "Produit supprimé",
      "details": null,
      "timestamp": "2025-12-01T15:03:16.994102"
    },
    {
      "test": "Suppression stock cascade",
      "success": true,
      "message": "Stock supprimé automatiquement",
      "details": null,
      "timestamp": "2025-12-01T15:03:52.944932"
    },
    {
      "test": "Suppression mouvements cascade",
      "success": true,
      "message": "Mouvements supprimés automatiquement",
      "details": null,
      "timestamp": "2025-12-01T15:04:00.676520"
    },
    {
      "test": "Nettoyage fournisseur",
      "success": true,
      "message": "Fournisseur de test supprimé",
      "details": null,
      "timestamp": "2025-12-01T15:04:00.725787"
    }
  ]
}